{"timestamp": "2025-11-14T18:43:27.985467Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/3 for retryable_function after 0.1s delay", "error": "Temporary failure", "attempt": 1}
{"timestamp": "2025-11-14T18:43:28.088293Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/3 for always_fails after 0.1s delay", "error": "Always fails", "attempt": 1}
{"timestamp": "2025-11-14T18:43:28.189682Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 2/3 for always_fails after 0.2s delay", "error": "Always fails", "attempt": 2}
{"timestamp": "2025-11-14T18:43:28.391386Z", "level": "ERROR", "module": "retry", "message": "All 3 retry attempts failed for always_fails", "error": "Always fails"}
{"timestamp": "2025-11-14T18:43:28.395405Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/3 for track_timing after 0.1s delay", "error": "Retry", "attempt": 1}
{"timestamp": "2025-11-14T18:43:28.497661Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 2/3 for track_timing after 0.2s delay", "error": "Retry", "attempt": 2}
{"timestamp": "2025-11-14T18:43:28.701745Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in non_retryable_error: Non-retryable", "error": "Non-retryable"}
{"timestamp": "2025-11-14T18:43:28.703932Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/3 for custom_retryable after 0.1s delay", "error": "Connection failed", "attempt": 1}
{"timestamp": "2025-11-14T18:43:28.805804Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/3 for sync_function after 0.1s delay", "error": "Retry", "attempt": 1}
{"timestamp": "2025-11-14T18:43:28.909186Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/2 for logged_function after 0.1s delay", "error": "Retry", "attempt": 1}
{"timestamp": "2025-11-14T18:43:29.010461Z", "level": "ERROR", "module": "retry", "message": "All 2 retry attempts failed for logged_function", "error": "Retry"}
{"timestamp": "2025-11-14T18:43:29.012198Z", "level": "INFO", "module": "test_logging", "message": "Test message", "key": "value"}
{"timestamp": "2025-11-14T18:43:29.015634Z", "level": "INFO", "module": "test_logging", "message": "Test message", "job_id": "52234988-50e2-4405-9942-dc532e233fff"}
{"timestamp": "2025-11-14T18:43:29.016267Z", "level": "INFO", "module": "test_logging", "message": "Test message"}
{"timestamp": "2025-11-14T18:43:29.017276Z", "level": "INFO", "module": "test_logging", "message": "Test message", "duration": 180, "status": "success", "count": 5}
{"timestamp": "2025-11-14T18:43:29.017908Z", "level": "ERROR", "module": "test_logging", "message": "Exception occurred", "exception": "Traceback (most recent call last):\n  File \"/Users/user/Desktop/Github/VideoGen/project/backend/shared/tests/test_logging.py\", line 129, in test_logger_includes_exception\n    raise ValueError(\"Test error\")\nValueError: Test error"}
{"timestamp": "2025-11-14T18:43:29.018515Z", "level": "WARNING", "module": "test_logging", "message": "Warning message"}
{"timestamp": "2025-11-14T18:43:29.018565Z", "level": "ERROR", "module": "test_logging", "message": "Error message"}
{"timestamp": "2025-11-14T18:43:29.019095Z", "level": "INFO", "module": "test_logging", "message": "Test message", "list": "[1, 2, 3]", "dict": "{'key': 'value'}", "uuid": "cae89bf2-d2fc-4e54-bcb6-392b9d251cec"}
{"timestamp": "2025-11-14T18:43:54.741367Z", "level": "INFO", "module": "test_logging", "message": "Test message", "key": "value"}
{"timestamp": "2025-11-14T18:44:41.766812Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job b595f18b-8f59-474e-a32f-4e6a02956c99: 'Mock' object is not subscriptable", "job_id": "b595f18b-8f59-474e-a32f-4e6a02956c99", "error": "'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:44:41.770881Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to get total cost for job e5ce1b15-8a80-4a18-8e3b-654eea7448ce: 'Mock' object is not subscriptable", "job_id": "e5ce1b15-8a80-4a18-8e3b-654eea7448ce", "error": "'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:44:41.773017Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to get total cost for job ef070ddc-e9ae-41b4-9e8b-3b0002cb4993: 'Mock' object is not subscriptable", "job_id": "ef070ddc-e9ae-41b4-9e8b-3b0002cb4993", "error": "'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:44:41.775472Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to get total cost for job 510e99ac-dec4-47fe-b013-7cca4243e857: 'Mock' object is not subscriptable", "job_id": "510e99ac-dec4-47fe-b013-7cca4243e857", "error": "'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:44:41.775539Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to check budget for job 510e99ac-dec4-47fe-b013-7cca4243e857: Failed to get total cost: 'Mock' object is not subscriptable", "job_id": "510e99ac-dec4-47fe-b013-7cca4243e857", "error": "Failed to get total cost: 'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:44:41.777716Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to get total cost for job a8d4a14e-6360-4fd1-8a6f-b16cd27c2b7f: 'Mock' object is not subscriptable", "job_id": "a8d4a14e-6360-4fd1-8a6f-b16cd27c2b7f", "error": "'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:44:41.777773Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to check budget for job a8d4a14e-6360-4fd1-8a6f-b16cd27c2b7f: Failed to get total cost: 'Mock' object is not subscriptable", "job_id": "a8d4a14e-6360-4fd1-8a6f-b16cd27c2b7f", "error": "Failed to get total cost: 'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:44:41.779915Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to get total cost for job 3055c7d3-3956-45ea-aa2c-a5a798ae842f: 'Mock' object is not subscriptable", "job_id": "3055c7d3-3956-45ea-aa2c-a5a798ae842f", "error": "'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:44:41.779976Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to enforce budget limit for job 3055c7d3-3956-45ea-aa2c-a5a798ae842f: Failed to get total cost: 'Mock' object is not subscriptable", "job_id": "3055c7d3-3956-45ea-aa2c-a5a798ae842f", "error": "Failed to get total cost: 'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:44:41.783267Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to get total cost for job 3f9649a9-252a-4969-b629-7b9c058046d2: 'Mock' object is not subscriptable", "job_id": "3f9649a9-252a-4969-b629-7b9c058046d2", "error": "'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:44:41.783340Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to enforce budget limit for job 3f9649a9-252a-4969-b629-7b9c058046d2: Failed to get total cost: 'Mock' object is not subscriptable", "job_id": "3f9649a9-252a-4969-b629-7b9c058046d2", "error": "Failed to get total cost: 'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:44:41.786654Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job ff8f8288-8719-4c45-b4e1-1daf7c9b653c: 'Mock' object is not subscriptable", "job_id": "ff8f8288-8719-4c45-b4e1-1daf7c9b653c", "error": "'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:44:41.789068Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job aba45992-edc8-42a9-88d6-6c10e52709b3: 'Mock' object is not subscriptable", "job_id": "aba45992-edc8-42a9-88d6-6c10e52709b3", "error": "'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:44:41.790902Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to get total cost for job fb91dabe-1c8b-4d9c-a9c8-fae6710a1c93: 'Mock' object is not subscriptable", "job_id": "fb91dabe-1c8b-4d9c-a9c8-fae6710a1c93", "error": "'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:44:59.827517Z", "level": "INFO", "module": "test_logging", "message": "Test message", "key": "value"}
{"timestamp": "2025-11-14T18:44:59.828615Z", "level": "INFO", "module": "test_logging", "message": "Test message", "job_id": "c2e3d86b-c938-411b-82e2-092b1aaad888"}
{"timestamp": "2025-11-14T18:44:59.829546Z", "level": "INFO", "module": "test_logging", "message": "Test message"}
{"timestamp": "2025-11-14T18:44:59.831077Z", "level": "INFO", "module": "test_logging", "message": "Test message", "duration": 180, "status": "success", "count": 5}
{"timestamp": "2025-11-14T18:44:59.834721Z", "level": "ERROR", "module": "test_logging", "message": "Exception occurred", "exception": "Traceback (most recent call last):\n  File \"/Users/user/Desktop/Github/VideoGen/project/backend/shared/tests/test_logging.py\", line 130, in test_logger_includes_exception\n    raise ValueError(\"Test error\")\nValueError: Test error"}
{"timestamp": "2025-11-14T18:44:59.839415Z", "level": "WARNING", "module": "test_logging", "message": "Warning message"}
{"timestamp": "2025-11-14T18:44:59.839494Z", "level": "ERROR", "module": "test_logging", "message": "Error message"}
{"timestamp": "2025-11-14T18:44:59.840596Z", "level": "INFO", "module": "test_logging", "message": "Test message", "list": "[1, 2, 3]", "dict": "{'key': 'value'}", "uuid": "e8acb0a9-7fc6-4c18-9852-868b9025689d"}
{"timestamp": "2025-11-14T18:44:59.886011Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/3 for retryable_function after 0.1s delay", "error": "Temporary failure", "attempt": 1}
{"timestamp": "2025-11-14T18:44:59.988874Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/3 for always_fails after 0.1s delay", "error": "Always fails", "attempt": 1}
{"timestamp": "2025-11-14T18:45:00.090497Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 2/3 for always_fails after 0.2s delay", "error": "Always fails", "attempt": 2}
{"timestamp": "2025-11-14T18:45:00.292052Z", "level": "ERROR", "module": "retry", "message": "All 3 retry attempts failed for always_fails", "error": "Always fails"}
{"timestamp": "2025-11-14T18:45:00.294061Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/3 for track_timing after 0.1s delay", "error": "Retry", "attempt": 1}
{"timestamp": "2025-11-14T18:45:00.395561Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 2/3 for track_timing after 0.2s delay", "error": "Retry", "attempt": 2}
{"timestamp": "2025-11-14T18:45:00.599664Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in non_retryable_error: Non-retryable", "error": "Non-retryable"}
{"timestamp": "2025-11-14T18:45:00.600659Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/3 for custom_retryable after 0.1s delay", "error": "Connection failed", "attempt": 1}
{"timestamp": "2025-11-14T18:45:00.718229Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/3 for sync_function after 0.1s delay", "error": "Retry", "attempt": 1}
{"timestamp": "2025-11-14T18:45:00.825055Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/2 for logged_function after 0.1s delay", "error": "Retry", "attempt": 1}
{"timestamp": "2025-11-14T18:45:00.926321Z", "level": "ERROR", "module": "retry", "message": "All 2 retry attempts failed for logged_function", "error": "Retry"}
{"timestamp": "2025-11-14T18:45:00.930660Z", "level": "INFO", "module": "storage", "message": "Uploaded file to audio-uploads/test/path.mp3", "bucket": "audio-uploads", "path": "test/path.mp3", "size": 17}
{"timestamp": "2025-11-14T18:45:00.934221Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in upload_file: File size (11.00 MB) exceeds maximum of 10.00 MB for bucket audio-uploads", "error": "File size (11.00 MB) exceeds maximum of 10.00 MB for bucket audio-uploads"}
{"timestamp": "2025-11-14T18:45:00.936174Z", "level": "INFO", "module": "storage", "message": "Uploaded file to audio-uploads/test/path.mp3", "bucket": "audio-uploads", "path": "test/path.mp3", "size": 12}
{"timestamp": "2025-11-14T18:45:00.937718Z", "level": "INFO", "module": "storage", "message": "Downloaded file from audio-uploads/test/path.mp3", "bucket": "audio-uploads", "path": "test/path.mp3"}
{"timestamp": "2025-11-14T18:45:00.939222Z", "level": "INFO", "module": "storage", "message": "Generated signed URL for video-outputs/test/path.mp3", "bucket": "video-outputs", "path": "test/path.mp3", "expires_in": 3600}
{"timestamp": "2025-11-14T18:45:00.940817Z", "level": "INFO", "module": "storage", "message": "Generated signed URL for video-outputs/test/path.mp3", "bucket": "video-outputs", "path": "test/path.mp3", "expires_in": 3600}
{"timestamp": "2025-11-14T18:45:00.943143Z", "level": "INFO", "module": "storage", "message": "Deleted file from video-clips/test/path.mp4", "bucket": "video-clips", "path": "test/path.mp4"}
{"timestamp": "2025-11-14T18:45:00.944619Z", "level": "ERROR", "module": "storage", "message": "Failed to upload file to audio-uploads/test/path.mp3: Upload failed", "bucket": "audio-uploads", "path": "test/path.mp3", "error": "Upload failed"}
{"timestamp": "2025-11-14T18:45:00.944675Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/3 for upload_file after 2s delay", "error": "Failed to upload file: Upload failed", "attempt": 1}
{"timestamp": "2025-11-14T18:45:02.946254Z", "level": "ERROR", "module": "storage", "message": "Failed to upload file to audio-uploads/test/path.mp3: Upload failed", "bucket": "audio-uploads", "path": "test/path.mp3", "error": "Upload failed"}
{"timestamp": "2025-11-14T18:45:02.946422Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 2/3 for upload_file after 4s delay", "error": "Failed to upload file: Upload failed", "attempt": 2}
{"timestamp": "2025-11-14T18:45:06.948202Z", "level": "ERROR", "module": "storage", "message": "Failed to upload file to audio-uploads/test/path.mp3: Upload failed", "bucket": "audio-uploads", "path": "test/path.mp3", "error": "Upload failed"}
{"timestamp": "2025-11-14T18:45:06.948344Z", "level": "ERROR", "module": "retry", "message": "All 3 retry attempts failed for upload_file", "error": "Failed to upload file: Upload failed"}
{"timestamp": "2025-11-14T18:45:06.951439Z", "level": "ERROR", "module": "storage", "message": "Failed to download file from audio-uploads/test/path.mp3: Download failed", "bucket": "audio-uploads", "path": "test/path.mp3", "error": "Download failed"}
{"timestamp": "2025-11-14T18:45:06.951526Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/3 for download_file after 2s delay", "error": "Failed to download file: Download failed", "attempt": 1}
{"timestamp": "2025-11-14T18:45:08.953177Z", "level": "ERROR", "module": "storage", "message": "Failed to download file from audio-uploads/test/path.mp3: Download failed", "bucket": "audio-uploads", "path": "test/path.mp3", "error": "Download failed"}
{"timestamp": "2025-11-14T18:45:08.953412Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 2/3 for download_file after 4s delay", "error": "Failed to download file: Download failed", "attempt": 2}
{"timestamp": "2025-11-14T18:45:12.955194Z", "level": "ERROR", "module": "storage", "message": "Failed to download file from audio-uploads/test/path.mp3: Download failed", "bucket": "audio-uploads", "path": "test/path.mp3", "error": "Download failed"}
{"timestamp": "2025-11-14T18:45:12.955516Z", "level": "ERROR", "module": "retry", "message": "All 3 retry attempts failed for download_file", "error": "Failed to download file: Download failed"}
{"timestamp": "2025-11-14T18:45:21.699230Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job 5cfd5e69-f745-48d9-8a3a-55f9f721b5b2: 'Mock' object is not subscriptable", "job_id": "5cfd5e69-f745-48d9-8a3a-55f9f721b5b2", "error": "'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:45:21.727771Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to get total cost for job 9fd7767f-848f-4a87-9df9-ffb9f6efbcd0: 'Mock' object is not subscriptable", "job_id": "9fd7767f-848f-4a87-9df9-ffb9f6efbcd0", "error": "'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:45:21.733866Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to get total cost for job 405d2a94-6a48-4058-8e82-30754da9dd93: 'Mock' object is not subscriptable", "job_id": "405d2a94-6a48-4058-8e82-30754da9dd93", "error": "'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:45:21.739717Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to get total cost for job 810150d5-e9c9-46ae-b963-7a43b7a4c59c: 'Mock' object is not subscriptable", "job_id": "810150d5-e9c9-46ae-b963-7a43b7a4c59c", "error": "'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:45:21.739794Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to check budget for job 810150d5-e9c9-46ae-b963-7a43b7a4c59c: Failed to get total cost: 'Mock' object is not subscriptable", "job_id": "810150d5-e9c9-46ae-b963-7a43b7a4c59c", "error": "Failed to get total cost: 'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:45:21.747254Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to get total cost for job 4e2571ce-815f-4ab0-ac98-4efacea89387: 'Mock' object is not subscriptable", "job_id": "4e2571ce-815f-4ab0-ac98-4efacea89387", "error": "'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:45:21.747314Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to check budget for job 4e2571ce-815f-4ab0-ac98-4efacea89387: Failed to get total cost: 'Mock' object is not subscriptable", "job_id": "4e2571ce-815f-4ab0-ac98-4efacea89387", "error": "Failed to get total cost: 'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:45:21.754436Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to get total cost for job 69f99800-bf40-402a-af41-10b2828c58f1: 'Mock' object is not subscriptable", "job_id": "69f99800-bf40-402a-af41-10b2828c58f1", "error": "'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:45:21.754504Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to enforce budget limit for job 69f99800-bf40-402a-af41-10b2828c58f1: Failed to get total cost: 'Mock' object is not subscriptable", "job_id": "69f99800-bf40-402a-af41-10b2828c58f1", "error": "Failed to get total cost: 'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:45:21.761892Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to get total cost for job 5d090fd3-0445-4c02-8143-900acaaf9337: 'Mock' object is not subscriptable", "job_id": "5d090fd3-0445-4c02-8143-900acaaf9337", "error": "'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:45:21.761959Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to enforce budget limit for job 5d090fd3-0445-4c02-8143-900acaaf9337: Failed to get total cost: 'Mock' object is not subscriptable", "job_id": "5d090fd3-0445-4c02-8143-900acaaf9337", "error": "Failed to get total cost: 'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:45:21.769657Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job b43a78e4-2105-4726-8c10-054524cab136: 'Mock' object is not subscriptable", "job_id": "b43a78e4-2105-4726-8c10-054524cab136", "error": "'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:45:21.784858Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job 951f5616-59a8-44b8-960a-f67e5c9a61f4: 'Mock' object is not subscriptable", "job_id": "951f5616-59a8-44b8-960a-f67e5c9a61f4", "error": "'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:45:21.786286Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to get total cost for job 6417a07a-d2d7-4f31-ba44-7cce77830d86: 'Mock' object is not subscriptable", "job_id": "6417a07a-d2d7-4f31-ba44-7cce77830d86", "error": "'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:45:39.834673Z", "level": "INFO", "module": "test_logging", "message": "Test message", "key": "value"}
{"timestamp": "2025-11-14T18:45:39.835616Z", "level": "INFO", "module": "test_logging", "message": "Test message", "job_id": "2389c320-3a30-4a7c-b703-b8aa50f797d7"}
{"timestamp": "2025-11-14T18:45:39.836446Z", "level": "INFO", "module": "test_logging", "message": "Test message"}
{"timestamp": "2025-11-14T18:45:39.838017Z", "level": "INFO", "module": "test_logging", "message": "Test message", "duration": 180, "status": "success", "count": 5}
{"timestamp": "2025-11-14T18:45:39.840507Z", "level": "ERROR", "module": "test_logging", "message": "Exception occurred", "exception": "Traceback (most recent call last):\n  File \"/Users/user/Desktop/Github/VideoGen/project/backend/shared/tests/test_logging.py\", line 130, in test_logger_includes_exception\n    raise ValueError(\"Test error\")\nValueError: Test error"}
{"timestamp": "2025-11-14T18:45:39.841556Z", "level": "WARNING", "module": "test_logging", "message": "Warning message"}
{"timestamp": "2025-11-14T18:45:39.841633Z", "level": "ERROR", "module": "test_logging", "message": "Error message"}
{"timestamp": "2025-11-14T18:45:39.842419Z", "level": "INFO", "module": "test_logging", "message": "Test message", "list": "[1, 2, 3]", "dict": "{'key': 'value'}", "uuid": "bdfbcb77-d9a3-4bb1-9906-5fbc50930f7d"}
{"timestamp": "2025-11-14T18:45:40.385802Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/3 for retryable_function after 0.1s delay", "error": "Temporary failure", "attempt": 1}
{"timestamp": "2025-11-14T18:45:40.488461Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/3 for always_fails after 0.1s delay", "error": "Always fails", "attempt": 1}
{"timestamp": "2025-11-14T18:45:40.590161Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 2/3 for always_fails after 0.2s delay", "error": "Always fails", "attempt": 2}
{"timestamp": "2025-11-14T18:45:40.792167Z", "level": "ERROR", "module": "retry", "message": "All 3 retry attempts failed for always_fails", "error": "Always fails"}
{"timestamp": "2025-11-14T18:45:40.795152Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/3 for track_timing after 0.1s delay", "error": "Retry", "attempt": 1}
{"timestamp": "2025-11-14T18:45:40.896699Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 2/3 for track_timing after 0.2s delay", "error": "Retry", "attempt": 2}
{"timestamp": "2025-11-14T18:45:41.100834Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in non_retryable_error: Non-retryable", "error": "Non-retryable"}
{"timestamp": "2025-11-14T18:45:41.102766Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/3 for custom_retryable after 0.1s delay", "error": "Connection failed", "attempt": 1}
{"timestamp": "2025-11-14T18:45:41.207986Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/3 for sync_function after 0.1s delay", "error": "Retry", "attempt": 1}
{"timestamp": "2025-11-14T18:45:41.315934Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/2 for logged_function after 0.1s delay", "error": "Retry", "attempt": 1}
{"timestamp": "2025-11-14T18:45:41.417886Z", "level": "ERROR", "module": "retry", "message": "All 2 retry attempts failed for logged_function", "error": "Retry"}
{"timestamp": "2025-11-14T18:45:41.429583Z", "level": "INFO", "module": "storage", "message": "Uploaded file to audio-uploads/test/path.mp3", "bucket": "audio-uploads", "path": "test/path.mp3", "size": 17}
{"timestamp": "2025-11-14T18:45:41.436216Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in upload_file: File size (11.00 MB) exceeds maximum of 10.00 MB for bucket audio-uploads", "error": "File size (11.00 MB) exceeds maximum of 10.00 MB for bucket audio-uploads"}
{"timestamp": "2025-11-14T18:45:41.439279Z", "level": "INFO", "module": "storage", "message": "Uploaded file to audio-uploads/test/path.mp3", "bucket": "audio-uploads", "path": "test/path.mp3", "size": 12}
{"timestamp": "2025-11-14T18:45:41.442192Z", "level": "INFO", "module": "storage", "message": "Downloaded file from audio-uploads/test/path.mp3", "bucket": "audio-uploads", "path": "test/path.mp3"}
{"timestamp": "2025-11-14T18:45:41.444663Z", "level": "INFO", "module": "storage", "message": "Generated signed URL for video-outputs/test/path.mp3", "bucket": "video-outputs", "path": "test/path.mp3", "expires_in": 3600}
{"timestamp": "2025-11-14T18:45:41.446873Z", "level": "INFO", "module": "storage", "message": "Generated signed URL for video-outputs/test/path.mp3", "bucket": "video-outputs", "path": "test/path.mp3", "expires_in": 3600}
{"timestamp": "2025-11-14T18:45:41.450072Z", "level": "INFO", "module": "storage", "message": "Deleted file from video-clips/test/path.mp4", "bucket": "video-clips", "path": "test/path.mp4"}
{"timestamp": "2025-11-14T18:45:41.452091Z", "level": "ERROR", "module": "storage", "message": "Failed to upload file to audio-uploads/test/path.mp3: Upload failed", "bucket": "audio-uploads", "path": "test/path.mp3", "error": "Upload failed"}
{"timestamp": "2025-11-14T18:45:41.452175Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/3 for upload_file after 2s delay", "error": "Failed to upload file: Upload failed", "attempt": 1}
{"timestamp": "2025-11-14T18:45:43.453784Z", "level": "ERROR", "module": "storage", "message": "Failed to upload file to audio-uploads/test/path.mp3: Upload failed", "bucket": "audio-uploads", "path": "test/path.mp3", "error": "Upload failed"}
{"timestamp": "2025-11-14T18:45:43.453998Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 2/3 for upload_file after 4s delay", "error": "Failed to upload file: Upload failed", "attempt": 2}
{"timestamp": "2025-11-14T18:45:47.455490Z", "level": "ERROR", "module": "storage", "message": "Failed to upload file to audio-uploads/test/path.mp3: Upload failed", "bucket": "audio-uploads", "path": "test/path.mp3", "error": "Upload failed"}
{"timestamp": "2025-11-14T18:45:47.455733Z", "level": "ERROR", "module": "retry", "message": "All 3 retry attempts failed for upload_file", "error": "Failed to upload file: Upload failed"}
{"timestamp": "2025-11-14T18:45:47.463120Z", "level": "ERROR", "module": "storage", "message": "Failed to download file from audio-uploads/test/path.mp3: Download failed", "bucket": "audio-uploads", "path": "test/path.mp3", "error": "Download failed"}
{"timestamp": "2025-11-14T18:45:47.463302Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/3 for download_file after 2s delay", "error": "Failed to download file: Download failed", "attempt": 1}
{"timestamp": "2025-11-14T18:45:49.465125Z", "level": "ERROR", "module": "storage", "message": "Failed to download file from audio-uploads/test/path.mp3: Download failed", "bucket": "audio-uploads", "path": "test/path.mp3", "error": "Download failed"}
{"timestamp": "2025-11-14T18:45:49.465436Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 2/3 for download_file after 4s delay", "error": "Failed to download file: Download failed", "attempt": 2}
{"timestamp": "2025-11-14T18:45:53.467078Z", "level": "ERROR", "module": "storage", "message": "Failed to download file from audio-uploads/test/path.mp3: Download failed", "bucket": "audio-uploads", "path": "test/path.mp3", "error": "Download failed"}
{"timestamp": "2025-11-14T18:45:53.467283Z", "level": "ERROR", "module": "retry", "message": "All 3 retry attempts failed for download_file", "error": "Failed to download file: Download failed"}
{"timestamp": "2025-11-14T18:47:31.905096Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job c3a5f46e-e3f9-484f-9a43-ec6c013b2685: 'Mock' object is not subscriptable", "job_id": "c3a5f46e-e3f9-484f-9a43-ec6c013b2685", "error": "'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:47:31.909543Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to get total cost for job 23df8ca2-f4fe-49fe-b4ee-2215612c00ea: 'Mock' object is not subscriptable", "job_id": "23df8ca2-f4fe-49fe-b4ee-2215612c00ea", "error": "'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:47:31.911877Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to get total cost for job 5f22cbc8-65fa-47a4-ba38-ab913f01dabb: 'Mock' object is not subscriptable", "job_id": "5f22cbc8-65fa-47a4-ba38-ab913f01dabb", "error": "'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:47:31.914029Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to get total cost for job fac24f8d-4807-422d-acf6-193af1a9d279: 'Mock' object is not subscriptable", "job_id": "fac24f8d-4807-422d-acf6-193af1a9d279", "error": "'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:47:31.914089Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to check budget for job fac24f8d-4807-422d-acf6-193af1a9d279: Failed to get total cost: 'Mock' object is not subscriptable", "job_id": "fac24f8d-4807-422d-acf6-193af1a9d279", "error": "Failed to get total cost: 'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:47:31.916898Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to get total cost for job bbc0063a-85a4-449e-988f-54cab4506045: 'Mock' object is not subscriptable", "job_id": "bbc0063a-85a4-449e-988f-54cab4506045", "error": "'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:47:31.916964Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to check budget for job bbc0063a-85a4-449e-988f-54cab4506045: Failed to get total cost: 'Mock' object is not subscriptable", "job_id": "bbc0063a-85a4-449e-988f-54cab4506045", "error": "Failed to get total cost: 'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:47:31.919249Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to get total cost for job 5c88803a-7212-42c3-b08e-bcd6c23ea9fd: 'Mock' object is not subscriptable", "job_id": "5c88803a-7212-42c3-b08e-bcd6c23ea9fd", "error": "'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:47:31.919304Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to enforce budget limit for job 5c88803a-7212-42c3-b08e-bcd6c23ea9fd: Failed to get total cost: 'Mock' object is not subscriptable", "job_id": "5c88803a-7212-42c3-b08e-bcd6c23ea9fd", "error": "Failed to get total cost: 'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:47:31.921564Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to get total cost for job c603a649-ac8e-4bea-bdc8-598bc46c6d4a: 'Mock' object is not subscriptable", "job_id": "c603a649-ac8e-4bea-bdc8-598bc46c6d4a", "error": "'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:47:31.921618Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to enforce budget limit for job c603a649-ac8e-4bea-bdc8-598bc46c6d4a: Failed to get total cost: 'Mock' object is not subscriptable", "job_id": "c603a649-ac8e-4bea-bdc8-598bc46c6d4a", "error": "Failed to get total cost: 'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:47:31.924917Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job 8d7cf8c7-6e40-4afe-973e-96a5cd1362b2: 'Mock' object is not subscriptable", "job_id": "8d7cf8c7-6e40-4afe-973e-96a5cd1362b2", "error": "'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:47:31.928173Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job df44d92f-7b08-423d-b34b-e297f6591e13: 'Mock' object is not subscriptable", "job_id": "df44d92f-7b08-423d-b34b-e297f6591e13", "error": "'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:47:31.931808Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to get total cost for job d4c8636f-0d00-496a-bed7-a7d2ca4f6cb4: 'Mock' object is not subscriptable", "job_id": "d4c8636f-0d00-496a-bed7-a7d2ca4f6cb4", "error": "'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:47:49.972638Z", "level": "INFO", "module": "test_logging", "message": "Test message", "key": "value"}
{"timestamp": "2025-11-14T18:47:49.973611Z", "level": "INFO", "module": "test_logging", "message": "Test message", "job_id": "eef792a5-c223-4190-85d2-ed1436f4f593"}
{"timestamp": "2025-11-14T18:47:49.974471Z", "level": "INFO", "module": "test_logging", "message": "Test message"}
{"timestamp": "2025-11-14T18:47:49.975965Z", "level": "INFO", "module": "test_logging", "message": "Test message", "duration": 180, "status": "success", "count": 5}
{"timestamp": "2025-11-14T18:47:49.978522Z", "level": "ERROR", "module": "test_logging", "message": "Exception occurred", "exception": "Traceback (most recent call last):\n  File \"/Users/user/Desktop/Github/VideoGen/project/backend/shared/tests/test_logging.py\", line 130, in test_logger_includes_exception\n    raise ValueError(\"Test error\")\nValueError: Test error"}
{"timestamp": "2025-11-14T18:47:49.979359Z", "level": "WARNING", "module": "test_logging", "message": "Warning message"}
{"timestamp": "2025-11-14T18:47:49.979430Z", "level": "ERROR", "module": "test_logging", "message": "Error message"}
{"timestamp": "2025-11-14T18:47:49.980176Z", "level": "INFO", "module": "test_logging", "message": "Test message", "list": "[1, 2, 3]", "dict": "{'key': 'value'}", "uuid": "24610a27-8ef1-4ce6-abb0-d650e9acc1eb"}
{"timestamp": "2025-11-14T18:47:50.025992Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/3 for retryable_function after 0.1s delay", "error": "Temporary failure", "attempt": 1}
{"timestamp": "2025-11-14T18:47:50.128786Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/3 for always_fails after 0.1s delay", "error": "Always fails", "attempt": 1}
{"timestamp": "2025-11-14T18:47:50.230292Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 2/3 for always_fails after 0.2s delay", "error": "Always fails", "attempt": 2}
{"timestamp": "2025-11-14T18:47:50.431982Z", "level": "ERROR", "module": "retry", "message": "All 3 retry attempts failed for always_fails", "error": "Always fails"}
{"timestamp": "2025-11-14T18:47:50.434925Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/3 for track_timing after 0.1s delay", "error": "Retry", "attempt": 1}
{"timestamp": "2025-11-14T18:47:50.536390Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 2/3 for track_timing after 0.2s delay", "error": "Retry", "attempt": 2}
{"timestamp": "2025-11-14T18:47:50.739508Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in non_retryable_error: Non-retryable", "error": "Non-retryable"}
{"timestamp": "2025-11-14T18:47:50.740645Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/3 for custom_retryable after 0.1s delay", "error": "Connection failed", "attempt": 1}
{"timestamp": "2025-11-14T18:47:50.842974Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/3 for sync_function after 0.1s delay", "error": "Retry", "attempt": 1}
{"timestamp": "2025-11-14T18:47:50.949373Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/2 for logged_function after 0.1s delay", "error": "Retry", "attempt": 1}
{"timestamp": "2025-11-14T18:47:51.050696Z", "level": "ERROR", "module": "retry", "message": "All 2 retry attempts failed for logged_function", "error": "Retry"}
{"timestamp": "2025-11-14T18:47:51.056044Z", "level": "INFO", "module": "storage", "message": "Uploaded file to audio-uploads/test/path.mp3", "bucket": "audio-uploads", "path": "test/path.mp3", "size": 17}
{"timestamp": "2025-11-14T18:47:51.059946Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in upload_file: File size (11.00 MB) exceeds maximum of 10.00 MB for bucket audio-uploads", "error": "File size (11.00 MB) exceeds maximum of 10.00 MB for bucket audio-uploads"}
{"timestamp": "2025-11-14T18:47:51.062032Z", "level": "INFO", "module": "storage", "message": "Uploaded file to audio-uploads/test/path.mp3", "bucket": "audio-uploads", "path": "test/path.mp3", "size": 12}
{"timestamp": "2025-11-14T18:47:51.063712Z", "level": "INFO", "module": "storage", "message": "Downloaded file from audio-uploads/test/path.mp3", "bucket": "audio-uploads", "path": "test/path.mp3"}
{"timestamp": "2025-11-14T18:47:51.065216Z", "level": "INFO", "module": "storage", "message": "Generated signed URL for video-outputs/test/path.mp3", "bucket": "video-outputs", "path": "test/path.mp3", "expires_in": 3600}
{"timestamp": "2025-11-14T18:47:51.066697Z", "level": "INFO", "module": "storage", "message": "Generated signed URL for video-outputs/test/path.mp3", "bucket": "video-outputs", "path": "test/path.mp3", "expires_in": 3600}
{"timestamp": "2025-11-14T18:47:51.068250Z", "level": "INFO", "module": "storage", "message": "Deleted file from video-clips/test/path.mp4", "bucket": "video-clips", "path": "test/path.mp4"}
{"timestamp": "2025-11-14T18:47:51.069732Z", "level": "ERROR", "module": "storage", "message": "Failed to upload file to audio-uploads/test/path.mp3: Upload failed", "bucket": "audio-uploads", "path": "test/path.mp3", "error": "Upload failed"}
{"timestamp": "2025-11-14T18:47:51.069787Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/3 for upload_file after 2s delay", "error": "Failed to upload file: Upload failed", "attempt": 1}
{"timestamp": "2025-11-14T18:47:53.071323Z", "level": "ERROR", "module": "storage", "message": "Failed to upload file to audio-uploads/test/path.mp3: Upload failed", "bucket": "audio-uploads", "path": "test/path.mp3", "error": "Upload failed"}
{"timestamp": "2025-11-14T18:47:53.071557Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 2/3 for upload_file after 4s delay", "error": "Failed to upload file: Upload failed", "attempt": 2}
{"timestamp": "2025-11-14T18:47:57.073609Z", "level": "ERROR", "module": "storage", "message": "Failed to upload file to audio-uploads/test/path.mp3: Upload failed", "bucket": "audio-uploads", "path": "test/path.mp3", "error": "Upload failed"}
{"timestamp": "2025-11-14T18:47:57.074060Z", "level": "ERROR", "module": "retry", "message": "All 3 retry attempts failed for upload_file", "error": "Failed to upload file: Upload failed"}
{"timestamp": "2025-11-14T18:47:57.082545Z", "level": "ERROR", "module": "storage", "message": "Failed to download file from audio-uploads/test/path.mp3: Download failed", "bucket": "audio-uploads", "path": "test/path.mp3", "error": "Download failed"}
{"timestamp": "2025-11-14T18:47:57.082750Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/3 for download_file after 2s delay", "error": "Failed to download file: Download failed", "attempt": 1}
{"timestamp": "2025-11-14T18:47:59.084397Z", "level": "ERROR", "module": "storage", "message": "Failed to download file from audio-uploads/test/path.mp3: Download failed", "bucket": "audio-uploads", "path": "test/path.mp3", "error": "Download failed"}
{"timestamp": "2025-11-14T18:47:59.084612Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 2/3 for download_file after 4s delay", "error": "Failed to download file: Download failed", "attempt": 2}
{"timestamp": "2025-11-14T18:48:03.086297Z", "level": "ERROR", "module": "storage", "message": "Failed to download file from audio-uploads/test/path.mp3: Download failed", "bucket": "audio-uploads", "path": "test/path.mp3", "error": "Download failed"}
{"timestamp": "2025-11-14T18:48:03.086506Z", "level": "ERROR", "module": "retry", "message": "All 3 retry attempts failed for download_file", "error": "Failed to download file: Download failed"}
{"timestamp": "2025-11-14T18:48:09.849938Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job c594ed92-fd46-4128-acd4-bbfb1d47e3f1: 'Mock' object is not subscriptable", "job_id": "c594ed92-fd46-4128-acd4-bbfb1d47e3f1", "error": "'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:48:09.854069Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to get total cost for job 86a27234-3ab0-478d-a892-dfa3685bd848: 'Mock' object is not subscriptable", "job_id": "86a27234-3ab0-478d-a892-dfa3685bd848", "error": "'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:48:09.856111Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to get total cost for job b17d3818-166e-4c7a-b09b-f517c22bcbe6: 'Mock' object is not subscriptable", "job_id": "b17d3818-166e-4c7a-b09b-f517c22bcbe6", "error": "'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:48:09.859131Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to get total cost for job 8de0c860-a284-4c5e-bd8e-7bbd55295744: 'Mock' object is not subscriptable", "job_id": "8de0c860-a284-4c5e-bd8e-7bbd55295744", "error": "'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:48:09.859195Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to check budget for job 8de0c860-a284-4c5e-bd8e-7bbd55295744: Failed to get total cost: 'Mock' object is not subscriptable", "job_id": "8de0c860-a284-4c5e-bd8e-7bbd55295744", "error": "Failed to get total cost: 'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:48:09.861441Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to get total cost for job 8c90d2f0-10ff-432f-a318-f667a4dba5ec: 'Mock' object is not subscriptable", "job_id": "8c90d2f0-10ff-432f-a318-f667a4dba5ec", "error": "'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:48:09.861499Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to check budget for job 8c90d2f0-10ff-432f-a318-f667a4dba5ec: Failed to get total cost: 'Mock' object is not subscriptable", "job_id": "8c90d2f0-10ff-432f-a318-f667a4dba5ec", "error": "Failed to get total cost: 'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:48:09.863852Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to get total cost for job 35d8dbce-9c4c-4f34-b4fc-349789338184: 'Mock' object is not subscriptable", "job_id": "35d8dbce-9c4c-4f34-b4fc-349789338184", "error": "'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:48:09.863914Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to enforce budget limit for job 35d8dbce-9c4c-4f34-b4fc-349789338184: Failed to get total cost: 'Mock' object is not subscriptable", "job_id": "35d8dbce-9c4c-4f34-b4fc-349789338184", "error": "Failed to get total cost: 'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:48:09.866690Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to get total cost for job b4e5c15b-977a-4acc-b709-4fece050edd9: 'Mock' object is not subscriptable", "job_id": "b4e5c15b-977a-4acc-b709-4fece050edd9", "error": "'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:48:09.866756Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to enforce budget limit for job b4e5c15b-977a-4acc-b709-4fece050edd9: Failed to get total cost: 'Mock' object is not subscriptable", "job_id": "b4e5c15b-977a-4acc-b709-4fece050edd9", "error": "Failed to get total cost: 'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:48:09.869820Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job f46f7ccc-5bd7-4e89-8d60-1ce3df19a79d: 'Mock' object is not subscriptable", "job_id": "f46f7ccc-5bd7-4e89-8d60-1ce3df19a79d", "error": "'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:48:09.872062Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job fc0819f4-261d-4a5b-8588-a4cce891a55c: 'Mock' object is not subscriptable", "job_id": "fc0819f4-261d-4a5b-8588-a4cce891a55c", "error": "'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:48:09.873816Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to get total cost for job 8cfb1e6c-e01f-4d59-b3e7-db6ecaae2363: 'Mock' object is not subscriptable", "job_id": "8cfb1e6c-e01f-4d59-b3e7-db6ecaae2363", "error": "'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:48:27.924292Z", "level": "INFO", "module": "test_logging", "message": "Test message", "key": "value"}
{"timestamp": "2025-11-14T18:48:27.925500Z", "level": "INFO", "module": "test_logging", "message": "Test message", "job_id": "ce291a8a-f5bf-4508-bab8-6ef134958314"}
{"timestamp": "2025-11-14T18:48:27.926377Z", "level": "INFO", "module": "test_logging", "message": "Test message"}
{"timestamp": "2025-11-14T18:48:27.927863Z", "level": "INFO", "module": "test_logging", "message": "Test message", "duration": 180, "status": "success", "count": 5}
{"timestamp": "2025-11-14T18:48:27.930161Z", "level": "ERROR", "module": "test_logging", "message": "Exception occurred", "exception": "Traceback (most recent call last):\n  File \"/Users/user/Desktop/Github/VideoGen/project/backend/shared/tests/test_logging.py\", line 130, in test_logger_includes_exception\n    raise ValueError(\"Test error\")\nValueError: Test error"}
{"timestamp": "2025-11-14T18:48:27.931111Z", "level": "WARNING", "module": "test_logging", "message": "Warning message"}
{"timestamp": "2025-11-14T18:48:27.931190Z", "level": "ERROR", "module": "test_logging", "message": "Error message"}
{"timestamp": "2025-11-14T18:48:27.932126Z", "level": "INFO", "module": "test_logging", "message": "Test message", "list": "[1, 2, 3]", "dict": "{'key': 'value'}", "uuid": "888871cd-f5e8-413c-b006-a0368e9bf8d6"}
{"timestamp": "2025-11-14T18:48:27.970007Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/3 for retryable_function after 0.1s delay", "error": "Temporary failure", "attempt": 1}
{"timestamp": "2025-11-14T18:48:28.072825Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/3 for always_fails after 0.1s delay", "error": "Always fails", "attempt": 1}
{"timestamp": "2025-11-14T18:48:28.174282Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 2/3 for always_fails after 0.2s delay", "error": "Always fails", "attempt": 2}
{"timestamp": "2025-11-14T18:48:28.376155Z", "level": "ERROR", "module": "retry", "message": "All 3 retry attempts failed for always_fails", "error": "Always fails"}
{"timestamp": "2025-11-14T18:48:28.379595Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/3 for track_timing after 0.1s delay", "error": "Retry", "attempt": 1}
{"timestamp": "2025-11-14T18:48:28.481519Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 2/3 for track_timing after 0.2s delay", "error": "Retry", "attempt": 2}
{"timestamp": "2025-11-14T18:48:28.685667Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in non_retryable_error: Non-retryable", "error": "Non-retryable"}
{"timestamp": "2025-11-14T18:48:28.687756Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/3 for custom_retryable after 0.1s delay", "error": "Connection failed", "attempt": 1}
{"timestamp": "2025-11-14T18:48:28.790167Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/3 for sync_function after 0.1s delay", "error": "Retry", "attempt": 1}
{"timestamp": "2025-11-14T18:48:28.896391Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/2 for logged_function after 0.1s delay", "error": "Retry", "attempt": 1}
{"timestamp": "2025-11-14T18:48:28.997642Z", "level": "ERROR", "module": "retry", "message": "All 2 retry attempts failed for logged_function", "error": "Retry"}
{"timestamp": "2025-11-14T18:48:29.002697Z", "level": "INFO", "module": "storage", "message": "Uploaded file to audio-uploads/test/path.mp3", "bucket": "audio-uploads", "path": "test/path.mp3", "size": 17}
{"timestamp": "2025-11-14T18:48:29.005912Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in upload_file: File size (11.00 MB) exceeds maximum of 10.00 MB for bucket audio-uploads", "error": "File size (11.00 MB) exceeds maximum of 10.00 MB for bucket audio-uploads"}
{"timestamp": "2025-11-14T18:48:29.008758Z", "level": "INFO", "module": "storage", "message": "Uploaded file to audio-uploads/test/path.mp3", "bucket": "audio-uploads", "path": "test/path.mp3", "size": 12}
{"timestamp": "2025-11-14T18:48:29.010357Z", "level": "INFO", "module": "storage", "message": "Downloaded file from audio-uploads/test/path.mp3", "bucket": "audio-uploads", "path": "test/path.mp3"}
{"timestamp": "2025-11-14T18:48:29.011923Z", "level": "INFO", "module": "storage", "message": "Generated signed URL for video-outputs/test/path.mp3", "bucket": "video-outputs", "path": "test/path.mp3", "expires_in": 3600}
{"timestamp": "2025-11-14T18:48:29.013454Z", "level": "INFO", "module": "storage", "message": "Generated signed URL for video-outputs/test/path.mp3", "bucket": "video-outputs", "path": "test/path.mp3", "expires_in": 3600}
{"timestamp": "2025-11-14T18:48:29.015977Z", "level": "INFO", "module": "storage", "message": "Deleted file from video-clips/test/path.mp4", "bucket": "video-clips", "path": "test/path.mp4"}
{"timestamp": "2025-11-14T18:48:29.018276Z", "level": "ERROR", "module": "storage", "message": "Failed to upload file to audio-uploads/test/path.mp3: Upload failed", "bucket": "audio-uploads", "path": "test/path.mp3", "error": "Upload failed"}
{"timestamp": "2025-11-14T18:48:29.018345Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/3 for upload_file after 2s delay", "error": "Failed to upload file: Upload failed", "attempt": 1}
{"timestamp": "2025-11-14T18:48:31.019959Z", "level": "ERROR", "module": "storage", "message": "Failed to upload file to audio-uploads/test/path.mp3: Upload failed", "bucket": "audio-uploads", "path": "test/path.mp3", "error": "Upload failed"}
{"timestamp": "2025-11-14T18:48:31.020167Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 2/3 for upload_file after 4s delay", "error": "Failed to upload file: Upload failed", "attempt": 2}
{"timestamp": "2025-11-14T18:48:35.022034Z", "level": "ERROR", "module": "storage", "message": "Failed to upload file to audio-uploads/test/path.mp3: Upload failed", "bucket": "audio-uploads", "path": "test/path.mp3", "error": "Upload failed"}
{"timestamp": "2025-11-14T18:48:35.022234Z", "level": "ERROR", "module": "retry", "message": "All 3 retry attempts failed for upload_file", "error": "Failed to upload file: Upload failed"}
{"timestamp": "2025-11-14T18:48:35.029508Z", "level": "ERROR", "module": "storage", "message": "Failed to download file from audio-uploads/test/path.mp3: Download failed", "bucket": "audio-uploads", "path": "test/path.mp3", "error": "Download failed"}
{"timestamp": "2025-11-14T18:48:35.029747Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/3 for download_file after 2s delay", "error": "Failed to download file: Download failed", "attempt": 1}
{"timestamp": "2025-11-14T18:48:37.031342Z", "level": "ERROR", "module": "storage", "message": "Failed to download file from audio-uploads/test/path.mp3: Download failed", "bucket": "audio-uploads", "path": "test/path.mp3", "error": "Download failed"}
{"timestamp": "2025-11-14T18:48:37.031562Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 2/3 for download_file after 4s delay", "error": "Failed to download file: Download failed", "attempt": 2}
{"timestamp": "2025-11-14T18:48:41.032542Z", "level": "ERROR", "module": "storage", "message": "Failed to download file from audio-uploads/test/path.mp3: Download failed", "bucket": "audio-uploads", "path": "test/path.mp3", "error": "Download failed"}
{"timestamp": "2025-11-14T18:48:41.033099Z", "level": "ERROR", "module": "retry", "message": "All 3 retry attempts failed for download_file", "error": "Failed to download file: Download failed"}
{"timestamp": "2025-11-14T18:48:48.168017Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job e1534e96-d3ae-4e38-96fb-f52202eeebd0: 'Mock' object is not subscriptable", "job_id": "e1534e96-d3ae-4e38-96fb-f52202eeebd0", "error": "'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:48:48.172130Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to get total cost for job e2108469-4064-4a38-965b-298550b976c8: 'Mock' object is not subscriptable", "job_id": "e2108469-4064-4a38-965b-298550b976c8", "error": "'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:48:48.174562Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to get total cost for job e1750874-aab1-4b65-850e-369d1fb39c8d: 'Mock' object is not subscriptable", "job_id": "e1750874-aab1-4b65-850e-369d1fb39c8d", "error": "'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:48:48.177594Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to get total cost for job 64ef0052-be1e-49fb-b6d1-55b97c98ae10: 'Mock' object is not subscriptable", "job_id": "64ef0052-be1e-49fb-b6d1-55b97c98ae10", "error": "'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:48:48.177681Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to check budget for job 64ef0052-be1e-49fb-b6d1-55b97c98ae10: Failed to get total cost: 'Mock' object is not subscriptable", "job_id": "64ef0052-be1e-49fb-b6d1-55b97c98ae10", "error": "Failed to get total cost: 'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:48:48.179979Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to get total cost for job 9b863ddd-7af4-4e0c-8c4e-2602940c98e1: 'Mock' object is not subscriptable", "job_id": "9b863ddd-7af4-4e0c-8c4e-2602940c98e1", "error": "'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:48:48.180048Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to check budget for job 9b863ddd-7af4-4e0c-8c4e-2602940c98e1: Failed to get total cost: 'Mock' object is not subscriptable", "job_id": "9b863ddd-7af4-4e0c-8c4e-2602940c98e1", "error": "Failed to get total cost: 'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:48:48.182554Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to get total cost for job 528acc9c-a62a-4cf3-9e7d-bfdee4d6d4de: 'Mock' object is not subscriptable", "job_id": "528acc9c-a62a-4cf3-9e7d-bfdee4d6d4de", "error": "'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:48:48.182643Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to enforce budget limit for job 528acc9c-a62a-4cf3-9e7d-bfdee4d6d4de: Failed to get total cost: 'Mock' object is not subscriptable", "job_id": "528acc9c-a62a-4cf3-9e7d-bfdee4d6d4de", "error": "Failed to get total cost: 'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:48:48.185218Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to get total cost for job 519a964e-b971-4ba5-b579-61c660333070: 'Mock' object is not subscriptable", "job_id": "519a964e-b971-4ba5-b579-61c660333070", "error": "'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:48:48.185281Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to enforce budget limit for job 519a964e-b971-4ba5-b579-61c660333070: Failed to get total cost: 'Mock' object is not subscriptable", "job_id": "519a964e-b971-4ba5-b579-61c660333070", "error": "Failed to get total cost: 'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:48:48.188229Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job aa72aec1-7bf4-416d-9ea7-a826e8e832f2: 'Mock' object is not subscriptable", "job_id": "aa72aec1-7bf4-416d-9ea7-a826e8e832f2", "error": "'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:48:48.190812Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job e9c73795-100f-43c2-9569-da8844c9465e: 'Mock' object is not subscriptable", "job_id": "e9c73795-100f-43c2-9569-da8844c9465e", "error": "'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:48:48.192671Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to get total cost for job 7b42a97e-1208-418c-9010-601c0e92daf5: 'Mock' object is not subscriptable", "job_id": "7b42a97e-1208-418c-9010-601c0e92daf5", "error": "'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:49:06.242483Z", "level": "INFO", "module": "test_logging", "message": "Test message", "key": "value"}
{"timestamp": "2025-11-14T18:49:06.243494Z", "level": "INFO", "module": "test_logging", "message": "Test message", "job_id": "32673bc2-02e9-4938-bc75-7a0dd46dbad7"}
{"timestamp": "2025-11-14T18:49:06.244336Z", "level": "INFO", "module": "test_logging", "message": "Test message"}
{"timestamp": "2025-11-14T18:49:06.245761Z", "level": "INFO", "module": "test_logging", "message": "Test message", "duration": 180, "status": "success", "count": 5}
{"timestamp": "2025-11-14T18:49:06.248175Z", "level": "ERROR", "module": "test_logging", "message": "Exception occurred", "exception": "Traceback (most recent call last):\n  File \"/Users/user/Desktop/Github/VideoGen/project/backend/shared/tests/test_logging.py\", line 130, in test_logger_includes_exception\n    raise ValueError(\"Test error\")\nValueError: Test error"}
{"timestamp": "2025-11-14T18:49:06.249369Z", "level": "WARNING", "module": "test_logging", "message": "Warning message"}
{"timestamp": "2025-11-14T18:49:06.249487Z", "level": "ERROR", "module": "test_logging", "message": "Error message"}
{"timestamp": "2025-11-14T18:49:06.250494Z", "level": "INFO", "module": "test_logging", "message": "Test message", "list": "[1, 2, 3]", "dict": "{'key': 'value'}", "uuid": "5f3a6f59-8b66-42bc-aa8c-ad9370883cc9"}
{"timestamp": "2025-11-14T18:49:06.288534Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/3 for retryable_function after 0.1s delay", "error": "Temporary failure", "attempt": 1}
{"timestamp": "2025-11-14T18:49:06.391681Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/3 for always_fails after 0.1s delay", "error": "Always fails", "attempt": 1}
{"timestamp": "2025-11-14T18:49:06.492207Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 2/3 for always_fails after 0.2s delay", "error": "Always fails", "attempt": 2}
{"timestamp": "2025-11-14T18:49:06.694224Z", "level": "ERROR", "module": "retry", "message": "All 3 retry attempts failed for always_fails", "error": "Always fails"}
{"timestamp": "2025-11-14T18:49:06.698577Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/3 for track_timing after 0.1s delay", "error": "Retry", "attempt": 1}
{"timestamp": "2025-11-14T18:49:06.800731Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 2/3 for track_timing after 0.2s delay", "error": "Retry", "attempt": 2}
{"timestamp": "2025-11-14T18:49:07.004625Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in non_retryable_error: Non-retryable", "error": "Non-retryable"}
{"timestamp": "2025-11-14T18:49:07.006668Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/3 for custom_retryable after 0.1s delay", "error": "Connection failed", "attempt": 1}
{"timestamp": "2025-11-14T18:49:07.109575Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/3 for sync_function after 0.1s delay", "error": "Retry", "attempt": 1}
{"timestamp": "2025-11-14T18:49:07.219455Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/2 for logged_function after 0.1s delay", "error": "Retry", "attempt": 1}
{"timestamp": "2025-11-14T18:49:07.321349Z", "level": "ERROR", "module": "retry", "message": "All 2 retry attempts failed for logged_function", "error": "Retry"}
{"timestamp": "2025-11-14T18:49:07.333828Z", "level": "INFO", "module": "storage", "message": "Uploaded file to audio-uploads/test/path.mp3", "bucket": "audio-uploads", "path": "test/path.mp3", "size": 17}
{"timestamp": "2025-11-14T18:49:07.340081Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in upload_file: File size (11.00 MB) exceeds maximum of 10.00 MB for bucket audio-uploads", "error": "File size (11.00 MB) exceeds maximum of 10.00 MB for bucket audio-uploads"}
{"timestamp": "2025-11-14T18:49:07.344036Z", "level": "INFO", "module": "storage", "message": "Uploaded file to audio-uploads/test/path.mp3", "bucket": "audio-uploads", "path": "test/path.mp3", "size": 12}
{"timestamp": "2025-11-14T18:49:07.346530Z", "level": "INFO", "module": "storage", "message": "Downloaded file from audio-uploads/test/path.mp3", "bucket": "audio-uploads", "path": "test/path.mp3"}
{"timestamp": "2025-11-14T18:49:07.348913Z", "level": "INFO", "module": "storage", "message": "Generated signed URL for video-outputs/test/path.mp3", "bucket": "video-outputs", "path": "test/path.mp3", "expires_in": 3600}
{"timestamp": "2025-11-14T18:49:07.351401Z", "level": "INFO", "module": "storage", "message": "Generated signed URL for video-outputs/test/path.mp3", "bucket": "video-outputs", "path": "test/path.mp3", "expires_in": 3600}
{"timestamp": "2025-11-14T18:49:07.353609Z", "level": "INFO", "module": "storage", "message": "Deleted file from video-clips/test/path.mp4", "bucket": "video-clips", "path": "test/path.mp4"}
{"timestamp": "2025-11-14T18:49:07.355699Z", "level": "ERROR", "module": "storage", "message": "Failed to upload file to audio-uploads/test/path.mp3: Upload failed", "bucket": "audio-uploads", "path": "test/path.mp3", "error": "Upload failed"}
{"timestamp": "2025-11-14T18:49:07.355779Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/3 for upload_file after 2s delay", "error": "Failed to upload file: Upload failed", "attempt": 1}
{"timestamp": "2025-11-14T18:49:09.357682Z", "level": "ERROR", "module": "storage", "message": "Failed to upload file to audio-uploads/test/path.mp3: Upload failed", "bucket": "audio-uploads", "path": "test/path.mp3", "error": "Upload failed"}
{"timestamp": "2025-11-14T18:49:09.358247Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 2/3 for upload_file after 4s delay", "error": "Failed to upload file: Upload failed", "attempt": 2}
{"timestamp": "2025-11-14T18:49:13.359928Z", "level": "ERROR", "module": "storage", "message": "Failed to upload file to audio-uploads/test/path.mp3: Upload failed", "bucket": "audio-uploads", "path": "test/path.mp3", "error": "Upload failed"}
{"timestamp": "2025-11-14T18:49:13.360124Z", "level": "ERROR", "module": "retry", "message": "All 3 retry attempts failed for upload_file", "error": "Failed to upload file: Upload failed"}
{"timestamp": "2025-11-14T18:49:13.364839Z", "level": "ERROR", "module": "storage", "message": "Failed to download file from audio-uploads/test/path.mp3: Download failed", "bucket": "audio-uploads", "path": "test/path.mp3", "error": "Download failed"}
{"timestamp": "2025-11-14T18:49:13.364966Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/3 for download_file after 2s delay", "error": "Failed to download file: Download failed", "attempt": 1}
{"timestamp": "2025-11-14T18:49:15.366176Z", "level": "ERROR", "module": "storage", "message": "Failed to download file from audio-uploads/test/path.mp3: Download failed", "bucket": "audio-uploads", "path": "test/path.mp3", "error": "Download failed"}
{"timestamp": "2025-11-14T18:49:15.366632Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 2/3 for download_file after 4s delay", "error": "Failed to download file: Download failed", "attempt": 2}
{"timestamp": "2025-11-14T18:49:16.441840Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job 20edfb01-02a1-4588-8c3b-c430d6bac30a: 'Mock' object is not subscriptable", "job_id": "20edfb01-02a1-4588-8c3b-c430d6bac30a", "error": "'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:49:16.445645Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to get total cost for job e2b3112b-4025-49af-9ede-b18e4f0bc805: 'Mock' object is not subscriptable", "job_id": "e2b3112b-4025-49af-9ede-b18e4f0bc805", "error": "'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:49:16.447716Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to get total cost for job ad665831-4cfa-4d73-b894-0785a35e3e2c: 'Mock' object is not subscriptable", "job_id": "ad665831-4cfa-4d73-b894-0785a35e3e2c", "error": "'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:49:16.449983Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to get total cost for job 4e8c59d6-1cb8-44a9-80c3-6ecc24238416: 'Mock' object is not subscriptable", "job_id": "4e8c59d6-1cb8-44a9-80c3-6ecc24238416", "error": "'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:49:16.450051Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to check budget for job 4e8c59d6-1cb8-44a9-80c3-6ecc24238416: Failed to get total cost: 'Mock' object is not subscriptable", "job_id": "4e8c59d6-1cb8-44a9-80c3-6ecc24238416", "error": "Failed to get total cost: 'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:49:16.452348Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to get total cost for job fbde3783-a8c9-4e5b-bdbd-3cf706a943c0: 'Mock' object is not subscriptable", "job_id": "fbde3783-a8c9-4e5b-bdbd-3cf706a943c0", "error": "'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:49:16.452402Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to check budget for job fbde3783-a8c9-4e5b-bdbd-3cf706a943c0: Failed to get total cost: 'Mock' object is not subscriptable", "job_id": "fbde3783-a8c9-4e5b-bdbd-3cf706a943c0", "error": "Failed to get total cost: 'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:49:16.454412Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to get total cost for job e3fa820a-e209-4db1-9d37-adbba764cfd5: 'Mock' object is not subscriptable", "job_id": "e3fa820a-e209-4db1-9d37-adbba764cfd5", "error": "'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:49:16.454466Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to enforce budget limit for job e3fa820a-e209-4db1-9d37-adbba764cfd5: Failed to get total cost: 'Mock' object is not subscriptable", "job_id": "e3fa820a-e209-4db1-9d37-adbba764cfd5", "error": "Failed to get total cost: 'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:49:16.456632Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to get total cost for job b5224c0e-a2be-47b0-9561-c8f8b7e09f3d: 'Mock' object is not subscriptable", "job_id": "b5224c0e-a2be-47b0-9561-c8f8b7e09f3d", "error": "'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:49:16.456696Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to enforce budget limit for job b5224c0e-a2be-47b0-9561-c8f8b7e09f3d: Failed to get total cost: 'Mock' object is not subscriptable", "job_id": "b5224c0e-a2be-47b0-9561-c8f8b7e09f3d", "error": "Failed to get total cost: 'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:49:16.459732Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job 0cdca134-1fc0-4e79-be3b-9f14595f6eed: 'Mock' object is not subscriptable", "job_id": "0cdca134-1fc0-4e79-be3b-9f14595f6eed", "error": "'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:49:16.461956Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job 99549829-e49e-4e32-af21-b9cac80c617c: 'Mock' object is not subscriptable", "job_id": "99549829-e49e-4e32-af21-b9cac80c617c", "error": "'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:49:16.463368Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to get total cost for job 57ecf51c-1c45-415e-9fcd-56c8587b0985: 'Mock' object is not subscriptable", "job_id": "57ecf51c-1c45-415e-9fcd-56c8587b0985", "error": "'Mock' object is not subscriptable"}
{"timestamp": "2025-11-14T18:49:19.368065Z", "level": "ERROR", "module": "storage", "message": "Failed to download file from audio-uploads/test/path.mp3: Download failed", "bucket": "audio-uploads", "path": "test/path.mp3", "error": "Download failed"}
{"timestamp": "2025-11-14T18:49:19.368210Z", "level": "ERROR", "module": "retry", "message": "All 3 retry attempts failed for download_file", "error": "Failed to download file: Download failed"}
{"timestamp": "2025-11-14T18:49:34.496862Z", "level": "INFO", "module": "test_logging", "message": "Test message", "key": "value"}
{"timestamp": "2025-11-14T18:49:34.497604Z", "level": "INFO", "module": "test_logging", "message": "Test message", "job_id": "0c2e6aa3-42fa-491b-b736-80e584dd4840"}
{"timestamp": "2025-11-14T18:49:34.498226Z", "level": "INFO", "module": "test_logging", "message": "Test message"}
{"timestamp": "2025-11-14T18:49:34.499664Z", "level": "INFO", "module": "test_logging", "message": "Test message", "duration": 180, "status": "success", "count": 5}
{"timestamp": "2025-11-14T18:49:34.502330Z", "level": "ERROR", "module": "test_logging", "message": "Exception occurred", "exception": "Traceback (most recent call last):\n  File \"/Users/user/Desktop/Github/VideoGen/project/backend/shared/tests/test_logging.py\", line 130, in test_logger_includes_exception\n    raise ValueError(\"Test error\")\nValueError: Test error"}
{"timestamp": "2025-11-14T18:49:34.503214Z", "level": "WARNING", "module": "test_logging", "message": "Warning message"}
{"timestamp": "2025-11-14T18:49:34.503271Z", "level": "ERROR", "module": "test_logging", "message": "Error message"}
{"timestamp": "2025-11-14T18:49:34.503875Z", "level": "INFO", "module": "test_logging", "message": "Test message", "list": "[1, 2, 3]", "dict": "{'key': 'value'}", "uuid": "6bb60519-7a79-49c2-b3ab-3d8a34e78cf5"}
{"timestamp": "2025-11-14T18:49:34.541265Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/3 for retryable_function after 0.1s delay", "error": "Temporary failure", "attempt": 1}
{"timestamp": "2025-11-14T18:49:34.644287Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/3 for always_fails after 0.1s delay", "error": "Always fails", "attempt": 1}
{"timestamp": "2025-11-14T18:49:34.745550Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 2/3 for always_fails after 0.2s delay", "error": "Always fails", "attempt": 2}
{"timestamp": "2025-11-14T18:49:34.946878Z", "level": "ERROR", "module": "retry", "message": "All 3 retry attempts failed for always_fails", "error": "Always fails"}
{"timestamp": "2025-11-14T18:49:34.948089Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/3 for track_timing after 0.1s delay", "error": "Retry", "attempt": 1}
{"timestamp": "2025-11-14T18:49:35.049494Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 2/3 for track_timing after 0.2s delay", "error": "Retry", "attempt": 2}
{"timestamp": "2025-11-14T18:49:35.251696Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in non_retryable_error: Non-retryable", "error": "Non-retryable"}
{"timestamp": "2025-11-14T18:49:35.252488Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/3 for custom_retryable after 0.1s delay", "error": "Connection failed", "attempt": 1}
{"timestamp": "2025-11-14T18:49:35.354513Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/3 for sync_function after 0.1s delay", "error": "Retry", "attempt": 1}
{"timestamp": "2025-11-14T18:49:35.459037Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/2 for logged_function after 0.1s delay", "error": "Retry", "attempt": 1}
{"timestamp": "2025-11-14T18:49:35.560231Z", "level": "ERROR", "module": "retry", "message": "All 2 retry attempts failed for logged_function", "error": "Retry"}
{"timestamp": "2025-11-14T18:49:35.564586Z", "level": "INFO", "module": "storage", "message": "Uploaded file to audio-uploads/test/path.mp3", "bucket": "audio-uploads", "path": "test/path.mp3", "size": 17}
{"timestamp": "2025-11-14T18:49:35.568102Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in upload_file: File size (11.00 MB) exceeds maximum of 10.00 MB for bucket audio-uploads", "error": "File size (11.00 MB) exceeds maximum of 10.00 MB for bucket audio-uploads"}
{"timestamp": "2025-11-14T18:49:35.569889Z", "level": "INFO", "module": "storage", "message": "Uploaded file to audio-uploads/test/path.mp3", "bucket": "audio-uploads", "path": "test/path.mp3", "size": 12}
{"timestamp": "2025-11-14T18:49:35.571432Z", "level": "INFO", "module": "storage", "message": "Downloaded file from audio-uploads/test/path.mp3", "bucket": "audio-uploads", "path": "test/path.mp3"}
{"timestamp": "2025-11-14T18:49:35.572887Z", "level": "INFO", "module": "storage", "message": "Generated signed URL for video-outputs/test/path.mp3", "bucket": "video-outputs", "path": "test/path.mp3", "expires_in": 3600}
{"timestamp": "2025-11-14T18:49:35.574574Z", "level": "INFO", "module": "storage", "message": "Generated signed URL for video-outputs/test/path.mp3", "bucket": "video-outputs", "path": "test/path.mp3", "expires_in": 3600}
{"timestamp": "2025-11-14T18:49:35.576257Z", "level": "INFO", "module": "storage", "message": "Deleted file from video-clips/test/path.mp4", "bucket": "video-clips", "path": "test/path.mp4"}
{"timestamp": "2025-11-14T18:49:35.577762Z", "level": "ERROR", "module": "storage", "message": "Failed to upload file to audio-uploads/test/path.mp3: Upload failed", "bucket": "audio-uploads", "path": "test/path.mp3", "error": "Upload failed"}
{"timestamp": "2025-11-14T18:49:35.577823Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/3 for upload_file after 2s delay", "error": "Failed to upload file: Upload failed", "attempt": 1}
{"timestamp": "2025-11-14T18:49:37.579100Z", "level": "ERROR", "module": "storage", "message": "Failed to upload file to audio-uploads/test/path.mp3: Upload failed", "bucket": "audio-uploads", "path": "test/path.mp3", "error": "Upload failed"}
{"timestamp": "2025-11-14T18:49:37.579178Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 2/3 for upload_file after 4s delay", "error": "Failed to upload file: Upload failed", "attempt": 2}
{"timestamp": "2025-11-14T18:49:41.580421Z", "level": "ERROR", "module": "storage", "message": "Failed to upload file to audio-uploads/test/path.mp3: Upload failed", "bucket": "audio-uploads", "path": "test/path.mp3", "error": "Upload failed"}
{"timestamp": "2025-11-14T18:49:41.580506Z", "level": "ERROR", "module": "retry", "message": "All 3 retry attempts failed for upload_file", "error": "Failed to upload file: Upload failed"}
{"timestamp": "2025-11-14T18:49:41.584948Z", "level": "ERROR", "module": "storage", "message": "Failed to download file from audio-uploads/test/path.mp3: Download failed", "bucket": "audio-uploads", "path": "test/path.mp3", "error": "Download failed"}
{"timestamp": "2025-11-14T18:49:41.585034Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/3 for download_file after 2s delay", "error": "Failed to download file: Download failed", "attempt": 1}
{"timestamp": "2025-11-14T18:49:43.586664Z", "level": "ERROR", "module": "storage", "message": "Failed to download file from audio-uploads/test/path.mp3: Download failed", "bucket": "audio-uploads", "path": "test/path.mp3", "error": "Download failed"}
{"timestamp": "2025-11-14T18:49:43.586880Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 2/3 for download_file after 4s delay", "error": "Failed to download file: Download failed", "attempt": 2}
{"timestamp": "2025-11-14T18:49:47.588491Z", "level": "ERROR", "module": "storage", "message": "Failed to download file from audio-uploads/test/path.mp3: Download failed", "bucket": "audio-uploads", "path": "test/path.mp3", "error": "Download failed"}
{"timestamp": "2025-11-14T18:49:47.588650Z", "level": "ERROR", "module": "retry", "message": "All 3 retry attempts failed for download_file", "error": "Failed to download file: Download failed"}
{"timestamp": "2025-11-14T21:48:09.181520Z", "level": "WARNING", "module": "beat_detection", "message": "aubio not available, using librosa onset detection as fallback", "taskName": null}
{"timestamp": "2025-11-14T21:48:33.804191Z", "level": "WARNING", "module": "beat_detection", "message": "aubio not available, using librosa onset detection as fallback", "taskName": null}
{"timestamp": "2025-11-14T21:48:50.172315Z", "level": "WARNING", "module": "beat_detection", "message": "BPM 0.00 outside valid range [60, 200], using default 120 BPM", "taskName": null}
{"timestamp": "2025-11-14T21:48:50.172665Z", "level": "WARNING", "module": "beat_detection", "message": "Low confidence (0.50) in beat detection, using tempo-based boundaries", "taskName": null}
{"timestamp": "2025-11-14T21:48:50.177831Z", "level": "WARNING", "module": "beat_detection", "message": "BPM 0.00 outside valid range [60, 200], using default 120 BPM", "taskName": null}
{"timestamp": "2025-11-14T21:48:50.177911Z", "level": "WARNING", "module": "beat_detection", "message": "Low confidence (0.50) in beat detection, using tempo-based boundaries", "taskName": null}
{"timestamp": "2025-11-14T21:48:50.183275Z", "level": "WARNING", "module": "beat_detection", "message": "BPM 0.00 outside valid range [60, 200], using default 120 BPM", "taskName": null}
{"timestamp": "2025-11-14T21:48:50.183341Z", "level": "WARNING", "module": "beat_detection", "message": "Low confidence (0.50) in beat detection, using tempo-based boundaries", "taskName": null}
{"timestamp": "2025-11-14T21:48:50.188023Z", "level": "WARNING", "module": "beat_detection", "message": "BPM 0.00 outside valid range [60, 200], using default 120 BPM", "taskName": null}
{"timestamp": "2025-11-14T21:48:50.188097Z", "level": "WARNING", "module": "beat_detection", "message": "Low confidence (0.50) in beat detection, using tempo-based boundaries", "taskName": null}
{"timestamp": "2025-11-14T21:48:50.190894Z", "level": "WARNING", "module": "beat_detection", "message": "BPM 0.00 outside valid range [60, 200], using default 120 BPM", "taskName": null}
{"timestamp": "2025-11-14T21:48:50.190951Z", "level": "WARNING", "module": "beat_detection", "message": "Low confidence (0.50) in beat detection, using tempo-based boundaries", "taskName": null}
{"timestamp": "2025-11-14T21:48:50.193966Z", "level": "WARNING", "module": "boundaries", "message": "Only 2 boundaries generated, need 3. Regenerating with reduced duration per clip.", "taskName": null}
{"timestamp": "2025-11-14T21:48:50.194164Z", "level": "INFO", "module": "boundaries", "message": "Generated 3 clip boundaries", "taskName": null}
{"timestamp": "2025-11-14T21:48:50.194864Z", "level": "WARNING", "module": "boundaries", "message": "Only 2 boundaries generated, need 3. Regenerating with reduced duration per clip.", "taskName": null}
{"timestamp": "2025-11-14T21:48:50.194955Z", "level": "INFO", "module": "boundaries", "message": "Generated 3 clip boundaries", "taskName": null}
{"timestamp": "2025-11-14T21:48:50.195541Z", "level": "INFO", "module": "boundaries", "message": "Generated 5 clip boundaries", "taskName": null}
{"timestamp": "2025-11-14T21:48:50.196043Z", "level": "WARNING", "module": "boundaries", "message": "Only 1 boundaries generated, need 3. Regenerating with reduced duration per clip.", "taskName": null}
{"timestamp": "2025-11-14T21:48:50.196122Z", "level": "INFO", "module": "boundaries", "message": "Generated 3 clip boundaries", "taskName": null}
{"timestamp": "2025-11-14T21:48:50.196628Z", "level": "WARNING", "module": "boundaries", "message": "No beat timestamps available, generating uniform boundaries", "taskName": null}
{"timestamp": "2025-11-14T21:48:50.197114Z", "level": "WARNING", "module": "boundaries", "message": "Only 0 boundaries generated, need 3. Regenerating with reduced duration per clip.", "taskName": null}
{"timestamp": "2025-11-14T21:48:50.197194Z", "level": "INFO", "module": "boundaries", "message": "Generated 3 clip boundaries", "taskName": null}
{"timestamp": "2025-11-14T21:48:50.198916Z", "level": "INFO", "module": "boundaries", "message": "Generated 25 clip boundaries", "taskName": null}
{"timestamp": "2025-11-14T21:48:50.199412Z", "level": "WARNING", "module": "boundaries", "message": "Only 2 boundaries generated, need 3. Regenerating with reduced duration per clip.", "taskName": null}
{"timestamp": "2025-11-14T21:48:50.199498Z", "level": "INFO", "module": "boundaries", "message": "Generated 3 clip boundaries", "taskName": null}
{"timestamp": "2025-11-14T21:48:50.787931Z", "level": "INFO", "module": "cache", "message": "Stored analysis in Redis cache: test_hash_12345", "taskName": "Task-1"}
{"timestamp": "2025-11-14T21:48:50.811056Z", "level": "WARNING", "module": "cache", "message": "Failed to store cached analysis: 'AsyncTableQueryBuilder' object has no attribute 'upsert'", "taskName": "Task-1", "file_hash": "test_hash_12345", "error": "'AsyncTableQueryBuilder' object has no attribute 'upsert'"}
{"timestamp": "2025-11-14T21:48:50.925950Z", "level": "INFO", "module": "cache", "message": "Cache hit for file hash: test_hash_12345", "taskName": "Task-1"}
{"timestamp": "2025-11-14T21:48:50.934969Z", "level": "WARNING", "module": "cache", "message": "Failed to get cached analysis: Failed to get JSON from Redis: Failed to get Redis key: Event loop is closed", "taskName": "Task-4", "file_hash": "nonexistent_hash"}
{"timestamp": "2025-11-14T21:48:51.416484Z", "level": "INFO", "module": "cache", "message": "Stored analysis in Redis cache: test_serialization", "taskName": "Task-7"}
{"timestamp": "2025-11-14T21:48:51.416815Z", "level": "WARNING", "module": "cache", "message": "Failed to store cached analysis: 'AsyncTableQueryBuilder' object has no attribute 'upsert'", "taskName": "Task-7", "file_hash": "test_serialization", "error": "'AsyncTableQueryBuilder' object has no attribute 'upsert'"}
{"timestamp": "2025-11-14T21:48:51.536029Z", "level": "INFO", "module": "cache", "message": "Cache hit for file hash: test_serialization", "taskName": "Task-7"}
{"timestamp": "2025-11-14T21:48:51.542331Z", "level": "WARNING", "module": "cache", "message": "Failed to store cached analysis: Failed to set JSON in Redis: Failed to set Redis key: Event loop is closed", "taskName": "Task-10", "file_hash": "test_ttl", "error": "Failed to set JSON in Redis: Failed to set Redis key: Event loop is closed"}
{"timestamp": "2025-11-14T21:48:52.004781Z", "level": "INFO", "module": "cache", "message": "Cache hit for file hash: test_ttl", "taskName": "Task-10"}
{"timestamp": "2025-11-14T21:48:52.035020Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=energetic, secondary=dark, energy=high, confidence=0.93", "taskName": null}
{"timestamp": "2025-11-14T21:48:52.054378Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=dark, secondary=calm, energy=low, confidence=0.83", "taskName": null}
{"timestamp": "2025-11-14T21:48:52.074241Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=dark, secondary=calm, energy=high, confidence=0.77", "taskName": null}
{"timestamp": "2025-11-14T21:48:52.088193Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=energetic, secondary=None, energy=high, confidence=0.73", "taskName": null}
{"timestamp": "2025-11-14T21:48:52.095842Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=dark, secondary=energetic, energy=high, confidence=0.77", "taskName": null}
{"timestamp": "2025-11-14T21:48:52.102668Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=dark, secondary=energetic, energy=high, confidence=0.77", "taskName": null}
{"timestamp": "2025-11-14T21:48:52.103464Z", "level": "ERROR", "module": "mood_classifier", "message": "Mood classification failed: can't extend empty axis 0 using modes other than 'constant' or 'empty'", "taskName": null}
{"timestamp": "2025-11-14T21:48:52.106836Z", "level": "INFO", "module": "parser", "message": "Loading audio file for job b78d040e-9f89-4fec-945d-89c99244325a", "job_id": "b78d040e-9f89-4fec-945d-89c99244325a", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:48:52.773642Z", "level": "INFO", "module": "parser", "message": "Audio loaded: duration=10.00s, sample_rate=22050 Hz", "job_id": "b78d040e-9f89-4fec-945d-89c99244325a", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:48:52.773764Z", "level": "INFO", "module": "parser", "message": "Detecting beats...", "job_id": "b78d040e-9f89-4fec-945d-89c99244325a", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:48:52.785205Z", "level": "WARNING", "module": "beat_detection", "message": "BPM 0.00 outside valid range [60, 200], using default 120 BPM", "job_id": "b78d040e-9f89-4fec-945d-89c99244325a", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:48:52.785296Z", "level": "WARNING", "module": "beat_detection", "message": "Low confidence (0.50) in beat detection, using tempo-based boundaries", "job_id": "b78d040e-9f89-4fec-945d-89c99244325a", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:48:52.785362Z", "level": "INFO", "module": "parser", "message": "Beat detection complete: BPM=120.00, beats=20, confidence=0.50", "job_id": "b78d040e-9f89-4fec-945d-89c99244325a", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:48:52.785418Z", "level": "INFO", "module": "parser", "message": "Analyzing song structure...", "job_id": "b78d040e-9f89-4fec-945d-89c99244325a", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:48:53.360930Z", "level": "INFO", "module": "structure_analysis", "message": "Structure analysis complete: 122 segments", "job_id": "b78d040e-9f89-4fec-945d-89c99244325a", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:48:53.361030Z", "level": "INFO", "module": "parser", "message": "Structure analysis complete: 122 segments", "job_id": "b78d040e-9f89-4fec-945d-89c99244325a", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:48:53.361095Z", "level": "INFO", "module": "parser", "message": "Extracting lyrics...", "job_id": "b78d040e-9f89-4fec-945d-89c99244325a", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:48:53.361598Z", "level": "INFO", "module": "whisper_client", "message": "Created temporary audio file: /var/folders/d5/vzgmwykd2jsbxfy1k60z4ds00000gq/T/tmpuc0gqaxi.mp3", "job_id": "b78d040e-9f89-4fec-945d-89c99244325a", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:48:54.591197Z", "level": "INFO", "module": "whisper_client", "message": "Whisper API response received: 1 words", "job_id": "b78d040e-9f89-4fec-945d-89c99244325a", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:48:54.591455Z", "level": "ERROR", "module": "whisper_client", "message": "Whisper API call failed: 'TranscriptionWord' object has no attribute 'get'", "job_id": "b78d040e-9f89-4fec-945d-89c99244325a", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:48:54.591897Z", "level": "WARNING", "module": "whisper_client", "message": "Whisper API call failed after retries: Failed to extract lyrics: 'TranscriptionWord' object has no attribute 'get', returning empty lyrics", "job_id": "b78d040e-9f89-4fec-945d-89c99244325a", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:48:54.592084Z", "level": "INFO", "module": "parser", "message": "Lyrics extraction complete: 0 words", "job_id": "b78d040e-9f89-4fec-945d-89c99244325a", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:48:54.592198Z", "level": "INFO", "module": "parser", "message": "Classifying mood...", "job_id": "b78d040e-9f89-4fec-945d-89c99244325a", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:48:54.613265Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=dark, secondary=energetic, energy=high, confidence=0.77", "job_id": "b78d040e-9f89-4fec-945d-89c99244325a", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:48:54.613440Z", "level": "INFO", "module": "parser", "message": "Mood classification complete: dark, confidence=0.77", "job_id": "b78d040e-9f89-4fec-945d-89c99244325a", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:48:54.613538Z", "level": "INFO", "module": "parser", "message": "Generating clip boundaries...", "job_id": "b78d040e-9f89-4fec-945d-89c99244325a", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:48:54.613687Z", "level": "WARNING", "module": "boundaries", "message": "Only 2 boundaries generated, need 3. Regenerating with reduced duration per clip.", "job_id": "b78d040e-9f89-4fec-945d-89c99244325a", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:48:54.613901Z", "level": "INFO", "module": "boundaries", "message": "Generated 3 clip boundaries", "job_id": "b78d040e-9f89-4fec-945d-89c99244325a", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:48:54.614000Z", "level": "INFO", "module": "parser", "message": "Boundary generation complete: 3 boundaries", "job_id": "b78d040e-9f89-4fec-945d-89c99244325a", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:48:54.614252Z", "level": "INFO", "module": "parser", "message": "Audio analysis complete for job b78d040e-9f89-4fec-945d-89c99244325a: duration=10.00s, processing_time=2.51s, beats=20, segments=122, lyrics=0, boundaries=3", "job_id": "b78d040e-9f89-4fec-945d-89c99244325a", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:48:54.623952Z", "level": "INFO", "module": "parser", "message": "Loading audio file for job 4af8d82f-1ba1-4613-84cf-cadf4b39aa2a", "job_id": "4af8d82f-1ba1-4613-84cf-cadf4b39aa2a", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:48:54.624923Z", "level": "INFO", "module": "parser", "message": "Audio loaded: duration=10.00s, sample_rate=22050 Hz", "job_id": "4af8d82f-1ba1-4613-84cf-cadf4b39aa2a", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:48:54.625004Z", "level": "INFO", "module": "parser", "message": "Detecting beats...", "job_id": "4af8d82f-1ba1-4613-84cf-cadf4b39aa2a", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:48:54.636661Z", "level": "WARNING", "module": "beat_detection", "message": "BPM 0.00 outside valid range [60, 200], using default 120 BPM", "job_id": "4af8d82f-1ba1-4613-84cf-cadf4b39aa2a", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:48:54.636761Z", "level": "WARNING", "module": "beat_detection", "message": "Low confidence (0.50) in beat detection, using tempo-based boundaries", "job_id": "4af8d82f-1ba1-4613-84cf-cadf4b39aa2a", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:48:54.636843Z", "level": "INFO", "module": "parser", "message": "Beat detection complete: BPM=120.00, beats=20, confidence=0.50", "job_id": "4af8d82f-1ba1-4613-84cf-cadf4b39aa2a", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:48:54.636911Z", "level": "INFO", "module": "parser", "message": "Analyzing song structure...", "job_id": "4af8d82f-1ba1-4613-84cf-cadf4b39aa2a", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:48:54.685103Z", "level": "INFO", "module": "structure_analysis", "message": "Structure analysis complete: 122 segments", "job_id": "4af8d82f-1ba1-4613-84cf-cadf4b39aa2a", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:48:54.685188Z", "level": "INFO", "module": "parser", "message": "Structure analysis complete: 122 segments", "job_id": "4af8d82f-1ba1-4613-84cf-cadf4b39aa2a", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:48:54.685241Z", "level": "INFO", "module": "parser", "message": "Extracting lyrics...", "job_id": "4af8d82f-1ba1-4613-84cf-cadf4b39aa2a", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:48:54.685648Z", "level": "INFO", "module": "whisper_client", "message": "Created temporary audio file: /var/folders/d5/vzgmwykd2jsbxfy1k60z4ds00000gq/T/tmpbxvbvv5t.mp3", "job_id": "4af8d82f-1ba1-4613-84cf-cadf4b39aa2a", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:48:55.657196Z", "level": "INFO", "module": "whisper_client", "message": "Whisper API response received: 1 words", "job_id": "4af8d82f-1ba1-4613-84cf-cadf4b39aa2a", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:48:55.658136Z", "level": "ERROR", "module": "whisper_client", "message": "Whisper API call failed: 'TranscriptionWord' object has no attribute 'get'", "job_id": "4af8d82f-1ba1-4613-84cf-cadf4b39aa2a", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:48:55.658874Z", "level": "WARNING", "module": "whisper_client", "message": "Whisper API call failed after retries: Failed to extract lyrics: 'TranscriptionWord' object has no attribute 'get', returning empty lyrics", "job_id": "4af8d82f-1ba1-4613-84cf-cadf4b39aa2a", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:48:55.659050Z", "level": "INFO", "module": "parser", "message": "Lyrics extraction complete: 0 words", "job_id": "4af8d82f-1ba1-4613-84cf-cadf4b39aa2a", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:48:55.659199Z", "level": "INFO", "module": "parser", "message": "Classifying mood...", "job_id": "4af8d82f-1ba1-4613-84cf-cadf4b39aa2a", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:48:55.680519Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=dark, secondary=energetic, energy=high, confidence=0.77", "job_id": "4af8d82f-1ba1-4613-84cf-cadf4b39aa2a", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:48:55.680668Z", "level": "INFO", "module": "parser", "message": "Mood classification complete: dark, confidence=0.77", "job_id": "4af8d82f-1ba1-4613-84cf-cadf4b39aa2a", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:48:55.680752Z", "level": "INFO", "module": "parser", "message": "Generating clip boundaries...", "job_id": "4af8d82f-1ba1-4613-84cf-cadf4b39aa2a", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:48:55.680868Z", "level": "WARNING", "module": "boundaries", "message": "Only 2 boundaries generated, need 3. Regenerating with reduced duration per clip.", "job_id": "4af8d82f-1ba1-4613-84cf-cadf4b39aa2a", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:48:55.681007Z", "level": "INFO", "module": "boundaries", "message": "Generated 3 clip boundaries", "job_id": "4af8d82f-1ba1-4613-84cf-cadf4b39aa2a", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:48:55.681086Z", "level": "INFO", "module": "parser", "message": "Boundary generation complete: 3 boundaries", "job_id": "4af8d82f-1ba1-4613-84cf-cadf4b39aa2a", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:48:55.681181Z", "level": "INFO", "module": "parser", "message": "Audio analysis complete for job 4af8d82f-1ba1-4613-84cf-cadf4b39aa2a: duration=10.00s, processing_time=1.06s, beats=20, segments=122, lyrics=0, boundaries=3", "job_id": "4af8d82f-1ba1-4613-84cf-cadf4b39aa2a", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:48:55.684663Z", "level": "INFO", "module": "parser", "message": "Loading audio file for job fe124e63-a17e-4f5d-8d95-981469fa4e9b", "job_id": "fe124e63-a17e-4f5d-8d95-981469fa4e9b", "taskName": "Task-19"}
{"timestamp": "2025-11-14T21:48:55.684971Z", "level": "ERROR", "module": "parser", "message": "Audio parsing failed for job fe124e63-a17e-4f5d-8d95-981469fa4e9b: Error opening <_io.BytesIO object at 0x11def00e0>: Format not recognised.", "job_id": "fe124e63-a17e-4f5d-8d95-981469fa4e9b", "taskName": "Task-19"}
{"timestamp": "2025-11-14T21:48:55.686672Z", "level": "INFO", "module": "parser", "message": "Loading audio file for job 3e104f69-f617-4754-98c9-a772e6cfa529", "job_id": "3e104f69-f617-4754-98c9-a772e6cfa529", "taskName": "Task-22"}
{"timestamp": "2025-11-14T21:48:55.686827Z", "level": "ERROR", "module": "parser", "message": "Audio parsing failed for job 3e104f69-f617-4754-98c9-a772e6cfa529: Error opening <_io.BytesIO object at 0x11def02c0>: Format not recognised.", "job_id": "3e104f69-f617-4754-98c9-a772e6cfa529", "taskName": "Task-22"}
{"timestamp": "2025-11-14T21:48:55.688801Z", "level": "INFO", "module": "main", "message": "Starting audio analysis for job None, audio_url=test_url", "taskName": "Task-25"}
{"timestamp": "2025-11-14T21:48:55.690004Z", "level": "INFO", "module": "main", "message": "Starting audio analysis for job 84e0a42b-9470-42d1-9888-7dec1ece7614, audio_url=None", "job_id": "84e0a42b-9470-42d1-9888-7dec1ece7614", "taskName": "Task-28"}
{"timestamp": "2025-11-14T21:48:55.693684Z", "level": "INFO", "module": "parser", "message": "Loading audio file for job 3505424a-0659-4cb0-bd74-b99dc440ec48", "job_id": "3505424a-0659-4cb0-bd74-b99dc440ec48", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:48:55.694401Z", "level": "INFO", "module": "parser", "message": "Audio loaded: duration=5.00s, sample_rate=22050 Hz", "job_id": "3505424a-0659-4cb0-bd74-b99dc440ec48", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:48:55.694496Z", "level": "INFO", "module": "parser", "message": "Detecting beats...", "job_id": "3505424a-0659-4cb0-bd74-b99dc440ec48", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:48:55.700635Z", "level": "ERROR", "module": "beat_detection", "message": "Beat detection failed: unsupported format string passed to numpy.ndarray.__format__", "job_id": "3505424a-0659-4cb0-bd74-b99dc440ec48", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:48:55.700726Z", "level": "WARNING", "module": "beat_detection", "message": "Using fallback tempo-based beats: BPM=120.0, beats=10", "job_id": "3505424a-0659-4cb0-bd74-b99dc440ec48", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:48:55.700801Z", "level": "INFO", "module": "parser", "message": "Beat detection complete: BPM=120.00, beats=10, confidence=0.50", "job_id": "3505424a-0659-4cb0-bd74-b99dc440ec48", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:48:55.700867Z", "level": "INFO", "module": "parser", "message": "Analyzing song structure...", "job_id": "3505424a-0659-4cb0-bd74-b99dc440ec48", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:48:55.716595Z", "level": "INFO", "module": "structure_analysis", "message": "Structure analysis complete: 10 segments", "job_id": "3505424a-0659-4cb0-bd74-b99dc440ec48", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:48:55.716695Z", "level": "INFO", "module": "parser", "message": "Structure analysis complete: 10 segments", "job_id": "3505424a-0659-4cb0-bd74-b99dc440ec48", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:48:55.716763Z", "level": "INFO", "module": "parser", "message": "Extracting lyrics...", "job_id": "3505424a-0659-4cb0-bd74-b99dc440ec48", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:48:55.717296Z", "level": "INFO", "module": "whisper_client", "message": "Created temporary audio file: /var/folders/d5/vzgmwykd2jsbxfy1k60z4ds00000gq/T/tmpvbsjg6qo.mp3", "job_id": "3505424a-0659-4cb0-bd74-b99dc440ec48", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:48:56.741249Z", "level": "INFO", "module": "whisper_client", "message": "Whisper API response received: 4 words", "job_id": "3505424a-0659-4cb0-bd74-b99dc440ec48", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:48:56.741550Z", "level": "ERROR", "module": "whisper_client", "message": "Whisper API call failed: 'TranscriptionWord' object has no attribute 'get'", "job_id": "3505424a-0659-4cb0-bd74-b99dc440ec48", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:48:56.742074Z", "level": "WARNING", "module": "whisper_client", "message": "Whisper API call failed after retries: Failed to extract lyrics: 'TranscriptionWord' object has no attribute 'get', returning empty lyrics", "job_id": "3505424a-0659-4cb0-bd74-b99dc440ec48", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:48:56.742260Z", "level": "INFO", "module": "parser", "message": "Lyrics extraction complete: 0 words", "job_id": "3505424a-0659-4cb0-bd74-b99dc440ec48", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:48:56.742399Z", "level": "INFO", "module": "parser", "message": "Classifying mood...", "job_id": "3505424a-0659-4cb0-bd74-b99dc440ec48", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:48:56.756731Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=bright, secondary=energetic, energy=low, confidence=0.77", "job_id": "3505424a-0659-4cb0-bd74-b99dc440ec48", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:48:56.756958Z", "level": "INFO", "module": "parser", "message": "Mood classification complete: bright, confidence=0.77", "job_id": "3505424a-0659-4cb0-bd74-b99dc440ec48", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:48:56.757062Z", "level": "INFO", "module": "parser", "message": "Generating clip boundaries...", "job_id": "3505424a-0659-4cb0-bd74-b99dc440ec48", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:48:56.757202Z", "level": "WARNING", "module": "boundaries", "message": "Only 1 boundaries generated, need 3. Regenerating with reduced duration per clip.", "job_id": "3505424a-0659-4cb0-bd74-b99dc440ec48", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:48:56.757344Z", "level": "INFO", "module": "boundaries", "message": "Generated 3 clip boundaries", "job_id": "3505424a-0659-4cb0-bd74-b99dc440ec48", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:48:56.757436Z", "level": "INFO", "module": "parser", "message": "Boundary generation complete: 3 boundaries", "job_id": "3505424a-0659-4cb0-bd74-b99dc440ec48", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:48:56.757568Z", "level": "INFO", "module": "parser", "message": "Audio analysis complete for job 3505424a-0659-4cb0-bd74-b99dc440ec48: duration=5.00s, processing_time=1.06s, beats=10, segments=10, lyrics=0, boundaries=3", "job_id": "3505424a-0659-4cb0-bd74-b99dc440ec48", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:48:56.765553Z", "level": "INFO", "module": "parser", "message": "Loading audio file for job e6dfd5e7-ca39-4405-a8a2-9209812ddfbf", "job_id": "e6dfd5e7-ca39-4405-a8a2-9209812ddfbf", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:48:56.766417Z", "level": "INFO", "module": "parser", "message": "Audio loaded: duration=10.00s, sample_rate=22050 Hz", "job_id": "e6dfd5e7-ca39-4405-a8a2-9209812ddfbf", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:48:56.766510Z", "level": "INFO", "module": "parser", "message": "Detecting beats...", "job_id": "e6dfd5e7-ca39-4405-a8a2-9209812ddfbf", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:48:56.779199Z", "level": "WARNING", "module": "beat_detection", "message": "BPM 0.00 outside valid range [60, 200], using default 120 BPM", "job_id": "e6dfd5e7-ca39-4405-a8a2-9209812ddfbf", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:48:56.779304Z", "level": "WARNING", "module": "beat_detection", "message": "Low confidence (0.50) in beat detection, using tempo-based boundaries", "job_id": "e6dfd5e7-ca39-4405-a8a2-9209812ddfbf", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:48:56.779386Z", "level": "INFO", "module": "parser", "message": "Beat detection complete: BPM=120.00, beats=20, confidence=0.50", "job_id": "e6dfd5e7-ca39-4405-a8a2-9209812ddfbf", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:48:56.779455Z", "level": "INFO", "module": "parser", "message": "Analyzing song structure...", "job_id": "e6dfd5e7-ca39-4405-a8a2-9209812ddfbf", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:48:56.829208Z", "level": "INFO", "module": "structure_analysis", "message": "Structure analysis complete: 122 segments", "job_id": "e6dfd5e7-ca39-4405-a8a2-9209812ddfbf", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:48:56.829303Z", "level": "INFO", "module": "parser", "message": "Structure analysis complete: 122 segments", "job_id": "e6dfd5e7-ca39-4405-a8a2-9209812ddfbf", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:48:56.829359Z", "level": "INFO", "module": "parser", "message": "Extracting lyrics...", "job_id": "e6dfd5e7-ca39-4405-a8a2-9209812ddfbf", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:48:56.829881Z", "level": "INFO", "module": "whisper_client", "message": "Created temporary audio file: /var/folders/d5/vzgmwykd2jsbxfy1k60z4ds00000gq/T/tmpghweat2f.mp3", "job_id": "e6dfd5e7-ca39-4405-a8a2-9209812ddfbf", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:48:57.943626Z", "level": "INFO", "module": "whisper_client", "message": "Whisper API response received: 1 words", "job_id": "e6dfd5e7-ca39-4405-a8a2-9209812ddfbf", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:48:57.943853Z", "level": "ERROR", "module": "whisper_client", "message": "Whisper API call failed: 'TranscriptionWord' object has no attribute 'get'", "job_id": "e6dfd5e7-ca39-4405-a8a2-9209812ddfbf", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:48:57.944573Z", "level": "WARNING", "module": "whisper_client", "message": "Whisper API call failed after retries: Failed to extract lyrics: 'TranscriptionWord' object has no attribute 'get', returning empty lyrics", "job_id": "e6dfd5e7-ca39-4405-a8a2-9209812ddfbf", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:48:57.944781Z", "level": "INFO", "module": "parser", "message": "Lyrics extraction complete: 0 words", "job_id": "e6dfd5e7-ca39-4405-a8a2-9209812ddfbf", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:48:57.944892Z", "level": "INFO", "module": "parser", "message": "Classifying mood...", "job_id": "e6dfd5e7-ca39-4405-a8a2-9209812ddfbf", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:48:57.967530Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=dark, secondary=energetic, energy=high, confidence=0.77", "job_id": "e6dfd5e7-ca39-4405-a8a2-9209812ddfbf", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:48:57.967701Z", "level": "INFO", "module": "parser", "message": "Mood classification complete: dark, confidence=0.77", "job_id": "e6dfd5e7-ca39-4405-a8a2-9209812ddfbf", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:48:57.967809Z", "level": "INFO", "module": "parser", "message": "Generating clip boundaries...", "job_id": "e6dfd5e7-ca39-4405-a8a2-9209812ddfbf", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:48:57.967944Z", "level": "WARNING", "module": "boundaries", "message": "Only 2 boundaries generated, need 3. Regenerating with reduced duration per clip.", "job_id": "e6dfd5e7-ca39-4405-a8a2-9209812ddfbf", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:48:57.968096Z", "level": "INFO", "module": "boundaries", "message": "Generated 3 clip boundaries", "job_id": "e6dfd5e7-ca39-4405-a8a2-9209812ddfbf", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:48:57.968184Z", "level": "INFO", "module": "parser", "message": "Boundary generation complete: 3 boundaries", "job_id": "e6dfd5e7-ca39-4405-a8a2-9209812ddfbf", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:48:57.968287Z", "level": "INFO", "module": "parser", "message": "Audio analysis complete for job e6dfd5e7-ca39-4405-a8a2-9209812ddfbf: duration=10.00s, processing_time=1.20s, beats=20, segments=122, lyrics=0, boundaries=3", "job_id": "e6dfd5e7-ca39-4405-a8a2-9209812ddfbf", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:48:57.971188Z", "level": "INFO", "module": "parser", "message": "Loading audio file for job 79bd3ba8-ee64-4f1b-be36-30d4a094a0e9", "job_id": "79bd3ba8-ee64-4f1b-be36-30d4a094a0e9", "taskName": "Task-37"}
{"timestamp": "2025-11-14T21:48:57.971369Z", "level": "ERROR", "module": "parser", "message": "Audio parsing failed for job 79bd3ba8-ee64-4f1b-be36-30d4a094a0e9: Error opening <_io.BytesIO object at 0x11def0f90>: Format not recognised.", "job_id": "79bd3ba8-ee64-4f1b-be36-30d4a094a0e9", "taskName": "Task-37"}
{"timestamp": "2025-11-14T21:48:57.972815Z", "level": "INFO", "module": "parser", "message": "Loading audio file for job 854d9c35-014b-4ab2-a0c1-f73775936b7c", "job_id": "854d9c35-014b-4ab2-a0c1-f73775936b7c", "taskName": "Task-40"}
{"timestamp": "2025-11-14T21:48:57.972950Z", "level": "ERROR", "module": "parser", "message": "Audio parsing failed for job 854d9c35-014b-4ab2-a0c1-f73775936b7c: Error opening <_io.BytesIO object at 0x11def0ea0>: Format not recognised.", "job_id": "854d9c35-014b-4ab2-a0c1-f73775936b7c", "taskName": "Task-40"}
{"timestamp": "2025-11-14T21:48:58.073464Z", "level": "INFO", "module": "structure_analysis", "message": "Structure analysis complete: 6 segments", "taskName": null}
{"timestamp": "2025-11-14T21:48:58.114505Z", "level": "INFO", "module": "structure_analysis", "message": "Structure analysis complete: 3 segments", "taskName": null}
{"timestamp": "2025-11-14T21:48:58.145231Z", "level": "INFO", "module": "structure_analysis", "message": "Structure analysis complete: 4 segments", "taskName": null}
{"timestamp": "2025-11-14T21:48:58.147042Z", "level": "WARNING", "module": "structure_analysis", "message": "Agglomerative clustering failed: Found array with 1 sample(s) (shape=(1, 1)) while a minimum of 2 is required by AgglomerativeClustering., using simple segmentation", "taskName": null}
{"timestamp": "2025-11-14T21:48:58.147317Z", "level": "INFO", "module": "structure_analysis", "message": "Structure analysis complete: 0 segments (fallback)", "taskName": null}
{"timestamp": "2025-11-14T21:48:58.171097Z", "level": "INFO", "module": "structure_analysis", "message": "Structure analysis complete: 3 segments", "taskName": null}
{"timestamp": "2025-11-14T21:48:58.174289Z", "level": "INFO", "module": "whisper_client", "message": "Created temporary audio file: /var/folders/d5/vzgmwykd2jsbxfy1k60z4ds00000gq/T/tmp78joy6kq.mp3", "taskName": "Task-43"}
{"timestamp": "2025-11-14T21:48:58.174658Z", "level": "INFO", "module": "whisper_client", "message": "Whisper API response received: 3 words", "taskName": "Task-43"}
{"timestamp": "2025-11-14T21:48:58.174726Z", "level": "INFO", "module": "whisper_client", "message": "Extracted 3 lyrics from audio", "taskName": "Task-43"}
{"timestamp": "2025-11-14T21:48:58.174947Z", "level": "ERROR", "module": "whisper_client", "message": "Whisper API call failed: object MagicMock can't be used in 'await' expression", "taskName": "Task-43", "job_id": "5f509889-6cd7-4636-aa3d-eddc80c3647f"}
{"timestamp": "2025-11-14T21:48:58.175063Z", "level": "WARNING", "module": "whisper_client", "message": "Whisper API call failed after retries: Failed to extract lyrics: object MagicMock can't be used in 'await' expression, returning empty lyrics", "taskName": "Task-43", "job_id": "5f509889-6cd7-4636-aa3d-eddc80c3647f"}
{"timestamp": "2025-11-14T21:48:58.179535Z", "level": "INFO", "module": "whisper_client", "message": "Created temporary audio file: /var/folders/d5/vzgmwykd2jsbxfy1k60z4ds00000gq/T/tmp5r6e8rst.mp3", "taskName": "Task-46"}
{"timestamp": "2025-11-14T21:48:58.179764Z", "level": "INFO", "module": "whisper_client", "message": "Whisper API response received: 0 words", "taskName": "Task-46"}
{"timestamp": "2025-11-14T21:48:58.179819Z", "level": "INFO", "module": "whisper_client", "message": "Extracted 0 lyrics from audio", "taskName": "Task-46"}
{"timestamp": "2025-11-14T21:49:04.727285Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job 4fb46b28-bc0b-4c22-8f51-142695c93d7f: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(4fb46b28-bc0b-4c22-8f51-142695c93d7f) is not present in table \"jobs\".'}", "taskName": "Task-46", "job_id": "4fb46b28-bc0b-4c22-8f51-142695c93d7f", "error": "Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(4fb46b28-bc0b-4c22-8f51-142695c93d7f) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-14T21:49:04.727821Z", "level": "ERROR", "module": "whisper_client", "message": "Whisper API call failed: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(4fb46b28-bc0b-4c22-8f51-142695c93d7f) is not present in table \"jobs\".'}", "taskName": "Task-46", "job_id": "4fb46b28-bc0b-4c22-8f51-142695c93d7f"}
{"timestamp": "2025-11-14T21:49:04.728403Z", "level": "WARNING", "module": "whisper_client", "message": "Whisper API call failed after retries: Failed to extract lyrics: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(4fb46b28-bc0b-4c22-8f51-142695c93d7f) is not present in table \"jobs\".'}, returning empty lyrics", "taskName": "Task-46", "job_id": "4fb46b28-bc0b-4c22-8f51-142695c93d7f"}
{"timestamp": "2025-11-14T21:49:04.734246Z", "level": "INFO", "module": "whisper_client", "message": "Created temporary audio file: /var/folders/d5/vzgmwykd2jsbxfy1k60z4ds00000gq/T/tmpg5614w0v.mp3", "taskName": "Task-49"}
{"timestamp": "2025-11-14T21:49:04.735153Z", "level": "INFO", "module": "whisper_client", "message": "Whisper API response received: 4 words", "taskName": "Task-49"}
{"timestamp": "2025-11-14T21:49:04.735367Z", "level": "INFO", "module": "whisper_client", "message": "Extracted 2 lyrics from audio", "taskName": "Task-49"}
{"timestamp": "2025-11-14T21:49:10.972456Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job 7071614e-fef4-4798-8c2a-e0e3aa59b655: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(7071614e-fef4-4798-8c2a-e0e3aa59b655) is not present in table \"jobs\".'}", "taskName": "Task-49", "job_id": "7071614e-fef4-4798-8c2a-e0e3aa59b655", "error": "Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(7071614e-fef4-4798-8c2a-e0e3aa59b655) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-14T21:49:10.972867Z", "level": "ERROR", "module": "whisper_client", "message": "Whisper API call failed: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(7071614e-fef4-4798-8c2a-e0e3aa59b655) is not present in table \"jobs\".'}", "taskName": "Task-49", "job_id": "7071614e-fef4-4798-8c2a-e0e3aa59b655"}
{"timestamp": "2025-11-14T21:49:10.973219Z", "level": "WARNING", "module": "whisper_client", "message": "Whisper API call failed after retries: Failed to extract lyrics: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(7071614e-fef4-4798-8c2a-e0e3aa59b655) is not present in table \"jobs\".'}, returning empty lyrics", "taskName": "Task-49", "job_id": "7071614e-fef4-4798-8c2a-e0e3aa59b655"}
{"timestamp": "2025-11-14T21:49:10.982747Z", "level": "INFO", "module": "whisper_client", "message": "Created temporary audio file: /var/folders/d5/vzgmwykd2jsbxfy1k60z4ds00000gq/T/tmplq11mxyu.mp3", "taskName": "Task-52"}
{"timestamp": "2025-11-14T21:49:10.983278Z", "level": "ERROR", "module": "whisper_client", "message": "Whisper API call failed: API Error", "taskName": "Task-52", "job_id": "63aa6f2a-172e-4fa6-8459-609425dfbefd"}
{"timestamp": "2025-11-14T21:49:10.983484Z", "level": "WARNING", "module": "whisper_client", "message": "Whisper API call failed after retries: Failed to extract lyrics: API Error, returning empty lyrics", "taskName": "Task-52", "job_id": "63aa6f2a-172e-4fa6-8459-609425dfbefd"}
{"timestamp": "2025-11-14T21:49:10.987239Z", "level": "INFO", "module": "whisper_client", "message": "Created temporary audio file: /var/folders/d5/vzgmwykd2jsbxfy1k60z4ds00000gq/T/tmps5rrtw4w.mp3", "taskName": "Task-55"}
{"timestamp": "2025-11-14T21:49:10.987733Z", "level": "INFO", "module": "whisper_client", "message": "Whisper API response received: 1 words", "taskName": "Task-55"}
{"timestamp": "2025-11-14T21:49:10.987852Z", "level": "INFO", "module": "whisper_client", "message": "Extracted 1 lyrics from audio", "taskName": "Task-55"}
{"timestamp": "2025-11-14T21:49:10.988153Z", "level": "ERROR", "module": "whisper_client", "message": "Whisper API call failed: object MagicMock can't be used in 'await' expression", "taskName": "Task-55", "job_id": "3f23395a-fda2-483b-aa74-ebb7b5515486"}
{"timestamp": "2025-11-14T21:49:10.988348Z", "level": "WARNING", "module": "whisper_client", "message": "Whisper API call failed after retries: Failed to extract lyrics: object MagicMock can't be used in 'await' expression, returning empty lyrics", "taskName": "Task-55", "job_id": "3f23395a-fda2-483b-aa74-ebb7b5515486"}
{"timestamp": "2025-11-14T21:49:26.467907Z", "level": "WARNING", "module": "beat_detection", "message": "aubio not available, using librosa onset detection as fallback", "taskName": null}
{"timestamp": "2025-11-14T21:49:28.230810Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=dark, secondary=calm, energy=low, confidence=0.83", "taskName": null}
{"timestamp": "2025-11-14T21:49:30.448271Z", "level": "WARNING", "module": "beat_detection", "message": "aubio not available, using librosa onset detection as fallback", "taskName": null}
{"timestamp": "2025-11-14T21:49:31.650669Z", "level": "WARNING", "module": "structure_analysis", "message": "Agglomerative clustering failed: Found array with 1 sample(s) (shape=(1, 1)) while a minimum of 2 is required by AgglomerativeClustering., using simple segmentation", "taskName": null}
{"timestamp": "2025-11-14T21:49:31.651079Z", "level": "INFO", "module": "structure_analysis", "message": "Structure analysis complete: 0 segments (fallback)", "taskName": null}
{"timestamp": "2025-11-14T21:49:33.875010Z", "level": "WARNING", "module": "beat_detection", "message": "aubio not available, using librosa onset detection as fallback", "taskName": null}
{"timestamp": "2025-11-14T21:49:34.628565Z", "level": "INFO", "module": "whisper_client", "message": "Created temporary audio file: /var/folders/d5/vzgmwykd2jsbxfy1k60z4ds00000gq/T/tmp1ej3jdyv.mp3", "taskName": "Task-1"}
{"timestamp": "2025-11-14T21:49:34.629175Z", "level": "INFO", "module": "whisper_client", "message": "Whisper API response received: 3 words", "taskName": "Task-1"}
{"timestamp": "2025-11-14T21:49:34.629230Z", "level": "INFO", "module": "whisper_client", "message": "Extracted 3 lyrics from audio", "taskName": "Task-1"}
{"timestamp": "2025-11-14T21:49:34.629368Z", "level": "ERROR", "module": "whisper_client", "message": "Whisper API call failed: object MagicMock can't be used in 'await' expression", "taskName": "Task-1", "job_id": "e6f429b9-a698-43b3-b5ec-d32bd484b650"}
{"timestamp": "2025-11-14T21:49:34.629479Z", "level": "WARNING", "module": "whisper_client", "message": "Whisper API call failed after retries: Failed to extract lyrics: object MagicMock can't be used in 'await' expression, returning empty lyrics", "taskName": "Task-1", "job_id": "e6f429b9-a698-43b3-b5ec-d32bd484b650"}
{"timestamp": "2025-11-14T21:49:53.655396Z", "level": "WARNING", "module": "beat_detection", "message": "aubio not available, using librosa onset detection as fallback", "taskName": null}
{"timestamp": "2025-11-14T21:49:56.643482Z", "level": "WARNING", "module": "beat_detection", "message": "BPM 0.00 outside valid range [60, 200], using default 120 BPM", "taskName": null}
{"timestamp": "2025-11-14T21:49:56.643579Z", "level": "WARNING", "module": "beat_detection", "message": "Low confidence (0.50) in beat detection, using tempo-based boundaries", "taskName": null}
{"timestamp": "2025-11-14T21:49:56.648483Z", "level": "WARNING", "module": "beat_detection", "message": "BPM 0.00 outside valid range [60, 200], using default 120 BPM", "taskName": null}
{"timestamp": "2025-11-14T21:49:56.648560Z", "level": "WARNING", "module": "beat_detection", "message": "Low confidence (0.50) in beat detection, using tempo-based boundaries", "taskName": null}
{"timestamp": "2025-11-14T21:49:56.653933Z", "level": "WARNING", "module": "beat_detection", "message": "BPM 0.00 outside valid range [60, 200], using default 120 BPM", "taskName": null}
{"timestamp": "2025-11-14T21:49:56.653995Z", "level": "WARNING", "module": "beat_detection", "message": "Low confidence (0.50) in beat detection, using tempo-based boundaries", "taskName": null}
{"timestamp": "2025-11-14T21:49:56.658810Z", "level": "WARNING", "module": "beat_detection", "message": "BPM 0.00 outside valid range [60, 200], using default 120 BPM", "taskName": null}
{"timestamp": "2025-11-14T21:49:56.658884Z", "level": "WARNING", "module": "beat_detection", "message": "Low confidence (0.50) in beat detection, using tempo-based boundaries", "taskName": null}
{"timestamp": "2025-11-14T21:49:56.661416Z", "level": "WARNING", "module": "beat_detection", "message": "BPM 0.00 outside valid range [60, 200], using default 120 BPM", "taskName": null}
{"timestamp": "2025-11-14T21:49:56.661469Z", "level": "WARNING", "module": "beat_detection", "message": "Low confidence (0.50) in beat detection, using tempo-based boundaries", "taskName": null}
{"timestamp": "2025-11-14T21:49:56.664422Z", "level": "WARNING", "module": "boundaries", "message": "Only 2 boundaries generated, need 3. Regenerating with reduced duration per clip.", "taskName": null}
{"timestamp": "2025-11-14T21:49:56.664929Z", "level": "INFO", "module": "boundaries", "message": "Generated 3 clip boundaries", "taskName": null}
{"timestamp": "2025-11-14T21:49:56.665606Z", "level": "WARNING", "module": "boundaries", "message": "Only 2 boundaries generated, need 3. Regenerating with reduced duration per clip.", "taskName": null}
{"timestamp": "2025-11-14T21:49:56.665701Z", "level": "INFO", "module": "boundaries", "message": "Generated 3 clip boundaries", "taskName": null}
{"timestamp": "2025-11-14T21:49:56.666226Z", "level": "INFO", "module": "boundaries", "message": "Generated 5 clip boundaries", "taskName": null}
{"timestamp": "2025-11-14T21:49:56.666726Z", "level": "WARNING", "module": "boundaries", "message": "Only 1 boundaries generated, need 3. Regenerating with reduced duration per clip.", "taskName": null}
{"timestamp": "2025-11-14T21:49:56.666801Z", "level": "INFO", "module": "boundaries", "message": "Generated 3 clip boundaries", "taskName": null}
{"timestamp": "2025-11-14T21:49:56.667314Z", "level": "WARNING", "module": "boundaries", "message": "No beat timestamps available, generating uniform boundaries", "taskName": null}
{"timestamp": "2025-11-14T21:49:56.667826Z", "level": "WARNING", "module": "boundaries", "message": "Only 0 boundaries generated, need 3. Regenerating with reduced duration per clip.", "taskName": null}
{"timestamp": "2025-11-14T21:49:56.667908Z", "level": "INFO", "module": "boundaries", "message": "Generated 3 clip boundaries", "taskName": null}
{"timestamp": "2025-11-14T21:49:56.669533Z", "level": "INFO", "module": "boundaries", "message": "Generated 25 clip boundaries", "taskName": null}
{"timestamp": "2025-11-14T21:49:56.670024Z", "level": "WARNING", "module": "boundaries", "message": "Only 2 boundaries generated, need 3. Regenerating with reduced duration per clip.", "taskName": null}
{"timestamp": "2025-11-14T21:49:56.670112Z", "level": "INFO", "module": "boundaries", "message": "Generated 3 clip boundaries", "taskName": null}
{"timestamp": "2025-11-14T21:49:57.139624Z", "level": "INFO", "module": "cache", "message": "Stored analysis in Redis cache: test_hash_12345", "taskName": "Task-1"}
{"timestamp": "2025-11-14T21:49:57.162497Z", "level": "WARNING", "module": "cache", "message": "Failed to store cached analysis: 'AsyncTableQueryBuilder' object has no attribute 'upsert'", "taskName": "Task-1", "file_hash": "test_hash_12345", "error": "'AsyncTableQueryBuilder' object has no attribute 'upsert'"}
{"timestamp": "2025-11-14T21:49:57.278964Z", "level": "INFO", "module": "cache", "message": "Cache hit for file hash: test_hash_12345", "taskName": "Task-1"}
{"timestamp": "2025-11-14T21:49:57.284116Z", "level": "WARNING", "module": "cache", "message": "Failed to get cached analysis: Failed to get JSON from Redis: Failed to get Redis key: Event loop is closed", "taskName": "Task-4", "file_hash": "nonexistent_hash"}
{"timestamp": "2025-11-14T21:49:57.796745Z", "level": "INFO", "module": "cache", "message": "Stored analysis in Redis cache: test_serialization", "taskName": "Task-7"}
{"timestamp": "2025-11-14T21:49:57.797049Z", "level": "WARNING", "module": "cache", "message": "Failed to store cached analysis: 'AsyncTableQueryBuilder' object has no attribute 'upsert'", "taskName": "Task-7", "file_hash": "test_serialization", "error": "'AsyncTableQueryBuilder' object has no attribute 'upsert'"}
{"timestamp": "2025-11-14T21:49:57.908335Z", "level": "INFO", "module": "cache", "message": "Cache hit for file hash: test_serialization", "taskName": "Task-7"}
{"timestamp": "2025-11-14T21:49:57.913714Z", "level": "WARNING", "module": "cache", "message": "Failed to store cached analysis: Failed to set JSON in Redis: Failed to set Redis key: Event loop is closed", "taskName": "Task-10", "file_hash": "test_ttl", "error": "Failed to set JSON in Redis: Failed to set Redis key: Event loop is closed"}
{"timestamp": "2025-11-14T21:49:58.381548Z", "level": "INFO", "module": "cache", "message": "Cache hit for file hash: test_ttl", "taskName": "Task-10"}
{"timestamp": "2025-11-14T21:49:58.410759Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=energetic, secondary=dark, energy=high, confidence=0.93", "taskName": null}
{"timestamp": "2025-11-14T21:49:58.427560Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=dark, secondary=calm, energy=low, confidence=0.83", "taskName": null}
{"timestamp": "2025-11-14T21:49:58.445995Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=dark, secondary=calm, energy=high, confidence=0.77", "taskName": null}
{"timestamp": "2025-11-14T21:49:58.459435Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=energetic, secondary=None, energy=high, confidence=0.73", "taskName": null}
{"timestamp": "2025-11-14T21:49:58.467003Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=dark, secondary=energetic, energy=high, confidence=0.77", "taskName": null}
{"timestamp": "2025-11-14T21:49:58.473785Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=dark, secondary=energetic, energy=high, confidence=0.77", "taskName": null}
{"timestamp": "2025-11-14T21:49:58.474615Z", "level": "ERROR", "module": "mood_classifier", "message": "Mood classification failed: can't extend empty axis 0 using modes other than 'constant' or 'empty'", "taskName": null}
{"timestamp": "2025-11-14T21:49:58.478789Z", "level": "INFO", "module": "parser", "message": "Loading audio file for job 8d0d5b55-8434-4847-b331-1f5db31b9630", "job_id": "8d0d5b55-8434-4847-b331-1f5db31b9630", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:49:58.704995Z", "level": "INFO", "module": "parser", "message": "Audio loaded: duration=10.00s, sample_rate=22050 Hz", "job_id": "8d0d5b55-8434-4847-b331-1f5db31b9630", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:49:58.705141Z", "level": "INFO", "module": "parser", "message": "Detecting beats...", "job_id": "8d0d5b55-8434-4847-b331-1f5db31b9630", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:49:58.715332Z", "level": "WARNING", "module": "beat_detection", "message": "BPM 0.00 outside valid range [60, 200], using default 120 BPM", "job_id": "8d0d5b55-8434-4847-b331-1f5db31b9630", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:49:58.715411Z", "level": "WARNING", "module": "beat_detection", "message": "Low confidence (0.50) in beat detection, using tempo-based boundaries", "job_id": "8d0d5b55-8434-4847-b331-1f5db31b9630", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:49:58.715475Z", "level": "INFO", "module": "parser", "message": "Beat detection complete: BPM=120.00, beats=20, confidence=0.50", "job_id": "8d0d5b55-8434-4847-b331-1f5db31b9630", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:49:58.715520Z", "level": "INFO", "module": "parser", "message": "Analyzing song structure...", "job_id": "8d0d5b55-8434-4847-b331-1f5db31b9630", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:49:58.784121Z", "level": "INFO", "module": "structure_analysis", "message": "Structure analysis complete: 122 segments", "job_id": "8d0d5b55-8434-4847-b331-1f5db31b9630", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:49:58.784203Z", "level": "INFO", "module": "parser", "message": "Structure analysis complete: 122 segments", "job_id": "8d0d5b55-8434-4847-b331-1f5db31b9630", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:49:58.784257Z", "level": "INFO", "module": "parser", "message": "Extracting lyrics...", "job_id": "8d0d5b55-8434-4847-b331-1f5db31b9630", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:49:58.784754Z", "level": "INFO", "module": "whisper_client", "message": "Created temporary audio file: /var/folders/d5/vzgmwykd2jsbxfy1k60z4ds00000gq/T/tmpyjgcvx7c.mp3", "job_id": "8d0d5b55-8434-4847-b331-1f5db31b9630", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:50:00.221767Z", "level": "INFO", "module": "whisper_client", "message": "Whisper API response received: 1 words", "job_id": "8d0d5b55-8434-4847-b331-1f5db31b9630", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:50:00.222248Z", "level": "ERROR", "module": "whisper_client", "message": "Whisper API call failed: 'TranscriptionWord' object has no attribute 'get'", "job_id": "8d0d5b55-8434-4847-b331-1f5db31b9630", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:50:00.222612Z", "level": "WARNING", "module": "whisper_client", "message": "Whisper API call failed after retries: Failed to extract lyrics: 'TranscriptionWord' object has no attribute 'get', returning empty lyrics", "job_id": "8d0d5b55-8434-4847-b331-1f5db31b9630", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:50:00.222783Z", "level": "INFO", "module": "parser", "message": "Lyrics extraction complete: 0 words", "job_id": "8d0d5b55-8434-4847-b331-1f5db31b9630", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:50:00.222888Z", "level": "INFO", "module": "parser", "message": "Classifying mood...", "job_id": "8d0d5b55-8434-4847-b331-1f5db31b9630", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:50:00.256839Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=dark, secondary=energetic, energy=high, confidence=0.77", "job_id": "8d0d5b55-8434-4847-b331-1f5db31b9630", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:50:00.257256Z", "level": "INFO", "module": "parser", "message": "Mood classification complete: dark, confidence=0.77", "job_id": "8d0d5b55-8434-4847-b331-1f5db31b9630", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:50:00.257370Z", "level": "INFO", "module": "parser", "message": "Generating clip boundaries...", "job_id": "8d0d5b55-8434-4847-b331-1f5db31b9630", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:50:00.257530Z", "level": "WARNING", "module": "boundaries", "message": "Only 2 boundaries generated, need 3. Regenerating with reduced duration per clip.", "job_id": "8d0d5b55-8434-4847-b331-1f5db31b9630", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:50:00.257674Z", "level": "INFO", "module": "boundaries", "message": "Generated 3 clip boundaries", "job_id": "8d0d5b55-8434-4847-b331-1f5db31b9630", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:50:00.257755Z", "level": "INFO", "module": "parser", "message": "Boundary generation complete: 3 boundaries", "job_id": "8d0d5b55-8434-4847-b331-1f5db31b9630", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:50:00.257850Z", "level": "INFO", "module": "parser", "message": "Audio analysis complete for job 8d0d5b55-8434-4847-b331-1f5db31b9630: duration=10.00s, processing_time=1.78s, beats=20, segments=122, lyrics=0, boundaries=3", "job_id": "8d0d5b55-8434-4847-b331-1f5db31b9630", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:50:00.266028Z", "level": "INFO", "module": "parser", "message": "Loading audio file for job 84618fce-6978-4ee8-9043-ee01d371e6c2", "job_id": "84618fce-6978-4ee8-9043-ee01d371e6c2", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:50:00.266705Z", "level": "INFO", "module": "parser", "message": "Audio loaded: duration=10.00s, sample_rate=22050 Hz", "job_id": "84618fce-6978-4ee8-9043-ee01d371e6c2", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:50:00.266785Z", "level": "INFO", "module": "parser", "message": "Detecting beats...", "job_id": "84618fce-6978-4ee8-9043-ee01d371e6c2", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:50:00.277766Z", "level": "WARNING", "module": "beat_detection", "message": "BPM 0.00 outside valid range [60, 200], using default 120 BPM", "job_id": "84618fce-6978-4ee8-9043-ee01d371e6c2", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:50:00.277848Z", "level": "WARNING", "module": "beat_detection", "message": "Low confidence (0.50) in beat detection, using tempo-based boundaries", "job_id": "84618fce-6978-4ee8-9043-ee01d371e6c2", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:50:00.277917Z", "level": "INFO", "module": "parser", "message": "Beat detection complete: BPM=120.00, beats=20, confidence=0.50", "job_id": "84618fce-6978-4ee8-9043-ee01d371e6c2", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:50:00.277976Z", "level": "INFO", "module": "parser", "message": "Analyzing song structure...", "job_id": "84618fce-6978-4ee8-9043-ee01d371e6c2", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:50:00.325707Z", "level": "INFO", "module": "structure_analysis", "message": "Structure analysis complete: 122 segments", "job_id": "84618fce-6978-4ee8-9043-ee01d371e6c2", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:50:00.325795Z", "level": "INFO", "module": "parser", "message": "Structure analysis complete: 122 segments", "job_id": "84618fce-6978-4ee8-9043-ee01d371e6c2", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:50:00.325851Z", "level": "INFO", "module": "parser", "message": "Extracting lyrics...", "job_id": "84618fce-6978-4ee8-9043-ee01d371e6c2", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:50:00.326464Z", "level": "INFO", "module": "whisper_client", "message": "Created temporary audio file: /var/folders/d5/vzgmwykd2jsbxfy1k60z4ds00000gq/T/tmp1cwim8z6.mp3", "job_id": "84618fce-6978-4ee8-9043-ee01d371e6c2", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:50:01.507729Z", "level": "INFO", "module": "whisper_client", "message": "Whisper API response received: 1 words", "job_id": "84618fce-6978-4ee8-9043-ee01d371e6c2", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:50:01.507839Z", "level": "ERROR", "module": "whisper_client", "message": "Whisper API call failed: 'TranscriptionWord' object has no attribute 'get'", "job_id": "84618fce-6978-4ee8-9043-ee01d371e6c2", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:50:01.508042Z", "level": "WARNING", "module": "whisper_client", "message": "Whisper API call failed after retries: Failed to extract lyrics: 'TranscriptionWord' object has no attribute 'get', returning empty lyrics", "job_id": "84618fce-6978-4ee8-9043-ee01d371e6c2", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:50:01.508124Z", "level": "INFO", "module": "parser", "message": "Lyrics extraction complete: 0 words", "job_id": "84618fce-6978-4ee8-9043-ee01d371e6c2", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:50:01.508179Z", "level": "INFO", "module": "parser", "message": "Classifying mood...", "job_id": "84618fce-6978-4ee8-9043-ee01d371e6c2", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:50:01.519591Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=dark, secondary=energetic, energy=high, confidence=0.77", "job_id": "84618fce-6978-4ee8-9043-ee01d371e6c2", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:50:01.519809Z", "level": "INFO", "module": "parser", "message": "Mood classification complete: dark, confidence=0.77", "job_id": "84618fce-6978-4ee8-9043-ee01d371e6c2", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:50:01.519943Z", "level": "INFO", "module": "parser", "message": "Generating clip boundaries...", "job_id": "84618fce-6978-4ee8-9043-ee01d371e6c2", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:50:01.520124Z", "level": "WARNING", "module": "boundaries", "message": "Only 2 boundaries generated, need 3. Regenerating with reduced duration per clip.", "job_id": "84618fce-6978-4ee8-9043-ee01d371e6c2", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:50:01.520327Z", "level": "INFO", "module": "boundaries", "message": "Generated 3 clip boundaries", "job_id": "84618fce-6978-4ee8-9043-ee01d371e6c2", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:50:01.520450Z", "level": "INFO", "module": "parser", "message": "Boundary generation complete: 3 boundaries", "job_id": "84618fce-6978-4ee8-9043-ee01d371e6c2", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:50:01.520553Z", "level": "INFO", "module": "parser", "message": "Audio analysis complete for job 84618fce-6978-4ee8-9043-ee01d371e6c2: duration=10.00s, processing_time=1.25s, beats=20, segments=122, lyrics=0, boundaries=3", "job_id": "84618fce-6978-4ee8-9043-ee01d371e6c2", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:50:01.523081Z", "level": "INFO", "module": "parser", "message": "Loading audio file for job ab274354-f3fe-40d9-9731-6c4cbde0d9d1", "job_id": "ab274354-f3fe-40d9-9731-6c4cbde0d9d1", "taskName": "Task-19"}
{"timestamp": "2025-11-14T21:50:01.523247Z", "level": "ERROR", "module": "parser", "message": "Audio parsing failed for job ab274354-f3fe-40d9-9731-6c4cbde0d9d1: Error opening <_io.BytesIO object at 0x11ae0a7f0>: Format not recognised.", "job_id": "ab274354-f3fe-40d9-9731-6c4cbde0d9d1", "taskName": "Task-19"}
{"timestamp": "2025-11-14T21:50:01.524309Z", "level": "INFO", "module": "parser", "message": "Loading audio file for job 984be4f5-eec9-40eb-b4ea-c451a541e491", "job_id": "984be4f5-eec9-40eb-b4ea-c451a541e491", "taskName": "Task-22"}
{"timestamp": "2025-11-14T21:50:01.524423Z", "level": "ERROR", "module": "parser", "message": "Audio parsing failed for job 984be4f5-eec9-40eb-b4ea-c451a541e491: Error opening <_io.BytesIO object at 0x11ae0a9d0>: Format not recognised.", "job_id": "984be4f5-eec9-40eb-b4ea-c451a541e491", "taskName": "Task-22"}
{"timestamp": "2025-11-14T21:50:01.526853Z", "level": "INFO", "module": "main", "message": "Starting audio analysis for job None, audio_url=test_url", "taskName": "Task-25"}
{"timestamp": "2025-11-14T21:50:01.527873Z", "level": "INFO", "module": "main", "message": "Starting audio analysis for job bb72149f-ab00-43ac-b28a-f4814fb4137b, audio_url=None", "job_id": "bb72149f-ab00-43ac-b28a-f4814fb4137b", "taskName": "Task-28"}
{"timestamp": "2025-11-14T21:50:01.531782Z", "level": "INFO", "module": "parser", "message": "Loading audio file for job 1e54b8e3-3170-48a5-bf8e-fa96f2ebfea6", "job_id": "1e54b8e3-3170-48a5-bf8e-fa96f2ebfea6", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:50:01.532308Z", "level": "INFO", "module": "parser", "message": "Audio loaded: duration=5.00s, sample_rate=22050 Hz", "job_id": "1e54b8e3-3170-48a5-bf8e-fa96f2ebfea6", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:50:01.532402Z", "level": "INFO", "module": "parser", "message": "Detecting beats...", "job_id": "1e54b8e3-3170-48a5-bf8e-fa96f2ebfea6", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:50:01.538465Z", "level": "ERROR", "module": "beat_detection", "message": "Beat detection failed: unsupported format string passed to numpy.ndarray.__format__", "job_id": "1e54b8e3-3170-48a5-bf8e-fa96f2ebfea6", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:50:01.538558Z", "level": "WARNING", "module": "beat_detection", "message": "Using fallback tempo-based beats: BPM=120.0, beats=10", "job_id": "1e54b8e3-3170-48a5-bf8e-fa96f2ebfea6", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:50:01.538622Z", "level": "INFO", "module": "parser", "message": "Beat detection complete: BPM=120.00, beats=10, confidence=0.50", "job_id": "1e54b8e3-3170-48a5-bf8e-fa96f2ebfea6", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:50:01.538677Z", "level": "INFO", "module": "parser", "message": "Analyzing song structure...", "job_id": "1e54b8e3-3170-48a5-bf8e-fa96f2ebfea6", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:50:01.555251Z", "level": "INFO", "module": "structure_analysis", "message": "Structure analysis complete: 5 segments", "job_id": "1e54b8e3-3170-48a5-bf8e-fa96f2ebfea6", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:50:01.555325Z", "level": "INFO", "module": "parser", "message": "Structure analysis complete: 5 segments", "job_id": "1e54b8e3-3170-48a5-bf8e-fa96f2ebfea6", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:50:01.555374Z", "level": "INFO", "module": "parser", "message": "Extracting lyrics...", "job_id": "1e54b8e3-3170-48a5-bf8e-fa96f2ebfea6", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:50:01.555693Z", "level": "INFO", "module": "whisper_client", "message": "Created temporary audio file: /var/folders/d5/vzgmwykd2jsbxfy1k60z4ds00000gq/T/tmphg0vp72a.mp3", "job_id": "1e54b8e3-3170-48a5-bf8e-fa96f2ebfea6", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:50:02.603079Z", "level": "INFO", "module": "whisper_client", "message": "Whisper API response received: 4 words", "job_id": "1e54b8e3-3170-48a5-bf8e-fa96f2ebfea6", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:50:02.603410Z", "level": "ERROR", "module": "whisper_client", "message": "Whisper API call failed: 'TranscriptionWord' object has no attribute 'get'", "job_id": "1e54b8e3-3170-48a5-bf8e-fa96f2ebfea6", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:50:02.603908Z", "level": "WARNING", "module": "whisper_client", "message": "Whisper API call failed after retries: Failed to extract lyrics: 'TranscriptionWord' object has no attribute 'get', returning empty lyrics", "job_id": "1e54b8e3-3170-48a5-bf8e-fa96f2ebfea6", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:50:02.604052Z", "level": "INFO", "module": "parser", "message": "Lyrics extraction complete: 0 words", "job_id": "1e54b8e3-3170-48a5-bf8e-fa96f2ebfea6", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:50:02.604165Z", "level": "INFO", "module": "parser", "message": "Classifying mood...", "job_id": "1e54b8e3-3170-48a5-bf8e-fa96f2ebfea6", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:50:02.616176Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=bright, secondary=energetic, energy=low, confidence=0.77", "job_id": "1e54b8e3-3170-48a5-bf8e-fa96f2ebfea6", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:50:02.616326Z", "level": "INFO", "module": "parser", "message": "Mood classification complete: bright, confidence=0.77", "job_id": "1e54b8e3-3170-48a5-bf8e-fa96f2ebfea6", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:50:02.616417Z", "level": "INFO", "module": "parser", "message": "Generating clip boundaries...", "job_id": "1e54b8e3-3170-48a5-bf8e-fa96f2ebfea6", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:50:02.616531Z", "level": "WARNING", "module": "boundaries", "message": "Only 1 boundaries generated, need 3. Regenerating with reduced duration per clip.", "job_id": "1e54b8e3-3170-48a5-bf8e-fa96f2ebfea6", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:50:02.616661Z", "level": "INFO", "module": "boundaries", "message": "Generated 3 clip boundaries", "job_id": "1e54b8e3-3170-48a5-bf8e-fa96f2ebfea6", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:50:02.616742Z", "level": "INFO", "module": "parser", "message": "Boundary generation complete: 3 boundaries", "job_id": "1e54b8e3-3170-48a5-bf8e-fa96f2ebfea6", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:50:02.616845Z", "level": "INFO", "module": "parser", "message": "Audio analysis complete for job 1e54b8e3-3170-48a5-bf8e-fa96f2ebfea6: duration=5.00s, processing_time=1.09s, beats=10, segments=5, lyrics=0, boundaries=3", "job_id": "1e54b8e3-3170-48a5-bf8e-fa96f2ebfea6", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:50:02.622875Z", "level": "INFO", "module": "parser", "message": "Loading audio file for job ac80f222-0d83-471d-aec2-9e071976e486", "job_id": "ac80f222-0d83-471d-aec2-9e071976e486", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:50:02.623568Z", "level": "INFO", "module": "parser", "message": "Audio loaded: duration=10.00s, sample_rate=22050 Hz", "job_id": "ac80f222-0d83-471d-aec2-9e071976e486", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:50:02.623649Z", "level": "INFO", "module": "parser", "message": "Detecting beats...", "job_id": "ac80f222-0d83-471d-aec2-9e071976e486", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:50:02.635786Z", "level": "WARNING", "module": "beat_detection", "message": "BPM 0.00 outside valid range [60, 200], using default 120 BPM", "job_id": "ac80f222-0d83-471d-aec2-9e071976e486", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:50:02.635878Z", "level": "WARNING", "module": "beat_detection", "message": "Low confidence (0.50) in beat detection, using tempo-based boundaries", "job_id": "ac80f222-0d83-471d-aec2-9e071976e486", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:50:02.635956Z", "level": "INFO", "module": "parser", "message": "Beat detection complete: BPM=120.00, beats=20, confidence=0.50", "job_id": "ac80f222-0d83-471d-aec2-9e071976e486", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:50:02.636017Z", "level": "INFO", "module": "parser", "message": "Analyzing song structure...", "job_id": "ac80f222-0d83-471d-aec2-9e071976e486", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:50:02.684831Z", "level": "INFO", "module": "structure_analysis", "message": "Structure analysis complete: 122 segments", "job_id": "ac80f222-0d83-471d-aec2-9e071976e486", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:50:02.684918Z", "level": "INFO", "module": "parser", "message": "Structure analysis complete: 122 segments", "job_id": "ac80f222-0d83-471d-aec2-9e071976e486", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:50:02.684982Z", "level": "INFO", "module": "parser", "message": "Extracting lyrics...", "job_id": "ac80f222-0d83-471d-aec2-9e071976e486", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:50:02.685355Z", "level": "INFO", "module": "whisper_client", "message": "Created temporary audio file: /var/folders/d5/vzgmwykd2jsbxfy1k60z4ds00000gq/T/tmpdnjuwe86.mp3", "job_id": "ac80f222-0d83-471d-aec2-9e071976e486", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:50:03.573571Z", "level": "INFO", "module": "whisper_client", "message": "Whisper API response received: 1 words", "job_id": "ac80f222-0d83-471d-aec2-9e071976e486", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:50:03.573738Z", "level": "ERROR", "module": "whisper_client", "message": "Whisper API call failed: 'TranscriptionWord' object has no attribute 'get'", "job_id": "ac80f222-0d83-471d-aec2-9e071976e486", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:50:03.574044Z", "level": "WARNING", "module": "whisper_client", "message": "Whisper API call failed after retries: Failed to extract lyrics: 'TranscriptionWord' object has no attribute 'get', returning empty lyrics", "job_id": "ac80f222-0d83-471d-aec2-9e071976e486", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:50:03.574161Z", "level": "INFO", "module": "parser", "message": "Lyrics extraction complete: 0 words", "job_id": "ac80f222-0d83-471d-aec2-9e071976e486", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:50:03.574254Z", "level": "INFO", "module": "parser", "message": "Classifying mood...", "job_id": "ac80f222-0d83-471d-aec2-9e071976e486", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:50:03.591464Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=dark, secondary=energetic, energy=high, confidence=0.77", "job_id": "ac80f222-0d83-471d-aec2-9e071976e486", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:50:03.591602Z", "level": "INFO", "module": "parser", "message": "Mood classification complete: dark, confidence=0.77", "job_id": "ac80f222-0d83-471d-aec2-9e071976e486", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:50:03.591681Z", "level": "INFO", "module": "parser", "message": "Generating clip boundaries...", "job_id": "ac80f222-0d83-471d-aec2-9e071976e486", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:50:03.591799Z", "level": "WARNING", "module": "boundaries", "message": "Only 2 boundaries generated, need 3. Regenerating with reduced duration per clip.", "job_id": "ac80f222-0d83-471d-aec2-9e071976e486", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:50:03.591922Z", "level": "INFO", "module": "boundaries", "message": "Generated 3 clip boundaries", "job_id": "ac80f222-0d83-471d-aec2-9e071976e486", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:50:03.591991Z", "level": "INFO", "module": "parser", "message": "Boundary generation complete: 3 boundaries", "job_id": "ac80f222-0d83-471d-aec2-9e071976e486", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:50:03.592075Z", "level": "INFO", "module": "parser", "message": "Audio analysis complete for job ac80f222-0d83-471d-aec2-9e071976e486: duration=10.00s, processing_time=0.97s, beats=20, segments=122, lyrics=0, boundaries=3", "job_id": "ac80f222-0d83-471d-aec2-9e071976e486", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:50:03.594581Z", "level": "INFO", "module": "parser", "message": "Loading audio file for job e99ea3f2-51d0-42ca-b064-3a4d56854ea1", "job_id": "e99ea3f2-51d0-42ca-b064-3a4d56854ea1", "taskName": "Task-37"}
{"timestamp": "2025-11-14T21:50:03.594861Z", "level": "ERROR", "module": "parser", "message": "Audio parsing failed for job e99ea3f2-51d0-42ca-b064-3a4d56854ea1: Error opening <_io.BytesIO object at 0x11ae0b510>: Format not recognised.", "job_id": "e99ea3f2-51d0-42ca-b064-3a4d56854ea1", "taskName": "Task-37"}
{"timestamp": "2025-11-14T21:50:03.596699Z", "level": "INFO", "module": "parser", "message": "Loading audio file for job ae2f98f9-d713-4f9a-8416-395287dfe278", "job_id": "ae2f98f9-d713-4f9a-8416-395287dfe278", "taskName": "Task-40"}
{"timestamp": "2025-11-14T21:50:03.596864Z", "level": "ERROR", "module": "parser", "message": "Audio parsing failed for job ae2f98f9-d713-4f9a-8416-395287dfe278: Error opening <_io.BytesIO object at 0x11ae0be70>: Format not recognised.", "job_id": "ae2f98f9-d713-4f9a-8416-395287dfe278", "taskName": "Task-40"}
{"timestamp": "2025-11-14T21:50:03.689616Z", "level": "INFO", "module": "structure_analysis", "message": "Structure analysis complete: 6 segments", "taskName": null}
{"timestamp": "2025-11-14T21:50:03.730658Z", "level": "INFO", "module": "structure_analysis", "message": "Structure analysis complete: 3 segments", "taskName": null}
{"timestamp": "2025-11-14T21:50:03.760916Z", "level": "INFO", "module": "structure_analysis", "message": "Structure analysis complete: 4 segments", "taskName": null}
{"timestamp": "2025-11-14T21:50:03.762871Z", "level": "WARNING", "module": "structure_analysis", "message": "Agglomerative clustering failed: Found array with 1 sample(s) (shape=(1, 1)) while a minimum of 2 is required by AgglomerativeClustering., using simple segmentation", "taskName": null}
{"timestamp": "2025-11-14T21:50:03.762941Z", "level": "WARNING", "module": "structure_analysis", "message": "Empty audio detected, returning single-segment fallback", "taskName": null}
{"timestamp": "2025-11-14T21:50:03.784704Z", "level": "INFO", "module": "structure_analysis", "message": "Structure analysis complete: 3 segments", "taskName": null}
{"timestamp": "2025-11-14T21:50:03.788377Z", "level": "INFO", "module": "whisper_client", "message": "Created temporary audio file: /var/folders/d5/vzgmwykd2jsbxfy1k60z4ds00000gq/T/tmpn8re2md7.mp3", "taskName": "Task-43"}
{"timestamp": "2025-11-14T21:50:03.788706Z", "level": "INFO", "module": "whisper_client", "message": "Whisper API response received: 3 words", "taskName": "Task-43"}
{"timestamp": "2025-11-14T21:50:03.788765Z", "level": "INFO", "module": "whisper_client", "message": "Extracted 3 lyrics from audio", "taskName": "Task-43"}
{"timestamp": "2025-11-14T21:50:03.788824Z", "level": "INFO", "module": "whisper_client", "message": "Tracked Whisper API cost: $0.006 for 60.00s audio", "taskName": "Task-43"}
{"timestamp": "2025-11-14T21:50:03.793645Z", "level": "INFO", "module": "whisper_client", "message": "Created temporary audio file: /var/folders/d5/vzgmwykd2jsbxfy1k60z4ds00000gq/T/tmp5gvts3_s.mp3", "taskName": "Task-46"}
{"timestamp": "2025-11-14T21:50:03.793891Z", "level": "INFO", "module": "whisper_client", "message": "Whisper API response received: 0 words", "taskName": "Task-46"}
{"timestamp": "2025-11-14T21:50:03.793951Z", "level": "INFO", "module": "whisper_client", "message": "Extracted 0 lyrics from audio", "taskName": "Task-46"}
{"timestamp": "2025-11-14T21:50:10.211711Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job 68560aa2-4a81-40af-b272-bb4af9ac96dd: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(68560aa2-4a81-40af-b272-bb4af9ac96dd) is not present in table \"jobs\".'}", "taskName": "Task-46", "job_id": "68560aa2-4a81-40af-b272-bb4af9ac96dd", "error": "Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(68560aa2-4a81-40af-b272-bb4af9ac96dd) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-14T21:50:10.213125Z", "level": "ERROR", "module": "whisper_client", "message": "Whisper API call failed: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(68560aa2-4a81-40af-b272-bb4af9ac96dd) is not present in table \"jobs\".'}", "taskName": "Task-46", "job_id": "68560aa2-4a81-40af-b272-bb4af9ac96dd"}
{"timestamp": "2025-11-14T21:50:10.213933Z", "level": "WARNING", "module": "whisper_client", "message": "Whisper API call failed after retries: Failed to extract lyrics: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(68560aa2-4a81-40af-b272-bb4af9ac96dd) is not present in table \"jobs\".'}, returning empty lyrics", "taskName": "Task-46", "job_id": "68560aa2-4a81-40af-b272-bb4af9ac96dd"}
{"timestamp": "2025-11-14T21:50:10.222674Z", "level": "INFO", "module": "whisper_client", "message": "Created temporary audio file: /var/folders/d5/vzgmwykd2jsbxfy1k60z4ds00000gq/T/tmpmm7hysh5.mp3", "taskName": "Task-49"}
{"timestamp": "2025-11-14T21:50:10.223101Z", "level": "INFO", "module": "whisper_client", "message": "Whisper API response received: 4 words", "taskName": "Task-49"}
{"timestamp": "2025-11-14T21:50:10.223240Z", "level": "INFO", "module": "whisper_client", "message": "Extracted 2 lyrics from audio", "taskName": "Task-49"}
{"timestamp": "2025-11-14T21:50:10.223371Z", "level": "INFO", "module": "whisper_client", "message": "Tracked Whisper API cost: $0.006 for 60.00s audio", "taskName": "Task-49"}
{"timestamp": "2025-11-14T21:50:10.227615Z", "level": "INFO", "module": "whisper_client", "message": "Created temporary audio file: /var/folders/d5/vzgmwykd2jsbxfy1k60z4ds00000gq/T/tmp1gbee1k0.mp3", "taskName": "Task-52"}
{"timestamp": "2025-11-14T21:50:10.228042Z", "level": "ERROR", "module": "whisper_client", "message": "Whisper API call failed: API Error", "taskName": "Task-52", "job_id": "5ac96d32-af39-4b1a-9558-283d40fa850c"}
{"timestamp": "2025-11-14T21:50:10.228218Z", "level": "WARNING", "module": "whisper_client", "message": "Whisper API call failed after retries: Failed to extract lyrics: API Error, returning empty lyrics", "taskName": "Task-52", "job_id": "5ac96d32-af39-4b1a-9558-283d40fa850c"}
{"timestamp": "2025-11-14T21:50:10.230467Z", "level": "INFO", "module": "whisper_client", "message": "Created temporary audio file: /var/folders/d5/vzgmwykd2jsbxfy1k60z4ds00000gq/T/tmp0fe2pl4b.mp3", "taskName": "Task-55"}
{"timestamp": "2025-11-14T21:50:10.230751Z", "level": "INFO", "module": "whisper_client", "message": "Whisper API response received: 1 words", "taskName": "Task-55"}
{"timestamp": "2025-11-14T21:50:10.230825Z", "level": "INFO", "module": "whisper_client", "message": "Extracted 1 lyrics from audio", "taskName": "Task-55"}
{"timestamp": "2025-11-14T21:50:10.231058Z", "level": "ERROR", "module": "whisper_client", "message": "Whisper API call failed: object MagicMock can't be used in 'await' expression", "taskName": "Task-55", "job_id": "038982ca-9352-46d0-958d-19989c5c916c"}
{"timestamp": "2025-11-14T21:50:10.231218Z", "level": "WARNING", "module": "whisper_client", "message": "Whisper API call failed after retries: Failed to extract lyrics: object MagicMock can't be used in 'await' expression, returning empty lyrics", "taskName": "Task-55", "job_id": "038982ca-9352-46d0-958d-19989c5c916c"}
{"timestamp": "2025-11-14T21:50:16.848931Z", "level": "WARNING", "module": "beat_detection", "message": "aubio not available, using librosa onset detection as fallback", "taskName": null}
{"timestamp": "2025-11-14T21:50:17.831043Z", "level": "INFO", "module": "whisper_client", "message": "Created temporary audio file: /var/folders/d5/vzgmwykd2jsbxfy1k60z4ds00000gq/T/tmpxz34xmrx.mp3", "taskName": "Task-1"}
{"timestamp": "2025-11-14T21:50:17.831667Z", "level": "INFO", "module": "whisper_client", "message": "Whisper API response received: 3 words", "taskName": "Task-1"}
{"timestamp": "2025-11-14T21:50:17.831725Z", "level": "INFO", "module": "whisper_client", "message": "Extracted 3 lyrics from audio", "taskName": "Task-1"}
{"timestamp": "2025-11-14T21:50:17.831772Z", "level": "INFO", "module": "whisper_client", "message": "Tracked Whisper API cost: $0.006 for 60.00s audio", "taskName": "Task-1"}
{"timestamp": "2025-11-14T21:50:25.286348Z", "level": "WARNING", "module": "beat_detection", "message": "aubio not available, using librosa onset detection as fallback", "taskName": null}
{"timestamp": "2025-11-14T21:50:33.786563Z", "level": "WARNING", "module": "beat_detection", "message": "aubio not available, using librosa onset detection as fallback", "taskName": null}
{"timestamp": "2025-11-14T21:50:36.178213Z", "level": "WARNING", "module": "beat_detection", "message": "BPM 0.00 outside valid range [60, 200], using default 120 BPM", "taskName": null}
{"timestamp": "2025-11-14T21:50:36.178294Z", "level": "WARNING", "module": "beat_detection", "message": "Low confidence (0.50) in beat detection, using tempo-based boundaries", "taskName": null}
{"timestamp": "2025-11-14T21:50:36.183166Z", "level": "WARNING", "module": "beat_detection", "message": "BPM 0.00 outside valid range [60, 200], using default 120 BPM", "taskName": null}
{"timestamp": "2025-11-14T21:50:36.183218Z", "level": "WARNING", "module": "beat_detection", "message": "Low confidence (0.50) in beat detection, using tempo-based boundaries", "taskName": null}
{"timestamp": "2025-11-14T21:50:36.188291Z", "level": "WARNING", "module": "beat_detection", "message": "BPM 0.00 outside valid range [60, 200], using default 120 BPM", "taskName": null}
{"timestamp": "2025-11-14T21:50:36.188356Z", "level": "WARNING", "module": "beat_detection", "message": "Low confidence (0.50) in beat detection, using tempo-based boundaries", "taskName": null}
{"timestamp": "2025-11-14T21:50:36.192403Z", "level": "WARNING", "module": "beat_detection", "message": "BPM 0.00 outside valid range [60, 200], using default 120 BPM", "taskName": null}
{"timestamp": "2025-11-14T21:50:36.192447Z", "level": "WARNING", "module": "beat_detection", "message": "Low confidence (0.50) in beat detection, using tempo-based boundaries", "taskName": null}
{"timestamp": "2025-11-14T21:50:36.194680Z", "level": "WARNING", "module": "beat_detection", "message": "BPM 0.00 outside valid range [60, 200], using default 120 BPM", "taskName": null}
{"timestamp": "2025-11-14T21:50:36.194823Z", "level": "WARNING", "module": "beat_detection", "message": "Low confidence (0.50) in beat detection, using tempo-based boundaries", "taskName": null}
{"timestamp": "2025-11-14T21:50:36.197268Z", "level": "WARNING", "module": "boundaries", "message": "Only 2 boundaries generated, need 3. Regenerating with reduced duration per clip.", "taskName": null}
{"timestamp": "2025-11-14T21:50:36.197338Z", "level": "INFO", "module": "boundaries", "message": "Generated 3 clip boundaries", "taskName": null}
{"timestamp": "2025-11-14T21:50:36.197671Z", "level": "WARNING", "module": "boundaries", "message": "Only 2 boundaries generated, need 3. Regenerating with reduced duration per clip.", "taskName": null}
{"timestamp": "2025-11-14T21:50:36.197719Z", "level": "INFO", "module": "boundaries", "message": "Generated 3 clip boundaries", "taskName": null}
{"timestamp": "2025-11-14T21:50:36.198020Z", "level": "INFO", "module": "boundaries", "message": "Generated 5 clip boundaries", "taskName": null}
{"timestamp": "2025-11-14T21:50:36.198295Z", "level": "WARNING", "module": "boundaries", "message": "Only 1 boundaries generated, need 3. Regenerating with reduced duration per clip.", "taskName": null}
{"timestamp": "2025-11-14T21:50:36.198336Z", "level": "INFO", "module": "boundaries", "message": "Generated 3 clip boundaries", "taskName": null}
{"timestamp": "2025-11-14T21:50:36.198618Z", "level": "WARNING", "module": "boundaries", "message": "No beat timestamps available, generating uniform boundaries", "taskName": null}
{"timestamp": "2025-11-14T21:50:36.198894Z", "level": "WARNING", "module": "boundaries", "message": "Only 0 boundaries generated, need 3. Regenerating with reduced duration per clip.", "taskName": null}
{"timestamp": "2025-11-14T21:50:36.198937Z", "level": "INFO", "module": "boundaries", "message": "Generated 3 clip boundaries", "taskName": null}
{"timestamp": "2025-11-14T21:50:36.199436Z", "level": "INFO", "module": "boundaries", "message": "Generated 25 clip boundaries", "taskName": null}
{"timestamp": "2025-11-14T21:50:36.199726Z", "level": "WARNING", "module": "boundaries", "message": "Only 2 boundaries generated, need 3. Regenerating with reduced duration per clip.", "taskName": null}
{"timestamp": "2025-11-14T21:50:36.199773Z", "level": "INFO", "module": "boundaries", "message": "Generated 3 clip boundaries", "taskName": null}
{"timestamp": "2025-11-14T21:50:36.667168Z", "level": "INFO", "module": "cache", "message": "Stored analysis in Redis cache: test_hash_12345", "taskName": "Task-1"}
{"timestamp": "2025-11-14T21:50:36.686590Z", "level": "WARNING", "module": "cache", "message": "Failed to store cached analysis: 'AsyncTableQueryBuilder' object has no attribute 'upsert'", "taskName": "Task-1", "file_hash": "test_hash_12345", "error": "'AsyncTableQueryBuilder' object has no attribute 'upsert'"}
{"timestamp": "2025-11-14T21:50:36.799952Z", "level": "INFO", "module": "cache", "message": "Cache hit for file hash: test_hash_12345", "taskName": "Task-1"}
{"timestamp": "2025-11-14T21:50:36.803579Z", "level": "WARNING", "module": "cache", "message": "Failed to get cached analysis: Failed to get JSON from Redis: Failed to get Redis key: Event loop is closed", "taskName": "Task-4", "file_hash": "nonexistent_hash"}
{"timestamp": "2025-11-14T21:50:37.279510Z", "level": "INFO", "module": "cache", "message": "Stored analysis in Redis cache: test_serialization", "taskName": "Task-7"}
{"timestamp": "2025-11-14T21:50:37.279675Z", "level": "WARNING", "module": "cache", "message": "Failed to store cached analysis: 'AsyncTableQueryBuilder' object has no attribute 'upsert'", "taskName": "Task-7", "file_hash": "test_serialization", "error": "'AsyncTableQueryBuilder' object has no attribute 'upsert'"}
{"timestamp": "2025-11-14T21:50:37.394945Z", "level": "INFO", "module": "cache", "message": "Cache hit for file hash: test_serialization", "taskName": "Task-7"}
{"timestamp": "2025-11-14T21:50:37.397909Z", "level": "WARNING", "module": "cache", "message": "Failed to store cached analysis: Failed to set JSON in Redis: Failed to set Redis key: Event loop is closed", "taskName": "Task-10", "file_hash": "test_ttl", "error": "Failed to set JSON in Redis: Failed to set Redis key: Event loop is closed"}
{"timestamp": "2025-11-14T21:50:37.868437Z", "level": "INFO", "module": "cache", "message": "Cache hit for file hash: test_ttl", "taskName": "Task-10"}
{"timestamp": "2025-11-14T21:50:37.885438Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=energetic, secondary=dark, energy=high, confidence=0.93", "taskName": null}
{"timestamp": "2025-11-14T21:50:37.899302Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=dark, secondary=calm, energy=low, confidence=0.83", "taskName": null}
{"timestamp": "2025-11-14T21:50:37.911796Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=dark, secondary=calm, energy=high, confidence=0.77", "taskName": null}
{"timestamp": "2025-11-14T21:50:37.924055Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=energetic, secondary=None, energy=high, confidence=0.73", "taskName": null}
{"timestamp": "2025-11-14T21:50:37.931202Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=dark, secondary=energetic, energy=high, confidence=0.77", "taskName": null}
{"timestamp": "2025-11-14T21:50:37.938324Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=dark, secondary=energetic, energy=high, confidence=0.77", "taskName": null}
{"timestamp": "2025-11-14T21:50:37.939079Z", "level": "ERROR", "module": "mood_classifier", "message": "Mood classification failed: can't extend empty axis 0 using modes other than 'constant' or 'empty'", "taskName": null}
{"timestamp": "2025-11-14T21:50:37.942772Z", "level": "INFO", "module": "parser", "message": "Loading audio file for job 38554bc8-ff3b-4715-97ba-e8eef1d468f7", "job_id": "38554bc8-ff3b-4715-97ba-e8eef1d468f7", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:50:38.164047Z", "level": "INFO", "module": "parser", "message": "Audio loaded: duration=10.00s, sample_rate=22050 Hz", "job_id": "38554bc8-ff3b-4715-97ba-e8eef1d468f7", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:50:38.164144Z", "level": "INFO", "module": "parser", "message": "Detecting beats...", "job_id": "38554bc8-ff3b-4715-97ba-e8eef1d468f7", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:50:38.174552Z", "level": "WARNING", "module": "beat_detection", "message": "BPM 0.00 outside valid range [60, 200], using default 120 BPM", "job_id": "38554bc8-ff3b-4715-97ba-e8eef1d468f7", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:50:38.174626Z", "level": "WARNING", "module": "beat_detection", "message": "Low confidence (0.50) in beat detection, using tempo-based boundaries", "job_id": "38554bc8-ff3b-4715-97ba-e8eef1d468f7", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:50:38.174675Z", "level": "INFO", "module": "parser", "message": "Beat detection complete: BPM=120.00, beats=20, confidence=0.50", "job_id": "38554bc8-ff3b-4715-97ba-e8eef1d468f7", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:50:38.174710Z", "level": "INFO", "module": "parser", "message": "Analyzing song structure...", "job_id": "38554bc8-ff3b-4715-97ba-e8eef1d468f7", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:50:38.233799Z", "level": "INFO", "module": "structure_analysis", "message": "Structure analysis complete: 122 segments", "job_id": "38554bc8-ff3b-4715-97ba-e8eef1d468f7", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:50:38.233877Z", "level": "INFO", "module": "parser", "message": "Structure analysis complete: 122 segments", "job_id": "38554bc8-ff3b-4715-97ba-e8eef1d468f7", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:50:38.233916Z", "level": "INFO", "module": "parser", "message": "Extracting lyrics...", "job_id": "38554bc8-ff3b-4715-97ba-e8eef1d468f7", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:50:38.234268Z", "level": "INFO", "module": "whisper_client", "message": "Created temporary audio file: /var/folders/d5/vzgmwykd2jsbxfy1k60z4ds00000gq/T/tmpywyd1g20.mp3", "job_id": "38554bc8-ff3b-4715-97ba-e8eef1d468f7", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:50:39.241840Z", "level": "INFO", "module": "whisper_client", "message": "Whisper API response received: 1 words", "job_id": "38554bc8-ff3b-4715-97ba-e8eef1d468f7", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:50:39.242449Z", "level": "ERROR", "module": "whisper_client", "message": "Whisper API call failed: 'TranscriptionWord' object has no attribute 'get'", "job_id": "38554bc8-ff3b-4715-97ba-e8eef1d468f7", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:50:39.242751Z", "level": "WARNING", "module": "whisper_client", "message": "Whisper API call failed after retries: Failed to extract lyrics: 'TranscriptionWord' object has no attribute 'get', returning empty lyrics", "job_id": "38554bc8-ff3b-4715-97ba-e8eef1d468f7", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:50:39.242849Z", "level": "INFO", "module": "parser", "message": "Lyrics extraction complete: 0 words", "job_id": "38554bc8-ff3b-4715-97ba-e8eef1d468f7", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:50:39.242906Z", "level": "INFO", "module": "parser", "message": "Classifying mood...", "job_id": "38554bc8-ff3b-4715-97ba-e8eef1d468f7", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:50:39.260746Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=dark, secondary=energetic, energy=high, confidence=0.77", "job_id": "38554bc8-ff3b-4715-97ba-e8eef1d468f7", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:50:39.260875Z", "level": "INFO", "module": "parser", "message": "Mood classification complete: dark, confidence=0.77", "job_id": "38554bc8-ff3b-4715-97ba-e8eef1d468f7", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:50:39.260934Z", "level": "INFO", "module": "parser", "message": "Generating clip boundaries...", "job_id": "38554bc8-ff3b-4715-97ba-e8eef1d468f7", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:50:39.261021Z", "level": "WARNING", "module": "boundaries", "message": "Only 2 boundaries generated, need 3. Regenerating with reduced duration per clip.", "job_id": "38554bc8-ff3b-4715-97ba-e8eef1d468f7", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:50:39.261087Z", "level": "INFO", "module": "boundaries", "message": "Generated 3 clip boundaries", "job_id": "38554bc8-ff3b-4715-97ba-e8eef1d468f7", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:50:39.261141Z", "level": "INFO", "module": "parser", "message": "Boundary generation complete: 3 boundaries", "job_id": "38554bc8-ff3b-4715-97ba-e8eef1d468f7", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:50:39.261205Z", "level": "INFO", "module": "parser", "message": "Audio analysis complete for job 38554bc8-ff3b-4715-97ba-e8eef1d468f7: duration=10.00s, processing_time=1.32s, beats=20, segments=122, lyrics=0, boundaries=3", "job_id": "38554bc8-ff3b-4715-97ba-e8eef1d468f7", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:50:39.267719Z", "level": "INFO", "module": "parser", "message": "Loading audio file for job b904e8e8-111c-4103-81e8-704a343d0234", "job_id": "b904e8e8-111c-4103-81e8-704a343d0234", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:50:39.268368Z", "level": "INFO", "module": "parser", "message": "Audio loaded: duration=10.00s, sample_rate=22050 Hz", "job_id": "b904e8e8-111c-4103-81e8-704a343d0234", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:50:39.268416Z", "level": "INFO", "module": "parser", "message": "Detecting beats...", "job_id": "b904e8e8-111c-4103-81e8-704a343d0234", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:50:39.278463Z", "level": "WARNING", "module": "beat_detection", "message": "BPM 0.00 outside valid range [60, 200], using default 120 BPM", "job_id": "b904e8e8-111c-4103-81e8-704a343d0234", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:50:39.278528Z", "level": "WARNING", "module": "beat_detection", "message": "Low confidence (0.50) in beat detection, using tempo-based boundaries", "job_id": "b904e8e8-111c-4103-81e8-704a343d0234", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:50:39.278571Z", "level": "INFO", "module": "parser", "message": "Beat detection complete: BPM=120.00, beats=20, confidence=0.50", "job_id": "b904e8e8-111c-4103-81e8-704a343d0234", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:50:39.278605Z", "level": "INFO", "module": "parser", "message": "Analyzing song structure...", "job_id": "b904e8e8-111c-4103-81e8-704a343d0234", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:50:39.318690Z", "level": "INFO", "module": "structure_analysis", "message": "Structure analysis complete: 122 segments", "job_id": "b904e8e8-111c-4103-81e8-704a343d0234", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:50:39.318760Z", "level": "INFO", "module": "parser", "message": "Structure analysis complete: 122 segments", "job_id": "b904e8e8-111c-4103-81e8-704a343d0234", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:50:39.318802Z", "level": "INFO", "module": "parser", "message": "Extracting lyrics...", "job_id": "b904e8e8-111c-4103-81e8-704a343d0234", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:50:39.319140Z", "level": "INFO", "module": "whisper_client", "message": "Created temporary audio file: /var/folders/d5/vzgmwykd2jsbxfy1k60z4ds00000gq/T/tmpqct844q5.mp3", "job_id": "b904e8e8-111c-4103-81e8-704a343d0234", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:50:41.357746Z", "level": "INFO", "module": "whisper_client", "message": "Whisper API response received: 1 words", "job_id": "b904e8e8-111c-4103-81e8-704a343d0234", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:50:41.358146Z", "level": "ERROR", "module": "whisper_client", "message": "Whisper API call failed: 'TranscriptionWord' object has no attribute 'get'", "job_id": "b904e8e8-111c-4103-81e8-704a343d0234", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:50:41.358896Z", "level": "WARNING", "module": "whisper_client", "message": "Whisper API call failed after retries: Failed to extract lyrics: 'TranscriptionWord' object has no attribute 'get', returning empty lyrics", "job_id": "b904e8e8-111c-4103-81e8-704a343d0234", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:50:41.359088Z", "level": "INFO", "module": "parser", "message": "Lyrics extraction complete: 0 words", "job_id": "b904e8e8-111c-4103-81e8-704a343d0234", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:50:41.359213Z", "level": "INFO", "module": "parser", "message": "Classifying mood...", "job_id": "b904e8e8-111c-4103-81e8-704a343d0234", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:50:41.382658Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=dark, secondary=energetic, energy=high, confidence=0.77", "job_id": "b904e8e8-111c-4103-81e8-704a343d0234", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:50:41.382796Z", "level": "INFO", "module": "parser", "message": "Mood classification complete: dark, confidence=0.77", "job_id": "b904e8e8-111c-4103-81e8-704a343d0234", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:50:41.382867Z", "level": "INFO", "module": "parser", "message": "Generating clip boundaries...", "job_id": "b904e8e8-111c-4103-81e8-704a343d0234", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:50:41.382946Z", "level": "WARNING", "module": "boundaries", "message": "Only 2 boundaries generated, need 3. Regenerating with reduced duration per clip.", "job_id": "b904e8e8-111c-4103-81e8-704a343d0234", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:50:41.383020Z", "level": "INFO", "module": "boundaries", "message": "Generated 3 clip boundaries", "job_id": "b904e8e8-111c-4103-81e8-704a343d0234", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:50:41.383072Z", "level": "INFO", "module": "parser", "message": "Boundary generation complete: 3 boundaries", "job_id": "b904e8e8-111c-4103-81e8-704a343d0234", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:50:41.383143Z", "level": "INFO", "module": "parser", "message": "Audio analysis complete for job b904e8e8-111c-4103-81e8-704a343d0234: duration=10.00s, processing_time=2.12s, beats=20, segments=122, lyrics=0, boundaries=3", "job_id": "b904e8e8-111c-4103-81e8-704a343d0234", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:50:41.385199Z", "level": "INFO", "module": "parser", "message": "Loading audio file for job 6b16cf36-54b7-4986-9417-222280a8c8e2", "job_id": "6b16cf36-54b7-4986-9417-222280a8c8e2", "taskName": "Task-19"}
{"timestamp": "2025-11-14T21:50:41.385391Z", "level": "ERROR", "module": "parser", "message": "Audio parsing failed for job 6b16cf36-54b7-4986-9417-222280a8c8e2: Error opening <_io.BytesIO object at 0x11c2a7830>: Format not recognised.", "job_id": "6b16cf36-54b7-4986-9417-222280a8c8e2", "taskName": "Task-19"}
{"timestamp": "2025-11-14T21:50:41.386327Z", "level": "INFO", "module": "parser", "message": "Loading audio file for job 7bd43452-b1ad-4a45-9c2a-8c6f6dd114ba", "job_id": "7bd43452-b1ad-4a45-9c2a-8c6f6dd114ba", "taskName": "Task-22"}
{"timestamp": "2025-11-14T21:50:41.386448Z", "level": "ERROR", "module": "parser", "message": "Audio parsing failed for job 7bd43452-b1ad-4a45-9c2a-8c6f6dd114ba: Error opening <_io.BytesIO object at 0x11c2a7b00>: Format not recognised.", "job_id": "7bd43452-b1ad-4a45-9c2a-8c6f6dd114ba", "taskName": "Task-22"}
{"timestamp": "2025-11-14T21:50:41.387734Z", "level": "INFO", "module": "main", "message": "Starting audio analysis for job None, audio_url=test_url", "taskName": "Task-25"}
{"timestamp": "2025-11-14T21:50:41.388542Z", "level": "INFO", "module": "main", "message": "Starting audio analysis for job a33c8fd1-73d5-4e4e-b49b-691a874ac84d, audio_url=None", "job_id": "a33c8fd1-73d5-4e4e-b49b-691a874ac84d", "taskName": "Task-28"}
{"timestamp": "2025-11-14T21:50:41.391921Z", "level": "INFO", "module": "parser", "message": "Loading audio file for job 6585a1b3-3189-4b6d-89ab-fb3291c6757b", "job_id": "6585a1b3-3189-4b6d-89ab-fb3291c6757b", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:50:41.392263Z", "level": "INFO", "module": "parser", "message": "Audio loaded: duration=5.00s, sample_rate=22050 Hz", "job_id": "6585a1b3-3189-4b6d-89ab-fb3291c6757b", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:50:41.392309Z", "level": "INFO", "module": "parser", "message": "Detecting beats...", "job_id": "6585a1b3-3189-4b6d-89ab-fb3291c6757b", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:50:41.398185Z", "level": "ERROR", "module": "beat_detection", "message": "Beat detection failed: unsupported format string passed to numpy.ndarray.__format__", "job_id": "6585a1b3-3189-4b6d-89ab-fb3291c6757b", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:50:41.398253Z", "level": "WARNING", "module": "beat_detection", "message": "Using fallback tempo-based beats: BPM=120.0, beats=10", "job_id": "6585a1b3-3189-4b6d-89ab-fb3291c6757b", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:50:41.398306Z", "level": "INFO", "module": "parser", "message": "Beat detection complete: BPM=120.00, beats=10, confidence=0.50", "job_id": "6585a1b3-3189-4b6d-89ab-fb3291c6757b", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:50:41.398351Z", "level": "INFO", "module": "parser", "message": "Analyzing song structure...", "job_id": "6585a1b3-3189-4b6d-89ab-fb3291c6757b", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:50:41.412525Z", "level": "INFO", "module": "structure_analysis", "message": "Structure analysis complete: 5 segments", "job_id": "6585a1b3-3189-4b6d-89ab-fb3291c6757b", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:50:41.412603Z", "level": "INFO", "module": "parser", "message": "Structure analysis complete: 5 segments", "job_id": "6585a1b3-3189-4b6d-89ab-fb3291c6757b", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:50:41.412652Z", "level": "INFO", "module": "parser", "message": "Extracting lyrics...", "job_id": "6585a1b3-3189-4b6d-89ab-fb3291c6757b", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:50:41.413008Z", "level": "INFO", "module": "whisper_client", "message": "Created temporary audio file: /var/folders/d5/vzgmwykd2jsbxfy1k60z4ds00000gq/T/tmp9rhe_lza.mp3", "job_id": "6585a1b3-3189-4b6d-89ab-fb3291c6757b", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:50:44.268173Z", "level": "INFO", "module": "whisper_client", "message": "Whisper API response received: 4 words", "job_id": "6585a1b3-3189-4b6d-89ab-fb3291c6757b", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:50:44.268352Z", "level": "ERROR", "module": "whisper_client", "message": "Whisper API call failed: 'TranscriptionWord' object has no attribute 'get'", "job_id": "6585a1b3-3189-4b6d-89ab-fb3291c6757b", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:50:44.268682Z", "level": "WARNING", "module": "whisper_client", "message": "Whisper API call failed after retries: Failed to extract lyrics: 'TranscriptionWord' object has no attribute 'get', returning empty lyrics", "job_id": "6585a1b3-3189-4b6d-89ab-fb3291c6757b", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:50:44.268786Z", "level": "INFO", "module": "parser", "message": "Lyrics extraction complete: 0 words", "job_id": "6585a1b3-3189-4b6d-89ab-fb3291c6757b", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:50:44.268858Z", "level": "INFO", "module": "parser", "message": "Classifying mood...", "job_id": "6585a1b3-3189-4b6d-89ab-fb3291c6757b", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:50:44.281166Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=bright, secondary=energetic, energy=low, confidence=0.77", "job_id": "6585a1b3-3189-4b6d-89ab-fb3291c6757b", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:50:44.281327Z", "level": "INFO", "module": "parser", "message": "Mood classification complete: bright, confidence=0.77", "job_id": "6585a1b3-3189-4b6d-89ab-fb3291c6757b", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:50:44.281399Z", "level": "INFO", "module": "parser", "message": "Generating clip boundaries...", "job_id": "6585a1b3-3189-4b6d-89ab-fb3291c6757b", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:50:44.281485Z", "level": "WARNING", "module": "boundaries", "message": "Only 1 boundaries generated, need 3. Regenerating with reduced duration per clip.", "job_id": "6585a1b3-3189-4b6d-89ab-fb3291c6757b", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:50:44.281567Z", "level": "INFO", "module": "boundaries", "message": "Generated 3 clip boundaries", "job_id": "6585a1b3-3189-4b6d-89ab-fb3291c6757b", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:50:44.281627Z", "level": "INFO", "module": "parser", "message": "Boundary generation complete: 3 boundaries", "job_id": "6585a1b3-3189-4b6d-89ab-fb3291c6757b", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:50:44.281718Z", "level": "INFO", "module": "parser", "message": "Audio analysis complete for job 6585a1b3-3189-4b6d-89ab-fb3291c6757b: duration=5.00s, processing_time=2.89s, beats=10, segments=5, lyrics=0, boundaries=3", "job_id": "6585a1b3-3189-4b6d-89ab-fb3291c6757b", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:50:44.287456Z", "level": "INFO", "module": "parser", "message": "Loading audio file for job 8fb2f311-7435-45da-adcf-aa29f92a96d9", "job_id": "8fb2f311-7435-45da-adcf-aa29f92a96d9", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:50:44.288219Z", "level": "INFO", "module": "parser", "message": "Audio loaded: duration=10.00s, sample_rate=22050 Hz", "job_id": "8fb2f311-7435-45da-adcf-aa29f92a96d9", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:50:44.288277Z", "level": "INFO", "module": "parser", "message": "Detecting beats...", "job_id": "8fb2f311-7435-45da-adcf-aa29f92a96d9", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:50:44.300684Z", "level": "WARNING", "module": "beat_detection", "message": "BPM 0.00 outside valid range [60, 200], using default 120 BPM", "job_id": "8fb2f311-7435-45da-adcf-aa29f92a96d9", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:50:44.300772Z", "level": "WARNING", "module": "beat_detection", "message": "Low confidence (0.50) in beat detection, using tempo-based boundaries", "job_id": "8fb2f311-7435-45da-adcf-aa29f92a96d9", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:50:44.300833Z", "level": "INFO", "module": "parser", "message": "Beat detection complete: BPM=120.00, beats=20, confidence=0.50", "job_id": "8fb2f311-7435-45da-adcf-aa29f92a96d9", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:50:44.300883Z", "level": "INFO", "module": "parser", "message": "Analyzing song structure...", "job_id": "8fb2f311-7435-45da-adcf-aa29f92a96d9", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:50:44.343920Z", "level": "INFO", "module": "structure_analysis", "message": "Structure analysis complete: 122 segments", "job_id": "8fb2f311-7435-45da-adcf-aa29f92a96d9", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:50:44.344000Z", "level": "INFO", "module": "parser", "message": "Structure analysis complete: 122 segments", "job_id": "8fb2f311-7435-45da-adcf-aa29f92a96d9", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:50:44.344038Z", "level": "INFO", "module": "parser", "message": "Extracting lyrics...", "job_id": "8fb2f311-7435-45da-adcf-aa29f92a96d9", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:50:44.344383Z", "level": "INFO", "module": "whisper_client", "message": "Created temporary audio file: /var/folders/d5/vzgmwykd2jsbxfy1k60z4ds00000gq/T/tmp82x9kjs8.mp3", "job_id": "8fb2f311-7435-45da-adcf-aa29f92a96d9", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:50:45.596090Z", "level": "INFO", "module": "whisper_client", "message": "Whisper API response received: 1 words", "job_id": "8fb2f311-7435-45da-adcf-aa29f92a96d9", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:50:45.596468Z", "level": "ERROR", "module": "whisper_client", "message": "Whisper API call failed: 'TranscriptionWord' object has no attribute 'get'", "job_id": "8fb2f311-7435-45da-adcf-aa29f92a96d9", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:50:45.596810Z", "level": "WARNING", "module": "whisper_client", "message": "Whisper API call failed after retries: Failed to extract lyrics: 'TranscriptionWord' object has no attribute 'get', returning empty lyrics", "job_id": "8fb2f311-7435-45da-adcf-aa29f92a96d9", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:50:45.596895Z", "level": "INFO", "module": "parser", "message": "Lyrics extraction complete: 0 words", "job_id": "8fb2f311-7435-45da-adcf-aa29f92a96d9", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:50:45.596945Z", "level": "INFO", "module": "parser", "message": "Classifying mood...", "job_id": "8fb2f311-7435-45da-adcf-aa29f92a96d9", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:50:45.610295Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=dark, secondary=energetic, energy=high, confidence=0.77", "job_id": "8fb2f311-7435-45da-adcf-aa29f92a96d9", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:50:45.610386Z", "level": "INFO", "module": "parser", "message": "Mood classification complete: dark, confidence=0.77", "job_id": "8fb2f311-7435-45da-adcf-aa29f92a96d9", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:50:45.610430Z", "level": "INFO", "module": "parser", "message": "Generating clip boundaries...", "job_id": "8fb2f311-7435-45da-adcf-aa29f92a96d9", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:50:45.610486Z", "level": "WARNING", "module": "boundaries", "message": "Only 2 boundaries generated, need 3. Regenerating with reduced duration per clip.", "job_id": "8fb2f311-7435-45da-adcf-aa29f92a96d9", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:50:45.610540Z", "level": "INFO", "module": "boundaries", "message": "Generated 3 clip boundaries", "job_id": "8fb2f311-7435-45da-adcf-aa29f92a96d9", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:50:45.610580Z", "level": "INFO", "module": "parser", "message": "Boundary generation complete: 3 boundaries", "job_id": "8fb2f311-7435-45da-adcf-aa29f92a96d9", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:50:45.610631Z", "level": "INFO", "module": "parser", "message": "Audio analysis complete for job 8fb2f311-7435-45da-adcf-aa29f92a96d9: duration=10.00s, processing_time=1.32s, beats=20, segments=122, lyrics=0, boundaries=3", "job_id": "8fb2f311-7435-45da-adcf-aa29f92a96d9", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:50:45.612208Z", "level": "INFO", "module": "parser", "message": "Loading audio file for job b550528b-56ad-47cf-9506-b53b42604c1d", "job_id": "b550528b-56ad-47cf-9506-b53b42604c1d", "taskName": "Task-37"}
{"timestamp": "2025-11-14T21:50:45.612326Z", "level": "ERROR", "module": "parser", "message": "Audio parsing failed for job b550528b-56ad-47cf-9506-b53b42604c1d: Error opening <_io.BytesIO object at 0x11c26eed0>: Format not recognised.", "job_id": "b550528b-56ad-47cf-9506-b53b42604c1d", "taskName": "Task-37"}
{"timestamp": "2025-11-14T21:50:45.613069Z", "level": "INFO", "module": "parser", "message": "Loading audio file for job 3881a628-4d4a-4a66-9115-474e0d355592", "job_id": "3881a628-4d4a-4a66-9115-474e0d355592", "taskName": "Task-40"}
{"timestamp": "2025-11-14T21:50:45.613143Z", "level": "ERROR", "module": "parser", "message": "Audio parsing failed for job 3881a628-4d4a-4a66-9115-474e0d355592: Error opening <_io.BytesIO object at 0x11c26f470>: Format not recognised.", "job_id": "3881a628-4d4a-4a66-9115-474e0d355592", "taskName": "Task-40"}
{"timestamp": "2025-11-14T21:50:45.706186Z", "level": "INFO", "module": "structure_analysis", "message": "Structure analysis complete: 6 segments", "taskName": null}
{"timestamp": "2025-11-14T21:50:45.745319Z", "level": "INFO", "module": "structure_analysis", "message": "Structure analysis complete: 3 segments", "taskName": null}
{"timestamp": "2025-11-14T21:50:45.774811Z", "level": "INFO", "module": "structure_analysis", "message": "Structure analysis complete: 4 segments", "taskName": null}
{"timestamp": "2025-11-14T21:50:45.776305Z", "level": "WARNING", "module": "structure_analysis", "message": "Agglomerative clustering failed: Found array with 1 sample(s) (shape=(1, 1)) while a minimum of 2 is required by AgglomerativeClustering., using simple segmentation", "taskName": null}
{"timestamp": "2025-11-14T21:50:45.776352Z", "level": "WARNING", "module": "structure_analysis", "message": "Empty audio detected, returning single-segment fallback", "taskName": null}
{"timestamp": "2025-11-14T21:50:45.796130Z", "level": "INFO", "module": "structure_analysis", "message": "Structure analysis complete: 3 segments", "taskName": null}
{"timestamp": "2025-11-14T21:50:45.800399Z", "level": "INFO", "module": "whisper_client", "message": "Created temporary audio file: /var/folders/d5/vzgmwykd2jsbxfy1k60z4ds00000gq/T/tmpr1zwavgn.mp3", "taskName": "Task-43"}
{"timestamp": "2025-11-14T21:50:45.800517Z", "level": "INFO", "module": "whisper_client", "message": "Whisper API response received: 3 words", "taskName": "Task-43"}
{"timestamp": "2025-11-14T21:50:45.800567Z", "level": "INFO", "module": "whisper_client", "message": "Extracted 3 lyrics from audio", "taskName": "Task-43"}
{"timestamp": "2025-11-14T21:50:45.800604Z", "level": "INFO", "module": "whisper_client", "message": "Tracked Whisper API cost: $0.006 for 60.00s audio", "taskName": "Task-43"}
{"timestamp": "2025-11-14T21:50:45.803698Z", "level": "INFO", "module": "whisper_client", "message": "Created temporary audio file: /var/folders/d5/vzgmwykd2jsbxfy1k60z4ds00000gq/T/tmptm2mwl6x.mp3", "taskName": "Task-46"}
{"timestamp": "2025-11-14T21:50:45.803917Z", "level": "INFO", "module": "whisper_client", "message": "Whisper API response received: 0 words", "taskName": "Task-46"}
{"timestamp": "2025-11-14T21:50:45.803956Z", "level": "INFO", "module": "whisper_client", "message": "Extracted 0 lyrics from audio", "taskName": "Task-46"}
{"timestamp": "2025-11-14T21:50:52.329509Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job 9dce3328-20e1-4107-bb8d-b8b1c72c02d8: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(9dce3328-20e1-4107-bb8d-b8b1c72c02d8) is not present in table \"jobs\".'}", "taskName": "Task-46", "job_id": "9dce3328-20e1-4107-bb8d-b8b1c72c02d8", "error": "Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(9dce3328-20e1-4107-bb8d-b8b1c72c02d8) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-14T21:50:52.330498Z", "level": "ERROR", "module": "whisper_client", "message": "Whisper API call failed: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(9dce3328-20e1-4107-bb8d-b8b1c72c02d8) is not present in table \"jobs\".'}", "taskName": "Task-46", "job_id": "9dce3328-20e1-4107-bb8d-b8b1c72c02d8"}
{"timestamp": "2025-11-14T21:50:52.331384Z", "level": "WARNING", "module": "whisper_client", "message": "Whisper API call failed after retries: Failed to extract lyrics: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(9dce3328-20e1-4107-bb8d-b8b1c72c02d8) is not present in table \"jobs\".'}, returning empty lyrics", "taskName": "Task-46", "job_id": "9dce3328-20e1-4107-bb8d-b8b1c72c02d8"}
{"timestamp": "2025-11-14T21:50:52.341608Z", "level": "INFO", "module": "whisper_client", "message": "Created temporary audio file: /var/folders/d5/vzgmwykd2jsbxfy1k60z4ds00000gq/T/tmpv334zsk6.mp3", "taskName": "Task-49"}
{"timestamp": "2025-11-14T21:50:52.342186Z", "level": "INFO", "module": "whisper_client", "message": "Whisper API response received: 4 words", "taskName": "Task-49"}
{"timestamp": "2025-11-14T21:50:52.342381Z", "level": "INFO", "module": "whisper_client", "message": "Extracted 2 lyrics from audio", "taskName": "Task-49"}
{"timestamp": "2025-11-14T21:50:52.342527Z", "level": "INFO", "module": "whisper_client", "message": "Tracked Whisper API cost: $0.006 for 60.00s audio", "taskName": "Task-49"}
{"timestamp": "2025-11-14T21:50:52.345712Z", "level": "INFO", "module": "whisper_client", "message": "Created temporary audio file: /var/folders/d5/vzgmwykd2jsbxfy1k60z4ds00000gq/T/tmp67g8rsx8.mp3", "taskName": "Task-52"}
{"timestamp": "2025-11-14T21:50:52.346186Z", "level": "ERROR", "module": "whisper_client", "message": "Whisper API call failed: API Error", "taskName": "Task-52", "job_id": "be356ca1-d581-4e8d-a1e2-f9dc039f2624"}
{"timestamp": "2025-11-14T21:50:52.346473Z", "level": "WARNING", "module": "whisper_client", "message": "Whisper API call failed after retries: Failed to extract lyrics: API Error, returning empty lyrics", "taskName": "Task-52", "job_id": "be356ca1-d581-4e8d-a1e2-f9dc039f2624"}
{"timestamp": "2025-11-14T21:50:52.348662Z", "level": "INFO", "module": "whisper_client", "message": "Created temporary audio file: /var/folders/d5/vzgmwykd2jsbxfy1k60z4ds00000gq/T/tmpgcx3b2sv.mp3", "taskName": "Task-55"}
{"timestamp": "2025-11-14T21:50:52.349156Z", "level": "INFO", "module": "whisper_client", "message": "Whisper API response received: 1 words", "taskName": "Task-55"}
{"timestamp": "2025-11-14T21:50:52.349243Z", "level": "INFO", "module": "whisper_client", "message": "Extracted 1 lyrics from audio", "taskName": "Task-55"}
{"timestamp": "2025-11-14T21:50:52.349548Z", "level": "ERROR", "module": "whisper_client", "message": "Whisper API call failed: object MagicMock can't be used in 'await' expression", "taskName": "Task-55", "job_id": "8c0ae92f-5979-4a7c-a2f2-459aee6d94c5"}
{"timestamp": "2025-11-14T21:50:52.349714Z", "level": "WARNING", "module": "whisper_client", "message": "Whisper API call failed after retries: Failed to extract lyrics: object MagicMock can't be used in 'await' expression, returning empty lyrics", "taskName": "Task-55", "job_id": "8c0ae92f-5979-4a7c-a2f2-459aee6d94c5"}
{"timestamp": "2025-11-14T21:51:05.197569Z", "level": "WARNING", "module": "beat_detection", "message": "aubio not available, using librosa onset detection as fallback", "taskName": null}
{"timestamp": "2025-11-14T21:51:06.422851Z", "level": "INFO", "module": "whisper_client", "message": "Created temporary audio file: /var/folders/d5/vzgmwykd2jsbxfy1k60z4ds00000gq/T/tmp27a00ttp.mp3", "taskName": "Task-1"}
{"timestamp": "2025-11-14T21:51:06.422986Z", "level": "INFO", "module": "whisper_client", "message": "Whisper API response received: 3 words", "taskName": "Task-1"}
{"timestamp": "2025-11-14T21:51:06.423038Z", "level": "INFO", "module": "whisper_client", "message": "Extracted 3 lyrics from audio", "taskName": "Task-1"}
{"timestamp": "2025-11-14T21:51:06.423086Z", "level": "INFO", "module": "whisper_client", "message": "Tracked Whisper API cost: $0.006 for 60.00s audio", "taskName": "Task-1"}
{"timestamp": "2025-11-14T21:51:09.240697Z", "level": "WARNING", "module": "beat_detection", "message": "aubio not available, using librosa onset detection as fallback", "taskName": null}
{"timestamp": "2025-11-14T21:51:11.296362Z", "level": "WARNING", "module": "beat_detection", "message": "BPM 0.00 outside valid range [60, 200], using default 120 BPM", "taskName": null}
{"timestamp": "2025-11-14T21:51:11.296608Z", "level": "WARNING", "module": "beat_detection", "message": "Low confidence (0.50) in beat detection, using tempo-based boundaries", "taskName": null}
{"timestamp": "2025-11-14T21:51:11.301500Z", "level": "WARNING", "module": "beat_detection", "message": "BPM 0.00 outside valid range [60, 200], using default 120 BPM", "taskName": null}
{"timestamp": "2025-11-14T21:51:11.301561Z", "level": "WARNING", "module": "beat_detection", "message": "Low confidence (0.50) in beat detection, using tempo-based boundaries", "taskName": null}
{"timestamp": "2025-11-14T21:51:11.306614Z", "level": "WARNING", "module": "beat_detection", "message": "BPM 0.00 outside valid range [60, 200], using default 120 BPM", "taskName": null}
{"timestamp": "2025-11-14T21:51:11.306667Z", "level": "WARNING", "module": "beat_detection", "message": "Low confidence (0.50) in beat detection, using tempo-based boundaries", "taskName": null}
{"timestamp": "2025-11-14T21:51:11.311118Z", "level": "WARNING", "module": "beat_detection", "message": "BPM 0.00 outside valid range [60, 200], using default 120 BPM", "taskName": null}
{"timestamp": "2025-11-14T21:51:11.311177Z", "level": "WARNING", "module": "beat_detection", "message": "Low confidence (0.50) in beat detection, using tempo-based boundaries", "taskName": null}
{"timestamp": "2025-11-14T21:51:11.313777Z", "level": "WARNING", "module": "beat_detection", "message": "BPM 0.00 outside valid range [60, 200], using default 120 BPM", "taskName": null}
{"timestamp": "2025-11-14T21:51:11.313832Z", "level": "WARNING", "module": "beat_detection", "message": "Low confidence (0.50) in beat detection, using tempo-based boundaries", "taskName": null}
{"timestamp": "2025-11-14T21:51:11.316029Z", "level": "WARNING", "module": "boundaries", "message": "Only 2 boundaries generated, need 3. Regenerating with reduced duration per clip.", "taskName": null}
{"timestamp": "2025-11-14T21:51:11.316108Z", "level": "INFO", "module": "boundaries", "message": "Generated 3 clip boundaries", "taskName": null}
{"timestamp": "2025-11-14T21:51:11.316428Z", "level": "WARNING", "module": "boundaries", "message": "Only 2 boundaries generated, need 3. Regenerating with reduced duration per clip.", "taskName": null}
{"timestamp": "2025-11-14T21:51:11.316479Z", "level": "INFO", "module": "boundaries", "message": "Generated 3 clip boundaries", "taskName": null}
{"timestamp": "2025-11-14T21:51:11.317138Z", "level": "INFO", "module": "boundaries", "message": "Generated 5 clip boundaries", "taskName": null}
{"timestamp": "2025-11-14T21:51:11.317453Z", "level": "WARNING", "module": "boundaries", "message": "Only 1 boundaries generated, need 3. Regenerating with reduced duration per clip.", "taskName": null}
{"timestamp": "2025-11-14T21:51:11.317500Z", "level": "INFO", "module": "boundaries", "message": "Generated 3 clip boundaries", "taskName": null}
{"timestamp": "2025-11-14T21:51:11.318110Z", "level": "WARNING", "module": "boundaries", "message": "No beat timestamps available, generating uniform boundaries", "taskName": null}
{"timestamp": "2025-11-14T21:51:11.318441Z", "level": "WARNING", "module": "boundaries", "message": "Only 0 boundaries generated, need 3. Regenerating with reduced duration per clip.", "taskName": null}
{"timestamp": "2025-11-14T21:51:11.318498Z", "level": "INFO", "module": "boundaries", "message": "Generated 3 clip boundaries", "taskName": null}
{"timestamp": "2025-11-14T21:51:11.318968Z", "level": "INFO", "module": "boundaries", "message": "Generated 25 clip boundaries", "taskName": null}
{"timestamp": "2025-11-14T21:51:11.319228Z", "level": "WARNING", "module": "boundaries", "message": "Only 2 boundaries generated, need 3. Regenerating with reduced duration per clip.", "taskName": null}
{"timestamp": "2025-11-14T21:51:11.319271Z", "level": "INFO", "module": "boundaries", "message": "Generated 3 clip boundaries", "taskName": null}
{"timestamp": "2025-11-14T21:51:11.788910Z", "level": "INFO", "module": "cache", "message": "Stored analysis in Redis cache: test_hash_12345", "taskName": "Task-1"}
{"timestamp": "2025-11-14T21:51:11.805841Z", "level": "WARNING", "module": "cache", "message": "Failed to store cached analysis: 'AsyncTableQueryBuilder' object has no attribute 'upsert'", "taskName": "Task-1", "file_hash": "test_hash_12345", "error": "'AsyncTableQueryBuilder' object has no attribute 'upsert'"}
{"timestamp": "2025-11-14T21:51:11.917373Z", "level": "INFO", "module": "cache", "message": "Cache hit for file hash: test_hash_12345", "taskName": "Task-1"}
{"timestamp": "2025-11-14T21:51:11.921028Z", "level": "WARNING", "module": "cache", "message": "Failed to get cached analysis: Failed to get JSON from Redis: Failed to get Redis key: Event loop is closed", "taskName": "Task-4", "file_hash": "nonexistent_hash"}
{"timestamp": "2025-11-14T21:51:12.397818Z", "level": "INFO", "module": "cache", "message": "Stored analysis in Redis cache: test_serialization", "taskName": "Task-7"}
{"timestamp": "2025-11-14T21:51:12.397956Z", "level": "WARNING", "module": "cache", "message": "Failed to store cached analysis: 'AsyncTableQueryBuilder' object has no attribute 'upsert'", "taskName": "Task-7", "file_hash": "test_serialization", "error": "'AsyncTableQueryBuilder' object has no attribute 'upsert'"}
{"timestamp": "2025-11-14T21:51:12.516762Z", "level": "INFO", "module": "cache", "message": "Cache hit for file hash: test_serialization", "taskName": "Task-7"}
{"timestamp": "2025-11-14T21:51:12.520502Z", "level": "WARNING", "module": "cache", "message": "Failed to store cached analysis: Failed to set JSON in Redis: Failed to set Redis key: Event loop is closed", "taskName": "Task-10", "file_hash": "test_ttl", "error": "Failed to set JSON in Redis: Failed to set Redis key: Event loop is closed"}
{"timestamp": "2025-11-14T21:51:13.015433Z", "level": "INFO", "module": "cache", "message": "Cache hit for file hash: test_ttl", "taskName": "Task-10"}
{"timestamp": "2025-11-14T21:51:13.042566Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=energetic, secondary=dark, energy=high, confidence=0.93", "taskName": null}
{"timestamp": "2025-11-14T21:51:13.058589Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=dark, secondary=calm, energy=low, confidence=0.83", "taskName": null}
{"timestamp": "2025-11-14T21:51:13.072810Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=dark, secondary=calm, energy=high, confidence=0.77", "taskName": null}
{"timestamp": "2025-11-14T21:51:13.085442Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=energetic, secondary=None, energy=high, confidence=0.73", "taskName": null}
{"timestamp": "2025-11-14T21:51:13.092101Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=dark, secondary=energetic, energy=high, confidence=0.77", "taskName": null}
{"timestamp": "2025-11-14T21:51:13.098501Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=dark, secondary=energetic, energy=high, confidence=0.77", "taskName": null}
{"timestamp": "2025-11-14T21:51:13.099297Z", "level": "ERROR", "module": "mood_classifier", "message": "Mood classification failed: can't extend empty axis 0 using modes other than 'constant' or 'empty'", "taskName": null}
{"timestamp": "2025-11-14T21:51:13.103148Z", "level": "INFO", "module": "parser", "message": "Loading audio file for job 78c6581a-dd86-4d83-b3ea-eb98ce27ab9e", "job_id": "78c6581a-dd86-4d83-b3ea-eb98ce27ab9e", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:51:13.324647Z", "level": "INFO", "module": "parser", "message": "Audio loaded: duration=10.00s, sample_rate=22050 Hz", "job_id": "78c6581a-dd86-4d83-b3ea-eb98ce27ab9e", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:51:13.324733Z", "level": "INFO", "module": "parser", "message": "Detecting beats...", "job_id": "78c6581a-dd86-4d83-b3ea-eb98ce27ab9e", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:51:13.334032Z", "level": "WARNING", "module": "beat_detection", "message": "BPM 0.00 outside valid range [60, 200], using default 120 BPM", "job_id": "78c6581a-dd86-4d83-b3ea-eb98ce27ab9e", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:51:13.334104Z", "level": "WARNING", "module": "beat_detection", "message": "Low confidence (0.50) in beat detection, using tempo-based boundaries", "job_id": "78c6581a-dd86-4d83-b3ea-eb98ce27ab9e", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:51:13.334149Z", "level": "INFO", "module": "parser", "message": "Beat detection complete: BPM=120.00, beats=20, confidence=0.50", "job_id": "78c6581a-dd86-4d83-b3ea-eb98ce27ab9e", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:51:13.334181Z", "level": "INFO", "module": "parser", "message": "Analyzing song structure...", "job_id": "78c6581a-dd86-4d83-b3ea-eb98ce27ab9e", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:51:13.393897Z", "level": "INFO", "module": "structure_analysis", "message": "Structure analysis complete: 122 segments", "job_id": "78c6581a-dd86-4d83-b3ea-eb98ce27ab9e", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:51:13.393971Z", "level": "INFO", "module": "parser", "message": "Structure analysis complete: 122 segments", "job_id": "78c6581a-dd86-4d83-b3ea-eb98ce27ab9e", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:51:13.394016Z", "level": "INFO", "module": "parser", "message": "Extracting lyrics...", "job_id": "78c6581a-dd86-4d83-b3ea-eb98ce27ab9e", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:51:13.394418Z", "level": "INFO", "module": "whisper_client", "message": "Created temporary audio file: /var/folders/d5/vzgmwykd2jsbxfy1k60z4ds00000gq/T/tmpc_d_ap2u.mp3", "job_id": "78c6581a-dd86-4d83-b3ea-eb98ce27ab9e", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:51:15.335472Z", "level": "INFO", "module": "whisper_client", "message": "Whisper API response received: 1 words", "job_id": "78c6581a-dd86-4d83-b3ea-eb98ce27ab9e", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:51:15.335859Z", "level": "ERROR", "module": "whisper_client", "message": "Whisper API call failed: 'TranscriptionWord' object has no attribute 'get'", "job_id": "78c6581a-dd86-4d83-b3ea-eb98ce27ab9e", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:51:15.336278Z", "level": "WARNING", "module": "whisper_client", "message": "Whisper API call failed after retries: Failed to extract lyrics: 'TranscriptionWord' object has no attribute 'get', returning empty lyrics", "job_id": "78c6581a-dd86-4d83-b3ea-eb98ce27ab9e", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:51:15.336415Z", "level": "INFO", "module": "parser", "message": "Lyrics extraction complete: 0 words", "job_id": "78c6581a-dd86-4d83-b3ea-eb98ce27ab9e", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:51:15.336480Z", "level": "INFO", "module": "parser", "message": "Classifying mood...", "job_id": "78c6581a-dd86-4d83-b3ea-eb98ce27ab9e", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:51:15.356127Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=dark, secondary=energetic, energy=high, confidence=0.77", "job_id": "78c6581a-dd86-4d83-b3ea-eb98ce27ab9e", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:51:15.356258Z", "level": "INFO", "module": "parser", "message": "Mood classification complete: dark, confidence=0.77", "job_id": "78c6581a-dd86-4d83-b3ea-eb98ce27ab9e", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:51:15.356315Z", "level": "INFO", "module": "parser", "message": "Generating clip boundaries...", "job_id": "78c6581a-dd86-4d83-b3ea-eb98ce27ab9e", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:51:15.356409Z", "level": "WARNING", "module": "boundaries", "message": "Only 2 boundaries generated, need 3. Regenerating with reduced duration per clip.", "job_id": "78c6581a-dd86-4d83-b3ea-eb98ce27ab9e", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:51:15.356550Z", "level": "INFO", "module": "boundaries", "message": "Generated 3 clip boundaries", "job_id": "78c6581a-dd86-4d83-b3ea-eb98ce27ab9e", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:51:15.356617Z", "level": "INFO", "module": "parser", "message": "Boundary generation complete: 3 boundaries", "job_id": "78c6581a-dd86-4d83-b3ea-eb98ce27ab9e", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:51:15.356705Z", "level": "INFO", "module": "parser", "message": "Audio analysis complete for job 78c6581a-dd86-4d83-b3ea-eb98ce27ab9e: duration=10.00s, processing_time=2.25s, beats=20, segments=122, lyrics=0, boundaries=3", "job_id": "78c6581a-dd86-4d83-b3ea-eb98ce27ab9e", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:51:15.363378Z", "level": "INFO", "module": "parser", "message": "Loading audio file for job 90177c9f-e9af-4238-8f5d-076804f9c724", "job_id": "90177c9f-e9af-4238-8f5d-076804f9c724", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:51:15.364060Z", "level": "INFO", "module": "parser", "message": "Audio loaded: duration=10.00s, sample_rate=22050 Hz", "job_id": "90177c9f-e9af-4238-8f5d-076804f9c724", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:51:15.364115Z", "level": "INFO", "module": "parser", "message": "Detecting beats...", "job_id": "90177c9f-e9af-4238-8f5d-076804f9c724", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:51:15.375193Z", "level": "WARNING", "module": "beat_detection", "message": "BPM 0.00 outside valid range [60, 200], using default 120 BPM", "job_id": "90177c9f-e9af-4238-8f5d-076804f9c724", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:51:15.375265Z", "level": "WARNING", "module": "beat_detection", "message": "Low confidence (0.50) in beat detection, using tempo-based boundaries", "job_id": "90177c9f-e9af-4238-8f5d-076804f9c724", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:51:15.375317Z", "level": "INFO", "module": "parser", "message": "Beat detection complete: BPM=120.00, beats=20, confidence=0.50", "job_id": "90177c9f-e9af-4238-8f5d-076804f9c724", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:51:15.375353Z", "level": "INFO", "module": "parser", "message": "Analyzing song structure...", "job_id": "90177c9f-e9af-4238-8f5d-076804f9c724", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:51:15.415241Z", "level": "INFO", "module": "structure_analysis", "message": "Structure analysis complete: 122 segments", "job_id": "90177c9f-e9af-4238-8f5d-076804f9c724", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:51:15.415313Z", "level": "INFO", "module": "parser", "message": "Structure analysis complete: 122 segments", "job_id": "90177c9f-e9af-4238-8f5d-076804f9c724", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:51:15.415350Z", "level": "INFO", "module": "parser", "message": "Extracting lyrics...", "job_id": "90177c9f-e9af-4238-8f5d-076804f9c724", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:51:15.415958Z", "level": "INFO", "module": "whisper_client", "message": "Created temporary audio file: /var/folders/d5/vzgmwykd2jsbxfy1k60z4ds00000gq/T/tmply18lvca.mp3", "job_id": "90177c9f-e9af-4238-8f5d-076804f9c724", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:51:16.085219Z", "level": "INFO", "module": "whisper_client", "message": "Whisper API response received: 1 words", "job_id": "90177c9f-e9af-4238-8f5d-076804f9c724", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:51:16.085834Z", "level": "ERROR", "module": "whisper_client", "message": "Whisper API call failed: 'TranscriptionWord' object has no attribute 'get'", "job_id": "90177c9f-e9af-4238-8f5d-076804f9c724", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:51:16.086320Z", "level": "WARNING", "module": "whisper_client", "message": "Whisper API call failed after retries: Failed to extract lyrics: 'TranscriptionWord' object has no attribute 'get', returning empty lyrics", "job_id": "90177c9f-e9af-4238-8f5d-076804f9c724", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:51:16.086448Z", "level": "INFO", "module": "parser", "message": "Lyrics extraction complete: 0 words", "job_id": "90177c9f-e9af-4238-8f5d-076804f9c724", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:51:16.086540Z", "level": "INFO", "module": "parser", "message": "Classifying mood...", "job_id": "90177c9f-e9af-4238-8f5d-076804f9c724", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:51:16.106017Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=dark, secondary=energetic, energy=high, confidence=0.77", "job_id": "90177c9f-e9af-4238-8f5d-076804f9c724", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:51:16.106140Z", "level": "INFO", "module": "parser", "message": "Mood classification complete: dark, confidence=0.77", "job_id": "90177c9f-e9af-4238-8f5d-076804f9c724", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:51:16.106204Z", "level": "INFO", "module": "parser", "message": "Generating clip boundaries...", "job_id": "90177c9f-e9af-4238-8f5d-076804f9c724", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:51:16.106276Z", "level": "WARNING", "module": "boundaries", "message": "Only 2 boundaries generated, need 3. Regenerating with reduced duration per clip.", "job_id": "90177c9f-e9af-4238-8f5d-076804f9c724", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:51:16.106346Z", "level": "INFO", "module": "boundaries", "message": "Generated 3 clip boundaries", "job_id": "90177c9f-e9af-4238-8f5d-076804f9c724", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:51:16.106395Z", "level": "INFO", "module": "parser", "message": "Boundary generation complete: 3 boundaries", "job_id": "90177c9f-e9af-4238-8f5d-076804f9c724", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:51:16.106460Z", "level": "INFO", "module": "parser", "message": "Audio analysis complete for job 90177c9f-e9af-4238-8f5d-076804f9c724: duration=10.00s, processing_time=0.74s, beats=20, segments=122, lyrics=0, boundaries=3", "job_id": "90177c9f-e9af-4238-8f5d-076804f9c724", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:51:16.108673Z", "level": "INFO", "module": "parser", "message": "Loading audio file for job 6da5feeb-cca0-474c-a231-2f173078319b", "job_id": "6da5feeb-cca0-474c-a231-2f173078319b", "taskName": "Task-19"}
{"timestamp": "2025-11-14T21:51:16.108853Z", "level": "ERROR", "module": "parser", "message": "Audio parsing failed for job 6da5feeb-cca0-474c-a231-2f173078319b: Error opening <_io.BytesIO object at 0x11a0e3c90>: Format not recognised.", "job_id": "6da5feeb-cca0-474c-a231-2f173078319b", "taskName": "Task-19"}
{"timestamp": "2025-11-14T21:51:16.110262Z", "level": "INFO", "module": "parser", "message": "Loading audio file for job 288e1107-a4dc-4024-8d8c-d20e3c963d1d", "job_id": "288e1107-a4dc-4024-8d8c-d20e3c963d1d", "taskName": "Task-22"}
{"timestamp": "2025-11-14T21:51:16.110456Z", "level": "ERROR", "module": "parser", "message": "Audio parsing failed for job 288e1107-a4dc-4024-8d8c-d20e3c963d1d: Error opening <_io.BytesIO object at 0x11a0e3d80>: Format not recognised.", "job_id": "288e1107-a4dc-4024-8d8c-d20e3c963d1d", "taskName": "Task-22"}
{"timestamp": "2025-11-14T21:51:16.112044Z", "level": "INFO", "module": "main", "message": "Starting audio analysis for job None, audio_url=test_url", "taskName": "Task-25"}
{"timestamp": "2025-11-14T21:51:16.112906Z", "level": "INFO", "module": "main", "message": "Starting audio analysis for job a43ff02c-7054-4347-b756-f7b35c4bb65c, audio_url=None", "job_id": "a43ff02c-7054-4347-b756-f7b35c4bb65c", "taskName": "Task-28"}
{"timestamp": "2025-11-14T21:51:16.116386Z", "level": "INFO", "module": "parser", "message": "Loading audio file for job a27bd774-b3c2-4c52-9e2f-21587b4e3fce", "job_id": "a27bd774-b3c2-4c52-9e2f-21587b4e3fce", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:51:16.116730Z", "level": "INFO", "module": "parser", "message": "Audio loaded: duration=5.00s, sample_rate=22050 Hz", "job_id": "a27bd774-b3c2-4c52-9e2f-21587b4e3fce", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:51:16.116782Z", "level": "INFO", "module": "parser", "message": "Detecting beats...", "job_id": "a27bd774-b3c2-4c52-9e2f-21587b4e3fce", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:51:16.122714Z", "level": "ERROR", "module": "beat_detection", "message": "Beat detection failed: unsupported format string passed to numpy.ndarray.__format__", "job_id": "a27bd774-b3c2-4c52-9e2f-21587b4e3fce", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:51:16.122806Z", "level": "WARNING", "module": "beat_detection", "message": "Using fallback tempo-based beats: BPM=120.0, beats=10", "job_id": "a27bd774-b3c2-4c52-9e2f-21587b4e3fce", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:51:16.122864Z", "level": "INFO", "module": "parser", "message": "Beat detection complete: BPM=120.00, beats=10, confidence=0.50", "job_id": "a27bd774-b3c2-4c52-9e2f-21587b4e3fce", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:51:16.122912Z", "level": "INFO", "module": "parser", "message": "Analyzing song structure...", "job_id": "a27bd774-b3c2-4c52-9e2f-21587b4e3fce", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:51:16.137934Z", "level": "INFO", "module": "structure_analysis", "message": "Structure analysis complete: 13 segments", "job_id": "a27bd774-b3c2-4c52-9e2f-21587b4e3fce", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:51:16.137995Z", "level": "INFO", "module": "parser", "message": "Structure analysis complete: 13 segments", "job_id": "a27bd774-b3c2-4c52-9e2f-21587b4e3fce", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:51:16.138034Z", "level": "INFO", "module": "parser", "message": "Extracting lyrics...", "job_id": "a27bd774-b3c2-4c52-9e2f-21587b4e3fce", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:51:16.138432Z", "level": "INFO", "module": "whisper_client", "message": "Created temporary audio file: /var/folders/d5/vzgmwykd2jsbxfy1k60z4ds00000gq/T/tmpqcaeyeg6.mp3", "job_id": "a27bd774-b3c2-4c52-9e2f-21587b4e3fce", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:51:17.007377Z", "level": "INFO", "module": "whisper_client", "message": "Whisper API response received: 4 words", "job_id": "a27bd774-b3c2-4c52-9e2f-21587b4e3fce", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:51:17.007613Z", "level": "ERROR", "module": "whisper_client", "message": "Whisper API call failed: 'TranscriptionWord' object has no attribute 'get'", "job_id": "a27bd774-b3c2-4c52-9e2f-21587b4e3fce", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:51:17.008090Z", "level": "WARNING", "module": "whisper_client", "message": "Whisper API call failed after retries: Failed to extract lyrics: 'TranscriptionWord' object has no attribute 'get', returning empty lyrics", "job_id": "a27bd774-b3c2-4c52-9e2f-21587b4e3fce", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:51:17.008221Z", "level": "INFO", "module": "parser", "message": "Lyrics extraction complete: 0 words", "job_id": "a27bd774-b3c2-4c52-9e2f-21587b4e3fce", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:51:17.008316Z", "level": "INFO", "module": "parser", "message": "Classifying mood...", "job_id": "a27bd774-b3c2-4c52-9e2f-21587b4e3fce", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:51:17.021657Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=bright, secondary=energetic, energy=low, confidence=0.77", "job_id": "a27bd774-b3c2-4c52-9e2f-21587b4e3fce", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:51:17.021826Z", "level": "INFO", "module": "parser", "message": "Mood classification complete: bright, confidence=0.77", "job_id": "a27bd774-b3c2-4c52-9e2f-21587b4e3fce", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:51:17.021905Z", "level": "INFO", "module": "parser", "message": "Generating clip boundaries...", "job_id": "a27bd774-b3c2-4c52-9e2f-21587b4e3fce", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:51:17.021995Z", "level": "WARNING", "module": "boundaries", "message": "Only 1 boundaries generated, need 3. Regenerating with reduced duration per clip.", "job_id": "a27bd774-b3c2-4c52-9e2f-21587b4e3fce", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:51:17.022080Z", "level": "INFO", "module": "boundaries", "message": "Generated 3 clip boundaries", "job_id": "a27bd774-b3c2-4c52-9e2f-21587b4e3fce", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:51:17.022148Z", "level": "INFO", "module": "parser", "message": "Boundary generation complete: 3 boundaries", "job_id": "a27bd774-b3c2-4c52-9e2f-21587b4e3fce", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:51:17.022227Z", "level": "INFO", "module": "parser", "message": "Audio analysis complete for job a27bd774-b3c2-4c52-9e2f-21587b4e3fce: duration=5.00s, processing_time=0.91s, beats=10, segments=13, lyrics=0, boundaries=3", "job_id": "a27bd774-b3c2-4c52-9e2f-21587b4e3fce", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:51:17.027855Z", "level": "INFO", "module": "parser", "message": "Loading audio file for job 1e2c9989-cacb-49d7-96a3-11139bb171a3", "job_id": "1e2c9989-cacb-49d7-96a3-11139bb171a3", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:51:17.028582Z", "level": "INFO", "module": "parser", "message": "Audio loaded: duration=10.00s, sample_rate=22050 Hz", "job_id": "1e2c9989-cacb-49d7-96a3-11139bb171a3", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:51:17.028650Z", "level": "INFO", "module": "parser", "message": "Detecting beats...", "job_id": "1e2c9989-cacb-49d7-96a3-11139bb171a3", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:51:17.041127Z", "level": "WARNING", "module": "beat_detection", "message": "BPM 0.00 outside valid range [60, 200], using default 120 BPM", "job_id": "1e2c9989-cacb-49d7-96a3-11139bb171a3", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:51:17.041212Z", "level": "WARNING", "module": "beat_detection", "message": "Low confidence (0.50) in beat detection, using tempo-based boundaries", "job_id": "1e2c9989-cacb-49d7-96a3-11139bb171a3", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:51:17.041275Z", "level": "INFO", "module": "parser", "message": "Beat detection complete: BPM=120.00, beats=20, confidence=0.50", "job_id": "1e2c9989-cacb-49d7-96a3-11139bb171a3", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:51:17.041322Z", "level": "INFO", "module": "parser", "message": "Analyzing song structure...", "job_id": "1e2c9989-cacb-49d7-96a3-11139bb171a3", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:51:17.083859Z", "level": "INFO", "module": "structure_analysis", "message": "Structure analysis complete: 122 segments", "job_id": "1e2c9989-cacb-49d7-96a3-11139bb171a3", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:51:17.083928Z", "level": "INFO", "module": "parser", "message": "Structure analysis complete: 122 segments", "job_id": "1e2c9989-cacb-49d7-96a3-11139bb171a3", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:51:17.083970Z", "level": "INFO", "module": "parser", "message": "Extracting lyrics...", "job_id": "1e2c9989-cacb-49d7-96a3-11139bb171a3", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:51:17.084307Z", "level": "INFO", "module": "whisper_client", "message": "Created temporary audio file: /var/folders/d5/vzgmwykd2jsbxfy1k60z4ds00000gq/T/tmpdkfz22a6.mp3", "job_id": "1e2c9989-cacb-49d7-96a3-11139bb171a3", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:51:18.296091Z", "level": "INFO", "module": "whisper_client", "message": "Whisper API response received: 1 words", "job_id": "1e2c9989-cacb-49d7-96a3-11139bb171a3", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:51:18.296285Z", "level": "ERROR", "module": "whisper_client", "message": "Whisper API call failed: 'TranscriptionWord' object has no attribute 'get'", "job_id": "1e2c9989-cacb-49d7-96a3-11139bb171a3", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:51:18.296824Z", "level": "WARNING", "module": "whisper_client", "message": "Whisper API call failed after retries: Failed to extract lyrics: 'TranscriptionWord' object has no attribute 'get', returning empty lyrics", "job_id": "1e2c9989-cacb-49d7-96a3-11139bb171a3", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:51:18.296965Z", "level": "INFO", "module": "parser", "message": "Lyrics extraction complete: 0 words", "job_id": "1e2c9989-cacb-49d7-96a3-11139bb171a3", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:51:18.297050Z", "level": "INFO", "module": "parser", "message": "Classifying mood...", "job_id": "1e2c9989-cacb-49d7-96a3-11139bb171a3", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:51:18.316877Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=dark, secondary=energetic, energy=high, confidence=0.77", "job_id": "1e2c9989-cacb-49d7-96a3-11139bb171a3", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:51:18.317005Z", "level": "INFO", "module": "parser", "message": "Mood classification complete: dark, confidence=0.77", "job_id": "1e2c9989-cacb-49d7-96a3-11139bb171a3", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:51:18.317064Z", "level": "INFO", "module": "parser", "message": "Generating clip boundaries...", "job_id": "1e2c9989-cacb-49d7-96a3-11139bb171a3", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:51:18.317144Z", "level": "WARNING", "module": "boundaries", "message": "Only 2 boundaries generated, need 3. Regenerating with reduced duration per clip.", "job_id": "1e2c9989-cacb-49d7-96a3-11139bb171a3", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:51:18.317228Z", "level": "INFO", "module": "boundaries", "message": "Generated 3 clip boundaries", "job_id": "1e2c9989-cacb-49d7-96a3-11139bb171a3", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:51:18.317276Z", "level": "INFO", "module": "parser", "message": "Boundary generation complete: 3 boundaries", "job_id": "1e2c9989-cacb-49d7-96a3-11139bb171a3", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:51:18.317341Z", "level": "INFO", "module": "parser", "message": "Audio analysis complete for job 1e2c9989-cacb-49d7-96a3-11139bb171a3: duration=10.00s, processing_time=1.29s, beats=20, segments=122, lyrics=0, boundaries=3", "job_id": "1e2c9989-cacb-49d7-96a3-11139bb171a3", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:51:18.319212Z", "level": "INFO", "module": "parser", "message": "Loading audio file for job 613274fa-c91c-41ee-a29c-f089d2f3a0b1", "job_id": "613274fa-c91c-41ee-a29c-f089d2f3a0b1", "taskName": "Task-37"}
{"timestamp": "2025-11-14T21:51:18.319345Z", "level": "ERROR", "module": "parser", "message": "Audio parsing failed for job 613274fa-c91c-41ee-a29c-f089d2f3a0b1: Error opening <_io.BytesIO object at 0x11a50b240>: Format not recognised.", "job_id": "613274fa-c91c-41ee-a29c-f089d2f3a0b1", "taskName": "Task-37"}
{"timestamp": "2025-11-14T21:51:18.320234Z", "level": "INFO", "module": "parser", "message": "Loading audio file for job 24fc4b18-d1d1-46ad-a224-dfd5fb1547cc", "job_id": "24fc4b18-d1d1-46ad-a224-dfd5fb1547cc", "taskName": "Task-40"}
{"timestamp": "2025-11-14T21:51:18.320329Z", "level": "ERROR", "module": "parser", "message": "Audio parsing failed for job 24fc4b18-d1d1-46ad-a224-dfd5fb1547cc: Error opening <_io.BytesIO object at 0x11a50b1a0>: Format not recognised.", "job_id": "24fc4b18-d1d1-46ad-a224-dfd5fb1547cc", "taskName": "Task-40"}
{"timestamp": "2025-11-14T21:51:18.416295Z", "level": "INFO", "module": "structure_analysis", "message": "Structure analysis complete: 6 segments", "taskName": null}
{"timestamp": "2025-11-14T21:51:18.456406Z", "level": "INFO", "module": "structure_analysis", "message": "Structure analysis complete: 3 segments", "taskName": null}
{"timestamp": "2025-11-14T21:51:18.485356Z", "level": "INFO", "module": "structure_analysis", "message": "Structure analysis complete: 4 segments", "taskName": null}
{"timestamp": "2025-11-14T21:51:18.486787Z", "level": "WARNING", "module": "structure_analysis", "message": "Agglomerative clustering failed: Found array with 1 sample(s) (shape=(1, 1)) while a minimum of 2 is required by AgglomerativeClustering., using simple segmentation", "taskName": null}
{"timestamp": "2025-11-14T21:51:18.486828Z", "level": "WARNING", "module": "structure_analysis", "message": "Empty audio detected, returning single-segment fallback", "taskName": null}
{"timestamp": "2025-11-14T21:51:18.506176Z", "level": "INFO", "module": "structure_analysis", "message": "Structure analysis complete: 3 segments", "taskName": null}
{"timestamp": "2025-11-14T21:51:18.508836Z", "level": "INFO", "module": "whisper_client", "message": "Created temporary audio file: /var/folders/d5/vzgmwykd2jsbxfy1k60z4ds00000gq/T/tmpub69ap96.mp3", "taskName": "Task-46"}
{"timestamp": "2025-11-14T21:51:18.509104Z", "level": "INFO", "module": "whisper_client", "message": "Whisper API response received: 0 words", "taskName": "Task-46"}
{"timestamp": "2025-11-14T21:51:18.509145Z", "level": "INFO", "module": "whisper_client", "message": "Extracted 0 lyrics from audio", "taskName": "Task-46"}
{"timestamp": "2025-11-14T21:51:24.877077Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job 7d0c9ad2-6982-4780-8977-748c902a92cf: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(7d0c9ad2-6982-4780-8977-748c902a92cf) is not present in table \"jobs\".'}", "taskName": "Task-46", "job_id": "7d0c9ad2-6982-4780-8977-748c902a92cf", "error": "Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(7d0c9ad2-6982-4780-8977-748c902a92cf) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-14T21:51:24.877543Z", "level": "ERROR", "module": "whisper_client", "message": "Whisper API call failed: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(7d0c9ad2-6982-4780-8977-748c902a92cf) is not present in table \"jobs\".'}", "taskName": "Task-46", "job_id": "7d0c9ad2-6982-4780-8977-748c902a92cf"}
{"timestamp": "2025-11-14T21:51:24.877792Z", "level": "WARNING", "module": "whisper_client", "message": "Whisper API call failed after retries: Failed to extract lyrics: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(7d0c9ad2-6982-4780-8977-748c902a92cf) is not present in table \"jobs\".'}, returning empty lyrics", "taskName": "Task-46", "job_id": "7d0c9ad2-6982-4780-8977-748c902a92cf"}
{"timestamp": "2025-11-14T21:51:24.887251Z", "level": "INFO", "module": "whisper_client", "message": "Created temporary audio file: /var/folders/d5/vzgmwykd2jsbxfy1k60z4ds00000gq/T/tmpweizmc3a.mp3", "taskName": "Task-49"}
{"timestamp": "2025-11-14T21:51:24.887835Z", "level": "INFO", "module": "whisper_client", "message": "Whisper API response received: 4 words", "taskName": "Task-49"}
{"timestamp": "2025-11-14T21:51:24.887977Z", "level": "INFO", "module": "whisper_client", "message": "Extracted 2 lyrics from audio", "taskName": "Task-49"}
{"timestamp": "2025-11-14T21:51:24.888070Z", "level": "INFO", "module": "whisper_client", "message": "Tracked Whisper API cost: $0.006 for 60.00s audio", "taskName": "Task-49"}
{"timestamp": "2025-11-14T21:51:24.890007Z", "level": "INFO", "module": "whisper_client", "message": "Created temporary audio file: /var/folders/d5/vzgmwykd2jsbxfy1k60z4ds00000gq/T/tmpj7a_52en.mp3", "taskName": "Task-52"}
{"timestamp": "2025-11-14T21:51:24.890257Z", "level": "ERROR", "module": "whisper_client", "message": "Whisper API call failed: API Error", "taskName": "Task-52", "job_id": "31809578-6a7a-4922-89a0-570612b6bab2"}
{"timestamp": "2025-11-14T21:51:24.890375Z", "level": "WARNING", "module": "whisper_client", "message": "Whisper API call failed after retries: Failed to extract lyrics: API Error, returning empty lyrics", "taskName": "Task-52", "job_id": "31809578-6a7a-4922-89a0-570612b6bab2"}
{"timestamp": "2025-11-14T21:51:24.892189Z", "level": "INFO", "module": "whisper_client", "message": "Created temporary audio file: /var/folders/d5/vzgmwykd2jsbxfy1k60z4ds00000gq/T/tmp_vw9k5tf.mp3", "taskName": "Task-55"}
{"timestamp": "2025-11-14T21:51:24.892596Z", "level": "INFO", "module": "whisper_client", "message": "Whisper API response received: 1 words", "taskName": "Task-55"}
{"timestamp": "2025-11-14T21:51:24.892721Z", "level": "INFO", "module": "whisper_client", "message": "Extracted 1 lyrics from audio", "taskName": "Task-55"}
{"timestamp": "2025-11-14T21:51:24.893140Z", "level": "ERROR", "module": "whisper_client", "message": "Whisper API call failed: object MagicMock can't be used in 'await' expression", "taskName": "Task-55", "job_id": "034d52fd-031c-459f-bffa-cd8838867e3a"}
{"timestamp": "2025-11-14T21:51:24.893360Z", "level": "WARNING", "module": "whisper_client", "message": "Whisper API call failed after retries: Failed to extract lyrics: object MagicMock can't be used in 'await' expression, returning empty lyrics", "taskName": "Task-55", "job_id": "034d52fd-031c-459f-bffa-cd8838867e3a"}
{"timestamp": "2025-11-14T21:52:10.768227Z", "level": "WARNING", "module": "beat_detection", "message": "aubio not available, using librosa onset detection as fallback", "taskName": null}
{"timestamp": "2025-11-14T21:52:13.912861Z", "level": "WARNING", "module": "beat_detection", "message": "BPM 0.00 outside valid range [60, 200], using default 120 BPM", "taskName": null}
{"timestamp": "2025-11-14T21:52:13.912987Z", "level": "WARNING", "module": "beat_detection", "message": "Low confidence (0.50) in beat detection, using tempo-based boundaries", "taskName": null}
{"timestamp": "2025-11-14T21:52:13.918272Z", "level": "WARNING", "module": "beat_detection", "message": "BPM 0.00 outside valid range [60, 200], using default 120 BPM", "taskName": null}
{"timestamp": "2025-11-14T21:52:13.918341Z", "level": "WARNING", "module": "beat_detection", "message": "Low confidence (0.50) in beat detection, using tempo-based boundaries", "taskName": null}
{"timestamp": "2025-11-14T21:52:13.923863Z", "level": "WARNING", "module": "beat_detection", "message": "BPM 0.00 outside valid range [60, 200], using default 120 BPM", "taskName": null}
{"timestamp": "2025-11-14T21:52:13.923941Z", "level": "WARNING", "module": "beat_detection", "message": "Low confidence (0.50) in beat detection, using tempo-based boundaries", "taskName": null}
{"timestamp": "2025-11-14T21:52:13.928391Z", "level": "WARNING", "module": "beat_detection", "message": "BPM 0.00 outside valid range [60, 200], using default 120 BPM", "taskName": null}
{"timestamp": "2025-11-14T21:52:13.928449Z", "level": "WARNING", "module": "beat_detection", "message": "Low confidence (0.50) in beat detection, using tempo-based boundaries", "taskName": null}
{"timestamp": "2025-11-14T21:52:13.930887Z", "level": "WARNING", "module": "beat_detection", "message": "BPM 0.00 outside valid range [60, 200], using default 120 BPM", "taskName": null}
{"timestamp": "2025-11-14T21:52:13.930941Z", "level": "WARNING", "module": "beat_detection", "message": "Low confidence (0.50) in beat detection, using tempo-based boundaries", "taskName": null}
{"timestamp": "2025-11-14T21:52:13.934490Z", "level": "WARNING", "module": "boundaries", "message": "Only 2 boundaries generated, need 3. Regenerating with reduced duration per clip.", "taskName": null}
{"timestamp": "2025-11-14T21:52:13.934887Z", "level": "INFO", "module": "boundaries", "message": "Generated 3 clip boundaries", "taskName": null}
{"timestamp": "2025-11-14T21:52:13.935464Z", "level": "WARNING", "module": "boundaries", "message": "Only 2 boundaries generated, need 3. Regenerating with reduced duration per clip.", "taskName": null}
{"timestamp": "2025-11-14T21:52:13.935560Z", "level": "INFO", "module": "boundaries", "message": "Generated 3 clip boundaries", "taskName": null}
{"timestamp": "2025-11-14T21:52:13.936123Z", "level": "INFO", "module": "boundaries", "message": "Generated 5 clip boundaries", "taskName": null}
{"timestamp": "2025-11-14T21:52:13.936625Z", "level": "WARNING", "module": "boundaries", "message": "Only 1 boundaries generated, need 3. Regenerating with reduced duration per clip.", "taskName": null}
{"timestamp": "2025-11-14T21:52:13.936707Z", "level": "INFO", "module": "boundaries", "message": "Generated 3 clip boundaries", "taskName": null}
{"timestamp": "2025-11-14T21:52:13.937222Z", "level": "WARNING", "module": "boundaries", "message": "No beat timestamps available, generating uniform boundaries", "taskName": null}
{"timestamp": "2025-11-14T21:52:13.937700Z", "level": "WARNING", "module": "boundaries", "message": "Only 0 boundaries generated, need 3. Regenerating with reduced duration per clip.", "taskName": null}
{"timestamp": "2025-11-14T21:52:13.937776Z", "level": "INFO", "module": "boundaries", "message": "Generated 3 clip boundaries", "taskName": null}
{"timestamp": "2025-11-14T21:52:13.939465Z", "level": "INFO", "module": "boundaries", "message": "Generated 25 clip boundaries", "taskName": null}
{"timestamp": "2025-11-14T21:52:13.939980Z", "level": "WARNING", "module": "boundaries", "message": "Only 2 boundaries generated, need 3. Regenerating with reduced duration per clip.", "taskName": null}
{"timestamp": "2025-11-14T21:52:13.940074Z", "level": "INFO", "module": "boundaries", "message": "Generated 3 clip boundaries", "taskName": null}
{"timestamp": "2025-11-14T21:52:14.406450Z", "level": "INFO", "module": "cache", "message": "Stored analysis in Redis cache: test_hash_12345", "taskName": "Task-1"}
{"timestamp": "2025-11-14T21:52:14.429179Z", "level": "WARNING", "module": "cache", "message": "Failed to store cached analysis: 'AsyncTableQueryBuilder' object has no attribute 'upsert'", "taskName": "Task-1", "file_hash": "test_hash_12345", "error": "'AsyncTableQueryBuilder' object has no attribute 'upsert'"}
{"timestamp": "2025-11-14T21:52:14.546196Z", "level": "INFO", "module": "cache", "message": "Cache hit for file hash: test_hash_12345", "taskName": "Task-1"}
{"timestamp": "2025-11-14T21:52:14.553281Z", "level": "WARNING", "module": "cache", "message": "Failed to get cached analysis: Failed to get JSON from Redis: Failed to get Redis key: Event loop is closed", "taskName": "Task-4", "file_hash": "nonexistent_hash"}
{"timestamp": "2025-11-14T21:52:15.037702Z", "level": "INFO", "module": "cache", "message": "Stored analysis in Redis cache: test_serialization", "taskName": "Task-7"}
{"timestamp": "2025-11-14T21:52:15.037852Z", "level": "WARNING", "module": "cache", "message": "Failed to store cached analysis: 'AsyncTableQueryBuilder' object has no attribute 'upsert'", "taskName": "Task-7", "file_hash": "test_serialization", "error": "'AsyncTableQueryBuilder' object has no attribute 'upsert'"}
{"timestamp": "2025-11-14T21:52:15.157856Z", "level": "INFO", "module": "cache", "message": "Cache hit for file hash: test_serialization", "taskName": "Task-7"}
{"timestamp": "2025-11-14T21:52:15.162170Z", "level": "WARNING", "module": "cache", "message": "Failed to store cached analysis: Failed to set JSON in Redis: Failed to set Redis key: Event loop is closed", "taskName": "Task-10", "file_hash": "test_ttl", "error": "Failed to set JSON in Redis: Failed to set Redis key: Event loop is closed"}
{"timestamp": "2025-11-14T21:52:15.617986Z", "level": "INFO", "module": "cache", "message": "Cache hit for file hash: test_ttl", "taskName": "Task-10"}
{"timestamp": "2025-11-14T21:52:15.645043Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=energetic, secondary=dark, energy=high, confidence=0.93", "taskName": null}
{"timestamp": "2025-11-14T21:52:15.663133Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=dark, secondary=calm, energy=low, confidence=0.83", "taskName": null}
{"timestamp": "2025-11-14T21:52:15.677985Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=dark, secondary=calm, energy=high, confidence=0.77", "taskName": null}
{"timestamp": "2025-11-14T21:52:15.691294Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=energetic, secondary=None, energy=high, confidence=0.73", "taskName": null}
{"timestamp": "2025-11-14T21:52:15.698755Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=dark, secondary=energetic, energy=high, confidence=0.77", "taskName": null}
{"timestamp": "2025-11-14T21:52:15.705578Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=dark, secondary=energetic, energy=high, confidence=0.77", "taskName": null}
{"timestamp": "2025-11-14T21:52:15.706464Z", "level": "ERROR", "module": "mood_classifier", "message": "Mood classification failed: can't extend empty axis 0 using modes other than 'constant' or 'empty'", "taskName": null}
{"timestamp": "2025-11-14T21:52:15.711524Z", "level": "INFO", "module": "parser", "message": "Loading audio file for job 11e29cc5-fd6d-44aa-95fb-c38f1c965961", "job_id": "11e29cc5-fd6d-44aa-95fb-c38f1c965961", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:52:16.043078Z", "level": "INFO", "module": "parser", "message": "Audio loaded: duration=10.00s, sample_rate=22050 Hz", "job_id": "11e29cc5-fd6d-44aa-95fb-c38f1c965961", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:52:16.043194Z", "level": "INFO", "module": "parser", "message": "Detecting beats...", "job_id": "11e29cc5-fd6d-44aa-95fb-c38f1c965961", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:52:16.053696Z", "level": "WARNING", "module": "beat_detection", "message": "BPM 0.00 outside valid range [60, 200], using default 120 BPM", "job_id": "11e29cc5-fd6d-44aa-95fb-c38f1c965961", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:52:16.053789Z", "level": "WARNING", "module": "beat_detection", "message": "Low confidence (0.50) in beat detection, using tempo-based boundaries", "job_id": "11e29cc5-fd6d-44aa-95fb-c38f1c965961", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:52:16.053848Z", "level": "INFO", "module": "parser", "message": "Beat detection complete: BPM=120.00, beats=20, confidence=0.50", "job_id": "11e29cc5-fd6d-44aa-95fb-c38f1c965961", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:52:16.053896Z", "level": "INFO", "module": "parser", "message": "Analyzing song structure...", "job_id": "11e29cc5-fd6d-44aa-95fb-c38f1c965961", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:52:16.127376Z", "level": "INFO", "module": "structure_analysis", "message": "Structure analysis complete: 122 segments", "job_id": "11e29cc5-fd6d-44aa-95fb-c38f1c965961", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:52:16.127467Z", "level": "INFO", "module": "parser", "message": "Structure analysis complete: 122 segments", "job_id": "11e29cc5-fd6d-44aa-95fb-c38f1c965961", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:52:16.127519Z", "level": "INFO", "module": "parser", "message": "Extracting lyrics...", "job_id": "11e29cc5-fd6d-44aa-95fb-c38f1c965961", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:52:16.128065Z", "level": "INFO", "module": "whisper_client", "message": "Created temporary audio file: /var/folders/d5/vzgmwykd2jsbxfy1k60z4ds00000gq/T/tmpzzb3uhjz.mp3", "job_id": "11e29cc5-fd6d-44aa-95fb-c38f1c965961", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:52:17.410459Z", "level": "INFO", "module": "whisper_client", "message": "Whisper API response received: 1 words", "job_id": "11e29cc5-fd6d-44aa-95fb-c38f1c965961", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:52:17.410670Z", "level": "ERROR", "module": "whisper_client", "message": "Whisper API call failed: 'TranscriptionWord' object has no attribute 'get'", "job_id": "11e29cc5-fd6d-44aa-95fb-c38f1c965961", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:52:17.410971Z", "level": "WARNING", "module": "whisper_client", "message": "Whisper API call failed after retries: Failed to extract lyrics: 'TranscriptionWord' object has no attribute 'get', returning empty lyrics", "job_id": "11e29cc5-fd6d-44aa-95fb-c38f1c965961", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:52:17.411106Z", "level": "INFO", "module": "parser", "message": "Lyrics extraction complete: 0 words", "job_id": "11e29cc5-fd6d-44aa-95fb-c38f1c965961", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:52:17.411191Z", "level": "INFO", "module": "parser", "message": "Classifying mood...", "job_id": "11e29cc5-fd6d-44aa-95fb-c38f1c965961", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:52:17.428805Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=dark, secondary=energetic, energy=high, confidence=0.77", "job_id": "11e29cc5-fd6d-44aa-95fb-c38f1c965961", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:52:17.428955Z", "level": "INFO", "module": "parser", "message": "Mood classification complete: dark, confidence=0.77", "job_id": "11e29cc5-fd6d-44aa-95fb-c38f1c965961", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:52:17.429040Z", "level": "INFO", "module": "parser", "message": "Generating clip boundaries...", "job_id": "11e29cc5-fd6d-44aa-95fb-c38f1c965961", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:52:17.429165Z", "level": "WARNING", "module": "boundaries", "message": "Only 2 boundaries generated, need 3. Regenerating with reduced duration per clip.", "job_id": "11e29cc5-fd6d-44aa-95fb-c38f1c965961", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:52:17.429291Z", "level": "INFO", "module": "boundaries", "message": "Generated 3 clip boundaries", "job_id": "11e29cc5-fd6d-44aa-95fb-c38f1c965961", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:52:17.429369Z", "level": "INFO", "module": "parser", "message": "Boundary generation complete: 3 boundaries", "job_id": "11e29cc5-fd6d-44aa-95fb-c38f1c965961", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:52:17.429465Z", "level": "INFO", "module": "parser", "message": "Audio analysis complete for job 11e29cc5-fd6d-44aa-95fb-c38f1c965961: duration=10.00s, processing_time=1.72s, beats=20, segments=122, lyrics=0, boundaries=3", "job_id": "11e29cc5-fd6d-44aa-95fb-c38f1c965961", "taskName": "Task-13"}
{"timestamp": "2025-11-14T21:52:17.436703Z", "level": "INFO", "module": "parser", "message": "Loading audio file for job e34fbb3e-38f4-4b3b-bc7b-8cccf4646dce", "job_id": "e34fbb3e-38f4-4b3b-bc7b-8cccf4646dce", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:52:17.437424Z", "level": "INFO", "module": "parser", "message": "Audio loaded: duration=10.00s, sample_rate=22050 Hz", "job_id": "e34fbb3e-38f4-4b3b-bc7b-8cccf4646dce", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:52:17.437496Z", "level": "INFO", "module": "parser", "message": "Detecting beats...", "job_id": "e34fbb3e-38f4-4b3b-bc7b-8cccf4646dce", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:52:17.447821Z", "level": "WARNING", "module": "beat_detection", "message": "BPM 0.00 outside valid range [60, 200], using default 120 BPM", "job_id": "e34fbb3e-38f4-4b3b-bc7b-8cccf4646dce", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:52:17.447902Z", "level": "WARNING", "module": "beat_detection", "message": "Low confidence (0.50) in beat detection, using tempo-based boundaries", "job_id": "e34fbb3e-38f4-4b3b-bc7b-8cccf4646dce", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:52:17.447969Z", "level": "INFO", "module": "parser", "message": "Beat detection complete: BPM=120.00, beats=20, confidence=0.50", "job_id": "e34fbb3e-38f4-4b3b-bc7b-8cccf4646dce", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:52:17.448023Z", "level": "INFO", "module": "parser", "message": "Analyzing song structure...", "job_id": "e34fbb3e-38f4-4b3b-bc7b-8cccf4646dce", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:52:17.495356Z", "level": "INFO", "module": "structure_analysis", "message": "Structure analysis complete: 122 segments", "job_id": "e34fbb3e-38f4-4b3b-bc7b-8cccf4646dce", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:52:17.495469Z", "level": "INFO", "module": "parser", "message": "Structure analysis complete: 122 segments", "job_id": "e34fbb3e-38f4-4b3b-bc7b-8cccf4646dce", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:52:17.495524Z", "level": "INFO", "module": "parser", "message": "Extracting lyrics...", "job_id": "e34fbb3e-38f4-4b3b-bc7b-8cccf4646dce", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:52:17.495891Z", "level": "INFO", "module": "whisper_client", "message": "Created temporary audio file: /var/folders/d5/vzgmwykd2jsbxfy1k60z4ds00000gq/T/tmpgdeujhyb.mp3", "job_id": "e34fbb3e-38f4-4b3b-bc7b-8cccf4646dce", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:52:20.529917Z", "level": "INFO", "module": "whisper_client", "message": "Whisper API response received: 1 words", "job_id": "e34fbb3e-38f4-4b3b-bc7b-8cccf4646dce", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:52:20.530125Z", "level": "ERROR", "module": "whisper_client", "message": "Whisper API call failed: 'TranscriptionWord' object has no attribute 'get'", "job_id": "e34fbb3e-38f4-4b3b-bc7b-8cccf4646dce", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:52:20.530529Z", "level": "WARNING", "module": "whisper_client", "message": "Whisper API call failed after retries: Failed to extract lyrics: 'TranscriptionWord' object has no attribute 'get', returning empty lyrics", "job_id": "e34fbb3e-38f4-4b3b-bc7b-8cccf4646dce", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:52:20.530678Z", "level": "INFO", "module": "parser", "message": "Lyrics extraction complete: 0 words", "job_id": "e34fbb3e-38f4-4b3b-bc7b-8cccf4646dce", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:52:20.530794Z", "level": "INFO", "module": "parser", "message": "Classifying mood...", "job_id": "e34fbb3e-38f4-4b3b-bc7b-8cccf4646dce", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:52:20.549762Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=dark, secondary=energetic, energy=high, confidence=0.77", "job_id": "e34fbb3e-38f4-4b3b-bc7b-8cccf4646dce", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:52:20.549917Z", "level": "INFO", "module": "parser", "message": "Mood classification complete: dark, confidence=0.77", "job_id": "e34fbb3e-38f4-4b3b-bc7b-8cccf4646dce", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:52:20.550008Z", "level": "INFO", "module": "parser", "message": "Generating clip boundaries...", "job_id": "e34fbb3e-38f4-4b3b-bc7b-8cccf4646dce", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:52:20.550130Z", "level": "WARNING", "module": "boundaries", "message": "Only 2 boundaries generated, need 3. Regenerating with reduced duration per clip.", "job_id": "e34fbb3e-38f4-4b3b-bc7b-8cccf4646dce", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:52:20.550268Z", "level": "INFO", "module": "boundaries", "message": "Generated 3 clip boundaries", "job_id": "e34fbb3e-38f4-4b3b-bc7b-8cccf4646dce", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:52:20.550343Z", "level": "INFO", "module": "parser", "message": "Boundary generation complete: 3 boundaries", "job_id": "e34fbb3e-38f4-4b3b-bc7b-8cccf4646dce", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:52:20.550436Z", "level": "INFO", "module": "parser", "message": "Audio analysis complete for job e34fbb3e-38f4-4b3b-bc7b-8cccf4646dce: duration=10.00s, processing_time=3.11s, beats=20, segments=122, lyrics=0, boundaries=3", "job_id": "e34fbb3e-38f4-4b3b-bc7b-8cccf4646dce", "taskName": "Task-16"}
{"timestamp": "2025-11-14T21:52:20.553968Z", "level": "INFO", "module": "parser", "message": "Loading audio file for job 54147881-aa11-4f5b-85a1-4430fdd2f096", "job_id": "54147881-aa11-4f5b-85a1-4430fdd2f096", "taskName": "Task-19"}
{"timestamp": "2025-11-14T21:52:20.554213Z", "level": "ERROR", "module": "parser", "message": "Audio parsing failed for job 54147881-aa11-4f5b-85a1-4430fdd2f096: Error opening <_io.BytesIO object at 0x11ad826b0>: Format not recognised.", "job_id": "54147881-aa11-4f5b-85a1-4430fdd2f096", "taskName": "Task-19"}
{"timestamp": "2025-11-14T21:52:20.556006Z", "level": "INFO", "module": "parser", "message": "Loading audio file for job 9cec36a3-98ab-465d-9d23-36e7e6373a21", "job_id": "9cec36a3-98ab-465d-9d23-36e7e6373a21", "taskName": "Task-22"}
{"timestamp": "2025-11-14T21:52:20.556156Z", "level": "ERROR", "module": "parser", "message": "Audio parsing failed for job 9cec36a3-98ab-465d-9d23-36e7e6373a21: Error opening <_io.BytesIO object at 0x11ad82840>: Format not recognised.", "job_id": "9cec36a3-98ab-465d-9d23-36e7e6373a21", "taskName": "Task-22"}
{"timestamp": "2025-11-14T21:52:20.558639Z", "level": "INFO", "module": "main", "message": "Starting audio analysis for job None, audio_url=test_url", "taskName": "Task-25"}
{"timestamp": "2025-11-14T21:52:20.560072Z", "level": "INFO", "module": "main", "message": "Starting audio analysis for job 794a67a9-8521-4017-b242-731fb0cb5b5a, audio_url=None", "job_id": "794a67a9-8521-4017-b242-731fb0cb5b5a", "taskName": "Task-28"}
{"timestamp": "2025-11-14T21:52:20.564294Z", "level": "INFO", "module": "parser", "message": "Loading audio file for job 22a83bf9-d621-4c72-aef0-0b2f3ebfc474", "job_id": "22a83bf9-d621-4c72-aef0-0b2f3ebfc474", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:52:20.564680Z", "level": "INFO", "module": "parser", "message": "Audio loaded: duration=5.00s, sample_rate=22050 Hz", "job_id": "22a83bf9-d621-4c72-aef0-0b2f3ebfc474", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:52:20.564746Z", "level": "INFO", "module": "parser", "message": "Detecting beats...", "job_id": "22a83bf9-d621-4c72-aef0-0b2f3ebfc474", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:52:20.571194Z", "level": "ERROR", "module": "beat_detection", "message": "Beat detection failed: unsupported format string passed to numpy.ndarray.__format__", "job_id": "22a83bf9-d621-4c72-aef0-0b2f3ebfc474", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:52:20.571300Z", "level": "WARNING", "module": "beat_detection", "message": "Using fallback tempo-based beats: BPM=120.0, beats=10", "job_id": "22a83bf9-d621-4c72-aef0-0b2f3ebfc474", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:52:20.571376Z", "level": "INFO", "module": "parser", "message": "Beat detection complete: BPM=120.00, beats=10, confidence=0.50", "job_id": "22a83bf9-d621-4c72-aef0-0b2f3ebfc474", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:52:20.571444Z", "level": "INFO", "module": "parser", "message": "Analyzing song structure...", "job_id": "22a83bf9-d621-4c72-aef0-0b2f3ebfc474", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:52:20.585760Z", "level": "INFO", "module": "structure_analysis", "message": "Structure analysis complete: 5 segments", "job_id": "22a83bf9-d621-4c72-aef0-0b2f3ebfc474", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:52:20.585857Z", "level": "INFO", "module": "parser", "message": "Structure analysis complete: 5 segments", "job_id": "22a83bf9-d621-4c72-aef0-0b2f3ebfc474", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:52:20.585919Z", "level": "INFO", "module": "parser", "message": "Extracting lyrics...", "job_id": "22a83bf9-d621-4c72-aef0-0b2f3ebfc474", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:52:20.586232Z", "level": "INFO", "module": "whisper_client", "message": "Created temporary audio file: /var/folders/d5/vzgmwykd2jsbxfy1k60z4ds00000gq/T/tmpl3m1_c77.mp3", "job_id": "22a83bf9-d621-4c72-aef0-0b2f3ebfc474", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:52:22.346961Z", "level": "INFO", "module": "whisper_client", "message": "Whisper API response received: 4 words", "job_id": "22a83bf9-d621-4c72-aef0-0b2f3ebfc474", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:52:22.347339Z", "level": "ERROR", "module": "whisper_client", "message": "Whisper API call failed: 'TranscriptionWord' object has no attribute 'get'", "job_id": "22a83bf9-d621-4c72-aef0-0b2f3ebfc474", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:52:22.347852Z", "level": "WARNING", "module": "whisper_client", "message": "Whisper API call failed after retries: Failed to extract lyrics: 'TranscriptionWord' object has no attribute 'get', returning empty lyrics", "job_id": "22a83bf9-d621-4c72-aef0-0b2f3ebfc474", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:52:22.348023Z", "level": "INFO", "module": "parser", "message": "Lyrics extraction complete: 0 words", "job_id": "22a83bf9-d621-4c72-aef0-0b2f3ebfc474", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:52:22.348158Z", "level": "INFO", "module": "parser", "message": "Classifying mood...", "job_id": "22a83bf9-d621-4c72-aef0-0b2f3ebfc474", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:52:22.363083Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=bright, secondary=energetic, energy=low, confidence=0.77", "job_id": "22a83bf9-d621-4c72-aef0-0b2f3ebfc474", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:52:22.363249Z", "level": "INFO", "module": "parser", "message": "Mood classification complete: bright, confidence=0.77", "job_id": "22a83bf9-d621-4c72-aef0-0b2f3ebfc474", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:52:22.363347Z", "level": "INFO", "module": "parser", "message": "Generating clip boundaries...", "job_id": "22a83bf9-d621-4c72-aef0-0b2f3ebfc474", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:52:22.363471Z", "level": "WARNING", "module": "boundaries", "message": "Only 1 boundaries generated, need 3. Regenerating with reduced duration per clip.", "job_id": "22a83bf9-d621-4c72-aef0-0b2f3ebfc474", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:52:22.363615Z", "level": "INFO", "module": "boundaries", "message": "Generated 3 clip boundaries", "job_id": "22a83bf9-d621-4c72-aef0-0b2f3ebfc474", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:52:22.363709Z", "level": "INFO", "module": "parser", "message": "Boundary generation complete: 3 boundaries", "job_id": "22a83bf9-d621-4c72-aef0-0b2f3ebfc474", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:52:22.363820Z", "level": "INFO", "module": "parser", "message": "Audio analysis complete for job 22a83bf9-d621-4c72-aef0-0b2f3ebfc474: duration=5.00s, processing_time=1.80s, beats=10, segments=5, lyrics=0, boundaries=3", "job_id": "22a83bf9-d621-4c72-aef0-0b2f3ebfc474", "taskName": "Task-31"}
{"timestamp": "2025-11-14T21:52:22.370508Z", "level": "INFO", "module": "parser", "message": "Loading audio file for job 877cb05e-b1ec-46c6-838d-699fec9e2717", "job_id": "877cb05e-b1ec-46c6-838d-699fec9e2717", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:52:22.371338Z", "level": "INFO", "module": "parser", "message": "Audio loaded: duration=10.00s, sample_rate=22050 Hz", "job_id": "877cb05e-b1ec-46c6-838d-699fec9e2717", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:52:22.371453Z", "level": "INFO", "module": "parser", "message": "Detecting beats...", "job_id": "877cb05e-b1ec-46c6-838d-699fec9e2717", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:52:22.384076Z", "level": "WARNING", "module": "beat_detection", "message": "BPM 0.00 outside valid range [60, 200], using default 120 BPM", "job_id": "877cb05e-b1ec-46c6-838d-699fec9e2717", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:52:22.384180Z", "level": "WARNING", "module": "beat_detection", "message": "Low confidence (0.50) in beat detection, using tempo-based boundaries", "job_id": "877cb05e-b1ec-46c6-838d-699fec9e2717", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:52:22.384260Z", "level": "INFO", "module": "parser", "message": "Beat detection complete: BPM=120.00, beats=20, confidence=0.50", "job_id": "877cb05e-b1ec-46c6-838d-699fec9e2717", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:52:22.384325Z", "level": "INFO", "module": "parser", "message": "Analyzing song structure...", "job_id": "877cb05e-b1ec-46c6-838d-699fec9e2717", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:52:22.435592Z", "level": "INFO", "module": "structure_analysis", "message": "Structure analysis complete: 122 segments", "job_id": "877cb05e-b1ec-46c6-838d-699fec9e2717", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:52:22.435692Z", "level": "INFO", "module": "parser", "message": "Structure analysis complete: 122 segments", "job_id": "877cb05e-b1ec-46c6-838d-699fec9e2717", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:52:22.435751Z", "level": "INFO", "module": "parser", "message": "Extracting lyrics...", "job_id": "877cb05e-b1ec-46c6-838d-699fec9e2717", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:52:22.436158Z", "level": "INFO", "module": "whisper_client", "message": "Created temporary audio file: /var/folders/d5/vzgmwykd2jsbxfy1k60z4ds00000gq/T/tmpl_n8ifit.mp3", "job_id": "877cb05e-b1ec-46c6-838d-699fec9e2717", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:52:23.637001Z", "level": "INFO", "module": "whisper_client", "message": "Whisper API response received: 1 words", "job_id": "877cb05e-b1ec-46c6-838d-699fec9e2717", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:52:23.637632Z", "level": "ERROR", "module": "whisper_client", "message": "Whisper API call failed: 'TranscriptionWord' object has no attribute 'get'", "job_id": "877cb05e-b1ec-46c6-838d-699fec9e2717", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:52:23.638278Z", "level": "WARNING", "module": "whisper_client", "message": "Whisper API call failed after retries: Failed to extract lyrics: 'TranscriptionWord' object has no attribute 'get', returning empty lyrics", "job_id": "877cb05e-b1ec-46c6-838d-699fec9e2717", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:52:23.638943Z", "level": "INFO", "module": "parser", "message": "Lyrics extraction complete: 0 words", "job_id": "877cb05e-b1ec-46c6-838d-699fec9e2717", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:52:23.639193Z", "level": "INFO", "module": "parser", "message": "Classifying mood...", "job_id": "877cb05e-b1ec-46c6-838d-699fec9e2717", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:52:23.662106Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=dark, secondary=energetic, energy=high, confidence=0.77", "job_id": "877cb05e-b1ec-46c6-838d-699fec9e2717", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:52:23.662266Z", "level": "INFO", "module": "parser", "message": "Mood classification complete: dark, confidence=0.77", "job_id": "877cb05e-b1ec-46c6-838d-699fec9e2717", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:52:23.662354Z", "level": "INFO", "module": "parser", "message": "Generating clip boundaries...", "job_id": "877cb05e-b1ec-46c6-838d-699fec9e2717", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:52:23.662487Z", "level": "WARNING", "module": "boundaries", "message": "Only 2 boundaries generated, need 3. Regenerating with reduced duration per clip.", "job_id": "877cb05e-b1ec-46c6-838d-699fec9e2717", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:52:23.662626Z", "level": "INFO", "module": "boundaries", "message": "Generated 3 clip boundaries", "job_id": "877cb05e-b1ec-46c6-838d-699fec9e2717", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:52:23.662703Z", "level": "INFO", "module": "parser", "message": "Boundary generation complete: 3 boundaries", "job_id": "877cb05e-b1ec-46c6-838d-699fec9e2717", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:52:23.662796Z", "level": "INFO", "module": "parser", "message": "Audio analysis complete for job 877cb05e-b1ec-46c6-838d-699fec9e2717: duration=10.00s, processing_time=1.29s, beats=20, segments=122, lyrics=0, boundaries=3", "job_id": "877cb05e-b1ec-46c6-838d-699fec9e2717", "taskName": "Task-34"}
{"timestamp": "2025-11-14T21:52:23.665861Z", "level": "INFO", "module": "parser", "message": "Loading audio file for job cd07a757-f1e0-4913-9732-ca654ff6c3dc", "job_id": "cd07a757-f1e0-4913-9732-ca654ff6c3dc", "taskName": "Task-37"}
{"timestamp": "2025-11-14T21:52:23.666069Z", "level": "ERROR", "module": "parser", "message": "Audio parsing failed for job cd07a757-f1e0-4913-9732-ca654ff6c3dc: Error opening <_io.BytesIO object at 0x11ad83470>: Format not recognised.", "job_id": "cd07a757-f1e0-4913-9732-ca654ff6c3dc", "taskName": "Task-37"}
{"timestamp": "2025-11-14T21:52:23.667526Z", "level": "INFO", "module": "parser", "message": "Loading audio file for job b7b1518e-ff58-4a40-b8a7-0e1deef47129", "job_id": "b7b1518e-ff58-4a40-b8a7-0e1deef47129", "taskName": "Task-40"}
{"timestamp": "2025-11-14T21:52:23.667664Z", "level": "ERROR", "module": "parser", "message": "Audio parsing failed for job b7b1518e-ff58-4a40-b8a7-0e1deef47129: Error opening <_io.BytesIO object at 0x11ad83dd0>: Format not recognised.", "job_id": "b7b1518e-ff58-4a40-b8a7-0e1deef47129", "taskName": "Task-40"}
{"timestamp": "2025-11-14T21:52:23.764762Z", "level": "INFO", "module": "structure_analysis", "message": "Structure analysis complete: 6 segments", "taskName": null}
{"timestamp": "2025-11-14T21:52:23.807632Z", "level": "INFO", "module": "structure_analysis", "message": "Structure analysis complete: 3 segments", "taskName": null}
{"timestamp": "2025-11-14T21:52:23.837676Z", "level": "INFO", "module": "structure_analysis", "message": "Structure analysis complete: 4 segments", "taskName": null}
{"timestamp": "2025-11-14T21:52:23.839485Z", "level": "WARNING", "module": "structure_analysis", "message": "Agglomerative clustering failed: Found array with 1 sample(s) (shape=(1, 1)) while a minimum of 2 is required by AgglomerativeClustering., using simple segmentation", "taskName": null}
{"timestamp": "2025-11-14T21:52:23.839546Z", "level": "WARNING", "module": "structure_analysis", "message": "Empty audio detected, returning single-segment fallback", "taskName": null}
{"timestamp": "2025-11-14T21:52:23.859690Z", "level": "INFO", "module": "structure_analysis", "message": "Structure analysis complete: 3 segments", "taskName": null}
{"timestamp": "2025-11-14T21:52:23.864061Z", "level": "INFO", "module": "whisper_client", "message": "Created temporary audio file: /var/folders/d5/vzgmwykd2jsbxfy1k60z4ds00000gq/T/tmp71q4cbhf.mp3", "taskName": "Task-46"}
{"timestamp": "2025-11-14T21:52:23.864363Z", "level": "INFO", "module": "whisper_client", "message": "Whisper API response received: 0 words", "taskName": "Task-46"}
{"timestamp": "2025-11-14T21:52:23.864414Z", "level": "INFO", "module": "whisper_client", "message": "Extracted 0 lyrics from audio", "taskName": "Task-46"}
{"timestamp": "2025-11-14T21:52:30.368909Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job b97f9917-a891-430c-9150-87cd9e4437c7: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(b97f9917-a891-430c-9150-87cd9e4437c7) is not present in table \"jobs\".'}", "taskName": "Task-46", "job_id": "b97f9917-a891-430c-9150-87cd9e4437c7", "error": "Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(b97f9917-a891-430c-9150-87cd9e4437c7) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-14T21:52:30.370065Z", "level": "ERROR", "module": "whisper_client", "message": "Whisper API call failed: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(b97f9917-a891-430c-9150-87cd9e4437c7) is not present in table \"jobs\".'}", "taskName": "Task-46", "job_id": "b97f9917-a891-430c-9150-87cd9e4437c7"}
{"timestamp": "2025-11-14T21:52:30.370904Z", "level": "WARNING", "module": "whisper_client", "message": "Whisper API call failed after retries: Failed to extract lyrics: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(b97f9917-a891-430c-9150-87cd9e4437c7) is not present in table \"jobs\".'}, returning empty lyrics", "taskName": "Task-46", "job_id": "b97f9917-a891-430c-9150-87cd9e4437c7"}
{"timestamp": "2025-11-14T21:52:30.384133Z", "level": "INFO", "module": "whisper_client", "message": "Created temporary audio file: /var/folders/d5/vzgmwykd2jsbxfy1k60z4ds00000gq/T/tmpln_yohm6.mp3", "taskName": "Task-49"}
{"timestamp": "2025-11-14T21:52:30.384648Z", "level": "INFO", "module": "whisper_client", "message": "Whisper API response received: 4 words", "taskName": "Task-49"}
{"timestamp": "2025-11-14T21:52:30.384810Z", "level": "INFO", "module": "whisper_client", "message": "Extracted 2 lyrics from audio", "taskName": "Task-49"}
{"timestamp": "2025-11-14T21:52:30.384941Z", "level": "INFO", "module": "whisper_client", "message": "Tracked Whisper API cost: $0.006 for 60.00s audio", "taskName": "Task-49"}
{"timestamp": "2025-11-14T21:52:30.388407Z", "level": "INFO", "module": "whisper_client", "message": "Created temporary audio file: /var/folders/d5/vzgmwykd2jsbxfy1k60z4ds00000gq/T/tmpnbocrzej.mp3", "taskName": "Task-52"}
{"timestamp": "2025-11-14T21:52:30.388855Z", "level": "ERROR", "module": "whisper_client", "message": "Whisper API call failed: API Error", "taskName": "Task-52", "job_id": "bfecfd81-9591-4f6b-aefe-6636039bb899"}
{"timestamp": "2025-11-14T21:52:30.389093Z", "level": "WARNING", "module": "whisper_client", "message": "Whisper API call failed after retries: Failed to extract lyrics: API Error, returning empty lyrics", "taskName": "Task-52", "job_id": "bfecfd81-9591-4f6b-aefe-6636039bb899"}
{"timestamp": "2025-11-14T21:52:30.392624Z", "level": "INFO", "module": "whisper_client", "message": "Created temporary audio file: /var/folders/d5/vzgmwykd2jsbxfy1k60z4ds00000gq/T/tmpl12uj4vc.mp3", "taskName": "Task-55"}
{"timestamp": "2025-11-14T21:52:30.393113Z", "level": "INFO", "module": "whisper_client", "message": "Whisper API response received: 1 words", "taskName": "Task-55"}
{"timestamp": "2025-11-14T21:52:30.393224Z", "level": "INFO", "module": "whisper_client", "message": "Extracted 1 lyrics from audio", "taskName": "Task-55"}
{"timestamp": "2025-11-14T21:52:30.393491Z", "level": "ERROR", "module": "whisper_client", "message": "Whisper API call failed: object MagicMock can't be used in 'await' expression", "taskName": "Task-55", "job_id": "dad19590-a9a6-42f9-837c-0a639630274c"}
{"timestamp": "2025-11-14T21:52:30.393664Z", "level": "WARNING", "module": "whisper_client", "message": "Whisper API call failed after retries: Failed to extract lyrics: object MagicMock can't be used in 'await' expression, returning empty lyrics", "taskName": "Task-55", "job_id": "dad19590-a9a6-42f9-837c-0a639630274c"}
{"timestamp": "2025-11-14T21:24:13.098854Z", "level": "INFO", "module": "queue_service", "message": "Job enqueued", "job_id": "test_job_id", "user_id": "test_user_id"}
{"timestamp": "2025-11-14T21:24:13.104579Z", "level": "INFO", "module": "queue_service", "message": "Job removed from queue", "job_id": "test_job_id"}
{"timestamp": "2025-11-14T21:24:39.063069Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 1800}
{"timestamp": "2025-11-14T21:24:39.071458Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 3600}
{"timestamp": "2025-11-14T21:24:39.077269Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 1800}
{"timestamp": "2025-11-14T21:24:39.115267Z", "level": "INFO", "module": "queue_service", "message": "Job enqueued", "job_id": "test_job_id", "user_id": "test_user_id"}
{"timestamp": "2025-11-14T21:24:39.120773Z", "level": "INFO", "module": "queue_service", "message": "Job removed from queue", "job_id": "test_job_id"}
{"timestamp": "2025-11-14T21:29:51.180261Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "806cbdfd-17d2-4924-b74e-c3d46d5742b9", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:29:58.660710Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "a9806236-d6ca-4a39-9efa-0c1e2495aa16", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:30:11.028203Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "7b24f67b-1624-4688-a3b7-25246aac4289", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:30:12.514739Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "f15add4c-088c-4d1e-8a6f-cb35ef57ee70", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:30:12.568028Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "381b0638-6e70-4b62-98ac-53bfc43aa0c5", "method": "GET", "path": "/api/v1/jobs/invalid-job-id"}
{"timestamp": "2025-11-14T21:30:12.570476Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "e09800bb-4830-4090-94cd-499fa016cf2e", "method": "GET", "path": "/api/v1/jobs"}
{"timestamp": "2025-11-14T21:30:12.573145Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "7583c607-d827-4ee2-a254-5b37ab3d6956", "method": "GET", "path": "/api/v1/jobs/invalid-job-id/stream"}
{"timestamp": "2025-11-14T21:30:25.689739Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "ea1edbcb-209b-459f-90b6-e83b844b2348", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:30:29.349619Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "7bb9861e-a398-485f-ad8e-b769b40b932c", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:30:30.872129Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "7212f5cd-86bf-46f0-9a0b-5c7829d69f61", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:30:30.876423Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "06ca5825-eb0e-48ec-800d-09f68a16cb8a", "method": "GET", "path": "/api/v1/jobs/invalid-job-id"}
{"timestamp": "2025-11-14T21:30:30.880312Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "8c355cf4-74c7-47ec-adeb-ab1bafd40229", "method": "GET", "path": "/api/v1/jobs"}
{"timestamp": "2025-11-14T21:30:30.885426Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "9cd0cf6a-56f5-4549-8b67-0c4f60f0a72f", "method": "GET", "path": "/api/v1/jobs/invalid-job-id/stream"}
{"timestamp": "2025-11-14T21:30:30.889092Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "9d6e1779-7df7-4305-9476-28b36e8c85a8", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:30:31.093120Z", "level": "ERROR", "module": "queue_service", "message": "Failed to get queue size", "exception": "Traceback (most recent call last):\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py\", line 510, in read_response\n    response = await self._parser.read_response(\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/redis/_parsers/resp2.py\", line 82, in read_response\n    response = await self._read_response(disable_decoding=disable_decoding)\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/redis/_parsers/resp2.py\", line 90, in _read_response\n    raw = await self._readline()\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/redis/_parsers/base.py\", line 219, in _readline\n    data = await self._stream.readline()\n  File \"/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/asyncio/streams.py\", line 540, in readline\n    line = await self.readuntil(sep)\n  File \"/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/asyncio/streams.py\", line 632, in readuntil\n    await self._wait_for_data('readuntil')\n  File \"/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/asyncio/streams.py\", line 517, in _wait_for_data\n    await self._waiter\nRuntimeError: Task <Task pending name='starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro' coro=<BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro() running at /Users/user/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70> cb=[TaskGroup._spawn.<locals>.task_done() at /Users/user/Library/Python/3.9/lib/python/site-packages/anyio/_backends/_asyncio.py:661]> got Future <Future pending> attached to a different loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/user/Desktop/Github/VideoGen/project/backend/api_gateway/services/queue_service.py\", line 92, in get_queue_size\n    size = await redis_client.client.llen(queue_key)\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/redis/asyncio/client.py\", line 606, in execute_command\n    return await conn.retry.call_with_retry(\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/redis/asyncio/retry.py\", line 59, in call_with_retry\n    return await do()\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/redis/asyncio/client.py\", line 580, in _send_command_parse_response\n    return await self.parse_response(conn, command_name, **options)\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/redis/asyncio/client.py\", line 627, in parse_response\n    response = await connection.read_response()\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py\", line 530, in read_response\n    await self.disconnect(nowait=True)\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py\", line 386, in disconnect\n    self._writer.close()  # type: ignore[union-attr]\n  File \"/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/asyncio/streams.py\", line 353, in close\n    return self._transport.close()\n  File \"/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/asyncio/selector_events.py\", line 700, in close\n    self._loop.call_soon(self._call_connection_lost, None)\n  File \"/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/asyncio/base_events.py\", line 746, in call_soon\n    self._check_closed()\n  File \"/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/asyncio/base_events.py\", line 510, in _check_closed\n    raise RuntimeError('Event loop is closed')\nRuntimeError: Event loop is closed"}
{"timestamp": "2025-11-14T21:30:42.040887Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "0c10d2e0-f061-4f3c-a1e6-bc5667b9c75a", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:30:43.153146Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "f51cb2dc-d071-4bab-8529-843c5f77b7da", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:30:43.155210Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "56e85ad4-ab50-4fdd-a98b-bee3322ea1d6", "method": "GET", "path": "/api/v1/jobs/invalid-job-id"}
{"timestamp": "2025-11-14T21:30:43.157052Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "2012e400-6f22-47b0-8232-82768acb717a", "method": "GET", "path": "/api/v1/jobs"}
{"timestamp": "2025-11-14T21:30:43.159510Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "ce5f733c-6632-460f-94bd-622ae769c911", "method": "GET", "path": "/api/v1/jobs/invalid-job-id/stream"}
{"timestamp": "2025-11-14T21:30:46.703176Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "74b815fa-0b4d-4480-9807-c3b06dd9c083", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:30:52.547794Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "5752440b-e73d-482b-aace-164da5387eea", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:30:52.551435Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "12e676ad-b74c-494b-ab79-afb32f7ee96d", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:30:52.553480Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "72c0e0e8-e688-4b3b-9580-c37be20fe925", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:30:52.555454Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "632cffee-8990-4d5e-a487-444319f6b0c4", "method": "GET", "path": "/api/v1/jobs/invalid-job-id"}
{"timestamp": "2025-11-14T21:30:52.557137Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "e8f9b9fc-d036-4fcd-b088-b1cfe8eb2ad8", "method": "GET", "path": "/api/v1/jobs"}
{"timestamp": "2025-11-14T21:30:52.559735Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "55759016-3d80-4a27-9331-1d2c6a9306be", "method": "GET", "path": "/api/v1/jobs/invalid-job-id/stream"}
{"timestamp": "2025-11-14T21:31:06.848057Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "40ca8136-4a22-45ad-a4d9-8fe04bcb3fa3", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:31:06.856339Z", "level": "INFO", "module": "queue_service", "message": "Job enqueued", "job_id": "test_job_id", "user_id": "test_user_id"}
{"timestamp": "2025-11-14T21:31:06.862020Z", "level": "INFO", "module": "queue_service", "message": "Job removed from queue", "job_id": "test_job_id"}
{"timestamp": "2025-11-14T21:31:06.880501Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 1800}
{"timestamp": "2025-11-14T21:31:06.888769Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 3600}
{"timestamp": "2025-11-14T21:31:06.895262Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 1800}
{"timestamp": "2025-11-14T21:31:06.931399Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "554bbd95-c935-4b2f-9d63-acf00794e253", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:31:06.933502Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "c7d7583a-dc8e-454a-b557-cce47b2ce006", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:31:06.935822Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "a181955d-b7e0-439c-bae4-559d48283ff3", "method": "GET", "path": "/api/v1/jobs/invalid-job-id"}
{"timestamp": "2025-11-14T21:31:06.937780Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "3e933069-4a53-4720-934e-6f6067c4930f", "method": "GET", "path": "/api/v1/jobs"}
{"timestamp": "2025-11-14T21:31:06.940065Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "5635916b-5897-44ed-ac2d-a664c30e804d", "method": "GET", "path": "/api/v1/jobs/invalid-job-id/stream"}
{"timestamp": "2025-11-14T21:32:41.895243Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "210fd7f9-5fe1-473e-a346-ce750c44e213", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:32:41.906222Z", "level": "INFO", "module": "queue_service", "message": "Job enqueued", "job_id": "test_job_id", "user_id": "test_user_id"}
{"timestamp": "2025-11-14T21:32:41.914557Z", "level": "INFO", "module": "queue_service", "message": "Job removed from queue", "job_id": "test_job_id"}
{"timestamp": "2025-11-14T21:32:41.940310Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 1800}
{"timestamp": "2025-11-14T21:32:41.952216Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 3600}
{"timestamp": "2025-11-14T21:32:41.979521Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 1800}
{"timestamp": "2025-11-14T21:32:41.999445Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "ff2be13c-3886-46a7-8d58-9d375c03488b", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:32:42.002441Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "5edbd7b2-0f6b-485d-8a87-3307ca018161", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:32:42.004886Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "0d193cca-c7b8-47e4-b5c6-0ad717b13926", "method": "GET", "path": "/api/v1/jobs/invalid-job-id"}
{"timestamp": "2025-11-14T21:32:42.007257Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "27427b17-d011-4385-972b-3c3dff0cfe14", "method": "GET", "path": "/api/v1/jobs"}
{"timestamp": "2025-11-14T21:32:42.010923Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "b19a4000-7612-40e4-99f7-feca9921f2d1", "method": "GET", "path": "/api/v1/jobs/invalid-job-id/stream"}
{"timestamp": "2025-11-14T21:33:53.968201Z", "level": "WARNING", "module": "dependencies", "message": "JWT validation failed", "exception": "Traceback (most recent call last):\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jws.py\", line 180, in _load\n    signing_input, crypto_segment = jwt.rsplit(b\".\", 1)\nValueError: not enough values to unpack (expected 2, got 1)\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jwt.py\", line 159, in decode\n    payload = jws.verify(token, key, algorithms, verify=verify_signature)\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jws.py\", line 74, in verify\n    header, payload, signing_input, signature = _load(token)\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jws.py\", line 184, in _load\n    raise JWSError(\"Not enough segments\")\njose.exceptions.JWSError: Not enough segments\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/user/Desktop/Github/VideoGen/project/backend/api_gateway/dependencies.py\", line 60, in get_current_user\n    payload = jwt.decode(\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jwt.py\", line 161, in decode\n    raise JWTError(e)\njose.exceptions.JWTError: Not enough segments"}
{"timestamp": "2025-11-14T21:34:16.993162Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "4437acef-b8d5-4b21-82c9-aaa0b6b840c1", "method": "GET", "path": "/"}
{"timestamp": "2025-11-14T21:34:16.997139Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "de6b324b-ffc9-49c3-8566-a78b7dda2204", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:34:16.999783Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "d563ec46-741d-4000-83b1-d39f6240e601", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:34:17.001674Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "55eaddf9-c49c-4323-912b-ba3faa147f38", "method": "GET", "path": "/api/v1/jobs"}
{"timestamp": "2025-11-14T21:34:17.003677Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "fce8ddd5-0c53-4a19-92dc-e6412ed91e60", "method": "GET", "path": "/api/v1/jobs/invalid-id"}
{"timestamp": "2025-11-14T21:34:17.005674Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "202bc6b2-328d-47ee-ab43-0d51b9bbd8d4", "method": "GET", "path": "/api/v1/jobs/invalid-id/stream"}
{"timestamp": "2025-11-14T21:34:17.008312Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "33fa5fd9-8fc8-4bc5-856d-48d1af6442a3", "method": "GET", "path": "/api/v1/jobs/invalid-id/download"}
{"timestamp": "2025-11-14T21:34:17.010512Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "6e3c9632-20c4-4605-a0c0-1948a8b45f21", "method": "POST", "path": "/api/v1/jobs/invalid-id/cancel"}
{"timestamp": "2025-11-14T21:34:17.019321Z", "level": "WARNING", "module": "orchestrator", "message": "Failed to check cancellation flag", "exception": "Traceback (most recent call last):\n  File \"/Users/user/Desktop/Github/VideoGen/project/backend/api_gateway/orchestrator.py\", line 42, in check_cancellation\n    cancelled = await redis_client.get(cancel_key)\nTypeError: object MagicMock can't be used in 'await' expression"}
{"timestamp": "2025-11-14T21:34:17.026006Z", "level": "WARNING", "module": "orchestrator", "message": "Failed to check cancellation flag", "exception": "Traceback (most recent call last):\n  File \"/Users/user/Desktop/Github/VideoGen/project/backend/api_gateway/orchestrator.py\", line 42, in check_cancellation\n    cancelled = await redis_client.get(cancel_key)\nTypeError: object MagicMock can't be used in 'await' expression"}
{"timestamp": "2025-11-14T21:34:17.066903Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "job_id": "test_job_id", "progress": 50, "stage": "video_generation"}
{"timestamp": "2025-11-14T21:34:17.075971Z", "level": "ERROR", "module": "orchestrator", "message": "Pipeline error handled", "job_id": "test_job_id", "error_code": "TEST_ERROR", "exception": "shared.errors.PipelineError: Test error"}
{"timestamp": "2025-11-14T21:34:18.403403Z", "level": "WARNING", "module": "dependencies", "message": "JWT validation failed", "exception": "Traceback (most recent call last):\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jws.py\", line 180, in _load\n    signing_input, crypto_segment = jwt.rsplit(b\".\", 1)\nValueError: not enough values to unpack (expected 2, got 1)\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jwt.py\", line 159, in decode\n    payload = jws.verify(token, key, algorithms, verify=verify_signature)\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jws.py\", line 74, in verify\n    header, payload, signing_input, signature = _load(token)\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jws.py\", line 184, in _load\n    raise JWSError(\"Not enough segments\")\njose.exceptions.JWSError: Not enough segments\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/user/Desktop/Github/VideoGen/project/backend/api_gateway/dependencies.py\", line 60, in get_current_user\n    payload = jwt.decode(\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jwt.py\", line 161, in decode\n    raise JWTError(e)\njose.exceptions.JWTError: Not enough segments"}
{"timestamp": "2025-11-14T21:34:18.442927Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "db7c9969-eccf-4894-a075-acc76bbf35bf", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:34:18.452433Z", "level": "WARNING", "module": "orchestrator", "message": "Failed to check cancellation flag", "exception": "Traceback (most recent call last):\n  File \"/Users/user/Desktop/Github/VideoGen/project/backend/api_gateway/orchestrator.py\", line 42, in check_cancellation\n    cancelled = await redis_client.get(cancel_key)\nTypeError: object MagicMock can't be used in 'await' expression"}
{"timestamp": "2025-11-14T21:34:18.459664Z", "level": "WARNING", "module": "orchestrator", "message": "Failed to check cancellation flag", "exception": "Traceback (most recent call last):\n  File \"/Users/user/Desktop/Github/VideoGen/project/backend/api_gateway/orchestrator.py\", line 42, in check_cancellation\n    cancelled = await redis_client.get(cancel_key)\nTypeError: object MagicMock can't be used in 'await' expression"}
{"timestamp": "2025-11-14T21:34:18.469513Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "job_id": "test_job_id", "progress": 50, "stage": "video_generation"}
{"timestamp": "2025-11-14T21:34:18.496438Z", "level": "ERROR", "module": "orchestrator", "message": "Pipeline error handled", "job_id": "test_job_id", "error_code": "TEST_ERROR", "exception": "shared.errors.PipelineError: Test error"}
{"timestamp": "2025-11-14T21:34:18.502306Z", "level": "INFO", "module": "queue_service", "message": "Job enqueued", "job_id": "test_job_id", "user_id": "test_user_id"}
{"timestamp": "2025-11-14T21:34:18.508502Z", "level": "INFO", "module": "queue_service", "message": "Job removed from queue", "job_id": "test_job_id"}
{"timestamp": "2025-11-14T21:34:18.526491Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 1800}
{"timestamp": "2025-11-14T21:34:18.534690Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 3600}
{"timestamp": "2025-11-14T21:34:18.541245Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 1800}
{"timestamp": "2025-11-14T21:34:18.550210Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "d166ce71-2b7a-4d28-9e5e-2c678d3e8e32", "method": "GET", "path": "/"}
{"timestamp": "2025-11-14T21:34:18.552256Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "7ad833ca-0295-4aaa-ba79-b3fb62274de5", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:34:18.554200Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "7508e230-1c5a-432c-addb-4a41be259748", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:34:18.555999Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "764dafaf-fff4-445e-9464-ac4f65972b2b", "method": "GET", "path": "/api/v1/jobs"}
{"timestamp": "2025-11-14T21:34:18.558587Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "6127c953-0961-43c7-801f-373003722afe", "method": "GET", "path": "/api/v1/jobs/invalid-id"}
{"timestamp": "2025-11-14T21:34:18.560450Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "e4c1c900-e4a1-4f68-bc36-3e63348154bb", "method": "GET", "path": "/api/v1/jobs/invalid-id/stream"}
{"timestamp": "2025-11-14T21:34:18.562260Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "2491c018-405c-4db6-8501-124cab9ddf3b", "method": "GET", "path": "/api/v1/jobs/invalid-id/download"}
{"timestamp": "2025-11-14T21:34:18.563946Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "c3bcd86f-1984-4d56-8a84-3ce66b23d76c", "method": "POST", "path": "/api/v1/jobs/invalid-id/cancel"}
{"timestamp": "2025-11-14T21:34:18.572856Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "3e47c87d-23ee-4bd1-8a04-1be0ee574b8f", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:34:18.575350Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "a980615e-e8b3-4d97-baaf-f92afdecded0", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:34:18.577110Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "81a4165e-fa3d-4a2e-8c8c-53def7425135", "method": "GET", "path": "/api/v1/jobs/invalid-job-id"}
{"timestamp": "2025-11-14T21:34:18.578792Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "dbf7b429-7b46-4e2e-bf04-5e5884863026", "method": "GET", "path": "/api/v1/jobs"}
{"timestamp": "2025-11-14T21:34:18.580948Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "e02a4316-ece5-46db-82d1-759e92f12fb9", "method": "GET", "path": "/api/v1/jobs/invalid-job-id/stream"}
{"timestamp": "2025-11-14T21:34:47.154836Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "job_id": "test_job_id", "progress": 50, "stage": "video_generation"}
{"timestamp": "2025-11-14T21:34:47.163632Z", "level": "ERROR", "module": "orchestrator", "message": "Pipeline error handled", "job_id": "test_job_id", "error_code": "TEST_ERROR", "exception": "shared.errors.PipelineError: Test error"}
{"timestamp": "2025-11-14T21:34:58.868003Z", "level": "WARNING", "module": "dependencies", "message": "JWT validation failed", "exception": "Traceback (most recent call last):\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jws.py\", line 180, in _load\n    signing_input, crypto_segment = jwt.rsplit(b\".\", 1)\nValueError: not enough values to unpack (expected 2, got 1)\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jwt.py\", line 159, in decode\n    payload = jws.verify(token, key, algorithms, verify=verify_signature)\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jws.py\", line 74, in verify\n    header, payload, signing_input, signature = _load(token)\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jws.py\", line 184, in _load\n    raise JWSError(\"Not enough segments\")\njose.exceptions.JWSError: Not enough segments\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/user/Desktop/Github/VideoGen/project/backend/api_gateway/dependencies.py\", line 60, in get_current_user\n    payload = jwt.decode(\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jwt.py\", line 161, in decode\n    raise JWTError(e)\njose.exceptions.JWTError: Not enough segments"}
{"timestamp": "2025-11-14T21:34:58.905931Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "e0bc5b84-29e2-49d5-a84c-f850344aae8d", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:34:58.929171Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "job_id": "test_job_id", "progress": 50, "stage": "video_generation"}
{"timestamp": "2025-11-14T21:34:58.954286Z", "level": "ERROR", "module": "orchestrator", "message": "Pipeline error handled", "job_id": "test_job_id", "error_code": "TEST_ERROR", "exception": "shared.errors.PipelineError: Test error"}
{"timestamp": "2025-11-14T21:34:58.960404Z", "level": "INFO", "module": "queue_service", "message": "Job enqueued", "job_id": "test_job_id", "user_id": "test_user_id"}
{"timestamp": "2025-11-14T21:34:58.965698Z", "level": "INFO", "module": "queue_service", "message": "Job removed from queue", "job_id": "test_job_id"}
{"timestamp": "2025-11-14T21:34:58.983838Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 1800}
{"timestamp": "2025-11-14T21:34:58.991536Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 3600}
{"timestamp": "2025-11-14T21:34:58.997216Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 1800}
{"timestamp": "2025-11-14T21:34:59.005494Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "918dd11a-afed-4533-b92b-7851934da7d4", "method": "GET", "path": "/"}
{"timestamp": "2025-11-14T21:34:59.008114Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "a750407e-5c15-4064-b96a-0fe9aeeae58c", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:34:59.010173Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "e1508649-d0bf-47b1-97af-ec11791a2232", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:34:59.012036Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "c20fce16-b65e-4ba0-8d02-a5252f046123", "method": "GET", "path": "/api/v1/jobs"}
{"timestamp": "2025-11-14T21:34:59.013891Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "5ca7f5ed-9938-4199-92d5-c1988307c905", "method": "GET", "path": "/api/v1/jobs/invalid-id"}
{"timestamp": "2025-11-14T21:34:59.016318Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "6fc8b584-2299-4ed9-b5cc-22bdf0a482a3", "method": "GET", "path": "/api/v1/jobs/invalid-id/stream"}
{"timestamp": "2025-11-14T21:34:59.018415Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "e272cfa0-961c-4fff-8e83-fe1e57f41dc6", "method": "GET", "path": "/api/v1/jobs/invalid-id/download"}
{"timestamp": "2025-11-14T21:34:59.020238Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "6a6a1959-d7b8-44e3-b55e-ad14bca2acdf", "method": "POST", "path": "/api/v1/jobs/invalid-id/cancel"}
{"timestamp": "2025-11-14T21:34:59.029055Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "d006a762-b896-4760-b0fb-128532ee85ad", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:34:59.030927Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "8c107cca-3246-47d8-9c1f-94cded382fcc", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:34:59.033222Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "c9bc564d-7213-47d0-a807-6e558d954c05", "method": "GET", "path": "/api/v1/jobs/invalid-job-id"}
{"timestamp": "2025-11-14T21:34:59.035217Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "46869788-2550-407b-be4d-724ba5f0fcef", "method": "GET", "path": "/api/v1/jobs"}
{"timestamp": "2025-11-14T21:34:59.037380Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "eb2670df-7867-427e-ae21-4f788e335aea", "method": "GET", "path": "/api/v1/jobs/invalid-job-id/stream"}
{"timestamp": "2025-11-14T21:35:00.299279Z", "level": "WARNING", "module": "dependencies", "message": "JWT validation failed", "exception": "Traceback (most recent call last):\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jws.py\", line 180, in _load\n    signing_input, crypto_segment = jwt.rsplit(b\".\", 1)\nValueError: not enough values to unpack (expected 2, got 1)\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jwt.py\", line 159, in decode\n    payload = jws.verify(token, key, algorithms, verify=verify_signature)\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jws.py\", line 74, in verify\n    header, payload, signing_input, signature = _load(token)\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jws.py\", line 184, in _load\n    raise JWSError(\"Not enough segments\")\njose.exceptions.JWSError: Not enough segments\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/user/Desktop/Github/VideoGen/project/backend/api_gateway/dependencies.py\", line 60, in get_current_user\n    payload = jwt.decode(\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jwt.py\", line 161, in decode\n    raise JWTError(e)\njose.exceptions.JWTError: Not enough segments"}
{"timestamp": "2025-11-14T21:35:00.351412Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "e3b600ab-ad62-4805-9f0a-6e3a03186289", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:35:00.383539Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "job_id": "test_job_id", "progress": 50, "stage": "video_generation"}
{"timestamp": "2025-11-14T21:35:00.416892Z", "level": "ERROR", "module": "orchestrator", "message": "Pipeline error handled", "job_id": "test_job_id", "error_code": "TEST_ERROR", "exception": "shared.errors.PipelineError: Test error"}
{"timestamp": "2025-11-14T21:35:00.424929Z", "level": "INFO", "module": "queue_service", "message": "Job enqueued", "job_id": "test_job_id", "user_id": "test_user_id"}
{"timestamp": "2025-11-14T21:35:00.433994Z", "level": "INFO", "module": "queue_service", "message": "Job removed from queue", "job_id": "test_job_id"}
{"timestamp": "2025-11-14T21:35:00.461612Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 1800}
{"timestamp": "2025-11-14T21:35:00.472522Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 3600}
{"timestamp": "2025-11-14T21:35:00.481173Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 1800}
{"timestamp": "2025-11-14T21:35:00.492526Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "62a4f9be-fdf0-4954-aafc-17f03640a4ec", "method": "GET", "path": "/"}
{"timestamp": "2025-11-14T21:35:00.494923Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "8b0dfecb-0110-43f9-adc0-bfd8e61a4344", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:35:00.497435Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "731ce36e-a39e-444f-b634-db7928535257", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:35:00.500463Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "befd4fa8-c6ca-4431-967f-572b8d648de8", "method": "GET", "path": "/api/v1/jobs"}
{"timestamp": "2025-11-14T21:35:00.502925Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "1307963d-c922-4564-99a1-029cbe063fc4", "method": "GET", "path": "/api/v1/jobs/invalid-id"}
{"timestamp": "2025-11-14T21:35:00.505197Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "29e4fd10-220c-4b7c-9900-056769949026", "method": "GET", "path": "/api/v1/jobs/invalid-id/stream"}
{"timestamp": "2025-11-14T21:35:00.507986Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "d3b17165-dff3-4a86-b29e-92acdd4448e5", "method": "GET", "path": "/api/v1/jobs/invalid-id/download"}
{"timestamp": "2025-11-14T21:35:00.510397Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "8a2ee686-49da-4160-8a15-975be362f5f1", "method": "POST", "path": "/api/v1/jobs/invalid-id/cancel"}
{"timestamp": "2025-11-14T21:35:00.521381Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "d7c57703-b1bb-4577-81e0-776d000e923f", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:35:00.525086Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "0b66eebb-d585-462c-89f6-21a1a2ef1cc5", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:35:00.527514Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "38d6ff8c-fdcc-4375-a6e1-dd5eefdfa276", "method": "GET", "path": "/api/v1/jobs/invalid-job-id"}
{"timestamp": "2025-11-14T21:35:00.529744Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "fdfd122f-8c54-433f-8f4e-ce087b1f7ece", "method": "GET", "path": "/api/v1/jobs"}
{"timestamp": "2025-11-14T21:35:00.533043Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "44768b7c-a40a-4bd1-b7d6-bec252cf1d7d", "method": "GET", "path": "/api/v1/jobs/invalid-job-id/stream"}
{"timestamp": "2025-11-14T21:35:19.384206Z", "level": "INFO", "module": "worker", "message": "Processing job", "job_id": "test_job_id", "user_id": "test_user_id"}
{"timestamp": "2025-11-14T21:35:19.385487Z", "level": "ERROR", "module": "worker", "message": "Unexpected error processing job", "job_id": "test_job_id", "exception": "Traceback (most recent call last):\n  File \"/Users/user/Desktop/Github/VideoGen/project/backend/api_gateway/worker.py\", line 43, in process_job\n    if await redis_client.get(cancel_key):\nTypeError: object MagicMock can't be used in 'await' expression"}
{"timestamp": "2025-11-14T21:35:19.418457Z", "level": "INFO", "module": "worker", "message": "Processing job", "job_id": "test_job_id", "user_id": "test_user_id"}
{"timestamp": "2025-11-14T21:35:19.418753Z", "level": "ERROR", "module": "worker", "message": "Unexpected error processing job", "job_id": "test_job_id", "exception": "Traceback (most recent call last):\n  File \"/Users/user/Desktop/Github/VideoGen/project/backend/api_gateway/worker.py\", line 43, in process_job\n    if await redis_client.get(cancel_key):\nTypeError: object MagicMock can't be used in 'await' expression"}
{"timestamp": "2025-11-14T21:35:19.419637Z", "level": "ERROR", "module": "worker", "message": "Invalid job data", "job_data": "{'job_id': None, 'user_id': 'test_user_id'}"}
{"timestamp": "2025-11-14T21:40:50.083273Z", "level": "WARNING", "module": "dependencies", "message": "JWT validation failed", "exception": "Traceback (most recent call last):\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jws.py\", line 180, in _load\n    signing_input, crypto_segment = jwt.rsplit(b\".\", 1)\nValueError: not enough values to unpack (expected 2, got 1)\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jwt.py\", line 159, in decode\n    payload = jws.verify(token, key, algorithms, verify=verify_signature)\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jws.py\", line 74, in verify\n    header, payload, signing_input, signature = _load(token)\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jws.py\", line 184, in _load\n    raise JWSError(\"Not enough segments\")\njose.exceptions.JWSError: Not enough segments\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/user/Desktop/Github/VideoGen/project/backend/api_gateway/dependencies.py\", line 60, in get_current_user\n    payload = jwt.decode(\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jwt.py\", line 161, in decode\n    raise JWTError(e)\njose.exceptions.JWTError: Not enough segments"}
{"timestamp": "2025-11-14T21:40:50.121991Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "c3868c68-48b6-4531-9f97-5aeb99bd3073", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:40:50.146291Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "job_id": "test_job_id", "progress": 50, "stage": "video_generation"}
{"timestamp": "2025-11-14T21:40:50.174398Z", "level": "ERROR", "module": "orchestrator", "message": "Pipeline error handled", "job_id": "test_job_id", "error_code": "TEST_ERROR", "exception": "shared.errors.PipelineError: Test error"}
{"timestamp": "2025-11-14T21:40:50.180922Z", "level": "INFO", "module": "queue_service", "message": "Job enqueued", "job_id": "test_job_id", "user_id": "test_user_id"}
{"timestamp": "2025-11-14T21:40:50.186318Z", "level": "INFO", "module": "queue_service", "message": "Job removed from queue", "job_id": "test_job_id"}
{"timestamp": "2025-11-14T21:40:50.204877Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 1800}
{"timestamp": "2025-11-14T21:40:50.212954Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 3600}
{"timestamp": "2025-11-14T21:40:50.219305Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 1800}
{"timestamp": "2025-11-14T21:40:50.227108Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "326e6ab9-4b28-48c7-9a2a-7fdcde24c7cf", "method": "GET", "path": "/"}
{"timestamp": "2025-11-14T21:40:50.229981Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "fb06e5e7-2943-4a7b-9f13-251e439a0a3d", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:40:50.231935Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "c0d44119-6d00-487c-bdac-40010ac1eb37", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:40:50.233877Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "9ee1415c-ab74-489f-91e6-5481ad034526", "method": "GET", "path": "/api/v1/jobs"}
{"timestamp": "2025-11-14T21:40:50.236058Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "b9823304-86cb-4590-a4f4-c261a2ff684a", "method": "GET", "path": "/api/v1/jobs/invalid-id"}
{"timestamp": "2025-11-14T21:40:50.238137Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "1dd18bf2-6d00-4cfe-a845-0b982aebd16a", "method": "GET", "path": "/api/v1/jobs/invalid-id/stream"}
{"timestamp": "2025-11-14T21:40:50.239842Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "4d0cfa1b-c2b0-4f47-9825-fdba63d941f0", "method": "GET", "path": "/api/v1/jobs/invalid-id/download"}
{"timestamp": "2025-11-14T21:40:50.241741Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "c23064aa-34f8-47f4-bf9b-9d2e0ae21dd6", "method": "POST", "path": "/api/v1/jobs/invalid-id/cancel"}
{"timestamp": "2025-11-14T21:40:50.252047Z", "level": "INFO", "module": "worker", "message": "Processing job", "job_id": "test_job_id", "user_id": "test_user_id"}
{"timestamp": "2025-11-14T21:40:50.253656Z", "level": "ERROR", "module": "worker", "message": "Unexpected error processing job", "job_id": "test_job_id", "exception": "Traceback (most recent call last):\n  File \"/Users/user/Desktop/Github/VideoGen/project/backend/api_gateway/worker.py\", line 47, in process_job\n    if await redis_client.get(cancel_key):\nTypeError: object MagicMock can't be used in 'await' expression"}
{"timestamp": "2025-11-14T21:40:50.259021Z", "level": "INFO", "module": "worker", "message": "Processing job", "job_id": "test_job_id", "user_id": "test_user_id"}
{"timestamp": "2025-11-14T21:40:50.259281Z", "level": "ERROR", "module": "worker", "message": "Unexpected error processing job", "job_id": "test_job_id", "exception": "Traceback (most recent call last):\n  File \"/Users/user/Desktop/Github/VideoGen/project/backend/api_gateway/worker.py\", line 47, in process_job\n    if await redis_client.get(cancel_key):\nTypeError: object MagicMock can't be used in 'await' expression"}
{"timestamp": "2025-11-14T21:40:50.260328Z", "level": "ERROR", "module": "worker", "message": "Invalid job data", "job_data": "{'job_id': None, 'user_id': 'test_user_id'}"}
{"timestamp": "2025-11-14T21:40:50.267230Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "34cd21f5-4590-44b1-93ba-f3a218a2a70a", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:40:50.269522Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "55c014c7-9f93-45e9-a812-31915cccea68", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:40:50.271567Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "0e8b4e41-3128-4b04-b245-c99e32ae6e96", "method": "GET", "path": "/api/v1/jobs/invalid-job-id"}
{"timestamp": "2025-11-14T21:40:50.273235Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "68fabc9f-f4a5-48da-a95e-989320e7e62e", "method": "GET", "path": "/api/v1/jobs"}
{"timestamp": "2025-11-14T21:40:50.275539Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "05ab7e8d-3a24-4829-a64f-fdd76e3bc68c", "method": "GET", "path": "/api/v1/jobs/invalid-job-id/stream"}
{"timestamp": "2025-11-14T21:40:57.432291Z", "level": "WARNING", "module": "dependencies", "message": "JWT validation failed", "exception": "Traceback (most recent call last):\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jws.py\", line 180, in _load\n    signing_input, crypto_segment = jwt.rsplit(b\".\", 1)\nValueError: not enough values to unpack (expected 2, got 1)\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jwt.py\", line 159, in decode\n    payload = jws.verify(token, key, algorithms, verify=verify_signature)\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jws.py\", line 74, in verify\n    header, payload, signing_input, signature = _load(token)\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jws.py\", line 184, in _load\n    raise JWSError(\"Not enough segments\")\njose.exceptions.JWSError: Not enough segments\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/user/Desktop/Github/VideoGen/project/backend/api_gateway/dependencies.py\", line 60, in get_current_user\n    payload = jwt.decode(\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jwt.py\", line 161, in decode\n    raise JWTError(e)\njose.exceptions.JWTError: Not enough segments"}
{"timestamp": "2025-11-14T21:40:57.471343Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "b06fda5d-4f02-4146-a316-6639300e09a5", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:40:57.494988Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "job_id": "test_job_id", "progress": 50, "stage": "video_generation"}
{"timestamp": "2025-11-14T21:40:57.521933Z", "level": "ERROR", "module": "orchestrator", "message": "Pipeline error handled", "job_id": "test_job_id", "error_code": "TEST_ERROR", "exception": "shared.errors.PipelineError: Test error"}
{"timestamp": "2025-11-14T21:40:57.528209Z", "level": "INFO", "module": "queue_service", "message": "Job enqueued", "job_id": "test_job_id", "user_id": "test_user_id"}
{"timestamp": "2025-11-14T21:40:57.533349Z", "level": "INFO", "module": "queue_service", "message": "Job removed from queue", "job_id": "test_job_id"}
{"timestamp": "2025-11-14T21:40:57.552122Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 1800}
{"timestamp": "2025-11-14T21:40:57.560296Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 3600}
{"timestamp": "2025-11-14T21:40:57.566497Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 1800}
{"timestamp": "2025-11-14T21:40:57.574263Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "c970bfbf-2f0b-4585-8f25-224500b01646", "method": "GET", "path": "/"}
{"timestamp": "2025-11-14T21:40:57.577232Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "c0eb7533-3de7-4b5b-8923-e86049b58129", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:40:57.579606Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "04efd731-c9d5-4d01-93f5-a184d7c619c6", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:40:57.581628Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "f7af7e28-f23f-4faf-ab71-5348b2c704c1", "method": "GET", "path": "/api/v1/jobs"}
{"timestamp": "2025-11-14T21:40:57.583521Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "259327b0-613b-4c10-84a2-e17fddaa540b", "method": "GET", "path": "/api/v1/jobs/invalid-id"}
{"timestamp": "2025-11-14T21:40:57.585947Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "b4a9d515-7605-4e1a-bca2-fc181b036c79", "method": "GET", "path": "/api/v1/jobs/invalid-id/stream"}
{"timestamp": "2025-11-14T21:40:57.587998Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "0c8241bb-a2f0-4ebc-bf68-d7f815bff1f1", "method": "GET", "path": "/api/v1/jobs/invalid-id/download"}
{"timestamp": "2025-11-14T21:40:57.590009Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "b0285158-c73d-4e5a-b94b-5a9766727cf8", "method": "POST", "path": "/api/v1/jobs/invalid-id/cancel"}
{"timestamp": "2025-11-14T21:40:57.600518Z", "level": "INFO", "module": "worker", "message": "Processing job", "job_id": "test_job_id", "user_id": "test_user_id"}
{"timestamp": "2025-11-14T21:40:57.602239Z", "level": "ERROR", "module": "worker", "message": "Unexpected error processing job", "job_id": "test_job_id", "exception": "Traceback (most recent call last):\n  File \"/Users/user/Desktop/Github/VideoGen/project/backend/api_gateway/worker.py\", line 47, in process_job\n    if await redis_client.get(cancel_key):\nTypeError: object MagicMock can't be used in 'await' expression"}
{"timestamp": "2025-11-14T21:40:57.607518Z", "level": "INFO", "module": "worker", "message": "Processing job", "job_id": "test_job_id", "user_id": "test_user_id"}
{"timestamp": "2025-11-14T21:40:57.607783Z", "level": "ERROR", "module": "worker", "message": "Unexpected error processing job", "job_id": "test_job_id", "exception": "Traceback (most recent call last):\n  File \"/Users/user/Desktop/Github/VideoGen/project/backend/api_gateway/worker.py\", line 47, in process_job\n    if await redis_client.get(cancel_key):\nTypeError: object MagicMock can't be used in 'await' expression"}
{"timestamp": "2025-11-14T21:40:57.608719Z", "level": "ERROR", "module": "worker", "message": "Invalid job data", "job_data": "{'job_id': None, 'user_id': 'test_user_id'}"}
{"timestamp": "2025-11-14T21:40:57.615585Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "5afac32a-fc00-44af-b30d-1aef30ea072c", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:40:57.617541Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "b8bb58ac-8e9d-42c2-beda-5e7b256eb037", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:40:57.619941Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "95af346c-b584-4608-a359-9231d6a2e16f", "method": "GET", "path": "/api/v1/jobs/invalid-job-id"}
{"timestamp": "2025-11-14T21:40:57.621785Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "cbc08c41-3c69-4d9c-8ee6-50d9b6263d06", "method": "GET", "path": "/api/v1/jobs"}
{"timestamp": "2025-11-14T21:40:57.624225Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "a59cfc50-57aa-416b-b6d5-981d492a8ead", "method": "GET", "path": "/api/v1/jobs/invalid-job-id/stream"}
{"timestamp": "2025-11-14T21:41:29.633302Z", "level": "ERROR", "module": "worker", "message": "Invalid job data", "job_data": "{'id': 'test_job_id', 'user_id': 'test_user_id', 'audio_url': 'https://storage.supabase.co/test.mp3', 'user_prompt': 'Test prompt with at least 50 characters to pass validation'}"}
{"timestamp": "2025-11-14T21:41:29.667688Z", "level": "ERROR", "module": "worker", "message": "Invalid job data", "job_data": "{'id': 'test_job_id', 'user_id': 'test_user_id', 'audio_url': 'https://storage.supabase.co/test.mp3', 'user_prompt': 'Test prompt'}"}
{"timestamp": "2025-11-14T21:41:30.525822Z", "level": "WARNING", "module": "dependencies", "message": "JWT validation failed", "exception": "Traceback (most recent call last):\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jws.py\", line 180, in _load\n    signing_input, crypto_segment = jwt.rsplit(b\".\", 1)\nValueError: not enough values to unpack (expected 2, got 1)\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jwt.py\", line 159, in decode\n    payload = jws.verify(token, key, algorithms, verify=verify_signature)\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jws.py\", line 74, in verify\n    header, payload, signing_input, signature = _load(token)\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jws.py\", line 184, in _load\n    raise JWSError(\"Not enough segments\")\njose.exceptions.JWSError: Not enough segments\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/user/Desktop/Github/VideoGen/project/backend/api_gateway/dependencies.py\", line 60, in get_current_user\n    payload = jwt.decode(\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jwt.py\", line 161, in decode\n    raise JWTError(e)\njose.exceptions.JWTError: Not enough segments"}
{"timestamp": "2025-11-14T21:41:30.564328Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "09e016a5-6596-40f7-ad75-603894078308", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:41:30.588027Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "job_id": "test_job_id", "progress": 50, "stage": "video_generation"}
{"timestamp": "2025-11-14T21:41:30.614980Z", "level": "ERROR", "module": "orchestrator", "message": "Pipeline error handled", "job_id": "test_job_id", "error_code": "TEST_ERROR", "exception": "shared.errors.PipelineError: Test error"}
{"timestamp": "2025-11-14T21:41:30.621363Z", "level": "INFO", "module": "queue_service", "message": "Job enqueued", "job_id": "test_job_id", "user_id": "test_user_id"}
{"timestamp": "2025-11-14T21:41:30.627018Z", "level": "INFO", "module": "queue_service", "message": "Job removed from queue", "job_id": "test_job_id"}
{"timestamp": "2025-11-14T21:41:30.645740Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 1800}
{"timestamp": "2025-11-14T21:41:30.654237Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 3600}
{"timestamp": "2025-11-14T21:41:30.661015Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 1800}
{"timestamp": "2025-11-14T21:41:30.669157Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "b8df5a31-c588-44b8-8321-471c08b99a6c", "method": "GET", "path": "/"}
{"timestamp": "2025-11-14T21:41:30.671839Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "06cb8976-e9f3-46b3-8a67-7b86b245e925", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:41:30.673629Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "0a10004e-3821-4c52-ac95-d9f534405d21", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:41:30.675458Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "8ca9c26e-c75c-4d2b-a1b6-9500d8024f3f", "method": "GET", "path": "/api/v1/jobs"}
{"timestamp": "2025-11-14T21:41:30.678148Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "e7047867-4ac0-4142-9c10-c53696c35fb6", "method": "GET", "path": "/api/v1/jobs/invalid-id"}
{"timestamp": "2025-11-14T21:41:30.680097Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "d8802e4e-b832-44e3-b196-57b1f0441d21", "method": "GET", "path": "/api/v1/jobs/invalid-id/stream"}
{"timestamp": "2025-11-14T21:41:30.681801Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "686a1485-e83a-4c54-97e7-a5bfae9f6b0f", "method": "GET", "path": "/api/v1/jobs/invalid-id/download"}
{"timestamp": "2025-11-14T21:41:30.683569Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "c8390679-0bbe-451b-a9c8-61be760fe230", "method": "POST", "path": "/api/v1/jobs/invalid-id/cancel"}
{"timestamp": "2025-11-14T21:41:30.695207Z", "level": "ERROR", "module": "worker", "message": "Invalid job data", "job_data": "{'id': 'test_job_id', 'user_id': 'test_user_id', 'audio_url': 'https://storage.supabase.co/test.mp3', 'user_prompt': 'Test prompt with at least 50 characters to pass validation'}"}
{"timestamp": "2025-11-14T21:41:30.699367Z", "level": "ERROR", "module": "worker", "message": "Invalid job data", "job_data": "{'id': 'test_job_id', 'user_id': 'test_user_id', 'audio_url': 'https://storage.supabase.co/test.mp3', 'user_prompt': 'Test prompt'}"}
{"timestamp": "2025-11-14T21:41:30.707247Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "6d2f478f-5be2-4afd-912e-a1f5b8397a2a", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:41:30.709059Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "60d57fc8-eb21-40ed-90fa-78d133286009", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:41:30.712379Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "4ca87cd2-32ab-4a13-a8e0-7d6779be90ee", "method": "GET", "path": "/api/v1/jobs/invalid-job-id"}
{"timestamp": "2025-11-14T21:41:30.714161Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "6c9b81a6-b46f-48c7-9f35-d714a59f8c29", "method": "GET", "path": "/api/v1/jobs"}
{"timestamp": "2025-11-14T21:41:30.716252Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "cd398bf2-c361-4eca-baa3-6e68979ea175", "method": "GET", "path": "/api/v1/jobs/invalid-job-id/stream"}
{"timestamp": "2025-11-14T21:41:43.151493Z", "level": "WARNING", "module": "dependencies", "message": "JWT validation failed", "exception": "Traceback (most recent call last):\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jws.py\", line 180, in _load\n    signing_input, crypto_segment = jwt.rsplit(b\".\", 1)\nValueError: not enough values to unpack (expected 2, got 1)\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jwt.py\", line 159, in decode\n    payload = jws.verify(token, key, algorithms, verify=verify_signature)\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jws.py\", line 74, in verify\n    header, payload, signing_input, signature = _load(token)\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jws.py\", line 184, in _load\n    raise JWSError(\"Not enough segments\")\njose.exceptions.JWSError: Not enough segments\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/user/Desktop/Github/VideoGen/project/backend/api_gateway/dependencies.py\", line 60, in get_current_user\n    payload = jwt.decode(\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jwt.py\", line 161, in decode\n    raise JWTError(e)\njose.exceptions.JWTError: Not enough segments"}
{"timestamp": "2025-11-14T21:41:43.188964Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "8fec2f2d-9f7b-4f9f-b40b-b610d19d32d2", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:41:43.211830Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "job_id": "test_job_id", "progress": 50, "stage": "video_generation"}
{"timestamp": "2025-11-14T21:41:43.239832Z", "level": "ERROR", "module": "orchestrator", "message": "Pipeline error handled", "job_id": "test_job_id", "error_code": "TEST_ERROR", "exception": "shared.errors.PipelineError: Test error"}
{"timestamp": "2025-11-14T21:41:43.246036Z", "level": "INFO", "module": "queue_service", "message": "Job enqueued", "job_id": "test_job_id", "user_id": "test_user_id"}
{"timestamp": "2025-11-14T21:41:43.251249Z", "level": "INFO", "module": "queue_service", "message": "Job removed from queue", "job_id": "test_job_id"}
{"timestamp": "2025-11-14T21:41:43.269782Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 1800}
{"timestamp": "2025-11-14T21:41:43.277720Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 3600}
{"timestamp": "2025-11-14T21:41:43.283896Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 1800}
{"timestamp": "2025-11-14T21:41:43.291583Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "0a178feb-0353-4b59-91df-3fbbe94c7316", "method": "GET", "path": "/"}
{"timestamp": "2025-11-14T21:41:43.294652Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "3d0c17c7-9165-4638-b42a-4dd06d359c90", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:41:43.296732Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "633980a2-4256-4995-8532-2024eef33e28", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:41:43.298898Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "fb953678-c9a4-421f-9d7c-4fbdfd6508dc", "method": "GET", "path": "/api/v1/jobs"}
{"timestamp": "2025-11-14T21:41:43.301004Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "492c6c91-775b-4ea5-b954-a6028e0e2ab1", "method": "GET", "path": "/api/v1/jobs/invalid-id"}
{"timestamp": "2025-11-14T21:41:43.302885Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "30b62566-48d6-4fdf-9d39-f23cb48c785c", "method": "GET", "path": "/api/v1/jobs/invalid-id/stream"}
{"timestamp": "2025-11-14T21:41:43.304946Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "7a5dddb3-cb4b-4d0b-926c-f7e8ac77206e", "method": "GET", "path": "/api/v1/jobs/invalid-id/download"}
{"timestamp": "2025-11-14T21:41:43.306746Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "e7c768cb-5e1e-4615-ad2d-597e3dba722f", "method": "POST", "path": "/api/v1/jobs/invalid-id/cancel"}
{"timestamp": "2025-11-14T21:41:43.317853Z", "level": "ERROR", "module": "worker", "message": "Invalid job data", "job_data": "{'id': 'test_job_id', 'user_id': 'test_user_id', 'audio_url': 'https://storage.supabase.co/test.mp3', 'user_prompt': 'Test prompt with at least 50 characters to pass validation'}"}
{"timestamp": "2025-11-14T21:41:43.354240Z", "level": "ERROR", "module": "worker", "message": "Invalid job data", "job_data": "{'id': 'test_job_id', 'user_id': 'test_user_id', 'audio_url': 'https://storage.supabase.co/test.mp3', 'user_prompt': 'Test prompt'}"}
{"timestamp": "2025-11-14T21:41:43.363251Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "e8814ab3-cd21-4cbe-933d-04ffff9e931b", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:41:43.365212Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "0256a0e4-783b-4885-95f6-a5adc2431d85", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:41:43.367137Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "4701674c-0410-4929-9d30-0ffe00eb0eaa", "method": "GET", "path": "/api/v1/jobs/invalid-job-id"}
{"timestamp": "2025-11-14T21:41:43.369442Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "766f75a2-0a46-42c7-b9a2-4f162e768c0a", "method": "GET", "path": "/api/v1/jobs"}
{"timestamp": "2025-11-14T21:41:43.371864Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "3d84b2ad-da96-41b1-aca7-391bf4a54349", "method": "GET", "path": "/api/v1/jobs/invalid-job-id/stream"}
{"timestamp": "2025-11-14T21:41:44.198576Z", "level": "WARNING", "module": "dependencies", "message": "JWT validation failed", "exception": "Traceback (most recent call last):\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jws.py\", line 180, in _load\n    signing_input, crypto_segment = jwt.rsplit(b\".\", 1)\nValueError: not enough values to unpack (expected 2, got 1)\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jwt.py\", line 159, in decode\n    payload = jws.verify(token, key, algorithms, verify=verify_signature)\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jws.py\", line 74, in verify\n    header, payload, signing_input, signature = _load(token)\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jws.py\", line 184, in _load\n    raise JWSError(\"Not enough segments\")\njose.exceptions.JWSError: Not enough segments\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/user/Desktop/Github/VideoGen/project/backend/api_gateway/dependencies.py\", line 60, in get_current_user\n    payload = jwt.decode(\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jwt.py\", line 161, in decode\n    raise JWTError(e)\njose.exceptions.JWTError: Not enough segments"}
{"timestamp": "2025-11-14T21:41:44.236343Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "5601accc-d868-4118-850f-7aa9b1221684", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:41:44.259192Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "job_id": "test_job_id", "progress": 50, "stage": "video_generation"}
{"timestamp": "2025-11-14T21:41:44.285485Z", "level": "ERROR", "module": "orchestrator", "message": "Pipeline error handled", "job_id": "test_job_id", "error_code": "TEST_ERROR", "exception": "shared.errors.PipelineError: Test error"}
{"timestamp": "2025-11-14T21:41:44.291539Z", "level": "INFO", "module": "queue_service", "message": "Job enqueued", "job_id": "test_job_id", "user_id": "test_user_id"}
{"timestamp": "2025-11-14T21:41:44.296762Z", "level": "INFO", "module": "queue_service", "message": "Job removed from queue", "job_id": "test_job_id"}
{"timestamp": "2025-11-14T21:41:44.315173Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 1800}
{"timestamp": "2025-11-14T21:41:44.323247Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 3600}
{"timestamp": "2025-11-14T21:41:44.329639Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 1800}
{"timestamp": "2025-11-14T21:41:44.337804Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "f2cab5c7-332f-4a9c-bb78-9011c331eed7", "method": "GET", "path": "/"}
{"timestamp": "2025-11-14T21:41:44.340534Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "9c3222ac-fe6d-4388-9bba-10ae2a8cbb89", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:41:44.342831Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "9806a7b5-a6d0-483e-b695-9713b6d65f80", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:41:44.345269Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "0db6b025-627d-427e-bef4-471a71a23ff5", "method": "GET", "path": "/api/v1/jobs"}
{"timestamp": "2025-11-14T21:41:44.347108Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "b2829841-2eab-4867-a370-70834742b968", "method": "GET", "path": "/api/v1/jobs/invalid-id"}
{"timestamp": "2025-11-14T21:41:44.348937Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "931c284a-03b9-46aa-b12e-daf769eb48bd", "method": "GET", "path": "/api/v1/jobs/invalid-id/stream"}
{"timestamp": "2025-11-14T21:41:44.351051Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "7a91749f-b810-400e-b4f8-f83718096559", "method": "GET", "path": "/api/v1/jobs/invalid-id/download"}
{"timestamp": "2025-11-14T21:41:44.352937Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "22db97cb-dc9f-4c40-a9e4-eeb22c3e3d6f", "method": "POST", "path": "/api/v1/jobs/invalid-id/cancel"}
{"timestamp": "2025-11-14T21:41:44.363566Z", "level": "ERROR", "module": "worker", "message": "Invalid job data", "job_data": "{'id': 'test_job_id', 'user_id': 'test_user_id', 'audio_url': 'https://storage.supabase.co/test.mp3', 'user_prompt': 'Test prompt with at least 50 characters to pass validation'}"}
{"timestamp": "2025-11-14T21:41:44.367772Z", "level": "ERROR", "module": "worker", "message": "Invalid job data", "job_data": "{'id': 'test_job_id', 'user_id': 'test_user_id', 'audio_url': 'https://storage.supabase.co/test.mp3', 'user_prompt': 'Test prompt'}"}
{"timestamp": "2025-11-14T21:41:44.375800Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "a0957257-ec35-42c9-af03-7d77b98fd0d6", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:41:44.378301Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "feb5e81d-200a-4d0d-b067-dc8685950443", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:41:44.380660Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "b669bdb3-86a7-4b73-b0de-0c6de7b72ab3", "method": "GET", "path": "/api/v1/jobs/invalid-job-id"}
{"timestamp": "2025-11-14T21:41:44.382471Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "f7c40c54-199f-466c-9328-2ddc99e18c2f", "method": "GET", "path": "/api/v1/jobs"}
{"timestamp": "2025-11-14T21:41:44.385111Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "124c0e71-539b-4de3-9307-fa42843f5d73", "method": "GET", "path": "/api/v1/jobs/invalid-job-id/stream"}
{"timestamp": "2025-11-14T21:42:04.556000Z", "level": "INFO", "module": "worker", "message": "Processing job", "job_id": "test_job_id", "user_id": "test_user_id"}
{"timestamp": "2025-11-14T21:42:04.556318Z", "level": "INFO", "module": "worker", "message": "Job processed successfully", "job_id": "test_job_id"}
{"timestamp": "2025-11-14T21:42:06.864136Z", "level": "INFO", "module": "worker", "message": "Processing job", "job_id": "test_job_id", "user_id": "test_user_id"}
{"timestamp": "2025-11-14T21:42:06.864437Z", "level": "INFO", "module": "worker", "message": "Job processed successfully", "job_id": "test_job_id"}
{"timestamp": "2025-11-14T21:42:06.934568Z", "level": "INFO", "module": "worker", "message": "Processing job", "job_id": "test_job_id", "user_id": "test_user_id"}
{"timestamp": "2025-11-14T21:42:06.934661Z", "level": "INFO", "module": "worker", "message": "Job cancelled before processing", "job_id": "test_job_id"}
{"timestamp": "2025-11-14T21:42:07.807997Z", "level": "WARNING", "module": "dependencies", "message": "JWT validation failed", "exception": "Traceback (most recent call last):\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jws.py\", line 180, in _load\n    signing_input, crypto_segment = jwt.rsplit(b\".\", 1)\nValueError: not enough values to unpack (expected 2, got 1)\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jwt.py\", line 159, in decode\n    payload = jws.verify(token, key, algorithms, verify=verify_signature)\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jws.py\", line 74, in verify\n    header, payload, signing_input, signature = _load(token)\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jws.py\", line 184, in _load\n    raise JWSError(\"Not enough segments\")\njose.exceptions.JWSError: Not enough segments\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/user/Desktop/Github/VideoGen/project/backend/api_gateway/dependencies.py\", line 60, in get_current_user\n    payload = jwt.decode(\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jwt.py\", line 161, in decode\n    raise JWTError(e)\njose.exceptions.JWTError: Not enough segments"}
{"timestamp": "2025-11-14T21:42:07.847763Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "7c554284-1cf2-48ba-ba11-c2940d972daf", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:42:07.871978Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "job_id": "test_job_id", "progress": 50, "stage": "video_generation"}
{"timestamp": "2025-11-14T21:42:07.902807Z", "level": "ERROR", "module": "orchestrator", "message": "Pipeline error handled", "job_id": "test_job_id", "error_code": "TEST_ERROR", "exception": "shared.errors.PipelineError: Test error"}
{"timestamp": "2025-11-14T21:42:07.909888Z", "level": "INFO", "module": "queue_service", "message": "Job enqueued", "job_id": "test_job_id", "user_id": "test_user_id"}
{"timestamp": "2025-11-14T21:42:07.915724Z", "level": "INFO", "module": "queue_service", "message": "Job removed from queue", "job_id": "test_job_id"}
{"timestamp": "2025-11-14T21:42:07.935708Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 1800}
{"timestamp": "2025-11-14T21:42:07.945083Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 3600}
{"timestamp": "2025-11-14T21:42:07.952537Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 1800}
{"timestamp": "2025-11-14T21:42:07.961283Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "a9833e92-24a1-401f-aa44-245cb13f3fff", "method": "GET", "path": "/"}
{"timestamp": "2025-11-14T21:42:07.964142Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "0e241f51-53fc-4a34-a960-cef8c7f74a99", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:42:07.966324Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "6e63bae7-68c9-4cd6-b81d-5be21bf4e17d", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:42:07.969523Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "0c291dc4-4dc5-4ee0-870d-62a5891ebeca", "method": "GET", "path": "/api/v1/jobs"}
{"timestamp": "2025-11-14T21:42:07.972031Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "d29f4b42-39ac-4f5e-a2b2-4bfc54e283c8", "method": "GET", "path": "/api/v1/jobs/invalid-id"}
{"timestamp": "2025-11-14T21:42:07.974413Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "c8ddf385-9f70-4a79-b55c-f82e704c6941", "method": "GET", "path": "/api/v1/jobs/invalid-id/stream"}
{"timestamp": "2025-11-14T21:42:07.977229Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "08196bd0-8f0b-42f1-b9bb-8156b60b3df5", "method": "GET", "path": "/api/v1/jobs/invalid-id/download"}
{"timestamp": "2025-11-14T21:42:07.979435Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "05d79307-9f27-4d3b-ad79-eeabf05a1625", "method": "POST", "path": "/api/v1/jobs/invalid-id/cancel"}
{"timestamp": "2025-11-14T21:42:07.991539Z", "level": "INFO", "module": "worker", "message": "Processing job", "job_id": "test_job_id", "user_id": "test_user_id"}
{"timestamp": "2025-11-14T21:42:07.991854Z", "level": "INFO", "module": "worker", "message": "Job processed successfully", "job_id": "test_job_id"}
{"timestamp": "2025-11-14T21:42:07.997401Z", "level": "INFO", "module": "worker", "message": "Processing job", "job_id": "test_job_id", "user_id": "test_user_id"}
{"timestamp": "2025-11-14T21:42:07.997484Z", "level": "INFO", "module": "worker", "message": "Job cancelled before processing", "job_id": "test_job_id"}
{"timestamp": "2025-11-14T21:42:08.006623Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "bf38fb5b-186d-4a71-9d10-5ad7bf49ecce", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:42:08.008862Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "9f96319d-9818-4fda-9edb-bc2d1519582a", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:42:08.011890Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "de15221e-b7bc-4551-9506-cf1960a35e75", "method": "GET", "path": "/api/v1/jobs/invalid-job-id"}
{"timestamp": "2025-11-14T21:42:08.013885Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "d6ca056f-e03d-455f-95d3-8dbdd84c4b94", "method": "GET", "path": "/api/v1/jobs"}
{"timestamp": "2025-11-14T21:42:08.016684Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "3ea7b068-23af-4d39-bb28-b6a38106ecd3", "method": "GET", "path": "/api/v1/jobs/invalid-job-id/stream"}
{"timestamp": "2025-11-14T21:42:13.020560Z", "level": "WARNING", "module": "dependencies", "message": "JWT validation failed", "exception": "Traceback (most recent call last):\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jws.py\", line 180, in _load\n    signing_input, crypto_segment = jwt.rsplit(b\".\", 1)\nValueError: not enough values to unpack (expected 2, got 1)\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jwt.py\", line 159, in decode\n    payload = jws.verify(token, key, algorithms, verify=verify_signature)\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jws.py\", line 74, in verify\n    header, payload, signing_input, signature = _load(token)\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jws.py\", line 184, in _load\n    raise JWSError(\"Not enough segments\")\njose.exceptions.JWSError: Not enough segments\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/user/Desktop/Github/VideoGen/project/backend/api_gateway/dependencies.py\", line 60, in get_current_user\n    payload = jwt.decode(\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jwt.py\", line 161, in decode\n    raise JWTError(e)\njose.exceptions.JWTError: Not enough segments"}
{"timestamp": "2025-11-14T21:42:13.061697Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "fdfb576d-a98d-4220-86ef-8bdd2bfde936", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:42:13.104725Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "job_id": "test_job_id", "progress": 50, "stage": "video_generation"}
{"timestamp": "2025-11-14T21:42:13.113782Z", "level": "ERROR", "module": "orchestrator", "message": "Pipeline error handled", "job_id": "test_job_id", "error_code": "TEST_ERROR", "exception": "shared.errors.PipelineError: Test error"}
{"timestamp": "2025-11-14T21:42:13.119782Z", "level": "INFO", "module": "queue_service", "message": "Job enqueued", "job_id": "test_job_id", "user_id": "test_user_id"}
{"timestamp": "2025-11-14T21:42:13.125592Z", "level": "INFO", "module": "queue_service", "message": "Job removed from queue", "job_id": "test_job_id"}
{"timestamp": "2025-11-14T21:42:13.144961Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 1800}
{"timestamp": "2025-11-14T21:42:13.152745Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 3600}
{"timestamp": "2025-11-14T21:42:13.159665Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 1800}
{"timestamp": "2025-11-14T21:42:13.168457Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "8b673248-bd24-4706-9d7e-6778fb6b2716", "method": "GET", "path": "/"}
{"timestamp": "2025-11-14T21:42:13.170826Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "e00e8567-0865-4e78-8935-06a801b5a260", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:42:13.172891Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "fa9218c9-7269-4e7b-9225-6680890ea87d", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:42:13.174774Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "cd402ed3-ee98-4417-8ca7-d097ba5606c8", "method": "GET", "path": "/api/v1/jobs"}
{"timestamp": "2025-11-14T21:42:13.177560Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "1846fc77-4b9c-44bb-afdf-41498cd41d0e", "method": "GET", "path": "/api/v1/jobs/invalid-id"}
{"timestamp": "2025-11-14T21:42:13.179485Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "68ed1520-f8bc-4ac9-a8ed-96617c226e4c", "method": "GET", "path": "/api/v1/jobs/invalid-id/stream"}
{"timestamp": "2025-11-14T21:42:13.181433Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "458ce305-96fd-4bda-bd97-94c93b8726f5", "method": "GET", "path": "/api/v1/jobs/invalid-id/download"}
{"timestamp": "2025-11-14T21:42:13.183480Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "d516390b-afeb-4b0b-b111-cee82dcb078a", "method": "POST", "path": "/api/v1/jobs/invalid-id/cancel"}
{"timestamp": "2025-11-14T21:42:13.195485Z", "level": "INFO", "module": "worker", "message": "Processing job", "job_id": "test_job_id", "user_id": "test_user_id"}
{"timestamp": "2025-11-14T21:42:13.195792Z", "level": "INFO", "module": "worker", "message": "Job processed successfully", "job_id": "test_job_id"}
{"timestamp": "2025-11-14T21:42:13.200044Z", "level": "INFO", "module": "worker", "message": "Processing job", "job_id": "test_job_id", "user_id": "test_user_id"}
{"timestamp": "2025-11-14T21:42:13.200119Z", "level": "INFO", "module": "worker", "message": "Job cancelled before processing", "job_id": "test_job_id"}
{"timestamp": "2025-11-14T21:42:13.203747Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "41dd4cb1-288c-4c27-9576-dca4fc8abda5", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:42:13.205582Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "36c2280e-dd44-404d-a6e2-e6b3662c227d", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:42:13.207316Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "b6fa5942-2589-47dc-9d0d-c88e2f6a70aa", "method": "GET", "path": "/api/v1/jobs/invalid-job-id"}
{"timestamp": "2025-11-14T21:42:13.209633Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "c12883cb-f4bc-40a3-85a1-0a01e6d5e0de", "method": "GET", "path": "/api/v1/jobs"}
{"timestamp": "2025-11-14T21:42:13.212287Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "d13ac83f-9549-4db5-87b2-e7f64ab16580", "method": "GET", "path": "/api/v1/jobs/invalid-job-id/stream"}
{"timestamp": "2025-11-14T21:42:17.374075Z", "level": "INFO", "module": "worker", "message": "Processing job", "job_id": "test_job_id", "user_id": "test_user_id"}
{"timestamp": "2025-11-14T21:42:17.374402Z", "level": "INFO", "module": "worker", "message": "Job processed successfully", "job_id": "test_job_id"}
{"timestamp": "2025-11-14T21:42:17.405564Z", "level": "INFO", "module": "worker", "message": "Processing job", "job_id": "test_job_id", "user_id": "test_user_id"}
{"timestamp": "2025-11-14T21:42:17.405685Z", "level": "INFO", "module": "worker", "message": "Job cancelled before processing", "job_id": "test_job_id"}
{"timestamp": "2025-11-14T21:42:18.293410Z", "level": "WARNING", "module": "dependencies", "message": "JWT validation failed", "exception": "Traceback (most recent call last):\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jws.py\", line 180, in _load\n    signing_input, crypto_segment = jwt.rsplit(b\".\", 1)\nValueError: not enough values to unpack (expected 2, got 1)\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jwt.py\", line 159, in decode\n    payload = jws.verify(token, key, algorithms, verify=verify_signature)\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jws.py\", line 74, in verify\n    header, payload, signing_input, signature = _load(token)\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jws.py\", line 184, in _load\n    raise JWSError(\"Not enough segments\")\njose.exceptions.JWSError: Not enough segments\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/user/Desktop/Github/VideoGen/project/backend/api_gateway/dependencies.py\", line 60, in get_current_user\n    payload = jwt.decode(\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jwt.py\", line 161, in decode\n    raise JWTError(e)\njose.exceptions.JWTError: Not enough segments"}
{"timestamp": "2025-11-14T21:42:18.333023Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "f1f9058e-7647-4f09-80d8-519419620875", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:42:18.357071Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "job_id": "test_job_id", "progress": 50, "stage": "video_generation"}
{"timestamp": "2025-11-14T21:42:18.385292Z", "level": "ERROR", "module": "orchestrator", "message": "Pipeline error handled", "job_id": "test_job_id", "error_code": "TEST_ERROR", "exception": "shared.errors.PipelineError: Test error"}
{"timestamp": "2025-11-14T21:42:18.391638Z", "level": "INFO", "module": "queue_service", "message": "Job enqueued", "job_id": "test_job_id", "user_id": "test_user_id"}
{"timestamp": "2025-11-14T21:42:18.397288Z", "level": "INFO", "module": "queue_service", "message": "Job removed from queue", "job_id": "test_job_id"}
{"timestamp": "2025-11-14T21:42:18.415305Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 1800}
{"timestamp": "2025-11-14T21:42:18.423360Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 3600}
{"timestamp": "2025-11-14T21:42:18.429831Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 1800}
{"timestamp": "2025-11-14T21:42:18.438156Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "a8309117-2623-4963-89a4-eadf188404ab", "method": "GET", "path": "/"}
{"timestamp": "2025-11-14T21:42:18.440829Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "a485d6b8-eaf8-4930-afc1-236b9ac2e2b9", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:42:18.443201Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "c768ed8f-527f-4fb7-a811-566782bc5fca", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:42:18.445479Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "64729b23-c457-44a9-aae4-7cd2d5fab1ae", "method": "GET", "path": "/api/v1/jobs"}
{"timestamp": "2025-11-14T21:42:18.447614Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "919fd346-5e75-412c-921f-b24705cebf82", "method": "GET", "path": "/api/v1/jobs/invalid-id"}
{"timestamp": "2025-11-14T21:42:18.449520Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "9e165e59-d823-4672-97df-244cbe34dcbf", "method": "GET", "path": "/api/v1/jobs/invalid-id/stream"}
{"timestamp": "2025-11-14T21:42:18.451704Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "627fcd19-1ceb-41bd-8111-7c72f91be126", "method": "GET", "path": "/api/v1/jobs/invalid-id/download"}
{"timestamp": "2025-11-14T21:42:18.453728Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "ab4d9b20-5a23-4cf8-a9c7-547ddfb84025", "method": "POST", "path": "/api/v1/jobs/invalid-id/cancel"}
{"timestamp": "2025-11-14T21:42:18.465321Z", "level": "INFO", "module": "worker", "message": "Processing job", "job_id": "test_job_id", "user_id": "test_user_id"}
{"timestamp": "2025-11-14T21:42:18.465605Z", "level": "INFO", "module": "worker", "message": "Job processed successfully", "job_id": "test_job_id"}
{"timestamp": "2025-11-14T21:42:18.470187Z", "level": "INFO", "module": "worker", "message": "Processing job", "job_id": "test_job_id", "user_id": "test_user_id"}
{"timestamp": "2025-11-14T21:42:18.470263Z", "level": "INFO", "module": "worker", "message": "Job cancelled before processing", "job_id": "test_job_id"}
{"timestamp": "2025-11-14T21:42:18.477755Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "f999b643-21bc-406c-b16c-4f87fd407265", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:42:18.479900Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "40959ab2-4a8f-4d4b-9ed1-695044b02f5f", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:42:18.482903Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "b1a8ba0d-c0c1-4dd8-a2ab-7a6c496fd4d1", "method": "GET", "path": "/api/v1/jobs/invalid-job-id"}
{"timestamp": "2025-11-14T21:42:18.484951Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "6ec471a9-68bd-4e08-8846-5e368a77145f", "method": "GET", "path": "/api/v1/jobs"}
{"timestamp": "2025-11-14T21:42:18.487530Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "ce1a781d-31d4-4900-93c2-dd9a5541ab0e", "method": "GET", "path": "/api/v1/jobs/invalid-job-id/stream"}
{"timestamp": "2025-11-14T21:42:24.811439Z", "level": "INFO", "module": "worker", "message": "Processing job", "job_id": "test_job_id", "user_id": "test_user_id"}
{"timestamp": "2025-11-14T21:42:24.811744Z", "level": "INFO", "module": "worker", "message": "Job processed successfully", "job_id": "test_job_id"}
{"timestamp": "2025-11-14T21:42:25.665008Z", "level": "WARNING", "module": "dependencies", "message": "JWT validation failed", "exception": "Traceback (most recent call last):\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jws.py\", line 180, in _load\n    signing_input, crypto_segment = jwt.rsplit(b\".\", 1)\nValueError: not enough values to unpack (expected 2, got 1)\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jwt.py\", line 159, in decode\n    payload = jws.verify(token, key, algorithms, verify=verify_signature)\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jws.py\", line 74, in verify\n    header, payload, signing_input, signature = _load(token)\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jws.py\", line 184, in _load\n    raise JWSError(\"Not enough segments\")\njose.exceptions.JWSError: Not enough segments\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/user/Desktop/Github/VideoGen/project/backend/api_gateway/dependencies.py\", line 60, in get_current_user\n    payload = jwt.decode(\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jwt.py\", line 161, in decode\n    raise JWTError(e)\njose.exceptions.JWTError: Not enough segments"}
{"timestamp": "2025-11-14T21:42:25.703678Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "dbacdf72-63ed-48e1-91b7-ecf4431efe87", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:42:25.727120Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "job_id": "test_job_id", "progress": 50, "stage": "video_generation"}
{"timestamp": "2025-11-14T21:42:25.753787Z", "level": "ERROR", "module": "orchestrator", "message": "Pipeline error handled", "job_id": "test_job_id", "error_code": "TEST_ERROR", "exception": "shared.errors.PipelineError: Test error"}
{"timestamp": "2025-11-14T21:42:25.759968Z", "level": "INFO", "module": "queue_service", "message": "Job enqueued", "job_id": "test_job_id", "user_id": "test_user_id"}
{"timestamp": "2025-11-14T21:42:25.765041Z", "level": "INFO", "module": "queue_service", "message": "Job removed from queue", "job_id": "test_job_id"}
{"timestamp": "2025-11-14T21:42:25.783422Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 1800}
{"timestamp": "2025-11-14T21:42:25.792228Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 3600}
{"timestamp": "2025-11-14T21:42:25.798577Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 1800}
{"timestamp": "2025-11-14T21:42:25.806779Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "31f9dd7c-bebf-4545-94f3-4079ac3c641f", "method": "GET", "path": "/"}
{"timestamp": "2025-11-14T21:42:25.810067Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "48f5bfe8-ff59-4e29-9a6a-e54290c92910", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:42:25.812418Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "30352999-e270-4c7e-b3be-72bc4b9038a8", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:42:25.814443Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "f9cfa5c5-7c32-49f8-9053-5988856e4bfe", "method": "GET", "path": "/api/v1/jobs"}
{"timestamp": "2025-11-14T21:42:25.816426Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "a16de2ee-1571-4d5d-9d5f-d06f7ca981e4", "method": "GET", "path": "/api/v1/jobs/invalid-id"}
{"timestamp": "2025-11-14T21:42:25.818924Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "908bdd43-fc81-49db-ab3b-ff297749c975", "method": "GET", "path": "/api/v1/jobs/invalid-id/stream"}
{"timestamp": "2025-11-14T21:42:25.820965Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "80bc8b85-d6c4-4339-b383-c940f53e025e", "method": "GET", "path": "/api/v1/jobs/invalid-id/download"}
{"timestamp": "2025-11-14T21:42:25.822987Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "2e88b7e5-2a25-45f8-baf3-6e409186afd6", "method": "POST", "path": "/api/v1/jobs/invalid-id/cancel"}
{"timestamp": "2025-11-14T21:42:25.836208Z", "level": "INFO", "module": "worker", "message": "Processing job", "job_id": "test_job_id", "user_id": "test_user_id"}
{"timestamp": "2025-11-14T21:42:25.836525Z", "level": "INFO", "module": "worker", "message": "Job processed successfully", "job_id": "test_job_id"}
{"timestamp": "2025-11-14T21:42:25.841401Z", "level": "INFO", "module": "worker", "message": "Processing job", "job_id": "test_job_id", "user_id": "test_user_id"}
{"timestamp": "2025-11-14T21:42:25.841485Z", "level": "INFO", "module": "worker", "message": "Job cancelled before processing", "job_id": "test_job_id"}
{"timestamp": "2025-11-14T21:42:25.849724Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "9a861b3e-df3b-4faf-bace-ebf03e5f3811", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:42:25.852408Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "c679db56-8dfb-477f-bee3-dd33856b9186", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:42:25.855467Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "b88aee4c-d396-4dd9-bf2d-ea8f641dadde", "method": "GET", "path": "/api/v1/jobs/invalid-job-id"}
{"timestamp": "2025-11-14T21:42:25.857896Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "25e66e27-a256-49a4-808a-3ae15bf6abbb", "method": "GET", "path": "/api/v1/jobs"}
{"timestamp": "2025-11-14T21:42:25.860771Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "94ac2b5e-3226-4c0d-9f7b-8299247231c7", "method": "GET", "path": "/api/v1/jobs/invalid-job-id/stream"}
{"timestamp": "2025-11-14T21:42:34.677850Z", "level": "INFO", "module": "worker", "message": "Processing job", "job_id": "test_job_id", "user_id": "test_user_id"}
{"timestamp": "2025-11-14T21:42:34.678195Z", "level": "INFO", "module": "worker", "message": "Job processed successfully", "job_id": "test_job_id"}
{"timestamp": "2025-11-14T21:42:34.682370Z", "level": "INFO", "module": "worker", "message": "Processing job", "job_id": "test_job_id", "user_id": "test_user_id"}
{"timestamp": "2025-11-14T21:42:34.682440Z", "level": "INFO", "module": "worker", "message": "Job cancelled before processing", "job_id": "test_job_id"}
{"timestamp": "2025-11-14T21:42:35.644762Z", "level": "WARNING", "module": "dependencies", "message": "JWT validation failed", "exception": "Traceback (most recent call last):\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jws.py\", line 180, in _load\n    signing_input, crypto_segment = jwt.rsplit(b\".\", 1)\nValueError: not enough values to unpack (expected 2, got 1)\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jwt.py\", line 159, in decode\n    payload = jws.verify(token, key, algorithms, verify=verify_signature)\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jws.py\", line 74, in verify\n    header, payload, signing_input, signature = _load(token)\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jws.py\", line 184, in _load\n    raise JWSError(\"Not enough segments\")\njose.exceptions.JWSError: Not enough segments\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/user/Desktop/Github/VideoGen/project/backend/api_gateway/dependencies.py\", line 60, in get_current_user\n    payload = jwt.decode(\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jwt.py\", line 161, in decode\n    raise JWTError(e)\njose.exceptions.JWTError: Not enough segments"}
{"timestamp": "2025-11-14T21:42:35.685038Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "e262e805-281b-45b3-8570-cd58d4b9cd7c", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:42:35.709774Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "job_id": "test_job_id", "progress": 50, "stage": "video_generation"}
{"timestamp": "2025-11-14T21:42:35.738095Z", "level": "ERROR", "module": "orchestrator", "message": "Pipeline error handled", "job_id": "test_job_id", "error_code": "TEST_ERROR", "exception": "shared.errors.PipelineError: Test error"}
{"timestamp": "2025-11-14T21:42:35.744277Z", "level": "INFO", "module": "queue_service", "message": "Job enqueued", "job_id": "test_job_id", "user_id": "test_user_id"}
{"timestamp": "2025-11-14T21:42:35.749337Z", "level": "INFO", "module": "queue_service", "message": "Job removed from queue", "job_id": "test_job_id"}
{"timestamp": "2025-11-14T21:42:35.768148Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 1800}
{"timestamp": "2025-11-14T21:42:35.776460Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 3600}
{"timestamp": "2025-11-14T21:42:35.782863Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 1800}
{"timestamp": "2025-11-14T21:42:35.790701Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "5b2cfdab-0fb4-457b-bb71-23209925a5d2", "method": "GET", "path": "/"}
{"timestamp": "2025-11-14T21:42:35.793664Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "219aacf8-e874-4ef3-b0e1-f29204c9478d", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:42:35.795726Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "492a1f54-dd94-4f2c-9333-6d57d9813009", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:42:35.797861Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "eb9cc261-ef8b-4658-a15d-4be432278355", "method": "GET", "path": "/api/v1/jobs"}
{"timestamp": "2025-11-14T21:42:35.799844Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "69766094-d59f-4e8f-83c7-88736b2aa18a", "method": "GET", "path": "/api/v1/jobs/invalid-id"}
{"timestamp": "2025-11-14T21:42:35.801999Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "f5db7357-9a05-44de-93ca-4ecaa3396670", "method": "GET", "path": "/api/v1/jobs/invalid-id/stream"}
{"timestamp": "2025-11-14T21:42:35.803854Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "45238ac2-2e29-4624-87a1-ab5c1c06b851", "method": "GET", "path": "/api/v1/jobs/invalid-id/download"}
{"timestamp": "2025-11-14T21:42:35.805895Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "ca6dcd6a-b1e0-43c6-8a24-4a7868ad3da8", "method": "POST", "path": "/api/v1/jobs/invalid-id/cancel"}
{"timestamp": "2025-11-14T21:42:35.816924Z", "level": "INFO", "module": "worker", "message": "Processing job", "job_id": "test_job_id", "user_id": "test_user_id"}
{"timestamp": "2025-11-14T21:42:35.817219Z", "level": "INFO", "module": "worker", "message": "Job processed successfully", "job_id": "test_job_id"}
{"timestamp": "2025-11-14T21:42:35.820837Z", "level": "INFO", "module": "worker", "message": "Processing job", "job_id": "test_job_id", "user_id": "test_user_id"}
{"timestamp": "2025-11-14T21:42:35.820917Z", "level": "INFO", "module": "worker", "message": "Job cancelled before processing", "job_id": "test_job_id"}
{"timestamp": "2025-11-14T21:42:35.829024Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "9be881c6-e60a-41bf-8d21-b2a95bb7d4c8", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:42:35.831149Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "0193d34b-3589-45af-b7c4-ff4e4fc8c6a6", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:42:35.833765Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "096bad82-a1ac-4071-8b0a-975b53ec47d3", "method": "GET", "path": "/api/v1/jobs/invalid-job-id"}
{"timestamp": "2025-11-14T21:42:35.836116Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "f6b38904-4ffb-48d5-aa5f-846639c0ad13", "method": "GET", "path": "/api/v1/jobs"}
{"timestamp": "2025-11-14T21:42:35.838546Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "84e66c1e-8e32-4880-9f61-992e0ff5cd78", "method": "GET", "path": "/api/v1/jobs/invalid-job-id/stream"}
{"timestamp": "2025-11-14T21:42:44.795944Z", "level": "INFO", "module": "worker", "message": "Processing job", "job_id": "test_job_id", "user_id": "test_user_id"}
{"timestamp": "2025-11-14T21:42:44.796250Z", "level": "INFO", "module": "worker", "message": "Job processed successfully", "job_id": "test_job_id"}
{"timestamp": "2025-11-14T21:42:44.800515Z", "level": "INFO", "module": "worker", "message": "Processing job", "job_id": "test_job_id", "user_id": "test_user_id"}
{"timestamp": "2025-11-14T21:42:44.800613Z", "level": "INFO", "module": "worker", "message": "Job cancelled before processing", "job_id": "test_job_id"}
{"timestamp": "2025-11-14T21:42:45.860380Z", "level": "WARNING", "module": "dependencies", "message": "JWT validation failed", "exception": "Traceback (most recent call last):\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jws.py\", line 180, in _load\n    signing_input, crypto_segment = jwt.rsplit(b\".\", 1)\nValueError: not enough values to unpack (expected 2, got 1)\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jwt.py\", line 159, in decode\n    payload = jws.verify(token, key, algorithms, verify=verify_signature)\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jws.py\", line 74, in verify\n    header, payload, signing_input, signature = _load(token)\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jws.py\", line 184, in _load\n    raise JWSError(\"Not enough segments\")\njose.exceptions.JWSError: Not enough segments\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/user/Desktop/Github/VideoGen/project/backend/api_gateway/dependencies.py\", line 60, in get_current_user\n    payload = jwt.decode(\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jwt.py\", line 161, in decode\n    raise JWTError(e)\njose.exceptions.JWTError: Not enough segments"}
{"timestamp": "2025-11-14T21:42:45.897466Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "5cb5f32a-6f44-42b1-8f2f-8cf431bc9bac", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:42:45.920339Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "job_id": "test_job_id", "progress": 50, "stage": "video_generation"}
{"timestamp": "2025-11-14T21:42:45.945830Z", "level": "ERROR", "module": "orchestrator", "message": "Pipeline error handled", "job_id": "test_job_id", "error_code": "TEST_ERROR", "exception": "shared.errors.PipelineError: Test error"}
{"timestamp": "2025-11-14T21:42:45.951826Z", "level": "INFO", "module": "queue_service", "message": "Job enqueued", "job_id": "test_job_id", "user_id": "test_user_id"}
{"timestamp": "2025-11-14T21:42:45.957107Z", "level": "INFO", "module": "queue_service", "message": "Job removed from queue", "job_id": "test_job_id"}
{"timestamp": "2025-11-14T21:42:45.974482Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 1800}
{"timestamp": "2025-11-14T21:42:45.982523Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 3600}
{"timestamp": "2025-11-14T21:42:45.988923Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 1800}
{"timestamp": "2025-11-14T21:42:45.996798Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "3d868eab-589b-4658-978b-06da1353a451", "method": "GET", "path": "/"}
{"timestamp": "2025-11-14T21:42:45.999502Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "a4500ce9-a481-4783-b032-5638775f0eb2", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:42:46.001691Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "f91fb712-b17b-475c-91e5-6dc99c0c2091", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:42:46.003666Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "7d30ba72-7d17-472b-9743-44c6a900f0f5", "method": "GET", "path": "/api/v1/jobs"}
{"timestamp": "2025-11-14T21:42:46.005557Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "a1dfebf0-ff02-4105-b4c2-21206bfeb5f1", "method": "GET", "path": "/api/v1/jobs/invalid-id"}
{"timestamp": "2025-11-14T21:42:46.007468Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "f4e01290-fa54-4070-9b83-49a7f3564218", "method": "GET", "path": "/api/v1/jobs/invalid-id/stream"}
{"timestamp": "2025-11-14T21:42:46.009654Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "9aeac954-dce4-4595-9e20-8b98eaf22ae4", "method": "GET", "path": "/api/v1/jobs/invalid-id/download"}
{"timestamp": "2025-11-14T21:42:46.011583Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "fbdc5821-a50c-4eea-88e3-0b7cf5fd8fb7", "method": "POST", "path": "/api/v1/jobs/invalid-id/cancel"}
{"timestamp": "2025-11-14T21:42:46.022062Z", "level": "INFO", "module": "worker", "message": "Processing job", "job_id": "test_job_id", "user_id": "test_user_id"}
{"timestamp": "2025-11-14T21:42:46.022355Z", "level": "INFO", "module": "worker", "message": "Job processed successfully", "job_id": "test_job_id"}
{"timestamp": "2025-11-14T21:42:46.025972Z", "level": "INFO", "module": "worker", "message": "Processing job", "job_id": "test_job_id", "user_id": "test_user_id"}
{"timestamp": "2025-11-14T21:42:46.026050Z", "level": "INFO", "module": "worker", "message": "Job cancelled before processing", "job_id": "test_job_id"}
{"timestamp": "2025-11-14T21:42:46.028649Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "53bab638-1564-4269-889c-cb1fa7902e8a", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:42:46.030486Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "6af6a4fa-5e5c-462c-9490-5b0a190569b6", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:42:46.033005Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "863254e8-5292-4540-b91d-c0a8472ca74a", "method": "GET", "path": "/api/v1/jobs/invalid-job-id"}
{"timestamp": "2025-11-14T21:42:46.035135Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "0266f123-bd2a-4d0e-85a9-3f742f3d6f7c", "method": "GET", "path": "/api/v1/jobs"}
{"timestamp": "2025-11-14T21:42:46.037472Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "93f26ecb-d5ab-43ff-83fc-2a0bb2d327cf", "method": "GET", "path": "/api/v1/jobs/invalid-job-id/stream"}
{"timestamp": "2025-11-14T21:42:55.198156Z", "level": "WARNING", "module": "dependencies", "message": "JWT validation failed", "exception": "Traceback (most recent call last):\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jws.py\", line 180, in _load\n    signing_input, crypto_segment = jwt.rsplit(b\".\", 1)\nValueError: not enough values to unpack (expected 2, got 1)\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jwt.py\", line 159, in decode\n    payload = jws.verify(token, key, algorithms, verify=verify_signature)\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jws.py\", line 74, in verify\n    header, payload, signing_input, signature = _load(token)\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jws.py\", line 184, in _load\n    raise JWSError(\"Not enough segments\")\njose.exceptions.JWSError: Not enough segments\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/user/Desktop/Github/VideoGen/project/backend/api_gateway/dependencies.py\", line 60, in get_current_user\n    payload = jwt.decode(\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jwt.py\", line 161, in decode\n    raise JWTError(e)\njose.exceptions.JWTError: Not enough segments"}
{"timestamp": "2025-11-14T21:42:55.239594Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "5097c642-83f0-496e-a138-0988398b1f6b", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:42:55.280921Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "job_id": "test_job_id", "progress": 50, "stage": "video_generation"}
{"timestamp": "2025-11-14T21:42:55.289889Z", "level": "ERROR", "module": "orchestrator", "message": "Pipeline error handled", "job_id": "test_job_id", "error_code": "TEST_ERROR", "exception": "shared.errors.PipelineError: Test error"}
{"timestamp": "2025-11-14T21:42:55.295305Z", "level": "INFO", "module": "queue_service", "message": "Job enqueued", "job_id": "test_job_id", "user_id": "test_user_id"}
{"timestamp": "2025-11-14T21:42:55.301057Z", "level": "INFO", "module": "queue_service", "message": "Job removed from queue", "job_id": "test_job_id"}
{"timestamp": "2025-11-14T21:42:55.319192Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 1800}
{"timestamp": "2025-11-14T21:42:55.326675Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 3600}
{"timestamp": "2025-11-14T21:42:55.332996Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 1800}
{"timestamp": "2025-11-14T21:42:55.340991Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "510d6850-be4c-4a22-bbdb-2069cbdc6ed9", "method": "GET", "path": "/"}
{"timestamp": "2025-11-14T21:42:55.343347Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "dc3d8302-733f-49bb-a4bc-5e2f0da46583", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:42:55.345440Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "1fa98c61-9d83-4231-8881-a4212b0b35cb", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:42:55.347374Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "3a8f0b60-31ac-4f2a-8e17-efd75bc25644", "method": "GET", "path": "/api/v1/jobs"}
{"timestamp": "2025-11-14T21:42:55.349434Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "cb8d791c-6c19-4837-bc9e-39ec0234aa91", "method": "GET", "path": "/api/v1/jobs/invalid-id"}
{"timestamp": "2025-11-14T21:42:55.351498Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "4f2a390a-49e5-49ca-b248-3c697fef4e6f", "method": "GET", "path": "/api/v1/jobs/invalid-id/stream"}
{"timestamp": "2025-11-14T21:42:55.353359Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "671af7f4-9ad6-4398-b0c9-3a6fc36227d2", "method": "GET", "path": "/api/v1/jobs/invalid-id/download"}
{"timestamp": "2025-11-14T21:42:55.355330Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "a46e21f5-3f9b-4e88-98d5-961194bd732f", "method": "POST", "path": "/api/v1/jobs/invalid-id/cancel"}
{"timestamp": "2025-11-14T21:42:55.366388Z", "level": "INFO", "module": "worker", "message": "Processing job", "job_id": "test_job_id", "user_id": "test_user_id"}
{"timestamp": "2025-11-14T21:42:55.366798Z", "level": "INFO", "module": "worker", "message": "Job processed successfully", "job_id": "test_job_id"}
{"timestamp": "2025-11-14T21:42:55.370422Z", "level": "INFO", "module": "worker", "message": "Processing job", "job_id": "test_job_id", "user_id": "test_user_id"}
{"timestamp": "2025-11-14T21:42:55.370490Z", "level": "INFO", "module": "worker", "message": "Job cancelled before processing", "job_id": "test_job_id"}
{"timestamp": "2025-11-14T21:42:55.373480Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "313e24e7-04a7-4647-90eb-34017e7b05c0", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:42:55.375654Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "bce4a435-b8fe-4b48-9037-0ba5d68f2e6e", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:42:55.377482Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "3b8c6605-a73f-4c08-ac6f-c6a2d66082ff", "method": "GET", "path": "/api/v1/jobs/invalid-job-id"}
{"timestamp": "2025-11-14T21:42:55.379330Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "0fb839e1-c1ba-4030-9059-d6b292bc2bde", "method": "GET", "path": "/api/v1/jobs"}
{"timestamp": "2025-11-14T21:42:55.381792Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "f3143997-2e00-4c37-bcd9-437b810c9744", "method": "GET", "path": "/api/v1/jobs/invalid-job-id/stream"}
{"timestamp": "2025-11-14T21:42:56.679829Z", "level": "WARNING", "module": "dependencies", "message": "JWT validation failed", "exception": "Traceback (most recent call last):\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jws.py\", line 180, in _load\n    signing_input, crypto_segment = jwt.rsplit(b\".\", 1)\nValueError: not enough values to unpack (expected 2, got 1)\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jwt.py\", line 159, in decode\n    payload = jws.verify(token, key, algorithms, verify=verify_signature)\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jws.py\", line 74, in verify\n    header, payload, signing_input, signature = _load(token)\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jws.py\", line 184, in _load\n    raise JWSError(\"Not enough segments\")\njose.exceptions.JWSError: Not enough segments\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/user/Desktop/Github/VideoGen/project/backend/api_gateway/dependencies.py\", line 60, in get_current_user\n    payload = jwt.decode(\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jwt.py\", line 161, in decode\n    raise JWTError(e)\njose.exceptions.JWTError: Not enough segments"}
{"timestamp": "2025-11-14T21:42:56.785710Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "6d197e36-b7cd-457b-b304-ff86973016b0", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:42:56.850864Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "job_id": "test_job_id", "progress": 50, "stage": "video_generation"}
{"timestamp": "2025-11-14T21:42:56.884298Z", "level": "ERROR", "module": "orchestrator", "message": "Pipeline error handled", "job_id": "test_job_id", "error_code": "TEST_ERROR", "exception": "shared.errors.PipelineError: Test error"}
{"timestamp": "2025-11-14T21:42:56.893493Z", "level": "INFO", "module": "queue_service", "message": "Job enqueued", "job_id": "test_job_id", "user_id": "test_user_id"}
{"timestamp": "2025-11-14T21:42:56.902015Z", "level": "INFO", "module": "queue_service", "message": "Job removed from queue", "job_id": "test_job_id"}
{"timestamp": "2025-11-14T21:42:56.928600Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 1800}
{"timestamp": "2025-11-14T21:42:56.940730Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 3600}
{"timestamp": "2025-11-14T21:42:56.950538Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 1800}
{"timestamp": "2025-11-14T21:42:56.962487Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "f9224787-2899-4549-b858-25c81b4c2e35", "method": "GET", "path": "/"}
{"timestamp": "2025-11-14T21:42:56.965387Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "63319e67-aadb-4f7f-8076-cfa9804fd09a", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:42:56.968831Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "59a31f01-3c51-48f0-9f06-a1f4597c31e4", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:42:56.971753Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "cbb48f89-bf2c-4ae4-bde5-9b359b13ed8a", "method": "GET", "path": "/api/v1/jobs"}
{"timestamp": "2025-11-14T21:42:56.974506Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "824e595a-0804-4ff3-a058-7df726a3efb6", "method": "GET", "path": "/api/v1/jobs/invalid-id"}
{"timestamp": "2025-11-14T21:42:56.977470Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "59dfd598-18f3-40fb-9a75-c340294afa5a", "method": "GET", "path": "/api/v1/jobs/invalid-id/stream"}
{"timestamp": "2025-11-14T21:42:56.980515Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "8b92aaed-7552-4585-b2fa-3dfdf6632dc1", "method": "GET", "path": "/api/v1/jobs/invalid-id/download"}
{"timestamp": "2025-11-14T21:42:56.983458Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "160eae64-05b3-4977-932d-317a5d93c016", "method": "POST", "path": "/api/v1/jobs/invalid-id/cancel"}
{"timestamp": "2025-11-14T21:42:56.999047Z", "level": "INFO", "module": "worker", "message": "Processing job", "job_id": "test_job_id", "user_id": "test_user_id"}
{"timestamp": "2025-11-14T21:42:56.999440Z", "level": "INFO", "module": "worker", "message": "Job processed successfully", "job_id": "test_job_id"}
{"timestamp": "2025-11-14T21:42:57.004786Z", "level": "INFO", "module": "worker", "message": "Processing job", "job_id": "test_job_id", "user_id": "test_user_id"}
{"timestamp": "2025-11-14T21:42:57.004914Z", "level": "INFO", "module": "worker", "message": "Job cancelled before processing", "job_id": "test_job_id"}
{"timestamp": "2025-11-14T21:42:57.016940Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "3debe355-5ed4-4cc8-a19f-ab6b57d0adb8", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:42:57.019638Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "2b9b5954-db63-42b1-8ee3-e0c6fe7fccf8", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:42:57.022239Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "f217d08f-ce61-4e01-b797-6a243d596669", "method": "GET", "path": "/api/v1/jobs/invalid-job-id"}
{"timestamp": "2025-11-14T21:42:57.024975Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "76aa301b-6544-488c-91e0-c8ed8dae06d8", "method": "GET", "path": "/api/v1/jobs"}
{"timestamp": "2025-11-14T21:42:57.028277Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "5868cd3f-ac5b-4fbe-972f-b33193af0e20", "method": "GET", "path": "/api/v1/jobs/invalid-job-id/stream"}
{"timestamp": "2025-11-14T21:43:27.478031Z", "level": "WARNING", "module": "dependencies", "message": "JWT validation failed", "exception": "Traceback (most recent call last):\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jws.py\", line 180, in _load\n    signing_input, crypto_segment = jwt.rsplit(b\".\", 1)\nValueError: not enough values to unpack (expected 2, got 1)\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jwt.py\", line 159, in decode\n    payload = jws.verify(token, key, algorithms, verify=verify_signature)\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jws.py\", line 74, in verify\n    header, payload, signing_input, signature = _load(token)\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jws.py\", line 184, in _load\n    raise JWSError(\"Not enough segments\")\njose.exceptions.JWSError: Not enough segments\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/user/Desktop/Github/VideoGen/project/backend/api_gateway/dependencies.py\", line 60, in get_current_user\n    payload = jwt.decode(\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jwt.py\", line 161, in decode\n    raise JWTError(e)\njose.exceptions.JWTError: Not enough segments"}
{"timestamp": "2025-11-14T21:43:27.516776Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "1a48d8a3-364f-425a-83c3-7a47b9db8ddd", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:43:27.544609Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "job_id": "test_job_id", "progress": 50, "stage": "video_generation"}
{"timestamp": "2025-11-14T21:43:27.575717Z", "level": "ERROR", "module": "orchestrator", "message": "Pipeline error handled", "job_id": "test_job_id", "error_code": "TEST_ERROR", "exception": "shared.errors.PipelineError: Test error"}
{"timestamp": "2025-11-14T21:43:27.582019Z", "level": "INFO", "module": "queue_service", "message": "Job enqueued", "job_id": "test_job_id", "user_id": "test_user_id"}
{"timestamp": "2025-11-14T21:43:27.590044Z", "level": "INFO", "module": "queue_service", "message": "Job removed from queue", "job_id": "test_job_id"}
{"timestamp": "2025-11-14T21:43:27.609801Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 1800}
{"timestamp": "2025-11-14T21:43:27.618055Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 3600}
{"timestamp": "2025-11-14T21:43:27.624576Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 1800}
{"timestamp": "2025-11-14T21:43:27.632602Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "f414ea80-cac4-4508-be0c-6cc276e00474", "method": "GET", "path": "/"}
{"timestamp": "2025-11-14T21:43:27.635623Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "d6cd4217-8361-4038-9a5c-f771fc2b06ec", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:43:27.637700Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "04c71b27-82ad-4ff0-a6a2-b8d78b5e0942", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:43:27.639838Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "b6d02786-e6de-4f55-a2ea-34f15a4557fa", "method": "GET", "path": "/api/v1/jobs"}
{"timestamp": "2025-11-14T21:43:27.642349Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "1d3c3b5e-a406-4a68-b03c-090097e1bf9d", "method": "GET", "path": "/api/v1/jobs/invalid-id"}
{"timestamp": "2025-11-14T21:43:27.644540Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "1c10f076-a605-4b76-90ec-93ec19b36b27", "method": "GET", "path": "/api/v1/jobs/invalid-id/stream"}
{"timestamp": "2025-11-14T21:43:27.646436Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "8555be79-dc2e-4aab-91d0-a4f17e30cff8", "method": "GET", "path": "/api/v1/jobs/invalid-id/download"}
{"timestamp": "2025-11-14T21:43:27.648348Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "c48af69f-17fa-41b2-a39d-d7ecc8b9f9db", "method": "POST", "path": "/api/v1/jobs/invalid-id/cancel"}
{"timestamp": "2025-11-14T21:43:27.660264Z", "level": "INFO", "module": "worker", "message": "Processing job", "job_id": "test_job_id", "user_id": "test_user_id"}
{"timestamp": "2025-11-14T21:43:27.660547Z", "level": "INFO", "module": "worker", "message": "Job processed successfully", "job_id": "test_job_id"}
{"timestamp": "2025-11-14T21:43:27.664187Z", "level": "INFO", "module": "worker", "message": "Processing job", "job_id": "test_job_id", "user_id": "test_user_id"}
{"timestamp": "2025-11-14T21:43:27.664252Z", "level": "INFO", "module": "worker", "message": "Job cancelled before processing", "job_id": "test_job_id"}
{"timestamp": "2025-11-14T21:43:27.671958Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "2965e9bc-3143-4a8f-b7cf-b8b772c399c5", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:43:27.674481Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "1d20a142-2e55-498c-bb7c-b6b9e7bac04b", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:43:27.677342Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "054e6971-1ae9-4f83-b757-b45e05910032", "method": "GET", "path": "/api/v1/jobs/invalid-job-id"}
{"timestamp": "2025-11-14T21:43:27.679264Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "4f0145f5-9132-44e5-9ced-28d2aad20bbb", "method": "GET", "path": "/api/v1/jobs"}
{"timestamp": "2025-11-14T21:43:27.681812Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "70fc4bff-bcbc-45ed-ace7-f145dedc625a", "method": "GET", "path": "/api/v1/jobs/invalid-job-id/stream"}
{"timestamp": "2025-11-14T21:44:42.148025Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "acc91c18-1837-4c85-ba7d-0b6c98bc23cb", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:44:42.157755Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "65e039e2-66fa-4b52-b32e-5f9946ec4cca", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:44:42.159928Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "c79d9024-c430-4520-b270-109145a28363", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:44:42.164238Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "502ad1c5-7102-496b-86ac-0020bfec4312", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:44:42.167141Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "f1ef7600-9440-4ce7-9bac-6f53d77ab820", "method": "GET", "path": "/api/v1/jobs/8c0513ab-a7fd-496b-ae8b-3b1778de7e65"}
{"timestamp": "2025-11-14T21:44:42.169658Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "c448dd90-3f12-4698-bea0-ae119a9d5449", "method": "GET", "path": "/api/v1/jobs"}
{"timestamp": "2025-11-14T21:44:42.172238Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "2572c22b-ee43-4215-b03f-d34fc589db7b", "method": "GET", "path": "/api/v1/jobs/df8f9224-44ec-45cc-89a3-a4a8f50fa526/stream"}
{"timestamp": "2025-11-14T21:44:42.174681Z", "level": "INFO", "module": "stream", "message": "SSE stream started", "job_id": "df8f9224-44ec-45cc-89a3-a4a8f50fa526"}
{"timestamp": "2025-11-14T21:46:13.167780Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "95cc8f90-bf88-4d9a-8bec-07099ed44d38", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:46:13.176293Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "194834bb-1217-4485-a607-871d7e5b1859", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:46:13.178367Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "b246e093-8f39-4384-b964-35eb2836e470", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:46:13.183488Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "3a5e1933-5d71-4a8b-bed7-2e8bc8ac03a8", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:46:13.186998Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "65ee39e7-439a-4896-81aa-6596f9e29bc1", "method": "GET", "path": "/api/v1/jobs/02652620-09b3-456d-8415-d18ae2a9dac6"}
{"timestamp": "2025-11-14T21:46:13.189954Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "5bcbbba9-c081-4f62-bb83-a46540db0c21", "method": "GET", "path": "/api/v1/jobs"}
{"timestamp": "2025-11-14T21:46:13.193356Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "eb7a3593-4c58-41cd-a5c9-08dd3c565036", "method": "GET", "path": "/api/v1/jobs/95d9c728-cda5-4984-8cc2-861601d1806d/stream"}
{"timestamp": "2025-11-14T21:46:13.195570Z", "level": "INFO", "module": "stream", "message": "SSE stream started", "job_id": "95d9c728-cda5-4984-8cc2-861601d1806d"}
{"timestamp": "2025-11-14T21:46:14.334623Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "4549a3e8-4abb-4710-a3ee-4fb9bbd87b01", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:46:14.341676Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "21022712-b824-4df8-ae2a-43828905099d", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:46:14.343504Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "81e6d51a-4bdf-45a2-b609-483101a31d5b", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:46:14.349111Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "ba407853-2c92-452c-8b38-5f93ccb32929", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:46:14.352332Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "3d218130-5f8b-431f-93fe-85ef9291c978", "method": "GET", "path": "/api/v1/jobs/a6d79d0a-6e72-4f64-a17f-2c53a1ee175f"}
{"timestamp": "2025-11-14T21:46:14.356300Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "fbdc558f-fb55-4b07-a948-5ab3b113c4e3", "method": "GET", "path": "/api/v1/jobs"}
{"timestamp": "2025-11-14T21:46:14.359357Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "756a4b72-04a4-40d9-adff-f2d5ca679d96", "method": "GET", "path": "/api/v1/jobs/f0ecb02d-944e-44f0-a12d-43df2b30f913/stream"}
{"timestamp": "2025-11-14T21:46:14.361233Z", "level": "INFO", "module": "stream", "message": "SSE stream started", "job_id": "f0ecb02d-944e-44f0-a12d-43df2b30f913"}
{"timestamp": "2025-11-14T21:47:26.163638Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "84652072-413b-4953-98ce-6fd15c9a62c2", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:47:26.175715Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "1598277e-dac6-4a28-acc1-f6d801cf476a", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:47:26.179646Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "138a325b-9e09-43f0-a4b0-57e82697ac32", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:47:26.186025Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "ba489dcc-5048-4eca-82a9-9e7e7e3be9e2", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:47:26.192103Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "7591784f-0713-4569-9ce0-a3b6538277d4", "method": "GET", "path": "/api/v1/jobs/8576cc88-b5f6-48b3-935f-09f1051c22a2"}
{"timestamp": "2025-11-14T21:47:26.195320Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "b9ee5b77-94c0-4b9c-8dfe-64761810de41", "method": "GET", "path": "/api/v1/jobs"}
{"timestamp": "2025-11-14T21:47:26.201167Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "5f573511-6469-4475-bf1a-8dbba31d7e54", "method": "GET", "path": "/api/v1/jobs/2de68a93-7ec2-46ab-be44-b6a4401e16fb/stream"}
{"timestamp": "2025-11-14T21:47:26.205266Z", "level": "INFO", "module": "stream", "message": "SSE stream started", "job_id": "2de68a93-7ec2-46ab-be44-b6a4401e16fb"}
{"timestamp": "2025-11-14T21:47:54.763626Z", "level": "WARNING", "module": "dependencies", "message": "JWT validation failed", "exception": "Traceback (most recent call last):\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jws.py\", line 180, in _load\n    signing_input, crypto_segment = jwt.rsplit(b\".\", 1)\nValueError: not enough values to unpack (expected 2, got 1)\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jwt.py\", line 159, in decode\n    payload = jws.verify(token, key, algorithms, verify=verify_signature)\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jws.py\", line 74, in verify\n    header, payload, signing_input, signature = _load(token)\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jws.py\", line 184, in _load\n    raise JWSError(\"Not enough segments\")\njose.exceptions.JWSError: Not enough segments\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/user/Desktop/Github/VideoGen/project/backend/api_gateway/dependencies.py\", line 60, in get_current_user\n    payload = jwt.decode(\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jwt.py\", line 161, in decode\n    raise JWTError(e)\njose.exceptions.JWTError: Not enough segments"}
{"timestamp": "2025-11-14T21:47:54.804030Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "84e48fcc-d974-4a13-b939-9e6b26ffe729", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:47:54.830347Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "job_id": "test_job_id", "progress": 50, "stage": "video_generation"}
{"timestamp": "2025-11-14T21:47:54.858679Z", "level": "ERROR", "module": "orchestrator", "message": "Pipeline error handled", "job_id": "test_job_id", "error_code": "TEST_ERROR", "exception": "shared.errors.PipelineError: Test error"}
{"timestamp": "2025-11-14T21:47:54.865583Z", "level": "INFO", "module": "queue_service", "message": "Job enqueued", "job_id": "test_job_id", "user_id": "test_user_id"}
{"timestamp": "2025-11-14T21:47:54.873210Z", "level": "INFO", "module": "queue_service", "message": "Job removed from queue", "job_id": "test_job_id"}
{"timestamp": "2025-11-14T21:47:54.891692Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 1800}
{"timestamp": "2025-11-14T21:47:54.900749Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 3600}
{"timestamp": "2025-11-14T21:47:54.908827Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 1800}
{"timestamp": "2025-11-14T21:47:54.917310Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "8b4a7e74-369b-4475-89ca-37f54d76751e", "method": "GET", "path": "/"}
{"timestamp": "2025-11-14T21:47:54.919437Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "b8f0c8cf-01b1-4c5f-b528-7d68982be667", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:47:54.922358Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "c15a187f-8f46-45a0-a092-213dcbdfb09e", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:47:54.924575Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "e060e323-324d-4bc3-85cd-d4807798f760", "method": "GET", "path": "/api/v1/jobs"}
{"timestamp": "2025-11-14T21:47:54.926669Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "8ec45fdb-061b-498b-bc02-c707b1068e2e", "method": "GET", "path": "/api/v1/jobs/invalid-id"}
{"timestamp": "2025-11-14T21:47:54.928780Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "274caee9-ab84-4bb6-a749-d4be797258f1", "method": "GET", "path": "/api/v1/jobs/invalid-id/stream"}
{"timestamp": "2025-11-14T21:47:54.931122Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "5c096dc4-8fda-45de-8131-66cff6fcdbd1", "method": "GET", "path": "/api/v1/jobs/invalid-id/download"}
{"timestamp": "2025-11-14T21:47:54.933110Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "1dc9712e-f43c-4a72-88a2-5b33927d7a4e", "method": "POST", "path": "/api/v1/jobs/invalid-id/cancel"}
{"timestamp": "2025-11-14T21:47:54.944462Z", "level": "INFO", "module": "worker", "message": "Processing job", "job_id": "test_job_id", "user_id": "test_user_id"}
{"timestamp": "2025-11-14T21:47:54.944753Z", "level": "INFO", "module": "worker", "message": "Job processed successfully", "job_id": "test_job_id"}
{"timestamp": "2025-11-14T21:47:54.948849Z", "level": "INFO", "module": "worker", "message": "Processing job", "job_id": "test_job_id", "user_id": "test_user_id"}
{"timestamp": "2025-11-14T21:47:54.948926Z", "level": "INFO", "module": "worker", "message": "Job cancelled before processing", "job_id": "test_job_id"}
{"timestamp": "2025-11-14T21:47:54.957568Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "313f6ad1-13e7-4726-8b03-7e028b75aab7", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:47:54.959876Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "b1e987ae-c039-46c2-aebc-5a6b8d80c9f9", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:47:54.962029Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "d79bab7a-26b4-402d-850a-f898a9592836", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:47:54.966562Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "5550b4d4-32c3-4dfd-8723-5833bab631f2", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:47:54.969584Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "a73a96f3-2a5c-4e56-b13e-0a4c2c2f7b2a", "method": "GET", "path": "/api/v1/jobs/0fdf5d7b-77d4-4282-ab7e-bb211d3e89de"}
{"timestamp": "2025-11-14T21:47:54.972717Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "556a762f-97aa-44e0-ab82-d6cb4a84349d", "method": "GET", "path": "/api/v1/jobs"}
{"timestamp": "2025-11-14T21:47:54.975784Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "6449f6da-0143-4a46-86ab-bdf9f50fe213", "method": "GET", "path": "/api/v1/jobs/c1ca382a-2e98-4d6c-9846-982028eb04b6/stream"}
{"timestamp": "2025-11-14T21:47:54.978231Z", "level": "INFO", "module": "stream", "message": "SSE stream started", "job_id": "c1ca382a-2e98-4d6c-9846-982028eb04b6"}
{"timestamp": "2025-11-14T21:48:05.894649Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "43530aeb-3af9-460b-8ab9-aeecfe19adc5", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:48:08.206994Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "e2f3a584-e158-4e29-a68f-cba7e20da1e1", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:48:08.220767Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "9842e4a1-5b90-424e-89fc-dfbcf64a17e2", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:48:08.224732Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "bc32cbec-9042-4fbe-a83b-70b604d5c622", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:48:08.237949Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "3daaeb80-1ea6-4373-a228-e0b6b105e7c3", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:48:08.245170Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "5575c492-3c3e-4c8e-9e5a-a5ae9c947394", "method": "GET", "path": "/api/v1/jobs/9f5c5215-099a-42bd-bedf-6fa0a683505b"}
{"timestamp": "2025-11-14T21:48:08.249657Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "2d798de0-0ad2-44ee-9353-65478d2e91f9", "method": "GET", "path": "/api/v1/jobs"}
{"timestamp": "2025-11-14T21:48:08.253799Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "26ad2af6-361f-405b-9f9a-5901fa5e6bc9", "method": "GET", "path": "/api/v1/jobs/26d2ed23-4d95-4ed9-8112-515ea8bd772e/stream"}
{"timestamp": "2025-11-14T21:48:08.257208Z", "level": "INFO", "module": "stream", "message": "SSE stream started", "job_id": "26d2ed23-4d95-4ed9-8112-515ea8bd772e"}
{"timestamp": "2025-11-14T21:48:24.019143Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "c8489ada-e6d2-43d0-899e-3107b18c00c5", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:48:24.038478Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "be631e0f-74fb-48d3-9417-2deb85fa25ed", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:48:24.043143Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "15094f19-5fe7-45af-ad99-d83887b103e0", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:48:24.056027Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "5721470d-1c3a-4a60-a8cf-5b6bb2675682", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:48:24.064132Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "263f75aa-863b-4957-983a-072a091f690d", "method": "GET", "path": "/api/v1/jobs/8477c736-4f36-477d-89a6-05764fd1ba6a"}
{"timestamp": "2025-11-14T21:48:24.072007Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "b7ced83e-5340-4d5d-a761-be547a519a5b", "method": "GET", "path": "/api/v1/jobs"}
{"timestamp": "2025-11-14T21:48:24.080914Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "336bb722-4913-45c6-a9f2-f351d6b889af", "method": "GET", "path": "/api/v1/jobs/6bbd4866-4abe-432d-b988-a625f68b4394/stream"}
{"timestamp": "2025-11-14T21:48:24.086159Z", "level": "INFO", "module": "stream", "message": "SSE stream started", "job_id": "6bbd4866-4abe-432d-b988-a625f68b4394"}
{"timestamp": "2025-11-14T21:48:36.572808Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "c170f011-0ab1-45e3-a223-97cc77ff5c5a", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:48:36.592534Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "99feb4ca-4eb5-40d5-8cb8-c2aaf46bc04e", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:48:36.597053Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "89bbd8b2-91ba-41f3-ad50-24fa3816c808", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:48:36.612614Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "b89d2f44-7d46-4ef0-9e9a-ab8b0b1d19e5", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:48:36.622916Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "10504ae3-7104-4f3d-ae5c-30d49392f3c5", "method": "GET", "path": "/api/v1/jobs/47b19cf7-938c-43ca-b95c-78e206a98d42"}
{"timestamp": "2025-11-14T21:48:36.631010Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "94a6ca3e-42e9-46d6-ab35-35595f46060e", "method": "GET", "path": "/api/v1/jobs"}
{"timestamp": "2025-11-14T21:48:36.641878Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "21c19b83-b3a3-403c-83f6-6c4291e7ccf6", "method": "GET", "path": "/api/v1/jobs/2a66abd0-fc71-42fd-9d31-2a76aa2f922b/stream"}
{"timestamp": "2025-11-14T21:48:36.649813Z", "level": "INFO", "module": "stream", "message": "SSE stream started", "job_id": "2a66abd0-fc71-42fd-9d31-2a76aa2f922b"}
{"timestamp": "2025-11-14T21:49:24.790338Z", "level": "WARNING", "module": "dependencies", "message": "JWT validation failed", "exception": "Traceback (most recent call last):\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jws.py\", line 180, in _load\n    signing_input, crypto_segment = jwt.rsplit(b\".\", 1)\nValueError: not enough values to unpack (expected 2, got 1)\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jwt.py\", line 159, in decode\n    payload = jws.verify(token, key, algorithms, verify=verify_signature)\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jws.py\", line 74, in verify\n    header, payload, signing_input, signature = _load(token)\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jws.py\", line 184, in _load\n    raise JWSError(\"Not enough segments\")\njose.exceptions.JWSError: Not enough segments\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/user/Desktop/Github/VideoGen/project/backend/api_gateway/dependencies.py\", line 60, in get_current_user\n    payload = jwt.decode(\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jwt.py\", line 161, in decode\n    raise JWTError(e)\njose.exceptions.JWTError: Not enough segments"}
{"timestamp": "2025-11-14T21:49:24.875862Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "d5a00926-5ba8-4a7f-b9d1-db7361c37b1c", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:49:24.923750Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "job_id": "test_job_id", "progress": 50, "stage": "video_generation"}
{"timestamp": "2025-11-14T21:49:24.993573Z", "level": "ERROR", "module": "orchestrator", "message": "Pipeline error handled", "job_id": "test_job_id", "error_code": "TEST_ERROR", "exception": "shared.errors.PipelineError: Test error"}
{"timestamp": "2025-11-14T21:49:25.006748Z", "level": "INFO", "module": "queue_service", "message": "Job enqueued", "job_id": "test_job_id", "user_id": "test_user_id"}
{"timestamp": "2025-11-14T21:49:25.019948Z", "level": "INFO", "module": "queue_service", "message": "Job removed from queue", "job_id": "test_job_id"}
{"timestamp": "2025-11-14T21:49:25.079056Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 1800}
{"timestamp": "2025-11-14T21:49:25.101308Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 3600}
{"timestamp": "2025-11-14T21:49:25.120746Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 1800}
{"timestamp": "2025-11-14T21:49:25.139056Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "9f194096-d22c-4a1c-bf8a-68364bb33f43", "method": "GET", "path": "/"}
{"timestamp": "2025-11-14T21:49:25.147185Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "bd73e041-3ba8-4a91-981a-21501c1fea5a", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:49:25.153429Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "b96bfafa-eb2c-48cf-9899-72fe9382e190", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:49:25.163726Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "1bc6cffc-2c41-4b0b-a14a-1c0e36131ab5", "method": "GET", "path": "/api/v1/jobs"}
{"timestamp": "2025-11-14T21:49:25.172237Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "1578ebce-7517-4827-9f30-7723e8e034c8", "method": "GET", "path": "/api/v1/jobs/invalid-id"}
{"timestamp": "2025-11-14T21:49:25.177254Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "3822a5ac-aed7-46cd-b700-e4f8e1fdd3e9", "method": "GET", "path": "/api/v1/jobs/invalid-id/stream"}
{"timestamp": "2025-11-14T21:49:25.182846Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "f0392cbb-917b-4236-9dc2-a9feb80ef151", "method": "GET", "path": "/api/v1/jobs/invalid-id/download"}
{"timestamp": "2025-11-14T21:49:25.187213Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "5c3104fc-2255-4a32-8549-7be27900acbf", "method": "POST", "path": "/api/v1/jobs/invalid-id/cancel"}
{"timestamp": "2025-11-14T21:49:25.207482Z", "level": "INFO", "module": "worker", "message": "Processing job", "job_id": "test_job_id", "user_id": "test_user_id"}
{"timestamp": "2025-11-14T21:49:25.208890Z", "level": "INFO", "module": "worker", "message": "Job processed successfully", "job_id": "test_job_id"}
{"timestamp": "2025-11-14T21:49:25.217057Z", "level": "INFO", "module": "worker", "message": "Processing job", "job_id": "test_job_id", "user_id": "test_user_id"}
{"timestamp": "2025-11-14T21:49:25.217308Z", "level": "INFO", "module": "worker", "message": "Job cancelled before processing", "job_id": "test_job_id"}
{"timestamp": "2025-11-14T21:49:25.237724Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "0a02028b-99ce-45d7-a2c9-57b9e9faca6b", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:49:25.242691Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "321cdcf5-0c53-47f8-8ffd-f19a2a19a289", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:49:25.249356Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "4483bb54-43aa-40db-9148-a550ea8b2d9f", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:49:25.261860Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "09145793-2b4b-4e76-9f17-d8e00198e47f", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:49:25.267597Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "5f5c8c14-cd83-46b2-94fe-e40036aba06e", "method": "GET", "path": "/api/v1/jobs/0c110651-406c-4aa7-ab89-96733bb8e276"}
{"timestamp": "2025-11-14T21:49:25.272840Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "ae364017-5fdc-4ae4-969f-7d550d108f77", "method": "GET", "path": "/api/v1/jobs"}
{"timestamp": "2025-11-14T21:49:25.280778Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "c4ee926b-b492-4a59-9e1c-21ddcf93a227", "method": "GET", "path": "/api/v1/jobs/dc2a6ae4-5bc6-4cf7-8e12-e2f55a14f552/stream"}
{"timestamp": "2025-11-14T21:49:25.286274Z", "level": "INFO", "module": "stream", "message": "SSE stream started", "job_id": "dc2a6ae4-5bc6-4cf7-8e12-e2f55a14f552"}
{"timestamp": "2025-11-14T21:49:38.556020Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "065ccedd-ff5c-4250-8b0b-63143c345e2c", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:49:38.577750Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "cc61bf01-a19e-4128-bf9b-d808e602fed8", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:49:38.583174Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "61424a86-6edb-4542-80db-0588cca69bdb", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:49:38.598447Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "1e3a8406-1213-48bd-a724-07bc1a09c63a", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:49:38.609993Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "17d8ec68-c0ce-44d9-a024-d9f70e35daad", "method": "GET", "path": "/api/v1/jobs/63dd57c2-f4c0-492c-864d-e9dd6c536170"}
{"timestamp": "2025-11-14T21:49:38.621604Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "3479686e-e044-4741-aac6-1479da03026c", "method": "GET", "path": "/api/v1/jobs"}
{"timestamp": "2025-11-14T21:49:38.636698Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "24fe81a0-dcb7-4915-b03d-0529674ea4eb", "method": "GET", "path": "/api/v1/jobs/916f0331-4baf-43b6-b028-81d6dd14f43a/stream"}
{"timestamp": "2025-11-14T21:49:38.644337Z", "level": "INFO", "module": "stream", "message": "SSE stream started", "job_id": "916f0331-4baf-43b6-b028-81d6dd14f43a"}
{"timestamp": "2025-11-14T21:52:29.775544Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "e02ab1c3-e9c4-4520-9a88-17a3be18128f", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:52:30.397537Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "80c93633-0cdc-4f62-84da-c0ddf06d848b", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:52:30.411097Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "fbe6ae04-643d-4762-b4c3-258f5172e60f", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:52:30.427357Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "d2aaaece-7aeb-4fac-b4a0-612483323501", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:52:30.435951Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "b7f24b06-f21a-4daf-b4aa-59d477f4744a", "method": "GET", "path": "/api/v1/jobs/a37502d7-2f69-4637-a0d1-8771f4841238"}
{"timestamp": "2025-11-14T21:52:30.443419Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "1ef35469-8f82-4aa5-9075-9df03126bf71", "method": "GET", "path": "/api/v1/jobs"}
{"timestamp": "2025-11-14T21:52:30.450868Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "8e672597-495f-4e22-8754-b5d8fe3c78c6", "method": "GET", "path": "/api/v1/jobs/3a791501-65ab-4e3d-affe-7e6d00bae0e6/stream"}
{"timestamp": "2025-11-14T21:52:30.454341Z", "level": "INFO", "module": "stream", "message": "SSE stream started", "job_id": "3a791501-65ab-4e3d-affe-7e6d00bae0e6"}
{"timestamp": "2025-11-14T21:53:55.737545Z", "level": "WARNING", "module": "dependencies", "message": "JWT validation failed", "exception": "Traceback (most recent call last):\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jws.py\", line 180, in _load\n    signing_input, crypto_segment = jwt.rsplit(b\".\", 1)\nValueError: not enough values to unpack (expected 2, got 1)\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jwt.py\", line 159, in decode\n    payload = jws.verify(token, key, algorithms, verify=verify_signature)\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jws.py\", line 74, in verify\n    header, payload, signing_input, signature = _load(token)\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jws.py\", line 184, in _load\n    raise JWSError(\"Not enough segments\")\njose.exceptions.JWSError: Not enough segments\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/user/Desktop/Github/VideoGen/project/backend/api_gateway/dependencies.py\", line 60, in get_current_user\n    payload = jwt.decode(\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jwt.py\", line 161, in decode\n    raise JWTError(e)\njose.exceptions.JWTError: Not enough segments"}
{"timestamp": "2025-11-14T21:53:55.834135Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "9d518861-7c21-4f4d-9a27-cb51a8972531", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:53:55.882433Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "job_id": "test_job_id", "progress": 50, "stage": "video_generation"}
{"timestamp": "2025-11-14T21:53:55.959862Z", "level": "ERROR", "module": "orchestrator", "message": "Pipeline error handled", "job_id": "test_job_id", "error_code": "TEST_ERROR", "exception": "shared.errors.PipelineError: Test error"}
{"timestamp": "2025-11-14T21:53:55.970559Z", "level": "INFO", "module": "queue_service", "message": "Job enqueued", "job_id": "test_job_id", "user_id": "test_user_id"}
{"timestamp": "2025-11-14T21:53:55.981653Z", "level": "INFO", "module": "queue_service", "message": "Job removed from queue", "job_id": "test_job_id"}
{"timestamp": "2025-11-14T21:53:56.020676Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 1800}
{"timestamp": "2025-11-14T21:53:56.039071Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 3600}
{"timestamp": "2025-11-14T21:53:56.053099Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 1800}
{"timestamp": "2025-11-14T21:53:56.070878Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "44238d8c-edce-4c05-8e66-9f67c9a2bb0c", "method": "GET", "path": "/"}
{"timestamp": "2025-11-14T21:53:56.076096Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "d3a88d7a-0865-4e5e-9c81-0a3d54729635", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:53:56.081691Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "78758ff3-862d-47bd-bdac-8bd1ab70a7b5", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:53:56.089905Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "c70de932-6855-4c36-a974-0f82532e13c0", "method": "GET", "path": "/api/v1/jobs"}
{"timestamp": "2025-11-14T21:53:56.095825Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "1041b14a-1216-4528-8cbb-fc63a2f17511", "method": "GET", "path": "/api/v1/jobs/invalid-id"}
{"timestamp": "2025-11-14T21:53:56.101541Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "9dfb6548-426b-43e0-85ce-9d9835823ff4", "method": "GET", "path": "/api/v1/jobs/invalid-id/stream"}
{"timestamp": "2025-11-14T21:53:56.106619Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "2a580d55-790f-4d0b-85e4-ce038f92c329", "method": "GET", "path": "/api/v1/jobs/invalid-id/download"}
{"timestamp": "2025-11-14T21:53:56.112313Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "e037d001-64bc-4919-b1b9-7289ff7e396c", "method": "POST", "path": "/api/v1/jobs/invalid-id/cancel"}
{"timestamp": "2025-11-14T21:53:56.135642Z", "level": "INFO", "module": "worker", "message": "Processing job", "job_id": "test_job_id", "user_id": "test_user_id"}
{"timestamp": "2025-11-14T21:53:56.136210Z", "level": "INFO", "module": "worker", "message": "Job processed successfully", "job_id": "test_job_id"}
{"timestamp": "2025-11-14T21:53:56.143587Z", "level": "INFO", "module": "worker", "message": "Processing job", "job_id": "test_job_id", "user_id": "test_user_id"}
{"timestamp": "2025-11-14T21:53:56.143859Z", "level": "INFO", "module": "worker", "message": "Job cancelled before processing", "job_id": "test_job_id"}
{"timestamp": "2025-11-14T21:53:56.164489Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "0962c1f6-e050-4283-b0ff-0e147bc5a1ff", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:53:56.173094Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "2c29a659-6cd8-4fe2-a2b0-7ecf0dfce856", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:53:56.178941Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "0c98d4d8-39f9-4547-9f64-977b88e41fdc", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:53:56.189656Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "aacecd7e-b74a-4ce8-b2dc-74d5309c7e52", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:53:56.201247Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "ee32a827-8524-4453-a3e8-b99c4009ae12", "method": "GET", "path": "/api/v1/jobs/3602234f-9539-4e1d-ab8e-82c1ac555231"}
{"timestamp": "2025-11-14T21:53:56.208591Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "fe633bd1-cefe-4ed3-b0ff-e8cf5960745f", "method": "GET", "path": "/api/v1/jobs"}
{"timestamp": "2025-11-14T21:53:56.217658Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "09504c68-9a1a-4ee8-93cb-5474fcd660e9", "method": "GET", "path": "/api/v1/jobs/c168ab16-0db4-4f8f-b220-e1c7d9e64e12/stream"}
{"timestamp": "2025-11-14T21:53:56.223016Z", "level": "INFO", "module": "stream", "message": "SSE stream started", "job_id": "c168ab16-0db4-4f8f-b220-e1c7d9e64e12"}
{"timestamp": "2025-11-14T21:54:44.439755Z", "level": "WARNING", "module": "dependencies", "message": "JWT validation failed", "exception": "Traceback (most recent call last):\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jws.py\", line 180, in _load\n    signing_input, crypto_segment = jwt.rsplit(b\".\", 1)\nValueError: not enough values to unpack (expected 2, got 1)\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jwt.py\", line 159, in decode\n    payload = jws.verify(token, key, algorithms, verify=verify_signature)\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jws.py\", line 74, in verify\n    header, payload, signing_input, signature = _load(token)\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jws.py\", line 184, in _load\n    raise JWSError(\"Not enough segments\")\njose.exceptions.JWSError: Not enough segments\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/user/Desktop/Github/VideoGen/project/backend/api_gateway/dependencies.py\", line 60, in get_current_user\n    payload = jwt.decode(\n  File \"/Users/user/Library/Python/3.9/lib/python/site-packages/jose/jwt.py\", line 161, in decode\n    raise JWTError(e)\njose.exceptions.JWTError: Not enough segments"}
{"timestamp": "2025-11-14T21:54:44.581488Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "d3e3bfba-7f13-48d3-95ab-04111e804fff", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:54:44.633695Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "job_id": "test_job_id", "progress": 50, "stage": "video_generation"}
{"timestamp": "2025-11-14T21:54:44.722673Z", "level": "ERROR", "module": "orchestrator", "message": "Pipeline error handled", "job_id": "test_job_id", "error_code": "TEST_ERROR", "exception": "shared.errors.PipelineError: Test error"}
{"timestamp": "2025-11-14T21:54:44.738953Z", "level": "INFO", "module": "queue_service", "message": "Job enqueued", "job_id": "test_job_id", "user_id": "test_user_id"}
{"timestamp": "2025-11-14T21:54:44.750561Z", "level": "INFO", "module": "queue_service", "message": "Job removed from queue", "job_id": "test_job_id"}
{"timestamp": "2025-11-14T21:54:44.784986Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 1800}
{"timestamp": "2025-11-14T21:54:44.802623Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 3600}
{"timestamp": "2025-11-14T21:54:44.814587Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "user_id": "test_user_id", "count": 5, "retry_after": 1800}
{"timestamp": "2025-11-14T21:54:44.834107Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "86e64b40-71d6-41ed-95b8-8485a21e8089", "method": "GET", "path": "/"}
{"timestamp": "2025-11-14T21:54:44.838931Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "1d2b4b68-e015-4078-bd3c-a2c6644871d7", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:54:44.844374Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "19237065-c25e-41eb-ac4f-adf95e27f8da", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:54:44.849214Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "5fbd40bb-6e3b-4340-8fcd-16d4da55a614", "method": "GET", "path": "/api/v1/jobs"}
{"timestamp": "2025-11-14T21:54:44.853951Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "2f9f98f7-88b9-4b73-8ad5-f731559416ad", "method": "GET", "path": "/api/v1/jobs/invalid-id"}
{"timestamp": "2025-11-14T21:54:44.857530Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "4102b9cd-dff1-46d0-a7eb-2c0631b24701", "method": "GET", "path": "/api/v1/jobs/invalid-id/stream"}
{"timestamp": "2025-11-14T21:54:44.860910Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "d76d82b6-6df6-4bc3-83a6-6c835d21adcb", "method": "GET", "path": "/api/v1/jobs/invalid-id/download"}
{"timestamp": "2025-11-14T21:54:44.866256Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "fb91a6de-3264-400f-93f1-7ed2658b281d", "method": "POST", "path": "/api/v1/jobs/invalid-id/cancel"}
{"timestamp": "2025-11-14T21:54:44.886095Z", "level": "INFO", "module": "worker", "message": "Processing job", "job_id": "test_job_id", "user_id": "test_user_id"}
{"timestamp": "2025-11-14T21:54:44.886413Z", "level": "INFO", "module": "worker", "message": "Job processed successfully", "job_id": "test_job_id"}
{"timestamp": "2025-11-14T21:54:44.892833Z", "level": "INFO", "module": "worker", "message": "Processing job", "job_id": "test_job_id", "user_id": "test_user_id"}
{"timestamp": "2025-11-14T21:54:44.892942Z", "level": "INFO", "module": "worker", "message": "Job cancelled before processing", "job_id": "test_job_id"}
{"timestamp": "2025-11-14T21:54:44.911177Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "9c5a8964-e8c0-4b7d-b44a-9784222310b7", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T21:54:44.917031Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "789ba841-dd61-4189-807a-f15eb431bc9c", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:54:44.924937Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "06340379-df8e-4b05-998a-6e269a6bcf00", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:54:44.938557Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "b1fdff0f-3d1d-436f-a193-2b79fb508db6", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T21:54:44.948202Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "30250aa7-77b1-4a0d-8d95-23e8ad3a3771", "method": "GET", "path": "/api/v1/jobs/215b3e67-9fbe-40f7-8499-d3a83fcc24d4"}
{"timestamp": "2025-11-14T21:54:44.954769Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "d016e1ef-dcbb-4955-8006-b451afe557fc", "method": "GET", "path": "/api/v1/jobs"}
{"timestamp": "2025-11-14T21:54:44.961980Z", "level": "INFO", "module": "main", "message": "Request started", "request_id": "2c9b6b67-2912-42ea-a3d8-3e62656a5efd", "method": "GET", "path": "/api/v1/jobs/82c56b2d-1e0f-4db6-a6d1-bbdfa314736a/stream"}
{"timestamp": "2025-11-14T21:54:44.967562Z", "level": "INFO", "module": "stream", "message": "SSE stream started", "job_id": "82c56b2d-1e0f-4db6-a6d1-bbdfa314736a"}
{"timestamp": "2025-11-14T22:16:32.946220Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "anyio.from_thread.BlockingPortal._call_func", "request_id": "c761dcbb-7fe0-4544-98c4-5e9adcc33a1b", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T22:16:32.948872Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "anyio.from_thread.BlockingPortal._call_func", "request_id": "9b46db36-3505-4516-a312-5055d5f36a4c", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T22:16:32.950288Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "anyio.from_thread.BlockingPortal._call_func", "request_id": "ec18a6de-63f1-4d45-b6bf-ca0c4883906b", "method": "GET", "path": "/api/v1/jobs/invalid-job-id"}
{"timestamp": "2025-11-14T22:16:32.951468Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "anyio.from_thread.BlockingPortal._call_func", "request_id": "a8cf2223-ca50-4ef4-8b93-9aa5832553ed", "method": "GET", "path": "/api/v1/jobs"}
{"timestamp": "2025-11-14T22:16:32.953069Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "anyio.from_thread.BlockingPortal._call_func", "request_id": "7f936d7b-dff9-4436-b78e-d314b67492f3", "method": "GET", "path": "/api/v1/jobs/invalid-job-id/stream"}
{"timestamp": "2025-11-14T22:16:32.954307Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "anyio.from_thread.BlockingPortal._call_func", "request_id": "729cb994-c4a3-4c57-8bea-b164873d94ff", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T22:16:45.364454Z", "level": "WARNING", "module": "beat_detection", "message": "aubio not available, using librosa onset detection as fallback", "taskName": null}
{"timestamp": "2025-11-14T22:16:47.757149Z", "level": "WARNING", "module": "beat_detection", "message": "BPM 0.00 outside valid range [60, 200], using default 120 BPM", "taskName": null}
{"timestamp": "2025-11-14T22:16:47.757227Z", "level": "WARNING", "module": "beat_detection", "message": "Low confidence (0.50) in beat detection, using tempo-based boundaries", "taskName": null}
{"timestamp": "2025-11-14T22:16:47.762091Z", "level": "WARNING", "module": "beat_detection", "message": "BPM 0.00 outside valid range [60, 200], using default 120 BPM", "taskName": null}
{"timestamp": "2025-11-14T22:16:47.762154Z", "level": "WARNING", "module": "beat_detection", "message": "Low confidence (0.50) in beat detection, using tempo-based boundaries", "taskName": null}
{"timestamp": "2025-11-14T22:16:47.767865Z", "level": "WARNING", "module": "beat_detection", "message": "BPM 0.00 outside valid range [60, 200], using default 120 BPM", "taskName": null}
{"timestamp": "2025-11-14T22:16:47.767920Z", "level": "WARNING", "module": "beat_detection", "message": "Low confidence (0.50) in beat detection, using tempo-based boundaries", "taskName": null}
{"timestamp": "2025-11-14T22:16:47.772123Z", "level": "WARNING", "module": "beat_detection", "message": "BPM 0.00 outside valid range [60, 200], using default 120 BPM", "taskName": null}
{"timestamp": "2025-11-14T22:16:47.772177Z", "level": "WARNING", "module": "beat_detection", "message": "Low confidence (0.50) in beat detection, using tempo-based boundaries", "taskName": null}
{"timestamp": "2025-11-14T22:16:47.774310Z", "level": "WARNING", "module": "beat_detection", "message": "BPM 0.00 outside valid range [60, 200], using default 120 BPM", "taskName": null}
{"timestamp": "2025-11-14T22:16:47.774344Z", "level": "WARNING", "module": "beat_detection", "message": "Low confidence (0.50) in beat detection, using tempo-based boundaries", "taskName": null}
{"timestamp": "2025-11-14T22:16:47.776348Z", "level": "WARNING", "module": "boundaries", "message": "Only 2 boundaries generated, need 3. Regenerating with reduced duration per clip.", "taskName": null}
{"timestamp": "2025-11-14T22:16:47.776410Z", "level": "INFO", "module": "boundaries", "message": "Generated 3 clip boundaries", "taskName": null}
{"timestamp": "2025-11-14T22:16:47.776921Z", "level": "WARNING", "module": "boundaries", "message": "Only 2 boundaries generated, need 3. Regenerating with reduced duration per clip.", "taskName": null}
{"timestamp": "2025-11-14T22:16:47.776975Z", "level": "INFO", "module": "boundaries", "message": "Generated 3 clip boundaries", "taskName": null}
{"timestamp": "2025-11-14T22:16:47.777358Z", "level": "INFO", "module": "boundaries", "message": "Generated 5 clip boundaries", "taskName": null}
{"timestamp": "2025-11-14T22:16:47.777657Z", "level": "WARNING", "module": "boundaries", "message": "Only 1 boundaries generated, need 3. Regenerating with reduced duration per clip.", "taskName": null}
{"timestamp": "2025-11-14T22:16:47.777699Z", "level": "INFO", "module": "boundaries", "message": "Generated 3 clip boundaries", "taskName": null}
{"timestamp": "2025-11-14T22:16:47.777988Z", "level": "WARNING", "module": "boundaries", "message": "No beat timestamps available, generating uniform boundaries", "taskName": null}
{"timestamp": "2025-11-14T22:16:47.778286Z", "level": "WARNING", "module": "boundaries", "message": "Only 0 boundaries generated, need 3. Regenerating with reduced duration per clip.", "taskName": null}
{"timestamp": "2025-11-14T22:16:47.778324Z", "level": "INFO", "module": "boundaries", "message": "Generated 3 clip boundaries", "taskName": null}
{"timestamp": "2025-11-14T22:16:47.778775Z", "level": "INFO", "module": "boundaries", "message": "Generated 25 clip boundaries", "taskName": null}
{"timestamp": "2025-11-14T22:16:47.779046Z", "level": "WARNING", "module": "boundaries", "message": "Only 2 boundaries generated, need 3. Regenerating with reduced duration per clip.", "taskName": null}
{"timestamp": "2025-11-14T22:16:47.779086Z", "level": "INFO", "module": "boundaries", "message": "Generated 3 clip boundaries", "taskName": null}
{"timestamp": "2025-11-14T22:16:48.287854Z", "level": "INFO", "module": "cache", "message": "Stored analysis in Redis cache: test_hash_12345", "taskName": "Task-1"}
{"timestamp": "2025-11-14T22:16:48.310600Z", "level": "WARNING", "module": "cache", "message": "Failed to store cached analysis: 'AsyncTableQueryBuilder' object has no attribute 'upsert'", "taskName": "Task-1", "file_hash": "test_hash_12345", "error": "'AsyncTableQueryBuilder' object has no attribute 'upsert'"}
{"timestamp": "2025-11-14T22:16:48.425031Z", "level": "INFO", "module": "cache", "message": "Cache hit for file hash: test_hash_12345", "taskName": "Task-1"}
{"timestamp": "2025-11-14T22:16:48.429947Z", "level": "WARNING", "module": "cache", "message": "Failed to get cached analysis: Failed to get JSON from Redis: Failed to get Redis key: Event loop is closed", "taskName": "Task-4", "file_hash": "nonexistent_hash"}
{"timestamp": "2025-11-14T22:16:48.889477Z", "level": "INFO", "module": "cache", "message": "Stored analysis in Redis cache: test_serialization", "taskName": "Task-7"}
{"timestamp": "2025-11-14T22:16:48.889651Z", "level": "WARNING", "module": "cache", "message": "Failed to store cached analysis: 'AsyncTableQueryBuilder' object has no attribute 'upsert'", "taskName": "Task-7", "file_hash": "test_serialization", "error": "'AsyncTableQueryBuilder' object has no attribute 'upsert'"}
{"timestamp": "2025-11-14T22:16:49.015663Z", "level": "INFO", "module": "cache", "message": "Cache hit for file hash: test_serialization", "taskName": "Task-7"}
{"timestamp": "2025-11-14T22:16:49.021967Z", "level": "WARNING", "module": "cache", "message": "Failed to store cached analysis: Failed to set JSON in Redis: Failed to set Redis key: Event loop is closed", "taskName": "Task-10", "file_hash": "test_ttl", "error": "Failed to set JSON in Redis: Failed to set Redis key: Event loop is closed"}
{"timestamp": "2025-11-14T22:16:49.488508Z", "level": "INFO", "module": "cache", "message": "Cache hit for file hash: test_ttl", "taskName": "Task-10"}
{"timestamp": "2025-11-14T22:16:49.518231Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=energetic, secondary=dark, energy=high, confidence=0.93", "taskName": null}
{"timestamp": "2025-11-14T22:16:49.534739Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=dark, secondary=calm, energy=low, confidence=0.83", "taskName": null}
{"timestamp": "2025-11-14T22:16:49.548842Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=dark, secondary=calm, energy=high, confidence=0.77", "taskName": null}
{"timestamp": "2025-11-14T22:16:49.561623Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=energetic, secondary=None, energy=high, confidence=0.73", "taskName": null}
{"timestamp": "2025-11-14T22:16:49.568555Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=dark, secondary=energetic, energy=high, confidence=0.77", "taskName": null}
{"timestamp": "2025-11-14T22:16:49.574788Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=dark, secondary=energetic, energy=high, confidence=0.77", "taskName": null}
{"timestamp": "2025-11-14T22:16:49.575320Z", "level": "ERROR", "module": "mood_classifier", "message": "Mood classification failed: can't extend empty axis 0 using modes other than 'constant' or 'empty'", "taskName": null}
{"timestamp": "2025-11-14T22:16:49.579329Z", "level": "INFO", "module": "parser", "message": "Loading audio file for job a26cd74a-1a2d-4d45-9f93-a90a4a37efdc", "job_id": "a26cd74a-1a2d-4d45-9f93-a90a4a37efdc", "taskName": "Task-13"}
{"timestamp": "2025-11-14T22:16:50.690791Z", "level": "INFO", "module": "parser", "message": "Audio loaded: duration=10.00s, sample_rate=22050 Hz", "job_id": "a26cd74a-1a2d-4d45-9f93-a90a4a37efdc", "taskName": "Task-13"}
{"timestamp": "2025-11-14T22:16:50.691015Z", "level": "INFO", "module": "parser", "message": "Detecting beats...", "job_id": "a26cd74a-1a2d-4d45-9f93-a90a4a37efdc", "taskName": "Task-13"}
{"timestamp": "2025-11-14T22:16:50.700577Z", "level": "WARNING", "module": "beat_detection", "message": "BPM 0.00 outside valid range [60, 200], using default 120 BPM", "job_id": "a26cd74a-1a2d-4d45-9f93-a90a4a37efdc", "taskName": "Task-13"}
{"timestamp": "2025-11-14T22:16:50.700636Z", "level": "WARNING", "module": "beat_detection", "message": "Low confidence (0.50) in beat detection, using tempo-based boundaries", "job_id": "a26cd74a-1a2d-4d45-9f93-a90a4a37efdc", "taskName": "Task-13"}
{"timestamp": "2025-11-14T22:16:50.700674Z", "level": "INFO", "module": "parser", "message": "Beat detection complete: BPM=120.00, beats=20, confidence=0.50", "job_id": "a26cd74a-1a2d-4d45-9f93-a90a4a37efdc", "taskName": "Task-13"}
{"timestamp": "2025-11-14T22:16:50.700702Z", "level": "INFO", "module": "parser", "message": "Analyzing song structure...", "job_id": "a26cd74a-1a2d-4d45-9f93-a90a4a37efdc", "taskName": "Task-13"}
{"timestamp": "2025-11-14T22:16:50.758341Z", "level": "INFO", "module": "structure_analysis", "message": "Structure analysis complete: 122 segments", "job_id": "a26cd74a-1a2d-4d45-9f93-a90a4a37efdc", "taskName": "Task-13"}
{"timestamp": "2025-11-14T22:16:50.758413Z", "level": "INFO", "module": "parser", "message": "Structure analysis complete: 122 segments", "job_id": "a26cd74a-1a2d-4d45-9f93-a90a4a37efdc", "taskName": "Task-13"}
{"timestamp": "2025-11-14T22:16:50.758448Z", "level": "INFO", "module": "parser", "message": "Extracting lyrics...", "job_id": "a26cd74a-1a2d-4d45-9f93-a90a4a37efdc", "taskName": "Task-13"}
{"timestamp": "2025-11-14T22:16:50.758830Z", "level": "INFO", "module": "whisper_client", "message": "Created temporary audio file: /var/folders/d5/vzgmwykd2jsbxfy1k60z4ds00000gq/T/tmpaq3tma5s.mp3", "job_id": "a26cd74a-1a2d-4d45-9f93-a90a4a37efdc", "taskName": "Task-13"}
{"timestamp": "2025-11-14T22:16:52.335042Z", "level": "INFO", "module": "whisper_client", "message": "Whisper API response received: 1 words", "job_id": "a26cd74a-1a2d-4d45-9f93-a90a4a37efdc", "taskName": "Task-13"}
{"timestamp": "2025-11-14T22:16:52.335539Z", "level": "ERROR", "module": "whisper_client", "message": "Whisper API call failed: 'TranscriptionWord' object has no attribute 'get'", "job_id": "a26cd74a-1a2d-4d45-9f93-a90a4a37efdc", "taskName": "Task-13"}
{"timestamp": "2025-11-14T22:16:52.336079Z", "level": "WARNING", "module": "whisper_client", "message": "Whisper API call failed after retries: Failed to extract lyrics: 'TranscriptionWord' object has no attribute 'get', returning empty lyrics", "job_id": "a26cd74a-1a2d-4d45-9f93-a90a4a37efdc", "taskName": "Task-13"}
{"timestamp": "2025-11-14T22:16:52.336243Z", "level": "INFO", "module": "parser", "message": "Lyrics extraction complete: 0 words", "job_id": "a26cd74a-1a2d-4d45-9f93-a90a4a37efdc", "taskName": "Task-13"}
{"timestamp": "2025-11-14T22:16:52.336336Z", "level": "INFO", "module": "parser", "message": "Classifying mood...", "job_id": "a26cd74a-1a2d-4d45-9f93-a90a4a37efdc", "taskName": "Task-13"}
{"timestamp": "2025-11-14T22:16:52.358888Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=dark, secondary=energetic, energy=high, confidence=0.77", "job_id": "a26cd74a-1a2d-4d45-9f93-a90a4a37efdc", "taskName": "Task-13"}
{"timestamp": "2025-11-14T22:16:52.359032Z", "level": "INFO", "module": "parser", "message": "Mood classification complete: dark, confidence=0.77", "job_id": "a26cd74a-1a2d-4d45-9f93-a90a4a37efdc", "taskName": "Task-13"}
{"timestamp": "2025-11-14T22:16:52.359097Z", "level": "INFO", "module": "parser", "message": "Generating clip boundaries...", "job_id": "a26cd74a-1a2d-4d45-9f93-a90a4a37efdc", "taskName": "Task-13"}
{"timestamp": "2025-11-14T22:16:52.359194Z", "level": "WARNING", "module": "boundaries", "message": "Only 2 boundaries generated, need 3. Regenerating with reduced duration per clip.", "job_id": "a26cd74a-1a2d-4d45-9f93-a90a4a37efdc", "taskName": "Task-13"}
{"timestamp": "2025-11-14T22:16:52.359268Z", "level": "INFO", "module": "boundaries", "message": "Generated 3 clip boundaries", "job_id": "a26cd74a-1a2d-4d45-9f93-a90a4a37efdc", "taskName": "Task-13"}
{"timestamp": "2025-11-14T22:16:52.359319Z", "level": "INFO", "module": "parser", "message": "Boundary generation complete: 3 boundaries", "job_id": "a26cd74a-1a2d-4d45-9f93-a90a4a37efdc", "taskName": "Task-13"}
{"timestamp": "2025-11-14T22:16:52.359388Z", "level": "INFO", "module": "parser", "message": "Audio analysis complete for job a26cd74a-1a2d-4d45-9f93-a90a4a37efdc: duration=10.00s, processing_time=2.78s, beats=20, segments=122, lyrics=0, boundaries=3", "job_id": "a26cd74a-1a2d-4d45-9f93-a90a4a37efdc", "taskName": "Task-13"}
{"timestamp": "2025-11-14T22:16:52.366587Z", "level": "INFO", "module": "parser", "message": "Loading audio file for job a545bc5b-209a-4369-88f0-78ba5d2994a5", "job_id": "a545bc5b-209a-4369-88f0-78ba5d2994a5", "taskName": "Task-16"}
{"timestamp": "2025-11-14T22:16:52.367221Z", "level": "INFO", "module": "parser", "message": "Audio loaded: duration=10.00s, sample_rate=22050 Hz", "job_id": "a545bc5b-209a-4369-88f0-78ba5d2994a5", "taskName": "Task-16"}
{"timestamp": "2025-11-14T22:16:52.367272Z", "level": "INFO", "module": "parser", "message": "Detecting beats...", "job_id": "a545bc5b-209a-4369-88f0-78ba5d2994a5", "taskName": "Task-16"}
{"timestamp": "2025-11-14T22:16:52.378035Z", "level": "WARNING", "module": "beat_detection", "message": "BPM 0.00 outside valid range [60, 200], using default 120 BPM", "job_id": "a545bc5b-209a-4369-88f0-78ba5d2994a5", "taskName": "Task-16"}
{"timestamp": "2025-11-14T22:16:52.378106Z", "level": "WARNING", "module": "beat_detection", "message": "Low confidence (0.50) in beat detection, using tempo-based boundaries", "job_id": "a545bc5b-209a-4369-88f0-78ba5d2994a5", "taskName": "Task-16"}
{"timestamp": "2025-11-14T22:16:52.378154Z", "level": "INFO", "module": "parser", "message": "Beat detection complete: BPM=120.00, beats=20, confidence=0.50", "job_id": "a545bc5b-209a-4369-88f0-78ba5d2994a5", "taskName": "Task-16"}
{"timestamp": "2025-11-14T22:16:52.378191Z", "level": "INFO", "module": "parser", "message": "Analyzing song structure...", "job_id": "a545bc5b-209a-4369-88f0-78ba5d2994a5", "taskName": "Task-16"}
{"timestamp": "2025-11-14T22:16:52.419050Z", "level": "INFO", "module": "structure_analysis", "message": "Structure analysis complete: 122 segments", "job_id": "a545bc5b-209a-4369-88f0-78ba5d2994a5", "taskName": "Task-16"}
{"timestamp": "2025-11-14T22:16:52.419119Z", "level": "INFO", "module": "parser", "message": "Structure analysis complete: 122 segments", "job_id": "a545bc5b-209a-4369-88f0-78ba5d2994a5", "taskName": "Task-16"}
{"timestamp": "2025-11-14T22:16:52.419155Z", "level": "INFO", "module": "parser", "message": "Extracting lyrics...", "job_id": "a545bc5b-209a-4369-88f0-78ba5d2994a5", "taskName": "Task-16"}
{"timestamp": "2025-11-14T22:16:52.419471Z", "level": "INFO", "module": "whisper_client", "message": "Created temporary audio file: /var/folders/d5/vzgmwykd2jsbxfy1k60z4ds00000gq/T/tmp481udmzm.mp3", "job_id": "a545bc5b-209a-4369-88f0-78ba5d2994a5", "taskName": "Task-16"}
{"timestamp": "2025-11-14T22:16:53.359425Z", "level": "INFO", "module": "whisper_client", "message": "Whisper API response received: 1 words", "job_id": "a545bc5b-209a-4369-88f0-78ba5d2994a5", "taskName": "Task-16"}
{"timestamp": "2025-11-14T22:16:53.359785Z", "level": "ERROR", "module": "whisper_client", "message": "Whisper API call failed: 'TranscriptionWord' object has no attribute 'get'", "job_id": "a545bc5b-209a-4369-88f0-78ba5d2994a5", "taskName": "Task-16"}
{"timestamp": "2025-11-14T22:16:53.360413Z", "level": "WARNING", "module": "whisper_client", "message": "Whisper API call failed after retries: Failed to extract lyrics: 'TranscriptionWord' object has no attribute 'get', returning empty lyrics", "job_id": "a545bc5b-209a-4369-88f0-78ba5d2994a5", "taskName": "Task-16"}
{"timestamp": "2025-11-14T22:16:53.360576Z", "level": "INFO", "module": "parser", "message": "Lyrics extraction complete: 0 words", "job_id": "a545bc5b-209a-4369-88f0-78ba5d2994a5", "taskName": "Task-16"}
{"timestamp": "2025-11-14T22:16:53.360676Z", "level": "INFO", "module": "parser", "message": "Classifying mood...", "job_id": "a545bc5b-209a-4369-88f0-78ba5d2994a5", "taskName": "Task-16"}
{"timestamp": "2025-11-14T22:16:53.385117Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=dark, secondary=energetic, energy=high, confidence=0.77", "job_id": "a545bc5b-209a-4369-88f0-78ba5d2994a5", "taskName": "Task-16"}
{"timestamp": "2025-11-14T22:16:53.385247Z", "level": "INFO", "module": "parser", "message": "Mood classification complete: dark, confidence=0.77", "job_id": "a545bc5b-209a-4369-88f0-78ba5d2994a5", "taskName": "Task-16"}
{"timestamp": "2025-11-14T22:16:53.385314Z", "level": "INFO", "module": "parser", "message": "Generating clip boundaries...", "job_id": "a545bc5b-209a-4369-88f0-78ba5d2994a5", "taskName": "Task-16"}
{"timestamp": "2025-11-14T22:16:53.385389Z", "level": "WARNING", "module": "boundaries", "message": "Only 2 boundaries generated, need 3. Regenerating with reduced duration per clip.", "job_id": "a545bc5b-209a-4369-88f0-78ba5d2994a5", "taskName": "Task-16"}
{"timestamp": "2025-11-14T22:16:53.385464Z", "level": "INFO", "module": "boundaries", "message": "Generated 3 clip boundaries", "job_id": "a545bc5b-209a-4369-88f0-78ba5d2994a5", "taskName": "Task-16"}
{"timestamp": "2025-11-14T22:16:53.385514Z", "level": "INFO", "module": "parser", "message": "Boundary generation complete: 3 boundaries", "job_id": "a545bc5b-209a-4369-88f0-78ba5d2994a5", "taskName": "Task-16"}
{"timestamp": "2025-11-14T22:16:53.385582Z", "level": "INFO", "module": "parser", "message": "Audio analysis complete for job a545bc5b-209a-4369-88f0-78ba5d2994a5: duration=10.00s, processing_time=1.02s, beats=20, segments=122, lyrics=0, boundaries=3", "job_id": "a545bc5b-209a-4369-88f0-78ba5d2994a5", "taskName": "Task-16"}
{"timestamp": "2025-11-14T22:16:53.387819Z", "level": "INFO", "module": "parser", "message": "Loading audio file for job 8ac873b6-374b-42df-85e3-54e16a819cf2", "job_id": "8ac873b6-374b-42df-85e3-54e16a819cf2", "taskName": "Task-19"}
{"timestamp": "2025-11-14T22:16:53.388011Z", "level": "ERROR", "module": "parser", "message": "Audio parsing failed for job 8ac873b6-374b-42df-85e3-54e16a819cf2: Error opening <_io.BytesIO object at 0x118eeec00>: Format not recognised.", "job_id": "8ac873b6-374b-42df-85e3-54e16a819cf2", "taskName": "Task-19"}
{"timestamp": "2025-11-14T22:16:53.388983Z", "level": "INFO", "module": "parser", "message": "Loading audio file for job 508acb30-0488-4b9f-a803-ad30e569b55f", "job_id": "508acb30-0488-4b9f-a803-ad30e569b55f", "taskName": "Task-22"}
{"timestamp": "2025-11-14T22:16:53.389115Z", "level": "ERROR", "module": "parser", "message": "Audio parsing failed for job 508acb30-0488-4b9f-a803-ad30e569b55f: Error opening <_io.BytesIO object at 0x118f50c20>: Format not recognised.", "job_id": "508acb30-0488-4b9f-a803-ad30e569b55f", "taskName": "Task-22"}
{"timestamp": "2025-11-14T22:16:53.390525Z", "level": "INFO", "module": "main", "message": "Starting audio analysis for job None, audio_url=test_url", "taskName": "Task-25"}
{"timestamp": "2025-11-14T22:16:53.391378Z", "level": "INFO", "module": "main", "message": "Starting audio analysis for job 4d6ce4cf-a526-46ba-b83b-2d48f8bf38b1, audio_url=None", "job_id": "4d6ce4cf-a526-46ba-b83b-2d48f8bf38b1", "taskName": "Task-28"}
{"timestamp": "2025-11-14T22:16:53.395080Z", "level": "INFO", "module": "parser", "message": "Loading audio file for job 89132c6d-3ff9-4adb-b770-e03493ba4e26", "job_id": "89132c6d-3ff9-4adb-b770-e03493ba4e26", "taskName": "Task-31"}
{"timestamp": "2025-11-14T22:16:53.395428Z", "level": "INFO", "module": "parser", "message": "Audio loaded: duration=5.00s, sample_rate=22050 Hz", "job_id": "89132c6d-3ff9-4adb-b770-e03493ba4e26", "taskName": "Task-31"}
{"timestamp": "2025-11-14T22:16:53.395474Z", "level": "INFO", "module": "parser", "message": "Detecting beats...", "job_id": "89132c6d-3ff9-4adb-b770-e03493ba4e26", "taskName": "Task-31"}
{"timestamp": "2025-11-14T22:16:53.401643Z", "level": "ERROR", "module": "beat_detection", "message": "Beat detection failed: unsupported format string passed to numpy.ndarray.__format__", "job_id": "89132c6d-3ff9-4adb-b770-e03493ba4e26", "taskName": "Task-31"}
{"timestamp": "2025-11-14T22:16:53.401703Z", "level": "WARNING", "module": "beat_detection", "message": "Using fallback tempo-based beats: BPM=120.0, beats=10", "job_id": "89132c6d-3ff9-4adb-b770-e03493ba4e26", "taskName": "Task-31"}
{"timestamp": "2025-11-14T22:16:53.401747Z", "level": "INFO", "module": "parser", "message": "Beat detection complete: BPM=120.00, beats=10, confidence=0.50", "job_id": "89132c6d-3ff9-4adb-b770-e03493ba4e26", "taskName": "Task-31"}
{"timestamp": "2025-11-14T22:16:53.401786Z", "level": "INFO", "module": "parser", "message": "Analyzing song structure...", "job_id": "89132c6d-3ff9-4adb-b770-e03493ba4e26", "taskName": "Task-31"}
{"timestamp": "2025-11-14T22:16:53.418522Z", "level": "INFO", "module": "structure_analysis", "message": "Structure analysis complete: 17 segments", "job_id": "89132c6d-3ff9-4adb-b770-e03493ba4e26", "taskName": "Task-31"}
{"timestamp": "2025-11-14T22:16:53.418602Z", "level": "INFO", "module": "parser", "message": "Structure analysis complete: 17 segments", "job_id": "89132c6d-3ff9-4adb-b770-e03493ba4e26", "taskName": "Task-31"}
{"timestamp": "2025-11-14T22:16:53.418651Z", "level": "INFO", "module": "parser", "message": "Extracting lyrics...", "job_id": "89132c6d-3ff9-4adb-b770-e03493ba4e26", "taskName": "Task-31"}
{"timestamp": "2025-11-14T22:16:53.419005Z", "level": "INFO", "module": "whisper_client", "message": "Created temporary audio file: /var/folders/d5/vzgmwykd2jsbxfy1k60z4ds00000gq/T/tmpotfjv3eb.mp3", "job_id": "89132c6d-3ff9-4adb-b770-e03493ba4e26", "taskName": "Task-31"}
{"timestamp": "2025-11-14T22:16:54.112075Z", "level": "INFO", "module": "whisper_client", "message": "Whisper API response received: 4 words", "job_id": "89132c6d-3ff9-4adb-b770-e03493ba4e26", "taskName": "Task-31"}
{"timestamp": "2025-11-14T22:16:54.112153Z", "level": "ERROR", "module": "whisper_client", "message": "Whisper API call failed: 'TranscriptionWord' object has no attribute 'get'", "job_id": "89132c6d-3ff9-4adb-b770-e03493ba4e26", "taskName": "Task-31"}
{"timestamp": "2025-11-14T22:16:54.112314Z", "level": "WARNING", "module": "whisper_client", "message": "Whisper API call failed after retries: Failed to extract lyrics: 'TranscriptionWord' object has no attribute 'get', returning empty lyrics", "job_id": "89132c6d-3ff9-4adb-b770-e03493ba4e26", "taskName": "Task-31"}
{"timestamp": "2025-11-14T22:16:54.112357Z", "level": "INFO", "module": "parser", "message": "Lyrics extraction complete: 0 words", "job_id": "89132c6d-3ff9-4adb-b770-e03493ba4e26", "taskName": "Task-31"}
{"timestamp": "2025-11-14T22:16:54.112387Z", "level": "INFO", "module": "parser", "message": "Classifying mood...", "job_id": "89132c6d-3ff9-4adb-b770-e03493ba4e26", "taskName": "Task-31"}
{"timestamp": "2025-11-14T22:16:54.119475Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=bright, secondary=energetic, energy=low, confidence=0.77", "job_id": "89132c6d-3ff9-4adb-b770-e03493ba4e26", "taskName": "Task-31"}
{"timestamp": "2025-11-14T22:16:54.119565Z", "level": "INFO", "module": "parser", "message": "Mood classification complete: bright, confidence=0.77", "job_id": "89132c6d-3ff9-4adb-b770-e03493ba4e26", "taskName": "Task-31"}
{"timestamp": "2025-11-14T22:16:54.119602Z", "level": "INFO", "module": "parser", "message": "Generating clip boundaries...", "job_id": "89132c6d-3ff9-4adb-b770-e03493ba4e26", "taskName": "Task-31"}
{"timestamp": "2025-11-14T22:16:54.119649Z", "level": "WARNING", "module": "boundaries", "message": "Only 1 boundaries generated, need 3. Regenerating with reduced duration per clip.", "job_id": "89132c6d-3ff9-4adb-b770-e03493ba4e26", "taskName": "Task-31"}
{"timestamp": "2025-11-14T22:16:54.119689Z", "level": "INFO", "module": "boundaries", "message": "Generated 3 clip boundaries", "job_id": "89132c6d-3ff9-4adb-b770-e03493ba4e26", "taskName": "Task-31"}
{"timestamp": "2025-11-14T22:16:54.119716Z", "level": "INFO", "module": "parser", "message": "Boundary generation complete: 3 boundaries", "job_id": "89132c6d-3ff9-4adb-b770-e03493ba4e26", "taskName": "Task-31"}
{"timestamp": "2025-11-14T22:16:54.119753Z", "level": "INFO", "module": "parser", "message": "Audio analysis complete for job 89132c6d-3ff9-4adb-b770-e03493ba4e26: duration=5.00s, processing_time=0.72s, beats=10, segments=17, lyrics=0, boundaries=3", "job_id": "89132c6d-3ff9-4adb-b770-e03493ba4e26", "taskName": "Task-31"}
{"timestamp": "2025-11-14T22:16:54.124465Z", "level": "INFO", "module": "parser", "message": "Loading audio file for job 84b5c376-4a3c-45af-b886-7f709bf86921", "job_id": "84b5c376-4a3c-45af-b886-7f709bf86921", "taskName": "Task-34"}
{"timestamp": "2025-11-14T22:16:54.125135Z", "level": "INFO", "module": "parser", "message": "Audio loaded: duration=10.00s, sample_rate=22050 Hz", "job_id": "84b5c376-4a3c-45af-b886-7f709bf86921", "taskName": "Task-34"}
{"timestamp": "2025-11-14T22:16:54.125213Z", "level": "INFO", "module": "parser", "message": "Detecting beats...", "job_id": "84b5c376-4a3c-45af-b886-7f709bf86921", "taskName": "Task-34"}
{"timestamp": "2025-11-14T22:16:54.135397Z", "level": "WARNING", "module": "beat_detection", "message": "BPM 0.00 outside valid range [60, 200], using default 120 BPM", "job_id": "84b5c376-4a3c-45af-b886-7f709bf86921", "taskName": "Task-34"}
{"timestamp": "2025-11-14T22:16:54.135470Z", "level": "WARNING", "module": "beat_detection", "message": "Low confidence (0.50) in beat detection, using tempo-based boundaries", "job_id": "84b5c376-4a3c-45af-b886-7f709bf86921", "taskName": "Task-34"}
{"timestamp": "2025-11-14T22:16:54.135514Z", "level": "INFO", "module": "parser", "message": "Beat detection complete: BPM=120.00, beats=20, confidence=0.50", "job_id": "84b5c376-4a3c-45af-b886-7f709bf86921", "taskName": "Task-34"}
{"timestamp": "2025-11-14T22:16:54.135546Z", "level": "INFO", "module": "parser", "message": "Analyzing song structure...", "job_id": "84b5c376-4a3c-45af-b886-7f709bf86921", "taskName": "Task-34"}
{"timestamp": "2025-11-14T22:16:54.176391Z", "level": "INFO", "module": "structure_analysis", "message": "Structure analysis complete: 122 segments", "job_id": "84b5c376-4a3c-45af-b886-7f709bf86921", "taskName": "Task-34"}
{"timestamp": "2025-11-14T22:16:54.176464Z", "level": "INFO", "module": "parser", "message": "Structure analysis complete: 122 segments", "job_id": "84b5c376-4a3c-45af-b886-7f709bf86921", "taskName": "Task-34"}
{"timestamp": "2025-11-14T22:16:54.176499Z", "level": "INFO", "module": "parser", "message": "Extracting lyrics...", "job_id": "84b5c376-4a3c-45af-b886-7f709bf86921", "taskName": "Task-34"}
{"timestamp": "2025-11-14T22:16:54.176988Z", "level": "INFO", "module": "whisper_client", "message": "Created temporary audio file: /var/folders/d5/vzgmwykd2jsbxfy1k60z4ds00000gq/T/tmpk4h76npl.mp3", "job_id": "84b5c376-4a3c-45af-b886-7f709bf86921", "taskName": "Task-34"}
{"timestamp": "2025-11-14T22:16:55.547554Z", "level": "INFO", "module": "whisper_client", "message": "Whisper API response received: 1 words", "job_id": "84b5c376-4a3c-45af-b886-7f709bf86921", "taskName": "Task-34"}
{"timestamp": "2025-11-14T22:16:55.547912Z", "level": "ERROR", "module": "whisper_client", "message": "Whisper API call failed: 'TranscriptionWord' object has no attribute 'get'", "job_id": "84b5c376-4a3c-45af-b886-7f709bf86921", "taskName": "Task-34"}
{"timestamp": "2025-11-14T22:16:55.548632Z", "level": "WARNING", "module": "whisper_client", "message": "Whisper API call failed after retries: Failed to extract lyrics: 'TranscriptionWord' object has no attribute 'get', returning empty lyrics", "job_id": "84b5c376-4a3c-45af-b886-7f709bf86921", "taskName": "Task-34"}
{"timestamp": "2025-11-14T22:16:55.548812Z", "level": "INFO", "module": "parser", "message": "Lyrics extraction complete: 0 words", "job_id": "84b5c376-4a3c-45af-b886-7f709bf86921", "taskName": "Task-34"}
{"timestamp": "2025-11-14T22:16:55.548910Z", "level": "INFO", "module": "parser", "message": "Classifying mood...", "job_id": "84b5c376-4a3c-45af-b886-7f709bf86921", "taskName": "Task-34"}
{"timestamp": "2025-11-14T22:16:55.572421Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=dark, secondary=energetic, energy=high, confidence=0.77", "job_id": "84b5c376-4a3c-45af-b886-7f709bf86921", "taskName": "Task-34"}
{"timestamp": "2025-11-14T22:16:55.572568Z", "level": "INFO", "module": "parser", "message": "Mood classification complete: dark, confidence=0.77", "job_id": "84b5c376-4a3c-45af-b886-7f709bf86921", "taskName": "Task-34"}
{"timestamp": "2025-11-14T22:16:55.572640Z", "level": "INFO", "module": "parser", "message": "Generating clip boundaries...", "job_id": "84b5c376-4a3c-45af-b886-7f709bf86921", "taskName": "Task-34"}
{"timestamp": "2025-11-14T22:16:55.572734Z", "level": "WARNING", "module": "boundaries", "message": "Only 2 boundaries generated, need 3. Regenerating with reduced duration per clip.", "job_id": "84b5c376-4a3c-45af-b886-7f709bf86921", "taskName": "Task-34"}
{"timestamp": "2025-11-14T22:16:55.572823Z", "level": "INFO", "module": "boundaries", "message": "Generated 3 clip boundaries", "job_id": "84b5c376-4a3c-45af-b886-7f709bf86921", "taskName": "Task-34"}
{"timestamp": "2025-11-14T22:16:55.572882Z", "level": "INFO", "module": "parser", "message": "Boundary generation complete: 3 boundaries", "job_id": "84b5c376-4a3c-45af-b886-7f709bf86921", "taskName": "Task-34"}
{"timestamp": "2025-11-14T22:16:55.572962Z", "level": "INFO", "module": "parser", "message": "Audio analysis complete for job 84b5c376-4a3c-45af-b886-7f709bf86921: duration=10.00s, processing_time=1.45s, beats=20, segments=122, lyrics=0, boundaries=3", "job_id": "84b5c376-4a3c-45af-b886-7f709bf86921", "taskName": "Task-34"}
{"timestamp": "2025-11-14T22:16:55.574898Z", "level": "INFO", "module": "parser", "message": "Loading audio file for job 4abf4815-b6b9-4ee1-9915-71fc4cbc4cad", "job_id": "4abf4815-b6b9-4ee1-9915-71fc4cbc4cad", "taskName": "Task-37"}
{"timestamp": "2025-11-14T22:16:55.575029Z", "level": "ERROR", "module": "parser", "message": "Audio parsing failed for job 4abf4815-b6b9-4ee1-9915-71fc4cbc4cad: Error opening <_io.BytesIO object at 0x118f53b50>: Format not recognised.", "job_id": "4abf4815-b6b9-4ee1-9915-71fc4cbc4cad", "taskName": "Task-37"}
{"timestamp": "2025-11-14T22:16:55.575942Z", "level": "INFO", "module": "parser", "message": "Loading audio file for job d461cbe3-4a6a-4b7c-90a8-2db0e60efa50", "job_id": "d461cbe3-4a6a-4b7c-90a8-2db0e60efa50", "taskName": "Task-40"}
{"timestamp": "2025-11-14T22:16:55.576036Z", "level": "ERROR", "module": "parser", "message": "Audio parsing failed for job d461cbe3-4a6a-4b7c-90a8-2db0e60efa50: Error opening <_io.BytesIO object at 0x118f53fb0>: Format not recognised.", "job_id": "d461cbe3-4a6a-4b7c-90a8-2db0e60efa50", "taskName": "Task-40"}
{"timestamp": "2025-11-14T22:16:55.666374Z", "level": "INFO", "module": "structure_analysis", "message": "Structure analysis complete: 6 segments", "taskName": null}
{"timestamp": "2025-11-14T22:16:55.704718Z", "level": "INFO", "module": "structure_analysis", "message": "Structure analysis complete: 3 segments", "taskName": null}
{"timestamp": "2025-11-14T22:16:55.733092Z", "level": "INFO", "module": "structure_analysis", "message": "Structure analysis complete: 4 segments", "taskName": null}
{"timestamp": "2025-11-14T22:16:55.734401Z", "level": "WARNING", "module": "structure_analysis", "message": "Agglomerative clustering failed: Found array with 1 sample(s) (shape=(1, 1)) while a minimum of 2 is required by AgglomerativeClustering., using simple segmentation", "taskName": null}
{"timestamp": "2025-11-14T22:16:55.734447Z", "level": "WARNING", "module": "structure_analysis", "message": "Empty audio detected, returning single-segment fallback", "taskName": null}
{"timestamp": "2025-11-14T22:16:55.753681Z", "level": "INFO", "module": "structure_analysis", "message": "Structure analysis complete: 3 segments", "taskName": null}
{"timestamp": "2025-11-14T22:16:55.756305Z", "level": "INFO", "module": "whisper_client", "message": "Created temporary audio file: /var/folders/d5/vzgmwykd2jsbxfy1k60z4ds00000gq/T/tmpw1ewcjlg.mp3", "taskName": "Task-46"}
{"timestamp": "2025-11-14T22:16:55.756651Z", "level": "INFO", "module": "whisper_client", "message": "Whisper API response received: 0 words", "taskName": "Task-46"}
{"timestamp": "2025-11-14T22:16:55.756684Z", "level": "INFO", "module": "whisper_client", "message": "Extracted 0 lyrics from audio", "taskName": "Task-46"}
{"timestamp": "2025-11-14T22:17:02.393033Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job 74e07d91-e746-4eb7-81a2-05f20375486b: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(74e07d91-e746-4eb7-81a2-05f20375486b) is not present in table \"jobs\".'}", "taskName": "Task-46", "job_id": "74e07d91-e746-4eb7-81a2-05f20375486b", "error": "Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(74e07d91-e746-4eb7-81a2-05f20375486b) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-14T22:17:02.394198Z", "level": "ERROR", "module": "whisper_client", "message": "Whisper API call failed: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(74e07d91-e746-4eb7-81a2-05f20375486b) is not present in table \"jobs\".'}", "taskName": "Task-46", "job_id": "74e07d91-e746-4eb7-81a2-05f20375486b"}
{"timestamp": "2025-11-14T22:17:02.394909Z", "level": "WARNING", "module": "whisper_client", "message": "Whisper API call failed after retries: Failed to extract lyrics: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(74e07d91-e746-4eb7-81a2-05f20375486b) is not present in table \"jobs\".'}, returning empty lyrics", "taskName": "Task-46", "job_id": "74e07d91-e746-4eb7-81a2-05f20375486b"}
{"timestamp": "2025-11-14T22:17:02.401272Z", "level": "INFO", "module": "whisper_client", "message": "Created temporary audio file: /var/folders/d5/vzgmwykd2jsbxfy1k60z4ds00000gq/T/tmpwyg9fkr2.mp3", "taskName": "Task-49"}
{"timestamp": "2025-11-14T22:17:02.401821Z", "level": "INFO", "module": "whisper_client", "message": "Whisper API response received: 4 words", "taskName": "Task-49"}
{"timestamp": "2025-11-14T22:17:02.401962Z", "level": "INFO", "module": "whisper_client", "message": "Extracted 2 lyrics from audio", "taskName": "Task-49"}
{"timestamp": "2025-11-14T22:17:02.402079Z", "level": "INFO", "module": "whisper_client", "message": "Tracked Whisper API cost: $0.006 for 60.00s audio", "taskName": "Task-49"}
{"timestamp": "2025-11-14T22:17:02.404837Z", "level": "INFO", "module": "whisper_client", "message": "Created temporary audio file: /var/folders/d5/vzgmwykd2jsbxfy1k60z4ds00000gq/T/tmp7_r6qd7y.mp3", "taskName": "Task-52"}
{"timestamp": "2025-11-14T22:17:02.405241Z", "level": "ERROR", "module": "whisper_client", "message": "Whisper API call failed: API Error", "taskName": "Task-52", "job_id": "75e7b9db-f4bf-465e-9fac-a34bdc890da9"}
{"timestamp": "2025-11-14T22:17:02.405456Z", "level": "WARNING", "module": "whisper_client", "message": "Whisper API call failed after retries: Failed to extract lyrics: API Error, returning empty lyrics", "taskName": "Task-52", "job_id": "75e7b9db-f4bf-465e-9fac-a34bdc890da9"}
{"timestamp": "2025-11-14T22:17:02.408000Z", "level": "INFO", "module": "whisper_client", "message": "Created temporary audio file: /var/folders/d5/vzgmwykd2jsbxfy1k60z4ds00000gq/T/tmpuz4jefl3.mp3", "taskName": "Task-55"}
{"timestamp": "2025-11-14T22:17:02.408354Z", "level": "INFO", "module": "whisper_client", "message": "Whisper API response received: 1 words", "taskName": "Task-55"}
{"timestamp": "2025-11-14T22:17:02.408435Z", "level": "INFO", "module": "whisper_client", "message": "Extracted 1 lyrics from audio", "taskName": "Task-55"}
{"timestamp": "2025-11-14T22:17:02.409108Z", "level": "ERROR", "module": "whisper_client", "message": "Whisper API call failed: object MagicMock can't be used in 'await' expression", "taskName": "Task-55", "job_id": "c620f91f-f956-4bf7-aba5-68c2e5f7655b"}
{"timestamp": "2025-11-14T22:17:02.409274Z", "level": "WARNING", "module": "whisper_client", "message": "Whisper API call failed after retries: Failed to extract lyrics: object MagicMock can't be used in 'await' expression, returning empty lyrics", "taskName": "Task-55", "job_id": "c620f91f-f956-4bf7-aba5-68c2e5f7655b"}
{"timestamp": "2025-11-14T22:17:59.280840Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-3", "request_id": "27f0f5ae-136e-46bd-abea-36310d0132b3", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T22:18:02.529033Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "anyio.from_thread.BlockingPortal._call_func", "request_id": "df5e4f18-8f17-4245-bd97-a4ba585f2cca", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T22:18:03.608576Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "anyio.from_thread.BlockingPortal._call_func", "request_id": "6104937c-e226-499a-92d7-05ee7e149963", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T22:18:03.610231Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "anyio.from_thread.BlockingPortal._call_func", "request_id": "3cf89606-420d-4b2c-b11b-cc5676244a3f", "method": "GET", "path": "/api/v1/jobs/invalid-job-id"}
{"timestamp": "2025-11-14T22:18:03.611720Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "anyio.from_thread.BlockingPortal._call_func", "request_id": "588cbd23-3d9a-4b3f-94dc-5fe2ef1ac8b8", "method": "GET", "path": "/api/v1/jobs"}
{"timestamp": "2025-11-14T22:18:03.613495Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "anyio.from_thread.BlockingPortal._call_func", "request_id": "bd4c67c2-739a-4142-b8a9-54ba24e10436", "method": "GET", "path": "/api/v1/jobs/invalid-job-id/stream"}
{"timestamp": "2025-11-14T22:18:13.826040Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-5", "request_id": "1af946c4-2b88-438c-978f-13a0f253d6aa", "method": "GET", "path": "/"}
{"timestamp": "2025-11-14T22:18:13.996918Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-7", "request_id": "0e24084b-fce0-4c0c-bf7b-acc0bc9c7f3f", "method": "GET", "path": "/favicon.ico"}
{"timestamp": "2025-11-14T22:25:39.593667Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-9", "request_id": "520954a0-4d1c-4ab0-bb51-77d641a5df38", "method": "OPTIONS", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T22:25:39.599306Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-11", "request_id": "540ca985-951c-4ff3-ac72-66d1d4599bc1", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T22:25:40.120798Z", "level": "WARNING", "module": "dependencies", "message": "JWT validation failed", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/jose/jws.py\", line 264, in _verify_signature\n    raise JWSSignatureError()\njose.exceptions.JWSSignatureError\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/jose/jwt.py\", line 159, in decode\n    payload = jws.verify(token, key, algorithms, verify=verify_signature)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/jose/jws.py\", line 77, in verify\n    _verify_signature(signing_input, header, signature, key, algorithms)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/jose/jws.py\", line 266, in _verify_signature\n    raise JWSError(\"Signature verification failed.\")\njose.exceptions.JWSError: Signature verification failed.\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/api_gateway/dependencies.py\", line 60, in get_current_user\n    payload = jwt.decode(\n        token,\n        settings.supabase_jwt_secret,\n        algorithms=[\"HS256\"]\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/jose/jwt.py\", line 161, in decode\n    raise JWTError(e)\njose.exceptions.JWTError: Signature verification failed."}
{"timestamp": "2025-11-14T22:26:16.081541Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-53", "request_id": "5eec3d65-efe2-4e77-af7f-0b1175a7e2ac", "method": "OPTIONS", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T22:26:16.086591Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-55", "request_id": "5fbd2eed-83dd-4215-8178-8ae05f92573d", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T22:26:16.252218Z", "level": "WARNING", "module": "dependencies", "message": "JWT validation failed", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/jose/jws.py\", line 264, in _verify_signature\n    raise JWSSignatureError()\njose.exceptions.JWSSignatureError\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/jose/jwt.py\", line 159, in decode\n    payload = jws.verify(token, key, algorithms, verify=verify_signature)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/jose/jws.py\", line 77, in verify\n    _verify_signature(signing_input, header, signature, key, algorithms)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/jose/jws.py\", line 266, in _verify_signature\n    raise JWSError(\"Signature verification failed.\")\njose.exceptions.JWSError: Signature verification failed.\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/api_gateway/dependencies.py\", line 60, in get_current_user\n    payload = jwt.decode(\n        token,\n        settings.supabase_jwt_secret,\n        algorithms=[\"HS256\"]\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/jose/jwt.py\", line 161, in decode\n    raise JWTError(e)\njose.exceptions.JWTError: Signature verification failed."}
{"timestamp": "2025-11-14T22:27:15.303195Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-101", "request_id": "778c47d9-6fad-4f87-8ba5-6ac89c62abe2", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T22:29:23.186957Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-105", "request_id": "5fab30c5-7740-415b-8281-94b6fe3a106d", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T22:29:23.326569Z", "level": "WARNING", "module": "dependencies", "message": "JWT validation failed", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/jose/jws.py\", line 264, in _verify_signature\n    raise JWSSignatureError()\njose.exceptions.JWSSignatureError\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/jose/jwt.py\", line 159, in decode\n    payload = jws.verify(token, key, algorithms, verify=verify_signature)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/jose/jws.py\", line 77, in verify\n    _verify_signature(signing_input, header, signature, key, algorithms)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/jose/jws.py\", line 266, in _verify_signature\n    raise JWSError(\"Signature verification failed.\")\njose.exceptions.JWSError: Signature verification failed.\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/api_gateway/dependencies.py\", line 60, in get_current_user\n    payload = jwt.decode(\n        token,\n        settings.supabase_jwt_secret,\n        algorithms=[\"HS256\"]\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/jose/jwt.py\", line 161, in decode\n    raise JWTError(e)\njose.exceptions.JWTError: Signature verification failed."}
{"timestamp": "2025-11-14T22:32:35.574336Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-3", "request_id": "bd4dd329-1b80-45f9-aba2-68f9d4121c25", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T22:33:53.205350Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-5", "request_id": "60cc0cf4-9859-4491-84fb-df3be803e2c7", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T22:33:53.758717Z", "level": "WARNING", "module": "dependencies", "message": "JWT validation failed", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/api_gateway/dependencies.py\", line 60, in get_current_user\n    payload = jwt.decode(\n        token,\n        settings.supabase_jwt_secret,\n        algorithms=[\"HS256\"]\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/jose/jwt.py\", line 174, in decode\n    _validate_claims(\n    ~~~~~~~~~~~~~~~~^\n        claims,\n        ^^^^^^^\n    ...<5 lines>...\n        options=defaults,\n        ^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/jose/jwt.py\", line 500, in _validate_claims\n    _validate_aud(claims, audience=audience)\n    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/jose/jwt.py\", line 367, in _validate_aud\n    raise JWTClaimsError(\"Invalid audience\")\njose.exceptions.JWTClaimsError: Invalid audience"}
{"timestamp": "2025-11-14T22:34:59.189187Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-3", "request_id": "ac413801-c7eb-4569-b864-dcb6633a626d", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T22:35:32.233251Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-3", "request_id": "38a6feae-ddd0-413a-a70b-e6942be04c01", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T22:35:32.854429Z", "level": "ERROR", "module": "upload", "message": "Failed to create job", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "job_id": "2582c45d-91fc-415a-90f6-b6d2cc40c831", "user_id": "1ca24433-173e-4cea-8e37-465a08b18a79", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/api_gateway/routes/upload.py\", line 51, in upload_audio\n    validate_audio_file(audio_file.file, max_size_mb=10)\n    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/validation.py\", line 68, in validate_audio_file\n    mime_type, _ = mimetypes.guess_type(file.name)\n                   ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/mimetypes.py\", line 324, in guess_type\n    return _db.guess_type(url, strict)\n           ~~~~~~~~~~~~~~^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/mimetypes.py\", line 125, in guess_type\n    url = os.fspath(url)\nTypeError: expected str, bytes or os.PathLike object, not int"}
{"timestamp": "2025-11-14T22:36:42.840787Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-3", "request_id": "16983964-9852-4f93-be3e-c269d423d2a1", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T22:37:09.696633Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-3", "request_id": "3a92e923-a67a-49f0-b883-3d5fab018fe4", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T22:37:11.204883Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in upload_file: StorageClient.upload_file() got an unexpected keyword argument 'file_obj'", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "error": "StorageClient.upload_file() got an unexpected keyword argument 'file_obj'"}
{"timestamp": "2025-11-14T22:37:11.209242Z", "level": "ERROR", "module": "upload", "message": "Failed to create job", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "job_id": "059aeb05-995b-4492-8c19-491efcf12c8a", "user_id": "1ca24433-173e-4cea-8e37-465a08b18a79", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/api_gateway/routes/upload.py\", line 91, in upload_audio\n    audio_url = await storage_client.upload_file(\n                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/retry.py\", line 49, in async_wrapper\n    return await func(*args, **kwargs)\n                 ~~~~^^^^^^^^^^^^^^^^^\nTypeError: StorageClient.upload_file() got an unexpected keyword argument 'file_obj'"}
{"timestamp": "2025-11-14T22:37:57.675045Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-3", "request_id": "83a1ef54-e5a5-447e-b2cc-3b2837675873", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T22:39:05.644747Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-3", "request_id": "d97bb2d9-1cc5-43c6-b149-4baf31f71c34", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T22:39:07.853998Z", "level": "ERROR", "module": "storage", "message": "Failed to upload file to audio-uploads/1ca24433-173e-4cea-8e37-465a08b18a79/408d9057-808b-48d6-beb5-6f7b85c9789a/Kendrick Lamar - Not Like Us [H58vbez_m4E].mp3: {'statusCode': 400, 'error': InvalidKey, 'message': Invalid key: 1ca24433-173e-4cea-8e37-465a08b18a79/408d9057-808b-48d6-beb5-6f7b85c9789a/Kendrick Lamar - Not Like Us [H58vbez_m4E].mp3}", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "bucket": "audio-uploads", "path": "1ca24433-173e-4cea-8e37-465a08b18a79/408d9057-808b-48d6-beb5-6f7b85c9789a/Kendrick Lamar - Not Like Us [H58vbez_m4E].mp3", "error": "{'statusCode': 400, 'error': InvalidKey, 'message': Invalid key: 1ca24433-173e-4cea-8e37-465a08b18a79/408d9057-808b-48d6-beb5-6f7b85c9789a/Kendrick Lamar - Not Like Us [H58vbez_m4E].mp3}"}
{"timestamp": "2025-11-14T22:39:07.854143Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/3 for upload_file after 2s delay", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "error": "Failed to upload file: {'statusCode': 400, 'error': InvalidKey, 'message': Invalid key: 1ca24433-173e-4cea-8e37-465a08b18a79/408d9057-808b-48d6-beb5-6f7b85c9789a/Kendrick Lamar - Not Like Us [H58vbez_m4E].mp3}", "attempt": 1}
{"timestamp": "2025-11-14T22:39:10.164995Z", "level": "ERROR", "module": "storage", "message": "Failed to upload file to audio-uploads/1ca24433-173e-4cea-8e37-465a08b18a79/408d9057-808b-48d6-beb5-6f7b85c9789a/Kendrick Lamar - Not Like Us [H58vbez_m4E].mp3: {'statusCode': 400, 'error': InvalidKey, 'message': Invalid key: 1ca24433-173e-4cea-8e37-465a08b18a79/408d9057-808b-48d6-beb5-6f7b85c9789a/Kendrick Lamar - Not Like Us [H58vbez_m4E].mp3}", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "bucket": "audio-uploads", "path": "1ca24433-173e-4cea-8e37-465a08b18a79/408d9057-808b-48d6-beb5-6f7b85c9789a/Kendrick Lamar - Not Like Us [H58vbez_m4E].mp3", "error": "{'statusCode': 400, 'error': InvalidKey, 'message': Invalid key: 1ca24433-173e-4cea-8e37-465a08b18a79/408d9057-808b-48d6-beb5-6f7b85c9789a/Kendrick Lamar - Not Like Us [H58vbez_m4E].mp3}"}
{"timestamp": "2025-11-14T22:39:10.165164Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 2/3 for upload_file after 4s delay", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "error": "Failed to upload file: {'statusCode': 400, 'error': InvalidKey, 'message': Invalid key: 1ca24433-173e-4cea-8e37-465a08b18a79/408d9057-808b-48d6-beb5-6f7b85c9789a/Kendrick Lamar - Not Like Us [H58vbez_m4E].mp3}", "attempt": 2}
{"timestamp": "2025-11-14T22:39:14.792816Z", "level": "ERROR", "module": "storage", "message": "Failed to upload file to audio-uploads/1ca24433-173e-4cea-8e37-465a08b18a79/408d9057-808b-48d6-beb5-6f7b85c9789a/Kendrick Lamar - Not Like Us [H58vbez_m4E].mp3: {'statusCode': 400, 'error': InvalidKey, 'message': Invalid key: 1ca24433-173e-4cea-8e37-465a08b18a79/408d9057-808b-48d6-beb5-6f7b85c9789a/Kendrick Lamar - Not Like Us [H58vbez_m4E].mp3}", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "bucket": "audio-uploads", "path": "1ca24433-173e-4cea-8e37-465a08b18a79/408d9057-808b-48d6-beb5-6f7b85c9789a/Kendrick Lamar - Not Like Us [H58vbez_m4E].mp3", "error": "{'statusCode': 400, 'error': InvalidKey, 'message': Invalid key: 1ca24433-173e-4cea-8e37-465a08b18a79/408d9057-808b-48d6-beb5-6f7b85c9789a/Kendrick Lamar - Not Like Us [H58vbez_m4E].mp3}"}
{"timestamp": "2025-11-14T22:39:14.792988Z", "level": "ERROR", "module": "retry", "message": "All 3 retry attempts failed for upload_file", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "error": "Failed to upload file: {'statusCode': 400, 'error': InvalidKey, 'message': Invalid key: 1ca24433-173e-4cea-8e37-465a08b18a79/408d9057-808b-48d6-beb5-6f7b85c9789a/Kendrick Lamar - Not Like Us [H58vbez_m4E].mp3}"}
{"timestamp": "2025-11-14T22:39:14.799457Z", "level": "ERROR", "module": "upload", "message": "Failed to create job", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "job_id": "408d9057-808b-48d6-beb5-6f7b85c9789a", "user_id": "1ca24433-173e-4cea-8e37-465a08b18a79", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/storage3/_sync/file_api.py\", line 78, in _request\n    response.raise_for_status()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/httpx/_models.py\", line 829, in raise_for_status\n    raise HTTPStatusError(message, request=request, response=self)\nhttpx.HTTPStatusError: Client error '400 Bad Request' for url 'https://hpjpsachyrnzobswmhnh.supabase.co/storage/v1/object/audio-uploads/1ca24433-173e-4cea-8e37-465a08b18a79/408d9057-808b-48d6-beb5-6f7b85c9789a/Kendrick%20Lamar%20-%20Not%20Like%20Us%20%5BH58vbez_m4E%5D.mp3'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/storage.py\", line 126, in upload_file\n    response = await self._execute_sync(_upload)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/storage.py\", line 58, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/storage.py\", line 120, in _upload\n    return self.storage.from_(bucket).upload(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        path=path,\n        ^^^^^^^^^^\n        file=file_data,\n        ^^^^^^^^^^^^^^^\n        file_options={\"content-type\": content_type}\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/storage3/_sync/file_api.py\", line 566, in upload\n    return self._upload_or_update(\"POST\", path_parts, file, file_options)\n           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/storage3/_sync/file_api.py\", line 538, in _upload_or_update\n    response = self._request(\n        method, [\"object\", self.id, *path], files=files, headers=headers, data=_data\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/storage3/_sync/file_api.py\", line 81, in _request\n    raise StorageApiError(\n        resp[\"message\"], resp[\"error\"], resp[\"statusCode\"]\n    ) from exc\nstorage3.exceptions.StorageApiError: {'statusCode': 400, 'error': InvalidKey, 'message': Invalid key: 1ca24433-173e-4cea-8e37-465a08b18a79/408d9057-808b-48d6-beb5-6f7b85c9789a/Kendrick Lamar - Not Like Us [H58vbez_m4E].mp3}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/api_gateway/routes/upload.py\", line 96, in upload_audio\n    audio_url = await storage_client.upload_file(\n                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/retry.py\", line 76, in async_wrapper\n    raise last_exception\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/retry.py\", line 49, in async_wrapper\n    return await func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/storage.py\", line 148, in upload_file\n    raise RetryableError(f\"Failed to upload file: {str(e)}\") from e\nshared.errors.RetryableError: Failed to upload file: {'statusCode': 400, 'error': InvalidKey, 'message': Invalid key: 1ca24433-173e-4cea-8e37-465a08b18a79/408d9057-808b-48d6-beb5-6f7b85c9789a/Kendrick Lamar - Not Like Us [H58vbez_m4E].mp3}"}
{"timestamp": "2025-11-14T22:41:10.850664Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-3", "request_id": "4d2b4b54-f4de-47cf-a04b-b0d768294411", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T22:41:12.874373Z", "level": "ERROR", "module": "storage", "message": "Failed to upload file to audio-uploads/1ca24433-173e-4cea-8e37-465a08b18a79/b5995910-a53f-49e3-b3af-84d5f641fc99/Kendrick%20Lamar%20-%20Not%20Like%20Us%20%5BH58vbez_m4E%5D.mp3: {'statusCode': 400, 'error': InvalidKey, 'message': Invalid key: 1ca24433-173e-4cea-8e37-465a08b18a79/b5995910-a53f-49e3-b3af-84d5f641fc99/Kendrick Lamar - Not Like Us [H58vbez_m4E].mp3}", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "bucket": "audio-uploads", "path": "1ca24433-173e-4cea-8e37-465a08b18a79/b5995910-a53f-49e3-b3af-84d5f641fc99/Kendrick%20Lamar%20-%20Not%20Like%20Us%20%5BH58vbez_m4E%5D.mp3", "error": "{'statusCode': 400, 'error': InvalidKey, 'message': Invalid key: 1ca24433-173e-4cea-8e37-465a08b18a79/b5995910-a53f-49e3-b3af-84d5f641fc99/Kendrick Lamar - Not Like Us [H58vbez_m4E].mp3}"}
{"timestamp": "2025-11-14T22:41:12.874818Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/3 for upload_file after 2s delay", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "error": "Failed to upload file: {'statusCode': 400, 'error': InvalidKey, 'message': Invalid key: 1ca24433-173e-4cea-8e37-465a08b18a79/b5995910-a53f-49e3-b3af-84d5f641fc99/Kendrick Lamar - Not Like Us [H58vbez_m4E].mp3}", "attempt": 1}
{"timestamp": "2025-11-14T22:41:15.431624Z", "level": "ERROR", "module": "storage", "message": "Failed to upload file to audio-uploads/1ca24433-173e-4cea-8e37-465a08b18a79/b5995910-a53f-49e3-b3af-84d5f641fc99/Kendrick%20Lamar%20-%20Not%20Like%20Us%20%5BH58vbez_m4E%5D.mp3: {'statusCode': 400, 'error': InvalidKey, 'message': Invalid key: 1ca24433-173e-4cea-8e37-465a08b18a79/b5995910-a53f-49e3-b3af-84d5f641fc99/Kendrick Lamar - Not Like Us [H58vbez_m4E].mp3}", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "bucket": "audio-uploads", "path": "1ca24433-173e-4cea-8e37-465a08b18a79/b5995910-a53f-49e3-b3af-84d5f641fc99/Kendrick%20Lamar%20-%20Not%20Like%20Us%20%5BH58vbez_m4E%5D.mp3", "error": "{'statusCode': 400, 'error': InvalidKey, 'message': Invalid key: 1ca24433-173e-4cea-8e37-465a08b18a79/b5995910-a53f-49e3-b3af-84d5f641fc99/Kendrick Lamar - Not Like Us [H58vbez_m4E].mp3}"}
{"timestamp": "2025-11-14T22:41:15.431920Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 2/3 for upload_file after 4s delay", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "error": "Failed to upload file: {'statusCode': 400, 'error': InvalidKey, 'message': Invalid key: 1ca24433-173e-4cea-8e37-465a08b18a79/b5995910-a53f-49e3-b3af-84d5f641fc99/Kendrick Lamar - Not Like Us [H58vbez_m4E].mp3}", "attempt": 2}
{"timestamp": "2025-11-14T22:41:19.954485Z", "level": "ERROR", "module": "storage", "message": "Failed to upload file to audio-uploads/1ca24433-173e-4cea-8e37-465a08b18a79/b5995910-a53f-49e3-b3af-84d5f641fc99/Kendrick%20Lamar%20-%20Not%20Like%20Us%20%5BH58vbez_m4E%5D.mp3: {'statusCode': 400, 'error': InvalidKey, 'message': Invalid key: 1ca24433-173e-4cea-8e37-465a08b18a79/b5995910-a53f-49e3-b3af-84d5f641fc99/Kendrick Lamar - Not Like Us [H58vbez_m4E].mp3}", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "bucket": "audio-uploads", "path": "1ca24433-173e-4cea-8e37-465a08b18a79/b5995910-a53f-49e3-b3af-84d5f641fc99/Kendrick%20Lamar%20-%20Not%20Like%20Us%20%5BH58vbez_m4E%5D.mp3", "error": "{'statusCode': 400, 'error': InvalidKey, 'message': Invalid key: 1ca24433-173e-4cea-8e37-465a08b18a79/b5995910-a53f-49e3-b3af-84d5f641fc99/Kendrick Lamar - Not Like Us [H58vbez_m4E].mp3}"}
{"timestamp": "2025-11-14T22:41:19.954623Z", "level": "ERROR", "module": "retry", "message": "All 3 retry attempts failed for upload_file", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "error": "Failed to upload file: {'statusCode': 400, 'error': InvalidKey, 'message': Invalid key: 1ca24433-173e-4cea-8e37-465a08b18a79/b5995910-a53f-49e3-b3af-84d5f641fc99/Kendrick Lamar - Not Like Us [H58vbez_m4E].mp3}"}
{"timestamp": "2025-11-14T22:41:19.964085Z", "level": "ERROR", "module": "upload", "message": "Failed to create job", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "job_id": "b5995910-a53f-49e3-b3af-84d5f641fc99", "user_id": "1ca24433-173e-4cea-8e37-465a08b18a79", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/storage3/_sync/file_api.py\", line 78, in _request\n    response.raise_for_status()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/httpx/_models.py\", line 829, in raise_for_status\n    raise HTTPStatusError(message, request=request, response=self)\nhttpx.HTTPStatusError: Client error '400 Bad Request' for url 'https://hpjpsachyrnzobswmhnh.supabase.co/storage/v1/object/audio-uploads/1ca24433-173e-4cea-8e37-465a08b18a79/b5995910-a53f-49e3-b3af-84d5f641fc99/Kendrick%20Lamar%20-%20Not%20Like%20Us%20%5BH58vbez_m4E%5D.mp3'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/storage.py\", line 126, in upload_file\n    response = await self._execute_sync(_upload)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/storage.py\", line 58, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/storage.py\", line 120, in _upload\n    return self.storage.from_(bucket).upload(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        path=path,\n        ^^^^^^^^^^\n        file=file_data,\n        ^^^^^^^^^^^^^^^\n        file_options={\"content-type\": content_type}\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/storage3/_sync/file_api.py\", line 566, in upload\n    return self._upload_or_update(\"POST\", path_parts, file, file_options)\n           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/storage3/_sync/file_api.py\", line 538, in _upload_or_update\n    response = self._request(\n        method, [\"object\", self.id, *path], files=files, headers=headers, data=_data\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/storage3/_sync/file_api.py\", line 81, in _request\n    raise StorageApiError(\n        resp[\"message\"], resp[\"error\"], resp[\"statusCode\"]\n    ) from exc\nstorage3.exceptions.StorageApiError: {'statusCode': 400, 'error': InvalidKey, 'message': Invalid key: 1ca24433-173e-4cea-8e37-465a08b18a79/b5995910-a53f-49e3-b3af-84d5f641fc99/Kendrick Lamar - Not Like Us [H58vbez_m4E].mp3}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/api_gateway/routes/upload.py\", line 100, in upload_audio\n    audio_url = await storage_client.upload_file(\n                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/retry.py\", line 76, in async_wrapper\n    raise last_exception\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/retry.py\", line 49, in async_wrapper\n    return await func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/storage.py\", line 148, in upload_file\n    raise RetryableError(f\"Failed to upload file: {str(e)}\") from e\nshared.errors.RetryableError: Failed to upload file: {'statusCode': 400, 'error': InvalidKey, 'message': Invalid key: 1ca24433-173e-4cea-8e37-465a08b18a79/b5995910-a53f-49e3-b3af-84d5f641fc99/Kendrick Lamar - Not Like Us [H58vbez_m4E].mp3}"}
{"timestamp": "2025-11-14T22:41:37.159777Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-45", "request_id": "c7cdcb26-3a96-4228-92b7-00b2eaee2a3b", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T22:41:38.695155Z", "level": "ERROR", "module": "storage", "message": "Failed to upload file to audio-uploads/1ca24433-173e-4cea-8e37-465a08b18a79/7c60815b-1270-4bf0-a7e5-6710677cc183/Kendrick%20Lamar%20-%20Not%20Like%20Us%20%5BH58vbez_m4E%5D.mp3: {'statusCode': 400, 'error': InvalidKey, 'message': Invalid key: 1ca24433-173e-4cea-8e37-465a08b18a79/7c60815b-1270-4bf0-a7e5-6710677cc183/Kendrick Lamar - Not Like Us [H58vbez_m4E].mp3}", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "bucket": "audio-uploads", "path": "1ca24433-173e-4cea-8e37-465a08b18a79/7c60815b-1270-4bf0-a7e5-6710677cc183/Kendrick%20Lamar%20-%20Not%20Like%20Us%20%5BH58vbez_m4E%5D.mp3", "error": "{'statusCode': 400, 'error': InvalidKey, 'message': Invalid key: 1ca24433-173e-4cea-8e37-465a08b18a79/7c60815b-1270-4bf0-a7e5-6710677cc183/Kendrick Lamar - Not Like Us [H58vbez_m4E].mp3}"}
{"timestamp": "2025-11-14T22:41:38.695479Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/3 for upload_file after 2s delay", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "error": "Failed to upload file: {'statusCode': 400, 'error': InvalidKey, 'message': Invalid key: 1ca24433-173e-4cea-8e37-465a08b18a79/7c60815b-1270-4bf0-a7e5-6710677cc183/Kendrick Lamar - Not Like Us [H58vbez_m4E].mp3}", "attempt": 1}
{"timestamp": "2025-11-14T22:41:41.112463Z", "level": "ERROR", "module": "storage", "message": "Failed to upload file to audio-uploads/1ca24433-173e-4cea-8e37-465a08b18a79/7c60815b-1270-4bf0-a7e5-6710677cc183/Kendrick%20Lamar%20-%20Not%20Like%20Us%20%5BH58vbez_m4E%5D.mp3: {'statusCode': 400, 'error': InvalidKey, 'message': Invalid key: 1ca24433-173e-4cea-8e37-465a08b18a79/7c60815b-1270-4bf0-a7e5-6710677cc183/Kendrick Lamar - Not Like Us [H58vbez_m4E].mp3}", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "bucket": "audio-uploads", "path": "1ca24433-173e-4cea-8e37-465a08b18a79/7c60815b-1270-4bf0-a7e5-6710677cc183/Kendrick%20Lamar%20-%20Not%20Like%20Us%20%5BH58vbez_m4E%5D.mp3", "error": "{'statusCode': 400, 'error': InvalidKey, 'message': Invalid key: 1ca24433-173e-4cea-8e37-465a08b18a79/7c60815b-1270-4bf0-a7e5-6710677cc183/Kendrick Lamar - Not Like Us [H58vbez_m4E].mp3}"}
{"timestamp": "2025-11-14T22:41:41.112569Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 2/3 for upload_file after 4s delay", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "error": "Failed to upload file: {'statusCode': 400, 'error': InvalidKey, 'message': Invalid key: 1ca24433-173e-4cea-8e37-465a08b18a79/7c60815b-1270-4bf0-a7e5-6710677cc183/Kendrick Lamar - Not Like Us [H58vbez_m4E].mp3}", "attempt": 2}
{"timestamp": "2025-11-14T22:41:45.471072Z", "level": "ERROR", "module": "storage", "message": "Failed to upload file to audio-uploads/1ca24433-173e-4cea-8e37-465a08b18a79/7c60815b-1270-4bf0-a7e5-6710677cc183/Kendrick%20Lamar%20-%20Not%20Like%20Us%20%5BH58vbez_m4E%5D.mp3: {'statusCode': 400, 'error': InvalidKey, 'message': Invalid key: 1ca24433-173e-4cea-8e37-465a08b18a79/7c60815b-1270-4bf0-a7e5-6710677cc183/Kendrick Lamar - Not Like Us [H58vbez_m4E].mp3}", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "bucket": "audio-uploads", "path": "1ca24433-173e-4cea-8e37-465a08b18a79/7c60815b-1270-4bf0-a7e5-6710677cc183/Kendrick%20Lamar%20-%20Not%20Like%20Us%20%5BH58vbez_m4E%5D.mp3", "error": "{'statusCode': 400, 'error': InvalidKey, 'message': Invalid key: 1ca24433-173e-4cea-8e37-465a08b18a79/7c60815b-1270-4bf0-a7e5-6710677cc183/Kendrick Lamar - Not Like Us [H58vbez_m4E].mp3}"}
{"timestamp": "2025-11-14T22:41:45.471482Z", "level": "ERROR", "module": "retry", "message": "All 3 retry attempts failed for upload_file", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "error": "Failed to upload file: {'statusCode': 400, 'error': InvalidKey, 'message': Invalid key: 1ca24433-173e-4cea-8e37-465a08b18a79/7c60815b-1270-4bf0-a7e5-6710677cc183/Kendrick Lamar - Not Like Us [H58vbez_m4E].mp3}"}
{"timestamp": "2025-11-14T22:41:45.476215Z", "level": "ERROR", "module": "upload", "message": "Failed to create job", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "job_id": "7c60815b-1270-4bf0-a7e5-6710677cc183", "user_id": "1ca24433-173e-4cea-8e37-465a08b18a79", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/storage3/_sync/file_api.py\", line 78, in _request\n    response.raise_for_status()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/httpx/_models.py\", line 829, in raise_for_status\n    raise HTTPStatusError(message, request=request, response=self)\nhttpx.HTTPStatusError: Client error '400 Bad Request' for url 'https://hpjpsachyrnzobswmhnh.supabase.co/storage/v1/object/audio-uploads/1ca24433-173e-4cea-8e37-465a08b18a79/7c60815b-1270-4bf0-a7e5-6710677cc183/Kendrick%20Lamar%20-%20Not%20Like%20Us%20%5BH58vbez_m4E%5D.mp3'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/storage.py\", line 126, in upload_file\n    response = await self._execute_sync(_upload)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/storage.py\", line 58, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/storage.py\", line 120, in _upload\n    return self.storage.from_(bucket).upload(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        path=path,\n        ^^^^^^^^^^\n        file=file_data,\n        ^^^^^^^^^^^^^^^\n        file_options={\"content-type\": content_type}\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/storage3/_sync/file_api.py\", line 566, in upload\n    return self._upload_or_update(\"POST\", path_parts, file, file_options)\n           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/storage3/_sync/file_api.py\", line 538, in _upload_or_update\n    response = self._request(\n        method, [\"object\", self.id, *path], files=files, headers=headers, data=_data\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/storage3/_sync/file_api.py\", line 81, in _request\n    raise StorageApiError(\n        resp[\"message\"], resp[\"error\"], resp[\"statusCode\"]\n    ) from exc\nstorage3.exceptions.StorageApiError: {'statusCode': 400, 'error': InvalidKey, 'message': Invalid key: 1ca24433-173e-4cea-8e37-465a08b18a79/7c60815b-1270-4bf0-a7e5-6710677cc183/Kendrick Lamar - Not Like Us [H58vbez_m4E].mp3}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/api_gateway/routes/upload.py\", line 100, in upload_audio\n    audio_url = await storage_client.upload_file(\n                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/retry.py\", line 76, in async_wrapper\n    raise last_exception\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/retry.py\", line 49, in async_wrapper\n    return await func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/storage.py\", line 148, in upload_file\n    raise RetryableError(f\"Failed to upload file: {str(e)}\") from e\nshared.errors.RetryableError: Failed to upload file: {'statusCode': 400, 'error': InvalidKey, 'message': Invalid key: 1ca24433-173e-4cea-8e37-465a08b18a79/7c60815b-1270-4bf0-a7e5-6710677cc183/Kendrick Lamar - Not Like Us [H58vbez_m4E].mp3}"}
{"timestamp": "2025-11-14T22:42:47.691323Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-91", "request_id": "988215a3-73d9-423e-9f10-a1b296150e35", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T22:42:48.973646Z", "level": "INFO", "module": "storage", "message": "Uploaded file to audio-uploads/1ca24433-173e-4cea-8e37-465a08b18a79/f77323a9-e366-4504-85ab-54fe097d19c6/KendrickLamar.mp3", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "bucket": "audio-uploads", "path": "1ca24433-173e-4cea-8e37-465a08b18a79/f77323a9-e366-4504-85ab-54fe097d19c6/KendrickLamar.mp3", "size": 4969409}
{"timestamp": "2025-11-14T22:42:55.479811Z", "level": "ERROR", "module": "upload", "message": "Failed to create job", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "job_id": "f77323a9-e366-4504-85ab-54fe097d19c6", "user_id": "1ca24433-173e-4cea-8e37-465a08b18a79", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': \"Could not find the 'estimated_cost' column of 'jobs' in the schema cache\", 'code': 'PGRST204', 'hint': None, 'details': None}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/api_gateway/routes/upload.py\", line 120, in upload_audio\n    await db_client.table(\"jobs\").insert(job_data).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': \"Could not find the 'estimated_cost' column of 'jobs' in the schema cache\", 'code': 'PGRST204', 'hint': None, 'details': None}"}
{"timestamp": "2025-11-14T22:44:00.411727Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-3", "request_id": "3a755882-32b0-42a1-aec0-f94135e31150", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T22:44:01.804058Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "user_id": "1ca24433-173e-4cea-8e37-465a08b18a79", "count": 5, "retry_after": 3189}
{"timestamp": "2025-11-14T22:44:01.807155Z", "level": "ERROR", "module": "upload", "message": "Failed to create job", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "job_id": "de0f35d5-d2fe-4be3-b7f0-e4d7f7fc4d99", "user_id": "1ca24433-173e-4cea-8e37-465a08b18a79", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/api_gateway/routes/upload.py\", line 88, in upload_audio\n    await check_rate_limit(user_id)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/api_gateway/services/rate_limiter.py\", line 56, in check_rate_limit\n    raise RateLimitError(\n    ...<3 lines>...\n    )\nshared.errors.RateLimitError: Rate limit exceeded: 5 jobs per hour"}
{"timestamp": "2025-11-14T22:46:37.500685Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-3", "request_id": "294339c8-8b3a-4d7f-a30a-da5dd630a432", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T22:46:39.007322Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "user_id": "1ca24433-173e-4cea-8e37-465a08b18a79", "count": 5, "retry_after": 3032}
{"timestamp": "2025-11-14T22:46:39.011253Z", "level": "ERROR", "module": "upload", "message": "Failed to create job", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "job_id": "bc86389c-5684-46ed-ab71-e9ffd5ff0f66", "user_id": "1ca24433-173e-4cea-8e37-465a08b18a79", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/api_gateway/routes/upload.py\", line 88, in upload_audio\n    await check_rate_limit(user_id)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/api_gateway/services/rate_limiter.py\", line 56, in check_rate_limit\n    raise RateLimitError(\n    ...<3 lines>...\n    )\nshared.errors.RateLimitError: Rate limit exceeded: 5 jobs per hour"}
{"timestamp": "2025-11-14T22:47:55.884490Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-3", "request_id": "2a8fe622-9cd2-42cc-b0c9-f0f1ad70151c", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T22:47:57.189262Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "user_id": "1ca24433-173e-4cea-8e37-465a08b18a79", "count": 5, "retry_after": 2954}
{"timestamp": "2025-11-14T22:47:57.193446Z", "level": "ERROR", "module": "upload", "message": "Failed to create job", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "job_id": "560eb7e0-207a-40b4-8089-8d814a5cf0db", "user_id": "1ca24433-173e-4cea-8e37-465a08b18a79", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/api_gateway/routes/upload.py\", line 88, in upload_audio\n    await check_rate_limit(user_id)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/api_gateway/services/rate_limiter.py\", line 56, in check_rate_limit\n    raise RateLimitError(\n    ...<3 lines>...\n    )\nshared.errors.RateLimitError: Rate limit exceeded: 5 jobs per hour"}
{"timestamp": "2025-11-14T22:48:10.926221Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-45", "request_id": "d2fbb531-94e7-45fa-afb0-e0ee7b292745", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T22:48:11.588213Z", "level": "WARNING", "module": "rate_limiter", "message": "Rate limit exceeded", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "user_id": "1ca24433-173e-4cea-8e37-465a08b18a79", "count": 5, "retry_after": 2939}
{"timestamp": "2025-11-14T22:48:11.590518Z", "level": "ERROR", "module": "upload", "message": "Failed to create job", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "job_id": "4486753d-55c7-4dd1-9125-c94d95f483fe", "user_id": "1ca24433-173e-4cea-8e37-465a08b18a79", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/api_gateway/routes/upload.py\", line 88, in upload_audio\n    await check_rate_limit(user_id)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/api_gateway/services/rate_limiter.py\", line 56, in check_rate_limit\n    raise RateLimitError(\n    ...<3 lines>...\n    )\nshared.errors.RateLimitError: Rate limit exceeded: 5 jobs per hour"}
{"timestamp": "2025-11-14T22:49:25.892667Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-3", "request_id": "6f7d4a69-ff04-4a91-9ec6-3fcb89b26adf", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T22:49:27.364232Z", "level": "INFO", "module": "upload", "message": "Sanitized filename for storage", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "original_filename": "KendrickLamar.mp3", "sanitized_filename": "KendrickLamar.mp3", "storage_path": "1ca24433-173e-4cea-8e37-465a08b18a79/cbe1268d-353b-423a-a27d-484dcce97231/KendrickLamar.mp3"}
{"timestamp": "2025-11-14T22:49:28.174357Z", "level": "INFO", "module": "storage", "message": "Uploaded file to audio-uploads/1ca24433-173e-4cea-8e37-465a08b18a79/cbe1268d-353b-423a-a27d-484dcce97231/KendrickLamar.mp3", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "bucket": "audio-uploads", "path": "1ca24433-173e-4cea-8e37-465a08b18a79/cbe1268d-353b-423a-a27d-484dcce97231/KendrickLamar.mp3", "size": 4969409}
{"timestamp": "2025-11-14T22:49:28.904213Z", "level": "INFO", "module": "queue_service", "message": "Job enqueued", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "job_id": "cbe1268d-353b-423a-a27d-484dcce97231", "user_id": "1ca24433-173e-4cea-8e37-465a08b18a79"}
{"timestamp": "2025-11-14T22:49:28.904671Z", "level": "INFO", "module": "upload", "message": "Job created and enqueued", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "job_id": "cbe1268d-353b-423a-a27d-484dcce97231", "user_id": "1ca24433-173e-4cea-8e37-465a08b18a79", "estimated_cost": 8.859428571428571, "duration_minutes": 5.906285714285715}
{"timestamp": "2025-11-14T22:49:28.943350Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-53", "request_id": "a5e21e61-6e46-452f-be50-1089eef9146b", "method": "OPTIONS", "path": "/api/v1/jobs/cbe1268d-353b-423a-a27d-484dcce97231"}
{"timestamp": "2025-11-14T22:49:28.944446Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-55", "request_id": "95745b26-e845-4149-af7d-3c9757022012", "method": "GET", "path": "/api/v1/jobs/cbe1268d-353b-423a-a27d-484dcce97231"}
{"timestamp": "2025-11-14T22:49:29.839053Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-57", "request_id": "93ae6a8f-5629-4bb5-b6f3-43d408f637ae", "method": "GET", "path": "/api/v1/jobs/cbe1268d-353b-423a-a27d-484dcce97231"}
{"timestamp": "2025-11-14T22:49:29.845482Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-59", "request_id": "21559c48-c158-4e35-86b7-b7134e10716f", "method": "GET", "path": "/api/v1/jobs/cbe1268d-353b-423a-a27d-484dcce97231/stream"}
{"timestamp": "2025-11-14T22:49:30.151782Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-61", "request_id": "a4963ad1-a845-4f20-a40c-2a716c4f2384", "method": "GET", "path": "/api/v1/jobs/cbe1268d-353b-423a-a27d-484dcce97231/stream"}
{"timestamp": "2025-11-14T22:49:32.160136Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-63", "request_id": "a1b4fa71-adde-4a55-a056-0d0b58b5080e", "method": "GET", "path": "/api/v1/jobs/cbe1268d-353b-423a-a27d-484dcce97231/stream"}
{"timestamp": "2025-11-14T22:49:36.167500Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-65", "request_id": "f90dddc5-4185-4ee4-833f-8f3b6007f761", "method": "GET", "path": "/api/v1/jobs/cbe1268d-353b-423a-a27d-484dcce97231/stream"}
{"timestamp": "2025-11-14T22:49:44.181013Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-67", "request_id": "c8e60562-2153-4ae9-9e99-e4efe590e0a8", "method": "GET", "path": "/api/v1/jobs/cbe1268d-353b-423a-a27d-484dcce97231/stream"}
{"timestamp": "2025-11-14T22:50:00.190478Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-69", "request_id": "da12ab7c-8a35-4ead-824c-e64681d84aa0", "method": "GET", "path": "/api/v1/jobs/cbe1268d-353b-423a-a27d-484dcce97231/stream"}
{"timestamp": "2025-11-14T22:50:00.198717Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-71", "request_id": "a2ee7cb8-bf01-4e5a-a1d6-7a86d0fe7394", "method": "GET", "path": "/api/v1/jobs/cbe1268d-353b-423a-a27d-484dcce97231/stream"}
{"timestamp": "2025-11-14T22:51:15.263603Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-3", "request_id": "8662adfa-4b27-4883-95d7-48c69794c788", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T22:51:16.597570Z", "level": "INFO", "module": "upload", "message": "Sanitized filename for storage", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "original_filename": "KendrickLamar.mp3", "sanitized_filename": "KendrickLamar.mp3", "storage_path": "1ca24433-173e-4cea-8e37-465a08b18a79/e26acbec-d035-4a3b-981e-e1afb07bdf65/KendrickLamar.mp3"}
{"timestamp": "2025-11-14T22:51:17.713816Z", "level": "INFO", "module": "storage", "message": "Uploaded file to audio-uploads/1ca24433-173e-4cea-8e37-465a08b18a79/e26acbec-d035-4a3b-981e-e1afb07bdf65/KendrickLamar.mp3", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "bucket": "audio-uploads", "path": "1ca24433-173e-4cea-8e37-465a08b18a79/e26acbec-d035-4a3b-981e-e1afb07bdf65/KendrickLamar.mp3", "size": 4969409}
{"timestamp": "2025-11-14T22:51:18.490241Z", "level": "INFO", "module": "queue_service", "message": "Job enqueued", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "job_id": "e26acbec-d035-4a3b-981e-e1afb07bdf65", "user_id": "1ca24433-173e-4cea-8e37-465a08b18a79"}
{"timestamp": "2025-11-14T22:51:18.490659Z", "level": "INFO", "module": "upload", "message": "Job created and enqueued", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "job_id": "e26acbec-d035-4a3b-981e-e1afb07bdf65", "user_id": "1ca24433-173e-4cea-8e37-465a08b18a79", "estimated_cost": 8.859428571428571, "duration_minutes": 5.906285714285715}
{"timestamp": "2025-11-14T22:51:18.521449Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-45", "request_id": "17fa3b27-3f1d-4a05-8b04-5c4d72737d8f", "method": "OPTIONS", "path": "/api/v1/jobs/e26acbec-d035-4a3b-981e-e1afb07bdf65"}
{"timestamp": "2025-11-14T22:51:18.523303Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-47", "request_id": "ce84030a-77e8-4511-97cb-390074901775", "method": "OPTIONS", "path": "/api/v1/jobs/e26acbec-d035-4a3b-981e-e1afb07bdf65"}
{"timestamp": "2025-11-14T22:51:18.523729Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-49", "request_id": "3128b17d-c2d5-4ac5-a72b-9fd57670a513", "method": "GET", "path": "/api/v1/jobs/e26acbec-d035-4a3b-981e-e1afb07bdf65"}
{"timestamp": "2025-11-14T22:51:19.415990Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-51", "request_id": "60eef97e-4954-4f61-a6c8-067379ccdf8f", "method": "GET", "path": "/api/v1/jobs/e26acbec-d035-4a3b-981e-e1afb07bdf65"}
{"timestamp": "2025-11-14T22:51:19.417856Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-53", "request_id": "c3b50ae8-6646-4af1-9c4a-da6a9227d496", "method": "GET", "path": "/api/v1/jobs/e26acbec-d035-4a3b-981e-e1afb07bdf65/stream"}
{"timestamp": "2025-11-14T22:51:19.736273Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-55", "request_id": "281da7ec-6797-4d16-b0ff-cd7230734359", "method": "GET", "path": "/api/v1/jobs/e26acbec-d035-4a3b-981e-e1afb07bdf65/stream"}
{"timestamp": "2025-11-14T22:51:21.744873Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-57", "request_id": "1dac51fd-2a13-4eea-95ab-1cf06e1234dd", "method": "GET", "path": "/api/v1/jobs/e26acbec-d035-4a3b-981e-e1afb07bdf65/stream"}
{"timestamp": "2025-11-14T22:51:42.322458Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-59", "request_id": "edb4af12-9455-488b-8735-3c6e68e31dc7", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T22:51:43.058484Z", "level": "INFO", "module": "upload", "message": "Sanitized filename for storage", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "original_filename": "KendrickLamar.mp3", "sanitized_filename": "KendrickLamar.mp3", "storage_path": "1ca24433-173e-4cea-8e37-465a08b18a79/c3dde703-1770-4ba1-a21d-2d550a276787/KendrickLamar.mp3"}
{"timestamp": "2025-11-14T22:51:44.059248Z", "level": "INFO", "module": "storage", "message": "Uploaded file to audio-uploads/1ca24433-173e-4cea-8e37-465a08b18a79/c3dde703-1770-4ba1-a21d-2d550a276787/KendrickLamar.mp3", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "bucket": "audio-uploads", "path": "1ca24433-173e-4cea-8e37-465a08b18a79/c3dde703-1770-4ba1-a21d-2d550a276787/KendrickLamar.mp3", "size": 4969409}
{"timestamp": "2025-11-14T22:51:44.421852Z", "level": "INFO", "module": "queue_service", "message": "Job enqueued", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "job_id": "c3dde703-1770-4ba1-a21d-2d550a276787", "user_id": "1ca24433-173e-4cea-8e37-465a08b18a79"}
{"timestamp": "2025-11-14T22:51:44.421997Z", "level": "INFO", "module": "upload", "message": "Job created and enqueued", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "job_id": "c3dde703-1770-4ba1-a21d-2d550a276787", "user_id": "1ca24433-173e-4cea-8e37-465a08b18a79", "estimated_cost": 8.859428571428571, "duration_minutes": 5.906285714285715}
{"timestamp": "2025-11-14T22:51:44.445142Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-101", "request_id": "eeeb026a-7d72-4a6f-b8fd-f7094482693c", "method": "OPTIONS", "path": "/api/v1/jobs/c3dde703-1770-4ba1-a21d-2d550a276787"}
{"timestamp": "2025-11-14T22:51:44.446207Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-103", "request_id": "849e7982-8cd9-4237-bd9f-3533fe933ced", "method": "GET", "path": "/api/v1/jobs/c3dde703-1770-4ba1-a21d-2d550a276787"}
{"timestamp": "2025-11-14T22:51:44.943395Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-105", "request_id": "b4eb0d4c-9d31-4ac6-aec4-823582f09fb8", "method": "GET", "path": "/api/v1/jobs/c3dde703-1770-4ba1-a21d-2d550a276787"}
{"timestamp": "2025-11-14T22:51:44.947057Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-107", "request_id": "fa49f52e-7000-4709-b755-7a11bdea88b5", "method": "GET", "path": "/api/v1/jobs/c3dde703-1770-4ba1-a21d-2d550a276787/stream"}
{"timestamp": "2025-11-14T22:51:45.256856Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-109", "request_id": "e2bc0949-102d-4d7b-b9b9-71b993b51e83", "method": "GET", "path": "/api/v1/jobs/c3dde703-1770-4ba1-a21d-2d550a276787/stream"}
{"timestamp": "2025-11-14T22:51:47.262477Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-111", "request_id": "ec11ee98-0f14-4b72-8913-c69f780031d2", "method": "GET", "path": "/api/v1/jobs/c3dde703-1770-4ba1-a21d-2d550a276787/stream"}
{"timestamp": "2025-11-14T22:51:51.271882Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-113", "request_id": "49c0f12d-391f-4a64-9a92-892ea9640f57", "method": "GET", "path": "/api/v1/jobs/c3dde703-1770-4ba1-a21d-2d550a276787/stream"}
{"timestamp": "2025-11-14T22:51:59.283541Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-115", "request_id": "233255ef-3d15-45b5-b93e-548b06b3100c", "method": "GET", "path": "/api/v1/jobs/c3dde703-1770-4ba1-a21d-2d550a276787/stream"}
{"timestamp": "2025-11-14T22:52:15.298216Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-3", "request_id": "70aa3d1d-de65-48e6-8059-32ce2fe6818e", "method": "GET", "path": "/api/v1/jobs/c3dde703-1770-4ba1-a21d-2d550a276787/stream"}
{"timestamp": "2025-11-14T22:52:15.299288Z", "level": "WARNING", "module": "dependencies", "message": "No token provided in header or query parameter", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-14T22:52:15.305498Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-5", "request_id": "64197698-cb64-486b-9ca6-8e2029d1c049", "method": "GET", "path": "/api/v1/jobs/c3dde703-1770-4ba1-a21d-2d550a276787/stream"}
{"timestamp": "2025-11-14T22:52:15.306290Z", "level": "WARNING", "module": "dependencies", "message": "No token provided in header or query parameter", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-14T22:52:42.204054Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-3", "request_id": "2438f209-bd63-4eb1-9bab-aeb882ff55b0", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T22:52:58.858131Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-5", "request_id": "3168e333-6f0e-47bf-ab5d-47ae47af7a5a", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T22:53:00.301980Z", "level": "INFO", "module": "upload", "message": "Sanitized filename for storage", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "original_filename": "KendrickLamar.mp3", "sanitized_filename": "KendrickLamar.mp3", "storage_path": "1ca24433-173e-4cea-8e37-465a08b18a79/23f664f1-3014-406f-8520-5d57364b939d/KendrickLamar.mp3"}
{"timestamp": "2025-11-14T22:53:01.490022Z", "level": "INFO", "module": "storage", "message": "Uploaded file to audio-uploads/1ca24433-173e-4cea-8e37-465a08b18a79/23f664f1-3014-406f-8520-5d57364b939d/KendrickLamar.mp3", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "bucket": "audio-uploads", "path": "1ca24433-173e-4cea-8e37-465a08b18a79/23f664f1-3014-406f-8520-5d57364b939d/KendrickLamar.mp3", "size": 4969409}
{"timestamp": "2025-11-14T22:53:01.943298Z", "level": "INFO", "module": "queue_service", "message": "Job enqueued", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "job_id": "23f664f1-3014-406f-8520-5d57364b939d", "user_id": "1ca24433-173e-4cea-8e37-465a08b18a79"}
{"timestamp": "2025-11-14T22:53:01.943727Z", "level": "INFO", "module": "upload", "message": "Job created and enqueued", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "job_id": "23f664f1-3014-406f-8520-5d57364b939d", "user_id": "1ca24433-173e-4cea-8e37-465a08b18a79", "estimated_cost": 8.859428571428571, "duration_minutes": 5.906285714285715}
{"timestamp": "2025-11-14T22:53:01.978027Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-47", "request_id": "ab35cb22-bcf6-45f8-9353-a8e04e8e5c3b", "method": "OPTIONS", "path": "/api/v1/jobs/23f664f1-3014-406f-8520-5d57364b939d"}
{"timestamp": "2025-11-14T22:53:01.979280Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-49", "request_id": "101fa558-f730-4a93-a2c0-be5b3eea8a7a", "method": "OPTIONS", "path": "/api/v1/jobs/23f664f1-3014-406f-8520-5d57364b939d"}
{"timestamp": "2025-11-14T22:53:01.979674Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-51", "request_id": "9fe05668-afda-42f9-84e9-43c89a253c0c", "method": "GET", "path": "/api/v1/jobs/23f664f1-3014-406f-8520-5d57364b939d"}
{"timestamp": "2025-11-14T22:53:02.856952Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-53", "request_id": "fab88136-96cf-4f18-bc2f-a3480c2d5dc6", "method": "GET", "path": "/api/v1/jobs/23f664f1-3014-406f-8520-5d57364b939d"}
{"timestamp": "2025-11-14T22:53:02.865226Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-55", "request_id": "47c2e5cc-2d37-4dd4-a06c-3bb1a5a34692", "method": "GET", "path": "/api/v1/jobs/23f664f1-3014-406f-8520-5d57364b939d/stream"}
{"timestamp": "2025-11-14T22:53:02.865949Z", "level": "WARNING", "module": "dependencies", "message": "No token provided in header or query parameter", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-14T22:53:03.174103Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-57", "request_id": "7622b940-2e2f-439e-a6bb-49efa0f39961", "method": "GET", "path": "/api/v1/jobs/23f664f1-3014-406f-8520-5d57364b939d/stream"}
{"timestamp": "2025-11-14T22:53:03.174810Z", "level": "WARNING", "module": "dependencies", "message": "No token provided in header or query parameter", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-14T22:53:05.182043Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-59", "request_id": "5f6994bb-f419-42b9-98f4-e9b3574946eb", "method": "GET", "path": "/api/v1/jobs/23f664f1-3014-406f-8520-5d57364b939d/stream"}
{"timestamp": "2025-11-14T22:53:05.183073Z", "level": "WARNING", "module": "dependencies", "message": "No token provided in header or query parameter", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-14T22:53:09.190871Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-61", "request_id": "9a2a4c8c-7aeb-416f-9f74-4896c837da4f", "method": "GET", "path": "/api/v1/jobs/23f664f1-3014-406f-8520-5d57364b939d/stream"}
{"timestamp": "2025-11-14T22:53:09.191362Z", "level": "WARNING", "module": "dependencies", "message": "No token provided in header or query parameter", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-14T22:53:17.201881Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-63", "request_id": "05d61c8d-71a8-4f29-ae1c-09e182bb6928", "method": "GET", "path": "/api/v1/jobs/23f664f1-3014-406f-8520-5d57364b939d/stream"}
{"timestamp": "2025-11-14T22:53:17.203504Z", "level": "WARNING", "module": "dependencies", "message": "No token provided in header or query parameter", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-14T22:53:33.506171Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-3", "request_id": "6c5c3913-5434-4d14-9b67-7aff51bf74d3", "method": "GET", "path": "/api/v1/jobs/23f664f1-3014-406f-8520-5d57364b939d/stream"}
{"timestamp": "2025-11-14T22:53:33.506742Z", "level": "WARNING", "module": "dependencies", "message": "No token provided in header or query parameter", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-14T22:53:33.517171Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-5", "request_id": "5958abc5-800e-4f7b-aabe-dada2864208f", "method": "GET", "path": "/api/v1/jobs/23f664f1-3014-406f-8520-5d57364b939d/stream"}
{"timestamp": "2025-11-14T22:53:33.517371Z", "level": "WARNING", "module": "dependencies", "message": "No token provided in header or query parameter", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-14T22:54:01.280718Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-3", "request_id": "5042e043-a4db-467d-b29f-86f6686f10ba", "method": "GET", "path": "/api/v1/jobs/23f664f1-3014-406f-8520-5d57364b939d"}
{"timestamp": "2025-11-14T22:54:01.281644Z", "level": "WARNING", "module": "dependencies", "message": "No token provided in header or query parameter", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-14T22:54:01.282708Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-5", "request_id": "cd1ebee3-2e64-4830-9430-5aebe90db498", "method": "GET", "path": "/api/v1/jobs/23f664f1-3014-406f-8520-5d57364b939d"}
{"timestamp": "2025-11-14T22:54:01.282879Z", "level": "WARNING", "module": "dependencies", "message": "No token provided in header or query parameter", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-14T22:54:01.965242Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-7", "request_id": "e3f3d3ab-2916-4dea-a1be-d23a8536df93", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T22:54:17.687987Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-9", "request_id": "b9af3cb5-bb0d-4817-b4df-18be567a7ae7", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T22:54:19.226769Z", "level": "INFO", "module": "upload", "message": "Sanitized filename for storage", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "original_filename": "KendrickLamar.mp3", "sanitized_filename": "KendrickLamar.mp3", "storage_path": "1ca24433-173e-4cea-8e37-465a08b18a79/2ce14513-b069-48f8-8e67-0972ad3be574/KendrickLamar.mp3"}
{"timestamp": "2025-11-14T22:54:20.292449Z", "level": "INFO", "module": "storage", "message": "Uploaded file to audio-uploads/1ca24433-173e-4cea-8e37-465a08b18a79/2ce14513-b069-48f8-8e67-0972ad3be574/KendrickLamar.mp3", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "bucket": "audio-uploads", "path": "1ca24433-173e-4cea-8e37-465a08b18a79/2ce14513-b069-48f8-8e67-0972ad3be574/KendrickLamar.mp3", "size": 4969409}
{"timestamp": "2025-11-14T22:54:20.682176Z", "level": "INFO", "module": "queue_service", "message": "Job enqueued", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "job_id": "2ce14513-b069-48f8-8e67-0972ad3be574", "user_id": "1ca24433-173e-4cea-8e37-465a08b18a79"}
{"timestamp": "2025-11-14T22:54:20.682492Z", "level": "INFO", "module": "upload", "message": "Job created and enqueued", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "job_id": "2ce14513-b069-48f8-8e67-0972ad3be574", "user_id": "1ca24433-173e-4cea-8e37-465a08b18a79", "estimated_cost": 8.859428571428571, "duration_minutes": 5.906285714285715}
{"timestamp": "2025-11-14T22:54:20.783157Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-51", "request_id": "0b58b1fc-e1d8-48f6-86f9-0d0b57cf102d", "method": "OPTIONS", "path": "/api/v1/jobs/2ce14513-b069-48f8-8e67-0972ad3be574"}
{"timestamp": "2025-11-14T22:54:20.784322Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-53", "request_id": "b692b9d4-cc25-4472-8f42-c8e2ed77270c", "method": "GET", "path": "/api/v1/jobs/2ce14513-b069-48f8-8e67-0972ad3be574"}
{"timestamp": "2025-11-14T22:54:21.613282Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-55", "request_id": "a450cb69-c9d2-4626-be39-5bbb998171bb", "method": "GET", "path": "/api/v1/jobs/2ce14513-b069-48f8-8e67-0972ad3be574"}
{"timestamp": "2025-11-14T22:54:21.618822Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-57", "request_id": "0939e43a-955c-4aa2-a116-afcf0480c458", "method": "GET", "path": "/api/v1/jobs/2ce14513-b069-48f8-8e67-0972ad3be574/stream"}
{"timestamp": "2025-11-14T22:54:21.619831Z", "level": "WARNING", "module": "dependencies", "message": "No token provided in header or query parameter", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-14T22:54:21.917729Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-59", "request_id": "4175958b-15e3-4579-8545-fc4cdf020e95", "method": "GET", "path": "/api/v1/jobs/2ce14513-b069-48f8-8e67-0972ad3be574/stream"}
{"timestamp": "2025-11-14T22:54:21.918545Z", "level": "WARNING", "module": "dependencies", "message": "No token provided in header or query parameter", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-14T22:54:23.922454Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-61", "request_id": "027793a1-ee0e-4412-bce2-00c91d409765", "method": "GET", "path": "/api/v1/jobs/2ce14513-b069-48f8-8e67-0972ad3be574/stream"}
{"timestamp": "2025-11-14T22:54:23.923566Z", "level": "WARNING", "module": "dependencies", "message": "No token provided in header or query parameter", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-14T22:54:27.929325Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-63", "request_id": "9b0aaf22-7509-4177-80ea-fee859987678", "method": "GET", "path": "/api/v1/jobs/2ce14513-b069-48f8-8e67-0972ad3be574/stream"}
{"timestamp": "2025-11-14T22:54:27.930046Z", "level": "WARNING", "module": "dependencies", "message": "No token provided in header or query parameter", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-14T22:54:35.939164Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-65", "request_id": "6d7cb5c3-aef1-4b5f-a0a1-79bde1c6c6bf", "method": "GET", "path": "/api/v1/jobs/2ce14513-b069-48f8-8e67-0972ad3be574/stream"}
{"timestamp": "2025-11-14T22:54:35.940642Z", "level": "WARNING", "module": "dependencies", "message": "No token provided in header or query parameter", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-14T22:54:51.946989Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-67", "request_id": "507ffec2-b175-491a-9e0d-e823de87a675", "method": "GET", "path": "/api/v1/jobs/2ce14513-b069-48f8-8e67-0972ad3be574/stream"}
{"timestamp": "2025-11-14T22:54:51.947725Z", "level": "WARNING", "module": "dependencies", "message": "No token provided in header or query parameter", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-14T22:54:51.952196Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-69", "request_id": "0d2f459c-4d5c-467b-bd6a-d998207cef84", "method": "GET", "path": "/api/v1/jobs/2ce14513-b069-48f8-8e67-0972ad3be574/stream"}
{"timestamp": "2025-11-14T22:54:51.952683Z", "level": "WARNING", "module": "dependencies", "message": "No token provided in header or query parameter", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-14T22:55:47.142018Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-71", "request_id": "e89f1160-d2fb-4766-94c4-406c621a3a89", "method": "GET", "path": "/api/v1/jobs/2ce14513-b069-48f8-8e67-0972ad3be574"}
{"timestamp": "2025-11-14T22:55:47.143178Z", "level": "WARNING", "module": "dependencies", "message": "No token provided in header or query parameter", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-14T22:55:47.144483Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-73", "request_id": "6e7c9d6b-6479-471f-8ef4-e8a2fd25bef3", "method": "GET", "path": "/api/v1/jobs/2ce14513-b069-48f8-8e67-0972ad3be574"}
{"timestamp": "2025-11-14T22:55:47.144651Z", "level": "WARNING", "module": "dependencies", "message": "No token provided in header or query parameter", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-14T22:56:16.183439Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-75", "request_id": "a8549525-134b-4494-a359-f6491070f516", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T22:56:16.968608Z", "level": "INFO", "module": "upload", "message": "Sanitized filename for storage", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "original_filename": "KendrickLamar.mp3", "sanitized_filename": "KendrickLamar.mp3", "storage_path": "1ca24433-173e-4cea-8e37-465a08b18a79/c557d55c-dd37-49b5-bf44-42a359802342/KendrickLamar.mp3"}
{"timestamp": "2025-11-14T22:56:17.987063Z", "level": "INFO", "module": "storage", "message": "Uploaded file to audio-uploads/1ca24433-173e-4cea-8e37-465a08b18a79/c557d55c-dd37-49b5-bf44-42a359802342/KendrickLamar.mp3", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "bucket": "audio-uploads", "path": "1ca24433-173e-4cea-8e37-465a08b18a79/c557d55c-dd37-49b5-bf44-42a359802342/KendrickLamar.mp3", "size": 4969409}
{"timestamp": "2025-11-14T22:56:18.360537Z", "level": "INFO", "module": "queue_service", "message": "Job enqueued", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "job_id": "c557d55c-dd37-49b5-bf44-42a359802342", "user_id": "1ca24433-173e-4cea-8e37-465a08b18a79"}
{"timestamp": "2025-11-14T22:56:18.360874Z", "level": "INFO", "module": "upload", "message": "Job created and enqueued", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "job_id": "c557d55c-dd37-49b5-bf44-42a359802342", "user_id": "1ca24433-173e-4cea-8e37-465a08b18a79", "estimated_cost": 8.859428571428571, "duration_minutes": 5.906285714285715}
{"timestamp": "2025-11-14T22:56:18.405473Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-117", "request_id": "1b58679e-daf3-4bfb-a498-87c05182b8fc", "method": "OPTIONS", "path": "/api/v1/jobs/c557d55c-dd37-49b5-bf44-42a359802342"}
{"timestamp": "2025-11-14T22:56:18.406611Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-119", "request_id": "f53e22d8-dd09-4447-8197-156798a490ef", "method": "GET", "path": "/api/v1/jobs/c557d55c-dd37-49b5-bf44-42a359802342"}
{"timestamp": "2025-11-14T22:56:18.901788Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-121", "request_id": "7e27cb67-1231-464c-a642-e5485e17a39f", "method": "GET", "path": "/api/v1/jobs/c557d55c-dd37-49b5-bf44-42a359802342"}
{"timestamp": "2025-11-14T22:56:18.909896Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-123", "request_id": "98cd9415-48e3-4c89-ae04-3b185fbf1aef", "method": "GET", "path": "/api/v1/jobs/c557d55c-dd37-49b5-bf44-42a359802342/stream"}
{"timestamp": "2025-11-14T22:56:18.910710Z", "level": "WARNING", "module": "dependencies", "message": "No token provided in header or query parameter", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-14T22:56:19.236213Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-125", "request_id": "8a1b6a34-3b7c-4273-b008-ba5ace05ada7", "method": "GET", "path": "/api/v1/jobs/c557d55c-dd37-49b5-bf44-42a359802342/stream"}
{"timestamp": "2025-11-14T22:56:19.237226Z", "level": "WARNING", "module": "dependencies", "message": "No token provided in header or query parameter", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-14T22:56:21.244948Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-127", "request_id": "68de1d50-698f-4707-b057-b82e3870579f", "method": "GET", "path": "/api/v1/jobs/c557d55c-dd37-49b5-bf44-42a359802342/stream"}
{"timestamp": "2025-11-14T22:56:21.246203Z", "level": "WARNING", "module": "dependencies", "message": "No token provided in header or query parameter", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-14T22:56:25.250763Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-129", "request_id": "6576df4e-cc22-4425-8898-1a07a0bb2eb7", "method": "GET", "path": "/api/v1/jobs/c557d55c-dd37-49b5-bf44-42a359802342/stream"}
{"timestamp": "2025-11-14T22:56:25.251600Z", "level": "WARNING", "module": "dependencies", "message": "No token provided in header or query parameter", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-14T22:56:33.258336Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-131", "request_id": "fc3f9eac-208c-4051-a7f5-b91e0db25996", "method": "GET", "path": "/api/v1/jobs/c557d55c-dd37-49b5-bf44-42a359802342/stream"}
{"timestamp": "2025-11-14T22:56:33.259330Z", "level": "WARNING", "module": "dependencies", "message": "No token provided in header or query parameter", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-14T22:56:49.265474Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-133", "request_id": "4ba33351-e64b-40c7-8c6f-69b155617723", "method": "GET", "path": "/api/v1/jobs/c557d55c-dd37-49b5-bf44-42a359802342/stream"}
{"timestamp": "2025-11-14T22:56:49.265832Z", "level": "WARNING", "module": "dependencies", "message": "No token provided in header or query parameter", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-14T22:56:49.274745Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-135", "request_id": "519c528b-0f46-420e-a5ed-8be84e0b3fdd", "method": "GET", "path": "/api/v1/jobs/c557d55c-dd37-49b5-bf44-42a359802342/stream"}
{"timestamp": "2025-11-14T22:56:49.275270Z", "level": "WARNING", "module": "dependencies", "message": "No token provided in header or query parameter", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-14T22:59:11.130134Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-3", "request_id": "55365017-8e4f-4463-94d7-1e00e3ae1f23", "method": "GET", "path": "/api/v1/jobs/c557d55c-dd37-49b5-bf44-42a359802342"}
{"timestamp": "2025-11-14T22:59:11.131617Z", "level": "WARNING", "module": "dependencies", "message": "No token provided in header or query parameter", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-14T22:59:11.132823Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-5", "request_id": "7bf3cdcd-6630-4516-b9dc-d7fba6d254fa", "method": "GET", "path": "/api/v1/jobs/c557d55c-dd37-49b5-bf44-42a359802342"}
{"timestamp": "2025-11-14T22:59:11.133073Z", "level": "WARNING", "module": "dependencies", "message": "No token provided in header or query parameter", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-14T22:59:22.596972Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-7", "request_id": "389b9db6-ec87-4ef1-97f8-66975a18bdfb", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T22:59:24.210736Z", "level": "INFO", "module": "upload", "message": "Sanitized filename for storage", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "original_filename": "KendrickLamar.mp3", "sanitized_filename": "KendrickLamar.mp3", "storage_path": "1ca24433-173e-4cea-8e37-465a08b18a79/37c4c2db-c3f9-482e-ac2c-e9dd23b60aa8/KendrickLamar.mp3"}
{"timestamp": "2025-11-14T22:59:24.956393Z", "level": "INFO", "module": "storage", "message": "Uploaded file to audio-uploads/1ca24433-173e-4cea-8e37-465a08b18a79/37c4c2db-c3f9-482e-ac2c-e9dd23b60aa8/KendrickLamar.mp3", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "bucket": "audio-uploads", "path": "1ca24433-173e-4cea-8e37-465a08b18a79/37c4c2db-c3f9-482e-ac2c-e9dd23b60aa8/KendrickLamar.mp3", "size": 4969409}
{"timestamp": "2025-11-14T22:59:25.690833Z", "level": "INFO", "module": "queue_service", "message": "Job enqueued", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "job_id": "37c4c2db-c3f9-482e-ac2c-e9dd23b60aa8", "user_id": "1ca24433-173e-4cea-8e37-465a08b18a79"}
{"timestamp": "2025-11-14T22:59:25.691204Z", "level": "INFO", "module": "upload", "message": "Job created and enqueued", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "job_id": "37c4c2db-c3f9-482e-ac2c-e9dd23b60aa8", "user_id": "1ca24433-173e-4cea-8e37-465a08b18a79", "estimated_cost": 8.859428571428571, "duration_minutes": 5.906285714285715}
{"timestamp": "2025-11-14T22:59:25.724183Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-49", "request_id": "e98b2ebe-02ef-4ce0-b252-68885b7b43bb", "method": "OPTIONS", "path": "/api/v1/jobs/37c4c2db-c3f9-482e-ac2c-e9dd23b60aa8"}
{"timestamp": "2025-11-14T22:59:25.725727Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-51", "request_id": "b21fccff-dd11-43ac-bb07-70c160d68291", "method": "OPTIONS", "path": "/api/v1/jobs/37c4c2db-c3f9-482e-ac2c-e9dd23b60aa8"}
{"timestamp": "2025-11-14T22:59:25.725944Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-53", "request_id": "b4739921-5cea-42d5-bf9c-c2bc30505609", "method": "GET", "path": "/api/v1/jobs/37c4c2db-c3f9-482e-ac2c-e9dd23b60aa8"}
{"timestamp": "2025-11-14T22:59:26.586098Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-55", "request_id": "eb8af91d-ac54-464f-8ff5-78f7c2e26cff", "method": "GET", "path": "/api/v1/jobs/37c4c2db-c3f9-482e-ac2c-e9dd23b60aa8"}
{"timestamp": "2025-11-14T22:59:26.590671Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-57", "request_id": "021c4de1-8177-42b1-a726-fe64beb89301", "method": "GET", "path": "/api/v1/jobs/37c4c2db-c3f9-482e-ac2c-e9dd23b60aa8/stream"}
{"timestamp": "2025-11-14T22:59:26.591288Z", "level": "WARNING", "module": "dependencies", "message": "No token provided in header or query parameter", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-14T22:59:26.892888Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-59", "request_id": "195c001d-6c07-4813-b03c-fadd381a2915", "method": "GET", "path": "/api/v1/jobs/37c4c2db-c3f9-482e-ac2c-e9dd23b60aa8/stream"}
{"timestamp": "2025-11-14T22:59:26.893809Z", "level": "WARNING", "module": "dependencies", "message": "No token provided in header or query parameter", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-14T22:59:28.900645Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-61", "request_id": "362adc82-2cfb-40a0-8851-82f44eec4903", "method": "GET", "path": "/api/v1/jobs/37c4c2db-c3f9-482e-ac2c-e9dd23b60aa8/stream"}
{"timestamp": "2025-11-14T22:59:28.901935Z", "level": "WARNING", "module": "dependencies", "message": "No token provided in header or query parameter", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-14T22:59:32.911509Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-63", "request_id": "71c65712-93b3-4942-9a51-58cf6edbadfa", "method": "GET", "path": "/api/v1/jobs/37c4c2db-c3f9-482e-ac2c-e9dd23b60aa8/stream"}
{"timestamp": "2025-11-14T22:59:32.912397Z", "level": "WARNING", "module": "dependencies", "message": "No token provided in header or query parameter", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-14T22:59:40.926805Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-65", "request_id": "d12da9a0-2bca-4230-8913-c4b2a07a538b", "method": "GET", "path": "/api/v1/jobs/37c4c2db-c3f9-482e-ac2c-e9dd23b60aa8/stream"}
{"timestamp": "2025-11-14T22:59:40.930368Z", "level": "WARNING", "module": "dependencies", "message": "No token provided in header or query parameter", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-14T22:59:56.939418Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-67", "request_id": "ef18aa2e-f107-4a06-8666-51867731fa13", "method": "GET", "path": "/api/v1/jobs/37c4c2db-c3f9-482e-ac2c-e9dd23b60aa8/stream"}
{"timestamp": "2025-11-14T22:59:56.940112Z", "level": "WARNING", "module": "dependencies", "message": "No token provided in header or query parameter", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-14T22:59:56.945796Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-69", "request_id": "30c972c3-e887-4332-bfe1-e8f2b6966dcd", "method": "GET", "path": "/api/v1/jobs/37c4c2db-c3f9-482e-ac2c-e9dd23b60aa8/stream"}
{"timestamp": "2025-11-14T22:59:56.946261Z", "level": "WARNING", "module": "dependencies", "message": "No token provided in header or query parameter", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-14T23:00:05.640506Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-71", "request_id": "9f8202dc-684a-4c23-bf99-7fb517048b81", "method": "GET", "path": "/api/v1/jobs/37c4c2db-c3f9-482e-ac2c-e9dd23b60aa8"}
{"timestamp": "2025-11-14T23:00:05.641724Z", "level": "WARNING", "module": "dependencies", "message": "No token provided in header or query parameter", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-14T23:00:05.643242Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-73", "request_id": "10146090-ee98-4be3-a7dd-7ce8c47a69d8", "method": "GET", "path": "/api/v1/jobs/37c4c2db-c3f9-482e-ac2c-e9dd23b60aa8"}
{"timestamp": "2025-11-14T23:00:05.643502Z", "level": "WARNING", "module": "dependencies", "message": "No token provided in header or query parameter", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-14T23:00:05.644096Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-75", "request_id": "55c463b0-9e12-41a7-a688-5deb71f2a0b8", "method": "GET", "path": "/api/v1/jobs/37c4c2db-c3f9-482e-ac2c-e9dd23b60aa8"}
{"timestamp": "2025-11-14T23:00:05.644232Z", "level": "WARNING", "module": "dependencies", "message": "No token provided in header or query parameter", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-14T23:00:05.644799Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-77", "request_id": "2e883fe2-cb89-4ff4-a88a-fee76f5da4c7", "method": "GET", "path": "/api/v1/jobs/37c4c2db-c3f9-482e-ac2c-e9dd23b60aa8"}
{"timestamp": "2025-11-14T23:00:05.645003Z", "level": "WARNING", "module": "dependencies", "message": "No token provided in header or query parameter", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-14T23:01:23.969607Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-79", "request_id": "6ebaf6e0-34a4-468f-a3cb-62b573b5f22a", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T23:01:24.695955Z", "level": "INFO", "module": "upload", "message": "Sanitized filename for storage", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "original_filename": "KendrickLamar.mp3", "sanitized_filename": "KendrickLamar.mp3", "storage_path": "1ca24433-173e-4cea-8e37-465a08b18a79/ce40c9f1-2622-4029-8369-46b9ff72ac66/KendrickLamar.mp3"}
{"timestamp": "2025-11-14T23:01:25.793392Z", "level": "INFO", "module": "storage", "message": "Uploaded file to audio-uploads/1ca24433-173e-4cea-8e37-465a08b18a79/ce40c9f1-2622-4029-8369-46b9ff72ac66/KendrickLamar.mp3", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "bucket": "audio-uploads", "path": "1ca24433-173e-4cea-8e37-465a08b18a79/ce40c9f1-2622-4029-8369-46b9ff72ac66/KendrickLamar.mp3", "size": 4969409}
{"timestamp": "2025-11-14T23:01:26.207905Z", "level": "INFO", "module": "queue_service", "message": "Job enqueued", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66", "user_id": "1ca24433-173e-4cea-8e37-465a08b18a79"}
{"timestamp": "2025-11-14T23:01:26.208355Z", "level": "INFO", "module": "upload", "message": "Job created and enqueued", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66", "user_id": "1ca24433-173e-4cea-8e37-465a08b18a79", "estimated_cost": 8.859428571428571, "duration_minutes": 5.906285714285715}
{"timestamp": "2025-11-14T23:01:26.331317Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-121", "request_id": "338812a3-4621-43a7-9968-5c15a931ec28", "method": "OPTIONS", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:26.332328Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-123", "request_id": "568826c6-d4df-4995-81ca-1617b3551e28", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:26.845271Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-125", "request_id": "b5f42b3f-ec8b-41ec-827b-9caa7359b87e", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:26.856119Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-127", "request_id": "e68f0f05-f48e-4da3-87ff-0fa77c04a73f", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:27.149967Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-129", "request_id": "473f2914-e2bd-4e97-8b08-a4efc52c1bb4", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:27.155790Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-131", "request_id": "7bfcae30-38de-487e-b7bf-7a0e8df58294", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:27.547120Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:27.665813Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-135", "request_id": "3308dd67-bfbd-4012-bf7b-084cedace049", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:27.672514Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-137", "request_id": "fc633cbf-a75c-45d2-a362-7c98834cf93c", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:27.860469Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:27.883932Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:27.885917Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-145", "request_id": "b0790481-67f9-4402-b525-5d79b4b19505", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:27.979710Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-147", "request_id": "71d2cbb2-45fa-49d1-9421-00d311c90688", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:28.078181Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:28.176417Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:28.177047Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-155", "request_id": "e4290478-0973-4b43-8689-05432313d4c5", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:28.178731Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-157", "request_id": "0a7c0d52-d7e7-45f1-8da1-5f2aa0be75e4", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:28.376019Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:28.378106Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:28.379001Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-165", "request_id": "a8a2968c-fa88-47ac-a026-19a2213b95e8", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:28.379644Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-167", "request_id": "c0250dc0-3428-42d2-84ad-70f22bf038d8", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:28.578053Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:28.584902Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:28.585741Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-175", "request_id": "f6ff5aa2-546c-4251-9b25-bd613b072788", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:28.586329Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-177", "request_id": "cc06c34a-8cce-4796-9767-6baeb2d61761", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:28.791860Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:28.796977Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:28.797939Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-185", "request_id": "6674dab2-030b-4b18-89e2-d9ed4f66204f", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:28.799872Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-187", "request_id": "2fbf0a59-b82f-472f-89d3-33d456879d6d", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:29.004786Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:29.010552Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:29.011166Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-195", "request_id": "e9a918a5-ea37-4048-b582-8c5b6098c400", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:29.012088Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-197", "request_id": "f46254c4-34d1-4187-8be7-27c393e53a61", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:29.262547Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:29.271065Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:29.272248Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-205", "request_id": "3d554f15-c884-47da-a10a-c6c887d0e82d", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:29.511440Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:29.514478Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-211", "request_id": "8d263b28-250b-45e1-977f-26e64f6cefe9", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:29.730568Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:29.732176Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-217", "request_id": "980eb951-05d9-431b-93ec-f0843c547241", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:29.733041Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-219", "request_id": "84391767-0ef9-4699-8a8a-88845a6fd09e", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:32.093442Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:32.095097Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:32.095900Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-227", "request_id": "ed1ffd5a-63be-4063-bd5e-a84aba4b1f30", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:32.319415Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:32.320070Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-233", "request_id": "119e6930-802c-4bc1-9765-93fbe9d045fd", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:32.321022Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-235", "request_id": "8c2b810b-076e-4dd1-b6c2-860efb167066", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:32.539973Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:32.541414Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:32.542244Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-243", "request_id": "a54b5187-103e-465b-aa1e-8cfd9cfde550", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:32.543104Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-245", "request_id": "17390869-d2f4-448e-adf1-3c07f388c4ef", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:32.784245Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:32.784738Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:32.785429Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-253", "request_id": "6c39679e-df70-451f-9345-2c7f6c83fbbb", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:32.786159Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-255", "request_id": "0de2549f-4b83-4bb7-92e6-0bbd3a9c9b55", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:32.992794Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:32.996759Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:32.997275Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-263", "request_id": "4f1211d3-ad35-4c9f-941e-81b8ffe0ebea", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:32.998068Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-265", "request_id": "9f3abf6b-28f2-4429-8f39-94f5759bc6c7", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:33.193097Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:33.195216Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:33.195722Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-273", "request_id": "6f5d8431-e8dc-4e55-b64b-1ad4958774e3", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:33.196139Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-275", "request_id": "1cc3b4d5-6251-4136-9480-407bc8ce66d4", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:33.416179Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:33.416752Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:33.416977Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-283", "request_id": "bfcf3c64-9190-4394-8b1a-94fdb50753f8", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:33.417723Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-285", "request_id": "7010b4f7-8fc6-40bf-8046-d237c8912ce0", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:33.644768Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:33.645980Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-293", "request_id": "38ecf026-da4c-4814-8b50-2c4f44e14bd0", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:33.646292Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:33.647289Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-295", "request_id": "41734d68-a837-4142-a8d8-a6694a3ac823", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:33.895977Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:33.898499Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:33.900326Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-303", "request_id": "340af020-9e50-42b8-8391-10cbefd28ac2", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:34.104778Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:34.105225Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-309", "request_id": "f5ada3f5-1462-48b4-a1ae-d87a3a1a3707", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:34.106206Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-311", "request_id": "7ad11ffa-708e-43ff-aa30-5e679346398b", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:34.307418Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:34.308037Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-319", "request_id": "5079807f-64ad-45dd-9284-61a132453bff", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:34.308219Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:34.308883Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-321", "request_id": "00ce33e4-2248-4c14-b7a9-f56dac9b1edd", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:34.507069Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:34.508220Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:34.508867Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-329", "request_id": "dc55cec1-29f2-4c1e-9c2e-7af390366021", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:34.509647Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-331", "request_id": "42cc98d0-e3fc-4056-b138-6a35d2faf1d4", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:34.755391Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:34.756143Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:34.756371Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-339", "request_id": "e64d5f81-c83a-4c53-ba10-3c2751b486a6", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:34.757147Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-341", "request_id": "d417f2d6-b6db-487c-b55b-a2ac173562c8", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:34.979662Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:34.980459Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:34.981257Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-349", "request_id": "51b5adb8-0442-44a0-8bfe-6abf388f7e22", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:34.982249Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-351", "request_id": "e28dd6a5-249a-40ad-a0d2-2cf738355049", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:35.174323Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:35.176674Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:35.177336Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-359", "request_id": "bd02b3bd-07b9-46a8-9c2c-de818bf14743", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:35.178321Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-361", "request_id": "177b1794-19fc-4677-a7a8-bd5ae107798b", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:35.400192Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:35.408937Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:35.410133Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-369", "request_id": "4d5fb01f-da7e-4593-8e71-03239f6d102c", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:35.411152Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-371", "request_id": "a8583c92-157f-4fba-a7fb-766947e0e1b0", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:35.611445Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:35.613057Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:35.614275Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-379", "request_id": "9518e758-a777-424a-bc05-78be75efc4a4", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:35.615660Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-381", "request_id": "22986a06-2bb6-4792-a77d-2caf2b142423", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:35.811458Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:35.814672Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:35.815286Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-389", "request_id": "ade4b118-7c85-4c4c-99fc-5c94ed000835", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:35.816189Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-391", "request_id": "328cc9e8-b3c4-4d8f-b1b0-a012f0345167", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:36.019512Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:36.023921Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:36.024839Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-399", "request_id": "88866a97-e483-42fc-9972-f599312614b4", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:36.025532Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-401", "request_id": "e183ec62-a690-4709-8d2a-41ce473efd5a", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:36.261409Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:36.265214Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:36.266918Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-409", "request_id": "9640daaf-b87d-4a5c-bd57-796f24999700", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:36.479389Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:36.480403Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-415", "request_id": "d4e63112-99e1-4e2d-8e37-a00f394d588d", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:36.481992Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-417", "request_id": "2ed42a17-53cd-46a6-9e64-4785e6e40a9a", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:36.679538Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:36.681428Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:36.682506Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-425", "request_id": "401671d0-747b-4bd6-865d-8f6f06af174d", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:36.683233Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-427", "request_id": "e884bcdb-5a91-41c3-875c-d721324b1799", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:36.880758Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:36.882081Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:36.882902Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-435", "request_id": "3105caa7-85d5-4d54-8adb-e15b55f299bc", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:36.883701Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-437", "request_id": "f4b5784c-e494-41fd-8738-516db174fe52", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:37.107411Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:37.109872Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:37.111191Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-445", "request_id": "5b2ee00e-55f7-4172-a45f-e5880ae75a0a", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:37.112487Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-447", "request_id": "f5f4d42c-1501-4b1a-878f-e73a380996b0", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:37.325358Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:37.329335Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:37.330173Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-455", "request_id": "ea4573ae-74ee-4e9f-a1ba-2164e5c76caf", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:37.547310Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:37.548338Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-461", "request_id": "9cfb0d56-e4d8-47cd-be66-6fcbfec20a35", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:37.549254Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-463", "request_id": "ac4792e8-b95b-4e86-a91f-30131b2f3cce", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:37.744634Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:37.747778Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:37.749139Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-471", "request_id": "589739e7-18a3-462e-9476-aec4393ecb4f", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:37.947371Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:37.947753Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-477", "request_id": "e2c2a9c5-3e25-41dc-837d-f64f6af0ce7e", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:37.949367Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-479", "request_id": "52be23b9-15be-4c0f-825b-7e718ff07774", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:38.144023Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:38.146473Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:38.146819Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-487", "request_id": "a8528ca5-17eb-4d43-b696-5f8e18fce3b7", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:38.372685Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-493", "request_id": "a77dae28-e7cb-4b5a-8085-7c79ab1240b2", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:38.373677Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:38.576852Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:38.577711Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-499", "request_id": "a3994384-9fb0-4f76-a291-411bbffcfddd", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:38.578280Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-501", "request_id": "47607991-5a35-47c5-9bd1-7d90f26c17a1", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:38.785954Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:38.788842Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:38.794031Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-509", "request_id": "5f0395f0-57f6-4533-ade6-9793903073a5", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:39.001991Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:39.002819Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-515", "request_id": "3db16f7c-e6a4-4f3a-afad-b4cd2cb0f555", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:39.005335Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-517", "request_id": "cc26803c-5c59-42c0-bea1-6ca9be0bc400", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:39.197029Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:39.201797Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:39.205234Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-525", "request_id": "8686ddaa-3445-4176-9ffe-5cdbd8bde473", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:39.408429Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:39.408916Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-531", "request_id": "719aa177-2a28-49bd-a376-96b478682347", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:39.409452Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-533", "request_id": "609c5b44-02af-418d-b57a-bd55daae1169", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:39.604398Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:39.610027Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:39.611211Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-541", "request_id": "58889972-b1b6-42f0-91a1-bb09d7a8339b", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:39.810633Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:39.813134Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-547", "request_id": "cef60f86-6881-4078-97d1-33b8c4208493", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:39.813624Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-549", "request_id": "eb69c108-9238-448f-9ebc-7b0f6eae6dc8", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:40.016546Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:40.018909Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:40.019489Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-557", "request_id": "eafa7183-7381-47c3-981d-34bd6b22f19e", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:40.020317Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-559", "request_id": "3e40fce2-7b30-4476-bf41-ae88963257aa", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:40.253817Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:40.260100Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:40.267964Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-567", "request_id": "0507953f-35d9-46a5-b4ae-7f4743821e49", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:40.501484Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:40.505847Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-573", "request_id": "d0ca68dd-9e81-46e1-8a20-efbf1137ee98", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:40.735966Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:40.736126Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-579", "request_id": "c24e4527-5a74-4bef-ad07-f01550bb915e", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:40.929539Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:40.929921Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-585", "request_id": "39ebe1d0-af9a-4a37-a408-cdcc3dba7bbe", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:40.930818Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-587", "request_id": "12257a38-a868-43b8-a4c7-457a1b6cb7a5", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:41.135913Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:41.142619Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:41.147840Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-595", "request_id": "4fb616d5-33d1-4abb-8abb-5e9bf4c5f2a0", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:41.373538Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:41.375482Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-601", "request_id": "bfcb0405-e1fc-43cc-ae83-1c5ec415db93", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:41.589996Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:41.593400Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-607", "request_id": "8381edfb-bd8e-4fc4-a9fa-8b86da4c8308", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:41.803095Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:41.804336Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-613", "request_id": "1dc41b10-e325-4c88-a3a2-dfdb853a6c4f", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:41.805893Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-615", "request_id": "ad0d341f-5cfd-49c2-83b1-59ed4bb97730", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:42.012992Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:42.019980Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:42.020576Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-623", "request_id": "235539a4-b52b-4cf1-930a-1c5e4fa3fcee", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:42.021606Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-625", "request_id": "e210288f-2c23-46e9-a5cc-5d3ba53ad852", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:42.233468Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:42.243058Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:42.247066Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-633", "request_id": "8c3fc7e6-bc01-4efc-b253-dbe17b8643c4", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:42.457750Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:42.458080Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-639", "request_id": "b5759388-9dbd-4f9d-b9db-f073b56fbf85", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:42.459282Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-641", "request_id": "85d3a6e4-6c6b-4302-b083-2d0b5d5e9965", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:42.676759Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:42.686806Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:42.687815Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-649", "request_id": "ebf910f5-0161-4549-9bb5-e712f9f3bec0", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:42.926491Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:42.927392Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-655", "request_id": "badd968c-6cb5-48e5-a5ca-9ad7d83de65e", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:43.133159Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:43.134475Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-661", "request_id": "75329b42-c85f-450b-98d6-f38ff6fe8b92", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:43.135582Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-663", "request_id": "2de76c1a-7606-4e9b-b9b3-b44254ccc128", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:43.337573Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:43.341111Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:43.341634Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-671", "request_id": "f2cc097f-b7e5-47a9-a6f4-0c05b632c379", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:43.342377Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-673", "request_id": "e2b07ada-f4e0-4296-a173-f79ddcd771a8", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:43.607244Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:43.615018Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:43.616583Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-681", "request_id": "4e872c0b-da8f-44f7-98b9-b79857f344ae", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:43.817428Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:43.818451Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-687", "request_id": "d5cc50ff-a767-4b0d-a938-9076e91c043e", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:43.819575Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-689", "request_id": "85556ae0-142d-4b0c-890a-7feea4d016e6", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:44.008828Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:44.016270Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:44.017123Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-697", "request_id": "03c6fb90-e0a0-4ae2-a423-36947c3be0e8", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:44.225575Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:44.228318Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-703", "request_id": "4e39675f-60ec-421b-9bf5-26b4890f0d35", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:44.431356Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:44.432452Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-709", "request_id": "2c113f90-8767-4a01-8087-788a341b2989", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:44.433263Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-711", "request_id": "a6944a02-a9f4-4971-9b19-de8a277b6533", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:44.628697Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:44.637572Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:44.638484Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-719", "request_id": "7ab85605-bbc7-4d58-8528-8ff460b3a344", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:44.837105Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:44.837822Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-725", "request_id": "ed5c73fb-b5f9-499e-90cb-4f78afbae710", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:45.051598Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:45.054075Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-731", "request_id": "3132ad35-b4b5-4c92-a9d0-c53469c5022c", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:45.256471Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:45.257045Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-737", "request_id": "df99fd1d-a087-432c-8b85-47451cfa1ef5", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:45.258518Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-739", "request_id": "04c2f1e7-0522-43f8-8917-f844241e6b13", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:45.460954Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:45.463735Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:45.464574Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-747", "request_id": "9825826c-cc08-4135-b783-619968b3d543", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:45.465457Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-749", "request_id": "0c789050-bc93-4725-8f14-19333a24c8ca", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:45.672163Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:45.676642Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:45.677520Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-757", "request_id": "8d33b09c-793f-451e-b051-bf1509276b31", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:45.877415Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:45.878199Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-763", "request_id": "3f95afd6-0ac7-4d6f-b852-f5b824f93096", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:45.879671Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-765", "request_id": "e9605fab-fbc8-4d10-953c-0e16b54e9739", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:46.074841Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:46.077623Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:46.078291Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-773", "request_id": "fcf7d0fa-339b-4cc2-9122-8764fca2a299", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:46.078884Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-775", "request_id": "096bba77-0d7c-41b0-95f2-ac0730328d51", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:46.286187Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:46.288385Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:46.290246Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-783", "request_id": "61d8ea10-9775-4729-98e6-fda8a5fa5b13", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:46.493944Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:46.494904Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-789", "request_id": "aa71e334-3e1f-434b-8852-0ef459f7fbe2", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:46.691947Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:46.692604Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-795", "request_id": "5759080b-1834-40d0-8dc2-699f96d93bae", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:46.693303Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-797", "request_id": "f33a9e4b-0068-4caf-8a6f-5b25f081f4a5", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:46.883466Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:46.887594Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:46.888258Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-805", "request_id": "1b8cf17b-6b97-4921-9dc7-f49162951364", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:46.890082Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-807", "request_id": "a664d9ed-5787-4db4-b571-201d0ffe6440", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:47.084692Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:47.087998Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:47.089276Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-815", "request_id": "0e5bf004-fc37-4b5a-ae60-de8fb9d51309", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:47.308190Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:47.309860Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-821", "request_id": "293c5c99-314d-4f31-ae5a-0c7915c44bc6", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:47.511169Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:47.511642Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-827", "request_id": "a61f2f88-d5ad-437d-b157-6712049f3733", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:47.727961Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:47.728756Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-833", "request_id": "85a083ce-a256-4037-b9ef-27c3585b306a", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:47.729431Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-835", "request_id": "420ad76a-28b9-4c19-a9ed-c5ca2a181f31", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:47.924527Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:47.928091Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:47.928701Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-843", "request_id": "90a81206-d5a6-4fbb-857c-ad3f4e2c6566", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:47.929893Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-845", "request_id": "8030515a-becd-43ae-80bf-73e3367ac92e", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:48.148346Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:48.154648Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:48.155583Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-853", "request_id": "4d88a286-3f21-4cfa-a6bd-3d844a812a39", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:48.384412Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:48.388350Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-859", "request_id": "20148adc-75ae-449e-a1c2-ad4e512b7553", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:48.670964Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:48.672227Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-865", "request_id": "a34b74f6-febb-4ce5-85c8-6520dc935e09", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:48.878440Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:48.879525Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-871", "request_id": "74aaf2c0-d7ed-4352-bdc2-f5c90c59d920", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:48.880350Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-873", "request_id": "fe1083a7-5920-4fa5-abbe-7382b899de6e", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:49.073095Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:49.076968Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:49.077610Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-881", "request_id": "774e02e6-69df-4940-ad77-49c748e37b4f", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:49.078739Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-883", "request_id": "acbaf619-4992-4cd0-9770-0a62fe5f87a0", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:49.295269Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:49.307220Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:49.308110Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-891", "request_id": "84ef9925-4b99-49e8-bed1-bd5bc088f953", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:49.557138Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:49.559355Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-897", "request_id": "0f5be3c8-5c70-4020-b728-9563e6833de6", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:49.561137Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-899", "request_id": "3d560feb-d639-44da-890c-65763f0438a9", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:49.784516Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:49.797720Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:49.798278Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-907", "request_id": "17ff9370-a347-4475-b5ac-a77a42b7126e", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:50.008503Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:50.009441Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-913", "request_id": "3e1ce98d-022b-4ffd-8d44-d2be8957e262", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:50.011569Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-915", "request_id": "a6e463a6-f94c-4b98-b9a1-8fd6d18e144f", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:50.268692Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:50.270023Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:50.270943Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-923", "request_id": "2264772e-d49d-44c8-838c-80291c6ef564", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:50.271440Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-925", "request_id": "07653625-d572-4caa-9799-110f19c2e7bc", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:50.471925Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:50.474773Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:50.475730Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-933", "request_id": "a666f12c-e4e6-4be7-b406-7d158710f2d8", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:50.476709Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-935", "request_id": "a540b9ee-ec80-453e-b140-cf8b7674a732", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:50.670172Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:50.681307Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:50.682376Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-943", "request_id": "2e9fc186-70bf-44ed-a23c-edd873282c81", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:50.889772Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:50.890772Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-949", "request_id": "84be4f74-fe91-4523-b7d5-e2f49dd1f98c", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:50.892057Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-951", "request_id": "8378b064-ad15-45e9-b503-87162f41bfa5", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:51.084756Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:51.088509Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:51.089327Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-959", "request_id": "22f50655-9df6-438a-a2a2-e44c6caef17a", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:51.090365Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-961", "request_id": "629f2e23-f1f2-40c7-84b6-71d887613fe5", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:51.299303Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:51.305055Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:51.306348Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-969", "request_id": "cf89ba92-0125-48cf-ba6e-06a80cf1922a", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:51.514586Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:51.515967Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-975", "request_id": "2570c7ba-f1f8-4f1f-8285-532d54f509ca", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:51.517243Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-977", "request_id": "0e08de25-0444-4eea-ad12-c830727e23b5", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:51.724028Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:51.734193Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:51.735501Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-985", "request_id": "5908f51f-bff0-4d74-926e-3d496b969b7c", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:51.954257Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:51.954996Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-991", "request_id": "7e2797f1-5289-4f95-b97f-100be7dc2777", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:51.956285Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-993", "request_id": "a567f22d-82cb-4c52-bc50-661b1b976aae", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:52.151023Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:52.152184Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:52.152934Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-1001", "request_id": "4a8c9b27-f04b-49f9-a9eb-09c9a0102376", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:52.154574Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-1003", "request_id": "580a5750-50b0-48b1-8c3c-2c2ea18c70bc", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:52.360470Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:52.362645Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:52.363552Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-1011", "request_id": "5097422c-6d0a-4a6d-922b-ec60bdd837f3", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:52.364633Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-1013", "request_id": "f3b03057-f02e-41d4-b0b8-5822a163bed0", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:52.555058Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:52.558905Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:52.559960Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-1021", "request_id": "55f22934-3764-4816-8829-890c3aad7edb", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:52.560664Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-1023", "request_id": "a1748c2f-69c9-4e79-8f70-4924f0541900", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:52.764196Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:52.768505Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:52.771258Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-1031", "request_id": "5ab9bdf0-11bf-4753-bb74-d143167b4fda", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:52.981498Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-1037", "request_id": "d650cbc4-a3f1-4bb0-8ad0-fab6e266b764", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:52.982542Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:53.203648Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:53.206377Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-1043", "request_id": "8208499f-ea9b-41dc-a319-2fe96a22d069", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:53.441457Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:53.442520Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-1049", "request_id": "562cd3df-0a52-4bc1-a94d-5a93419fd2a9", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:53.443322Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-1051", "request_id": "76f2b1bc-749e-4ea3-b6fd-af6965f55de8", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:53.641460Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:53.643730Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:53.645389Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-1059", "request_id": "7c5f60df-c898-4157-8928-5ff8fe4f7fee", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:53.850982Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:53.851900Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-1065", "request_id": "d9aed3e8-1b2d-43df-bbad-2259b1e9f78c", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:54.074927Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:54.075393Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-1071", "request_id": "207e33ba-f5c2-4af9-8778-756086521802", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:54.286404Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:54.287558Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-1077", "request_id": "82745cca-0d91-4002-96cb-a9bd2ca5a837", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:54.503958Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:54.504466Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-1083", "request_id": "360a0837-1ce7-4eb6-9e29-2e13169a03aa", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:54.505160Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-1085", "request_id": "c471fbf5-7f14-46c6-939e-81b1b9e3f7d2", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:54.721607Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:54.736285Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:54.736919Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-1093", "request_id": "ef7ea49d-7a97-4c6e-9b81-34086766f1ac", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:54.956549Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:54.957555Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-1099", "request_id": "14c9987a-c4d3-42d6-84b1-a6b5e53df8c5", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:54.958502Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-1101", "request_id": "088abeae-5e7c-43f5-9f44-dd7b8b7fa547", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:55.162149Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:55.164454Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:55.165107Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-1109", "request_id": "e9677ade-9848-41f4-bde6-acd0511f3fbe", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:55.166037Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-1111", "request_id": "0a0ce1dc-d4a1-4551-b911-e117b51a6b8c", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:55.393235Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:55.397294Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:55.398141Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-1119", "request_id": "e8300954-bc5e-4f12-91cf-845e228d66ad", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:55.398861Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-1121", "request_id": "7b71134f-b217-4417-8ec9-e7f7dfb00744", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:55.610708Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:55.616736Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:55.617753Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-1129", "request_id": "f241fa4c-3e19-44ad-90bc-29c6aa022f3a", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:55.618169Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-1131", "request_id": "a966fd2a-f530-47c5-b6c3-a361cf48a81b", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:55.815973Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:55.820034Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:55.820961Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-1139", "request_id": "48076b3a-8b46-410a-96a7-bc9de961f4ce", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:55.821665Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-1141", "request_id": "2f8f1e74-5f36-4e00-89a7-6c36bdba44d8", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:56.020532Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:56.026272Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-1149", "request_id": "4e6e9f91-8827-4f2b-8db5-ab4f095ae041", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:56.026478Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:56.027178Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-1151", "request_id": "5c20626b-f6e9-4687-9ee2-e72e75c20265", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:56.231977Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:56.234329Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:56.234930Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-1159", "request_id": "7f88a1d6-b48d-4f2b-9031-12d8506bdc75", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:56.235558Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-1161", "request_id": "dae76627-e14b-4579-8316-9079b11be546", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:56.429423Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:56.430606Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:56.431429Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-1169", "request_id": "317140b8-52dd-4d80-b3c8-9e774f89681b", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:56.629520Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:56.630073Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-1175", "request_id": "f7368149-afee-4de1-b8a4-dc688099a291", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:56.630597Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-1177", "request_id": "5a88154e-7c31-4832-b0b4-8416002edcc9", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:56.822195Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:56.826508Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:56.827287Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-1185", "request_id": "738e7758-716f-4787-9d10-7e981a961f4b", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:57.035285Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:57.036015Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-1191", "request_id": "75790f92-8c9e-4402-b65e-eed36c983c92", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:57.237113Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:57.237889Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-1197", "request_id": "b7ed7635-078f-4ceb-bd8d-36b55f45d396", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:57.447496Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:57.448138Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-1203", "request_id": "62daf4cb-6700-4719-aa2c-b2fe8a70ba7d", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:57.449570Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-1205", "request_id": "c130945a-1c1f-4ff6-9455-042f5ca50a3b", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:57.643834Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:57.649082Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:57.649668Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-1213", "request_id": "d488880a-8146-4de5-8a94-7d5d49561127", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:57.651520Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-1215", "request_id": "5beafae0-a68b-4f58-8b24-2f73d334313f", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:57.850043Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:57.850338Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-1223", "request_id": "027ca5b3-e397-400e-99d5-fec385201fbb", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:57.851195Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:58.066085Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:58.066357Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-1229", "request_id": "19acb9d5-fcec-4215-ab96-01c99955d779", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:58.275271Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:58.278657Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-1235", "request_id": "9cc0c367-8902-45c1-95fd-c4c219f13900", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:58.486553Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:58.486989Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-1241", "request_id": "f9bc7b79-0269-4b03-b9a1-d54f27617c1d", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:58.719953Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:58.721360Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-1247", "request_id": "f9619b73-b488-4362-a7e5-4bcedc7e5795", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:58.724703Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-1249", "request_id": "a56b3b17-1707-4941-8386-695b47b9a18f", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:58.929990Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:58.931046Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:58.931874Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-1257", "request_id": "fc5972ef-0a80-4273-b9be-a139812804ed", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:58.932558Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-1259", "request_id": "844209f4-9eca-4479-8ce2-1b33c2f65b66", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66/stream"}
{"timestamp": "2025-11-14T23:01:59.146805Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:01:59.571813Z", "level": "INFO", "module": "stream", "message": "SSE stream started", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:02:21.397813Z", "level": "INFO", "module": "stream", "message": "SSE stream cancelled", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:02:22.636496Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-3", "request_id": "3e38c643-0a90-4a49-8461-933ea780194d", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:02:22.638772Z", "level": "WARNING", "module": "dependencies", "message": "No token provided in header or query parameter", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-14T23:02:22.639872Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-5", "request_id": "0d71d736-0249-4878-b11f-b18f8bb8f0d4", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:02:22.640090Z", "level": "WARNING", "module": "dependencies", "message": "No token provided in header or query parameter", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-14T23:02:22.640831Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-7", "request_id": "a3f7e684-c4f8-44f8-8492-76d9f54ce4b7", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:02:22.641021Z", "level": "WARNING", "module": "dependencies", "message": "No token provided in header or query parameter", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-14T23:02:22.641635Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-9", "request_id": "a543641f-52f2-4bc0-ad0c-5228863889ab", "method": "GET", "path": "/api/v1/jobs/ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:02:22.641827Z", "level": "WARNING", "module": "dependencies", "message": "No token provided in header or query parameter", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-14T23:02:34.640934Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-3", "request_id": "d5db2ff1-a874-4adf-974e-eaebf1795c84", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T23:02:53.437962Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-5", "request_id": "ec1720a6-db4a-4bc9-9a12-c3dd6574a369", "method": "OPTIONS", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T23:02:53.444576Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-7", "request_id": "e5aa8505-be9b-488f-a2c2-e9319e586b37", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T23:02:54.900522Z", "level": "INFO", "module": "upload", "message": "Sanitized filename for storage", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "original_filename": "KendrickLamar.mp3", "sanitized_filename": "KendrickLamar.mp3", "storage_path": "1ca24433-173e-4cea-8e37-465a08b18a79/1a3caf28-6d4c-4d2d-b39a-33fafc16b50e/KendrickLamar.mp3"}
{"timestamp": "2025-11-14T23:02:56.042843Z", "level": "INFO", "module": "storage", "message": "Uploaded file to audio-uploads/1ca24433-173e-4cea-8e37-465a08b18a79/1a3caf28-6d4c-4d2d-b39a-33fafc16b50e/KendrickLamar.mp3", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "bucket": "audio-uploads", "path": "1ca24433-173e-4cea-8e37-465a08b18a79/1a3caf28-6d4c-4d2d-b39a-33fafc16b50e/KendrickLamar.mp3", "size": 4969409}
{"timestamp": "2025-11-14T23:02:56.568789Z", "level": "INFO", "module": "queue_service", "message": "Job enqueued", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "job_id": "1a3caf28-6d4c-4d2d-b39a-33fafc16b50e", "user_id": "1ca24433-173e-4cea-8e37-465a08b18a79"}
{"timestamp": "2025-11-14T23:02:56.569148Z", "level": "INFO", "module": "upload", "message": "Job created and enqueued", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "job_id": "1a3caf28-6d4c-4d2d-b39a-33fafc16b50e", "user_id": "1ca24433-173e-4cea-8e37-465a08b18a79", "estimated_cost": 8.859428571428571, "duration_minutes": 5.906285714285715}
{"timestamp": "2025-11-14T23:02:56.977997Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-49", "request_id": "18148c42-eca4-475d-ac42-28df30553314", "method": "OPTIONS", "path": "/api/v1/jobs/1a3caf28-6d4c-4d2d-b39a-33fafc16b50e"}
{"timestamp": "2025-11-14T23:02:56.979538Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-51", "request_id": "83d80d06-7d14-4114-9b1d-15e2e1a4e68d", "method": "OPTIONS", "path": "/api/v1/jobs/1a3caf28-6d4c-4d2d-b39a-33fafc16b50e"}
{"timestamp": "2025-11-14T23:02:56.979693Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-53", "request_id": "12ed2b1f-eef5-448b-9019-5e9ab4474309", "method": "OPTIONS", "path": "/api/v1/jobs/1a3caf28-6d4c-4d2d-b39a-33fafc16b50e"}
{"timestamp": "2025-11-14T23:02:56.979832Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-55", "request_id": "6cc281d1-4bd7-406d-a41a-54a2c61f5364", "method": "GET", "path": "/api/v1/jobs/1a3caf28-6d4c-4d2d-b39a-33fafc16b50e"}
{"timestamp": "2025-11-14T23:02:57.802724Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-57", "request_id": "d4626aac-19f6-4307-a568-f5ee10cfa998", "method": "GET", "path": "/api/v1/jobs/1a3caf28-6d4c-4d2d-b39a-33fafc16b50e"}
{"timestamp": "2025-11-14T23:02:57.812315Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-59", "request_id": "9f1dbf40-93be-4f87-ab7b-40e3825e9f63", "method": "GET", "path": "/api/v1/jobs/1a3caf28-6d4c-4d2d-b39a-33fafc16b50e/stream"}
{"timestamp": "2025-11-14T23:02:58.125865Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-61", "request_id": "73de02de-5865-44be-87da-2126426e3380", "method": "GET", "path": "/api/v1/jobs/1a3caf28-6d4c-4d2d-b39a-33fafc16b50e"}
{"timestamp": "2025-11-14T23:02:58.576970Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-67", "request_id": "267b9ea0-3f00-4876-8405-a86e71df1b20", "method": "GET", "path": "/api/v1/jobs/1a3caf28-6d4c-4d2d-b39a-33fafc16b50e"}
{"timestamp": "2025-11-14T23:02:58.952297Z", "level": "INFO", "module": "stream", "message": "SSE stream started", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "1a3caf28-6d4c-4d2d-b39a-33fafc16b50e"}
{"timestamp": "2025-11-14T23:03:35.252090Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-71", "request_id": "786d2cd4-856a-4308-90b1-bbb01f1fb40a", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T23:03:42.186978Z", "level": "INFO", "module": "worker", "message": "Worker started", "taskName": "Task-1", "queue_name": "video_generation"}
{"timestamp": "2025-11-14T23:03:42.833926Z", "level": "INFO", "module": "worker", "message": "Acquiring semaphore for job", "taskName": "Task-1", "job_id": "cbe1268d-353b-423a-a27d-484dcce97231", "available_slots": 3}
{"timestamp": "2025-11-14T23:03:42.834069Z", "level": "INFO", "module": "worker", "message": "Processing job (semaphore acquired)", "taskName": "Task-1", "job_id": "cbe1268d-353b-423a-a27d-484dcce97231"}
{"timestamp": "2025-11-14T23:03:42.834139Z", "level": "INFO", "module": "worker", "message": "Processing job", "taskName": "Task-1", "job_id": "cbe1268d-353b-423a-a27d-484dcce97231", "user_id": "1ca24433-173e-4cea-8e37-465a08b18a79"}
{"timestamp": "2025-11-14T23:03:44.289364Z", "level": "WARNING", "module": "beat_detection", "message": "aubio not available, using librosa onset detection as fallback", "taskName": "Task-1"}
{"timestamp": "2025-11-14T23:03:45.331711Z", "level": "WARNING", "module": "orchestrator", "message": "Audio Parser module not found, using stub", "taskName": "Task-1", "job_id": "cbe1268d-353b-423a-a27d-484dcce97231"}
{"timestamp": "2025-11-14T23:03:45.333657Z", "level": "ERROR", "module": "orchestrator", "message": "Pipeline execution failed", "taskName": "Task-1", "job_id": "cbe1268d-353b-423a-a27d-484dcce97231", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/api_gateway/orchestrator.py\", line 197, in execute_pipeline\n    structure=SongStructure(\n              ~~~~~~~~~~~~~^\n        intro=0.0,\n        ^^^^^^^^^^\n    ...<2 lines>...\n        outro=120.0\n        ^^^^^^^^^^^\n    ),\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/pydantic/main.py\", line 250, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\npydantic_core._pydantic_core.ValidationError: 4 validation errors for SongStructure\ntype\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nstart\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nend\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nenergy\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing"}
{"timestamp": "2025-11-14T23:03:45.699759Z", "level": "ERROR", "module": "orchestrator", "message": "Pipeline error handled", "taskName": "Task-1", "job_id": "cbe1268d-353b-423a-a27d-484dcce97231", "error_code": null, "exception": "shared.errors.PipelineError: Pipeline execution failed: 4 validation errors for SongStructure\ntype\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nstart\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nend\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nenergy\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing"}
{"timestamp": "2025-11-14T23:03:45.703294Z", "level": "ERROR", "module": "worker", "message": "Unexpected error processing job", "taskName": "Task-1", "job_id": "cbe1268d-353b-423a-a27d-484dcce97231", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/api_gateway/worker.py\", line 56, in process_job\n    await execute_pipeline(job_id, audio_url, user_prompt)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/api_gateway/orchestrator.py\", line 197, in execute_pipeline\n    structure=SongStructure(\n              ~~~~~~~~~~~~~^\n        intro=0.0,\n        ^^^^^^^^^^\n    ...<2 lines>...\n        outro=120.0\n        ^^^^^^^^^^^\n    ),\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/pydantic/main.py\", line 250, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\npydantic_core._pydantic_core.ValidationError: 4 validation errors for SongStructure\ntype\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nstart\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nend\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nenergy\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing"}
{"timestamp": "2025-11-14T23:03:45.908244Z", "level": "INFO", "module": "worker", "message": "Job completed (semaphore released)", "taskName": "Task-1", "job_id": "cbe1268d-353b-423a-a27d-484dcce97231"}
{"timestamp": "2025-11-14T23:03:46.366682Z", "level": "INFO", "module": "worker", "message": "Acquiring semaphore for job", "taskName": "Task-1", "job_id": "e26acbec-d035-4a3b-981e-e1afb07bdf65", "available_slots": 3}
{"timestamp": "2025-11-14T23:03:46.366750Z", "level": "INFO", "module": "worker", "message": "Processing job (semaphore acquired)", "taskName": "Task-1", "job_id": "e26acbec-d035-4a3b-981e-e1afb07bdf65"}
{"timestamp": "2025-11-14T23:03:46.366791Z", "level": "INFO", "module": "worker", "message": "Processing job", "taskName": "Task-1", "job_id": "e26acbec-d035-4a3b-981e-e1afb07bdf65", "user_id": "1ca24433-173e-4cea-8e37-465a08b18a79"}
{"timestamp": "2025-11-14T23:03:46.807087Z", "level": "WARNING", "module": "orchestrator", "message": "Audio Parser module not found, using stub", "taskName": "Task-1", "job_id": "e26acbec-d035-4a3b-981e-e1afb07bdf65"}
{"timestamp": "2025-11-14T23:03:46.810254Z", "level": "ERROR", "module": "orchestrator", "message": "Pipeline execution failed", "taskName": "Task-1", "job_id": "e26acbec-d035-4a3b-981e-e1afb07bdf65", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/api_gateway/orchestrator.py\", line 197, in execute_pipeline\n    structure=SongStructure(\n              ~~~~~~~~~~~~~^\n        intro=0.0,\n        ^^^^^^^^^^\n    ...<2 lines>...\n        outro=120.0\n        ^^^^^^^^^^^\n    ),\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/pydantic/main.py\", line 250, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\npydantic_core._pydantic_core.ValidationError: 4 validation errors for SongStructure\ntype\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nstart\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nend\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nenergy\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing"}
{"timestamp": "2025-11-14T23:03:47.121314Z", "level": "ERROR", "module": "orchestrator", "message": "Pipeline error handled", "taskName": "Task-1", "job_id": "e26acbec-d035-4a3b-981e-e1afb07bdf65", "error_code": null, "exception": "shared.errors.PipelineError: Pipeline execution failed: 4 validation errors for SongStructure\ntype\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nstart\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nend\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nenergy\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing"}
{"timestamp": "2025-11-14T23:03:47.123827Z", "level": "ERROR", "module": "worker", "message": "Unexpected error processing job", "taskName": "Task-1", "job_id": "e26acbec-d035-4a3b-981e-e1afb07bdf65", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/api_gateway/worker.py\", line 56, in process_job\n    await execute_pipeline(job_id, audio_url, user_prompt)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/api_gateway/orchestrator.py\", line 197, in execute_pipeline\n    structure=SongStructure(\n              ~~~~~~~~~~~~~^\n        intro=0.0,\n        ^^^^^^^^^^\n    ...<2 lines>...\n        outro=120.0\n        ^^^^^^^^^^^\n    ),\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/pydantic/main.py\", line 250, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\npydantic_core._pydantic_core.ValidationError: 4 validation errors for SongStructure\ntype\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nstart\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nend\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nenergy\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing"}
{"timestamp": "2025-11-14T23:03:47.213668Z", "level": "INFO", "module": "worker", "message": "Job completed (semaphore released)", "taskName": "Task-1", "job_id": "e26acbec-d035-4a3b-981e-e1afb07bdf65"}
{"timestamp": "2025-11-14T23:03:47.668101Z", "level": "INFO", "module": "worker", "message": "Acquiring semaphore for job", "taskName": "Task-1", "job_id": "c3dde703-1770-4ba1-a21d-2d550a276787", "available_slots": 3}
{"timestamp": "2025-11-14T23:03:47.668193Z", "level": "INFO", "module": "worker", "message": "Processing job (semaphore acquired)", "taskName": "Task-1", "job_id": "c3dde703-1770-4ba1-a21d-2d550a276787"}
{"timestamp": "2025-11-14T23:03:47.668240Z", "level": "INFO", "module": "worker", "message": "Processing job", "taskName": "Task-1", "job_id": "c3dde703-1770-4ba1-a21d-2d550a276787", "user_id": "1ca24433-173e-4cea-8e37-465a08b18a79"}
{"timestamp": "2025-11-14T23:03:48.095836Z", "level": "WARNING", "module": "orchestrator", "message": "Audio Parser module not found, using stub", "taskName": "Task-1", "job_id": "c3dde703-1770-4ba1-a21d-2d550a276787"}
{"timestamp": "2025-11-14T23:03:48.097468Z", "level": "ERROR", "module": "orchestrator", "message": "Pipeline execution failed", "taskName": "Task-1", "job_id": "c3dde703-1770-4ba1-a21d-2d550a276787", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/api_gateway/orchestrator.py\", line 197, in execute_pipeline\n    structure=SongStructure(\n              ~~~~~~~~~~~~~^\n        intro=0.0,\n        ^^^^^^^^^^\n    ...<2 lines>...\n        outro=120.0\n        ^^^^^^^^^^^\n    ),\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/pydantic/main.py\", line 250, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\npydantic_core._pydantic_core.ValidationError: 4 validation errors for SongStructure\ntype\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nstart\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nend\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nenergy\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing"}
{"timestamp": "2025-11-14T23:03:48.433631Z", "level": "ERROR", "module": "orchestrator", "message": "Pipeline error handled", "taskName": "Task-1", "job_id": "c3dde703-1770-4ba1-a21d-2d550a276787", "error_code": null, "exception": "shared.errors.PipelineError: Pipeline execution failed: 4 validation errors for SongStructure\ntype\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nstart\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nend\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nenergy\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing"}
{"timestamp": "2025-11-14T23:03:48.435099Z", "level": "ERROR", "module": "worker", "message": "Unexpected error processing job", "taskName": "Task-1", "job_id": "c3dde703-1770-4ba1-a21d-2d550a276787", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/api_gateway/worker.py\", line 56, in process_job\n    await execute_pipeline(job_id, audio_url, user_prompt)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/api_gateway/orchestrator.py\", line 197, in execute_pipeline\n    structure=SongStructure(\n              ~~~~~~~~~~~~~^\n        intro=0.0,\n        ^^^^^^^^^^\n    ...<2 lines>...\n        outro=120.0\n        ^^^^^^^^^^^\n    ),\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/pydantic/main.py\", line 250, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\npydantic_core._pydantic_core.ValidationError: 4 validation errors for SongStructure\ntype\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nstart\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nend\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nenergy\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing"}
{"timestamp": "2025-11-14T23:03:48.536494Z", "level": "INFO", "module": "worker", "message": "Job completed (semaphore released)", "taskName": "Task-1", "job_id": "c3dde703-1770-4ba1-a21d-2d550a276787"}
{"timestamp": "2025-11-14T23:03:48.987448Z", "level": "INFO", "module": "worker", "message": "Acquiring semaphore for job", "taskName": "Task-1", "job_id": "23f664f1-3014-406f-8520-5d57364b939d", "available_slots": 3}
{"timestamp": "2025-11-14T23:03:48.987780Z", "level": "INFO", "module": "worker", "message": "Processing job (semaphore acquired)", "taskName": "Task-1", "job_id": "23f664f1-3014-406f-8520-5d57364b939d"}
{"timestamp": "2025-11-14T23:03:48.988007Z", "level": "INFO", "module": "worker", "message": "Processing job", "taskName": "Task-1", "job_id": "23f664f1-3014-406f-8520-5d57364b939d", "user_id": "1ca24433-173e-4cea-8e37-465a08b18a79"}
{"timestamp": "2025-11-14T23:03:49.454049Z", "level": "WARNING", "module": "orchestrator", "message": "Audio Parser module not found, using stub", "taskName": "Task-1", "job_id": "23f664f1-3014-406f-8520-5d57364b939d"}
{"timestamp": "2025-11-14T23:03:49.456362Z", "level": "ERROR", "module": "orchestrator", "message": "Pipeline execution failed", "taskName": "Task-1", "job_id": "23f664f1-3014-406f-8520-5d57364b939d", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/api_gateway/orchestrator.py\", line 197, in execute_pipeline\n    structure=SongStructure(\n              ~~~~~~~~~~~~~^\n        intro=0.0,\n        ^^^^^^^^^^\n    ...<2 lines>...\n        outro=120.0\n        ^^^^^^^^^^^\n    ),\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/pydantic/main.py\", line 250, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\npydantic_core._pydantic_core.ValidationError: 4 validation errors for SongStructure\ntype\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nstart\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nend\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nenergy\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing"}
{"timestamp": "2025-11-14T23:03:49.798206Z", "level": "ERROR", "module": "orchestrator", "message": "Pipeline error handled", "taskName": "Task-1", "job_id": "23f664f1-3014-406f-8520-5d57364b939d", "error_code": null, "exception": "shared.errors.PipelineError: Pipeline execution failed: 4 validation errors for SongStructure\ntype\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nstart\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nend\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nenergy\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing"}
{"timestamp": "2025-11-14T23:03:49.799741Z", "level": "ERROR", "module": "worker", "message": "Unexpected error processing job", "taskName": "Task-1", "job_id": "23f664f1-3014-406f-8520-5d57364b939d", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/api_gateway/worker.py\", line 56, in process_job\n    await execute_pipeline(job_id, audio_url, user_prompt)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/api_gateway/orchestrator.py\", line 197, in execute_pipeline\n    structure=SongStructure(\n              ~~~~~~~~~~~~~^\n        intro=0.0,\n        ^^^^^^^^^^\n    ...<2 lines>...\n        outro=120.0\n        ^^^^^^^^^^^\n    ),\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/pydantic/main.py\", line 250, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\npydantic_core._pydantic_core.ValidationError: 4 validation errors for SongStructure\ntype\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nstart\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nend\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nenergy\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing"}
{"timestamp": "2025-11-14T23:03:49.888798Z", "level": "INFO", "module": "worker", "message": "Job completed (semaphore released)", "taskName": "Task-1", "job_id": "23f664f1-3014-406f-8520-5d57364b939d"}
{"timestamp": "2025-11-14T23:03:50.345744Z", "level": "INFO", "module": "worker", "message": "Acquiring semaphore for job", "taskName": "Task-1", "job_id": "2ce14513-b069-48f8-8e67-0972ad3be574", "available_slots": 3}
{"timestamp": "2025-11-14T23:03:50.345882Z", "level": "INFO", "module": "worker", "message": "Processing job (semaphore acquired)", "taskName": "Task-1", "job_id": "2ce14513-b069-48f8-8e67-0972ad3be574"}
{"timestamp": "2025-11-14T23:03:50.345951Z", "level": "INFO", "module": "worker", "message": "Processing job", "taskName": "Task-1", "job_id": "2ce14513-b069-48f8-8e67-0972ad3be574", "user_id": "1ca24433-173e-4cea-8e37-465a08b18a79"}
{"timestamp": "2025-11-14T23:03:50.847253Z", "level": "WARNING", "module": "orchestrator", "message": "Audio Parser module not found, using stub", "taskName": "Task-1", "job_id": "2ce14513-b069-48f8-8e67-0972ad3be574"}
{"timestamp": "2025-11-14T23:03:50.848590Z", "level": "ERROR", "module": "orchestrator", "message": "Pipeline execution failed", "taskName": "Task-1", "job_id": "2ce14513-b069-48f8-8e67-0972ad3be574", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/api_gateway/orchestrator.py\", line 197, in execute_pipeline\n    structure=SongStructure(\n              ~~~~~~~~~~~~~^\n        intro=0.0,\n        ^^^^^^^^^^\n    ...<2 lines>...\n        outro=120.0\n        ^^^^^^^^^^^\n    ),\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/pydantic/main.py\", line 250, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\npydantic_core._pydantic_core.ValidationError: 4 validation errors for SongStructure\ntype\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nstart\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nend\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nenergy\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing"}
{"timestamp": "2025-11-14T23:03:51.158901Z", "level": "ERROR", "module": "orchestrator", "message": "Pipeline error handled", "taskName": "Task-1", "job_id": "2ce14513-b069-48f8-8e67-0972ad3be574", "error_code": null, "exception": "shared.errors.PipelineError: Pipeline execution failed: 4 validation errors for SongStructure\ntype\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nstart\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nend\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nenergy\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing"}
{"timestamp": "2025-11-14T23:03:51.160116Z", "level": "ERROR", "module": "worker", "message": "Unexpected error processing job", "taskName": "Task-1", "job_id": "2ce14513-b069-48f8-8e67-0972ad3be574", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/api_gateway/worker.py\", line 56, in process_job\n    await execute_pipeline(job_id, audio_url, user_prompt)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/api_gateway/orchestrator.py\", line 197, in execute_pipeline\n    structure=SongStructure(\n              ~~~~~~~~~~~~~^\n        intro=0.0,\n        ^^^^^^^^^^\n    ...<2 lines>...\n        outro=120.0\n        ^^^^^^^^^^^\n    ),\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/pydantic/main.py\", line 250, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\npydantic_core._pydantic_core.ValidationError: 4 validation errors for SongStructure\ntype\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nstart\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nend\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nenergy\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing"}
{"timestamp": "2025-11-14T23:03:51.259950Z", "level": "INFO", "module": "worker", "message": "Job completed (semaphore released)", "taskName": "Task-1", "job_id": "2ce14513-b069-48f8-8e67-0972ad3be574"}
{"timestamp": "2025-11-14T23:03:51.758505Z", "level": "INFO", "module": "worker", "message": "Acquiring semaphore for job", "taskName": "Task-1", "job_id": "c557d55c-dd37-49b5-bf44-42a359802342", "available_slots": 3}
{"timestamp": "2025-11-14T23:03:51.758785Z", "level": "INFO", "module": "worker", "message": "Processing job (semaphore acquired)", "taskName": "Task-1", "job_id": "c557d55c-dd37-49b5-bf44-42a359802342"}
{"timestamp": "2025-11-14T23:03:51.758951Z", "level": "INFO", "module": "worker", "message": "Processing job", "taskName": "Task-1", "job_id": "c557d55c-dd37-49b5-bf44-42a359802342", "user_id": "1ca24433-173e-4cea-8e37-465a08b18a79"}
{"timestamp": "2025-11-14T23:03:52.179089Z", "level": "WARNING", "module": "orchestrator", "message": "Audio Parser module not found, using stub", "taskName": "Task-1", "job_id": "c557d55c-dd37-49b5-bf44-42a359802342"}
{"timestamp": "2025-11-14T23:03:52.180254Z", "level": "ERROR", "module": "orchestrator", "message": "Pipeline execution failed", "taskName": "Task-1", "job_id": "c557d55c-dd37-49b5-bf44-42a359802342", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/api_gateway/orchestrator.py\", line 197, in execute_pipeline\n    structure=SongStructure(\n              ~~~~~~~~~~~~~^\n        intro=0.0,\n        ^^^^^^^^^^\n    ...<2 lines>...\n        outro=120.0\n        ^^^^^^^^^^^\n    ),\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/pydantic/main.py\", line 250, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\npydantic_core._pydantic_core.ValidationError: 4 validation errors for SongStructure\ntype\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nstart\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nend\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nenergy\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing"}
{"timestamp": "2025-11-14T23:03:52.498593Z", "level": "ERROR", "module": "orchestrator", "message": "Pipeline error handled", "taskName": "Task-1", "job_id": "c557d55c-dd37-49b5-bf44-42a359802342", "error_code": null, "exception": "shared.errors.PipelineError: Pipeline execution failed: 4 validation errors for SongStructure\ntype\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nstart\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nend\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nenergy\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing"}
{"timestamp": "2025-11-14T23:03:52.499255Z", "level": "ERROR", "module": "worker", "message": "Unexpected error processing job", "taskName": "Task-1", "job_id": "c557d55c-dd37-49b5-bf44-42a359802342", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/api_gateway/worker.py\", line 56, in process_job\n    await execute_pipeline(job_id, audio_url, user_prompt)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/api_gateway/orchestrator.py\", line 197, in execute_pipeline\n    structure=SongStructure(\n              ~~~~~~~~~~~~~^\n        intro=0.0,\n        ^^^^^^^^^^\n    ...<2 lines>...\n        outro=120.0\n        ^^^^^^^^^^^\n    ),\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/pydantic/main.py\", line 250, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\npydantic_core._pydantic_core.ValidationError: 4 validation errors for SongStructure\ntype\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nstart\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nend\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nenergy\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing"}
{"timestamp": "2025-11-14T23:03:52.590951Z", "level": "INFO", "module": "worker", "message": "Job completed (semaphore released)", "taskName": "Task-1", "job_id": "c557d55c-dd37-49b5-bf44-42a359802342"}
{"timestamp": "2025-11-14T23:03:53.087051Z", "level": "INFO", "module": "worker", "message": "Acquiring semaphore for job", "taskName": "Task-1", "job_id": "37c4c2db-c3f9-482e-ac2c-e9dd23b60aa8", "available_slots": 3}
{"timestamp": "2025-11-14T23:03:53.087114Z", "level": "INFO", "module": "worker", "message": "Processing job (semaphore acquired)", "taskName": "Task-1", "job_id": "37c4c2db-c3f9-482e-ac2c-e9dd23b60aa8"}
{"timestamp": "2025-11-14T23:03:53.087144Z", "level": "INFO", "module": "worker", "message": "Processing job", "taskName": "Task-1", "job_id": "37c4c2db-c3f9-482e-ac2c-e9dd23b60aa8", "user_id": "1ca24433-173e-4cea-8e37-465a08b18a79"}
{"timestamp": "2025-11-14T23:03:53.510685Z", "level": "WARNING", "module": "orchestrator", "message": "Audio Parser module not found, using stub", "taskName": "Task-1", "job_id": "37c4c2db-c3f9-482e-ac2c-e9dd23b60aa8"}
{"timestamp": "2025-11-14T23:03:53.511968Z", "level": "ERROR", "module": "orchestrator", "message": "Pipeline execution failed", "taskName": "Task-1", "job_id": "37c4c2db-c3f9-482e-ac2c-e9dd23b60aa8", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/api_gateway/orchestrator.py\", line 197, in execute_pipeline\n    structure=SongStructure(\n              ~~~~~~~~~~~~~^\n        intro=0.0,\n        ^^^^^^^^^^\n    ...<2 lines>...\n        outro=120.0\n        ^^^^^^^^^^^\n    ),\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/pydantic/main.py\", line 250, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\npydantic_core._pydantic_core.ValidationError: 4 validation errors for SongStructure\ntype\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nstart\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nend\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nenergy\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing"}
{"timestamp": "2025-11-14T23:03:53.825309Z", "level": "ERROR", "module": "orchestrator", "message": "Pipeline error handled", "taskName": "Task-1", "job_id": "37c4c2db-c3f9-482e-ac2c-e9dd23b60aa8", "error_code": null, "exception": "shared.errors.PipelineError: Pipeline execution failed: 4 validation errors for SongStructure\ntype\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nstart\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nend\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nenergy\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing"}
{"timestamp": "2025-11-14T23:03:53.826689Z", "level": "ERROR", "module": "worker", "message": "Unexpected error processing job", "taskName": "Task-1", "job_id": "37c4c2db-c3f9-482e-ac2c-e9dd23b60aa8", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/api_gateway/worker.py\", line 56, in process_job\n    await execute_pipeline(job_id, audio_url, user_prompt)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/api_gateway/orchestrator.py\", line 197, in execute_pipeline\n    structure=SongStructure(\n              ~~~~~~~~~~~~~^\n        intro=0.0,\n        ^^^^^^^^^^\n    ...<2 lines>...\n        outro=120.0\n        ^^^^^^^^^^^\n    ),\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/pydantic/main.py\", line 250, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\npydantic_core._pydantic_core.ValidationError: 4 validation errors for SongStructure\ntype\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nstart\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nend\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nenergy\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing"}
{"timestamp": "2025-11-14T23:03:53.928892Z", "level": "INFO", "module": "worker", "message": "Job completed (semaphore released)", "taskName": "Task-1", "job_id": "37c4c2db-c3f9-482e-ac2c-e9dd23b60aa8"}
{"timestamp": "2025-11-14T23:03:54.380578Z", "level": "INFO", "module": "worker", "message": "Acquiring semaphore for job", "taskName": "Task-1", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66", "available_slots": 3}
{"timestamp": "2025-11-14T23:03:54.380848Z", "level": "INFO", "module": "worker", "message": "Processing job (semaphore acquired)", "taskName": "Task-1", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:03:54.380999Z", "level": "INFO", "module": "worker", "message": "Processing job", "taskName": "Task-1", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66", "user_id": "1ca24433-173e-4cea-8e37-465a08b18a79"}
{"timestamp": "2025-11-14T23:03:54.808538Z", "level": "WARNING", "module": "orchestrator", "message": "Audio Parser module not found, using stub", "taskName": "Task-1", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:03:54.810091Z", "level": "ERROR", "module": "orchestrator", "message": "Pipeline execution failed", "taskName": "Task-1", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/api_gateway/orchestrator.py\", line 197, in execute_pipeline\n    structure=SongStructure(\n              ~~~~~~~~~~~~~^\n        intro=0.0,\n        ^^^^^^^^^^\n    ...<2 lines>...\n        outro=120.0\n        ^^^^^^^^^^^\n    ),\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/pydantic/main.py\", line 250, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\npydantic_core._pydantic_core.ValidationError: 4 validation errors for SongStructure\ntype\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nstart\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nend\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nenergy\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing"}
{"timestamp": "2025-11-14T23:03:55.122062Z", "level": "ERROR", "module": "orchestrator", "message": "Pipeline error handled", "taskName": "Task-1", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66", "error_code": null, "exception": "shared.errors.PipelineError: Pipeline execution failed: 4 validation errors for SongStructure\ntype\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nstart\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nend\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nenergy\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing"}
{"timestamp": "2025-11-14T23:03:55.125306Z", "level": "ERROR", "module": "worker", "message": "Unexpected error processing job", "taskName": "Task-1", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/api_gateway/worker.py\", line 56, in process_job\n    await execute_pipeline(job_id, audio_url, user_prompt)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/api_gateway/orchestrator.py\", line 197, in execute_pipeline\n    structure=SongStructure(\n              ~~~~~~~~~~~~~^\n        intro=0.0,\n        ^^^^^^^^^^\n    ...<2 lines>...\n        outro=120.0\n        ^^^^^^^^^^^\n    ),\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/pydantic/main.py\", line 250, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\npydantic_core._pydantic_core.ValidationError: 4 validation errors for SongStructure\ntype\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nstart\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nend\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nenergy\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing"}
{"timestamp": "2025-11-14T23:03:55.231530Z", "level": "INFO", "module": "worker", "message": "Job completed (semaphore released)", "taskName": "Task-1", "job_id": "ce40c9f1-2622-4029-8369-46b9ff72ac66"}
{"timestamp": "2025-11-14T23:03:55.721974Z", "level": "INFO", "module": "worker", "message": "Acquiring semaphore for job", "taskName": "Task-1", "job_id": "1a3caf28-6d4c-4d2d-b39a-33fafc16b50e", "available_slots": 3}
{"timestamp": "2025-11-14T23:03:55.722055Z", "level": "INFO", "module": "worker", "message": "Processing job (semaphore acquired)", "taskName": "Task-1", "job_id": "1a3caf28-6d4c-4d2d-b39a-33fafc16b50e"}
{"timestamp": "2025-11-14T23:03:55.722103Z", "level": "INFO", "module": "worker", "message": "Processing job", "taskName": "Task-1", "job_id": "1a3caf28-6d4c-4d2d-b39a-33fafc16b50e", "user_id": "1ca24433-173e-4cea-8e37-465a08b18a79"}
{"timestamp": "2025-11-14T23:03:56.147762Z", "level": "WARNING", "module": "orchestrator", "message": "Audio Parser module not found, using stub", "taskName": "Task-1", "job_id": "1a3caf28-6d4c-4d2d-b39a-33fafc16b50e"}
{"timestamp": "2025-11-14T23:03:56.150928Z", "level": "ERROR", "module": "orchestrator", "message": "Pipeline execution failed", "taskName": "Task-1", "job_id": "1a3caf28-6d4c-4d2d-b39a-33fafc16b50e", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/api_gateway/orchestrator.py\", line 197, in execute_pipeline\n    structure=SongStructure(\n              ~~~~~~~~~~~~~^\n        intro=0.0,\n        ^^^^^^^^^^\n    ...<2 lines>...\n        outro=120.0\n        ^^^^^^^^^^^\n    ),\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/pydantic/main.py\", line 250, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\npydantic_core._pydantic_core.ValidationError: 4 validation errors for SongStructure\ntype\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nstart\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nend\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nenergy\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing"}
{"timestamp": "2025-11-14T23:03:56.475400Z", "level": "ERROR", "module": "orchestrator", "message": "Pipeline error handled", "taskName": "Task-1", "job_id": "1a3caf28-6d4c-4d2d-b39a-33fafc16b50e", "error_code": null, "exception": "shared.errors.PipelineError: Pipeline execution failed: 4 validation errors for SongStructure\ntype\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nstart\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nend\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nenergy\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing"}
{"timestamp": "2025-11-14T23:03:56.479107Z", "level": "ERROR", "module": "worker", "message": "Unexpected error processing job", "taskName": "Task-1", "job_id": "1a3caf28-6d4c-4d2d-b39a-33fafc16b50e", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/api_gateway/worker.py\", line 56, in process_job\n    await execute_pipeline(job_id, audio_url, user_prompt)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/api_gateway/orchestrator.py\", line 197, in execute_pipeline\n    structure=SongStructure(\n              ~~~~~~~~~~~~~^\n        intro=0.0,\n        ^^^^^^^^^^\n    ...<2 lines>...\n        outro=120.0\n        ^^^^^^^^^^^\n    ),\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/pydantic/main.py\", line 250, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\npydantic_core._pydantic_core.ValidationError: 4 validation errors for SongStructure\ntype\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nstart\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nend\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nenergy\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing"}
{"timestamp": "2025-11-14T23:03:56.484348Z", "level": "INFO", "module": "stream", "message": "SSE stream cancelled", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "1a3caf28-6d4c-4d2d-b39a-33fafc16b50e"}
{"timestamp": "2025-11-14T23:03:56.577358Z", "level": "INFO", "module": "worker", "message": "Job completed (semaphore released)", "taskName": "Task-1", "job_id": "1a3caf28-6d4c-4d2d-b39a-33fafc16b50e"}
{"timestamp": "2025-11-14T23:05:20.068350Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-3", "request_id": "53a897ca-a825-4110-8435-482038ab8d4d", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T23:05:22.201337Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-5", "request_id": "b7c237df-e795-4b60-9bf8-c7a7873ffe3b", "method": "GET", "path": "/api/v1/jobs/1a3caf28-6d4c-4d2d-b39a-33fafc16b50e"}
{"timestamp": "2025-11-14T23:05:22.202413Z", "level": "WARNING", "module": "dependencies", "message": "No token provided in header or query parameter", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-14T23:05:22.206776Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-7", "request_id": "2f5ea6a0-2fea-48ef-bdc8-1bb8f4361f83", "method": "GET", "path": "/api/v1/jobs/1a3caf28-6d4c-4d2d-b39a-33fafc16b50e"}
{"timestamp": "2025-11-14T23:05:22.207099Z", "level": "WARNING", "module": "dependencies", "message": "No token provided in header or query parameter", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-14T23:05:22.207978Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-9", "request_id": "83dcf1dd-a795-49be-855e-6b0e49868b46", "method": "GET", "path": "/api/v1/jobs/1a3caf28-6d4c-4d2d-b39a-33fafc16b50e"}
{"timestamp": "2025-11-14T23:05:22.210251Z", "level": "WARNING", "module": "dependencies", "message": "No token provided in header or query parameter", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-14T23:05:22.212188Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-11", "request_id": "00bb76ed-fe94-4d25-bf38-24915ef7c235", "method": "GET", "path": "/api/v1/jobs/1a3caf28-6d4c-4d2d-b39a-33fafc16b50e"}
{"timestamp": "2025-11-14T23:05:22.213932Z", "level": "WARNING", "module": "dependencies", "message": "No token provided in header or query parameter", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-14T23:05:35.057195Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-3", "request_id": "b9cf33f6-c730-4472-a8d0-c48408690f8c", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T23:05:36.688081Z", "level": "INFO", "module": "upload", "message": "Sanitized filename for storage", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "original_filename": "KendrickLamar.mp3", "sanitized_filename": "KendrickLamar.mp3", "storage_path": "1ca24433-173e-4cea-8e37-465a08b18a79/11033db1-9b17-4b68-b44a-109dffccd65a/KendrickLamar.mp3"}
{"timestamp": "2025-11-14T23:05:37.605228Z", "level": "INFO", "module": "storage", "message": "Uploaded file to audio-uploads/1ca24433-173e-4cea-8e37-465a08b18a79/11033db1-9b17-4b68-b44a-109dffccd65a/KendrickLamar.mp3", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "bucket": "audio-uploads", "path": "1ca24433-173e-4cea-8e37-465a08b18a79/11033db1-9b17-4b68-b44a-109dffccd65a/KendrickLamar.mp3", "size": 4969409}
{"timestamp": "2025-11-14T23:05:38.346716Z", "level": "INFO", "module": "queue_service", "message": "Job enqueued", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "job_id": "11033db1-9b17-4b68-b44a-109dffccd65a", "user_id": "1ca24433-173e-4cea-8e37-465a08b18a79"}
{"timestamp": "2025-11-14T23:05:38.347105Z", "level": "INFO", "module": "upload", "message": "Job created and enqueued", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "job_id": "11033db1-9b17-4b68-b44a-109dffccd65a", "user_id": "1ca24433-173e-4cea-8e37-465a08b18a79", "estimated_cost": 8.859428571428571, "duration_minutes": 5.906285714285715}
{"timestamp": "2025-11-14T23:05:38.349314Z", "level": "INFO", "module": "worker", "message": "Acquiring semaphore for job", "taskName": "Task-1", "job_id": "11033db1-9b17-4b68-b44a-109dffccd65a", "available_slots": 3}
{"timestamp": "2025-11-14T23:05:38.350523Z", "level": "INFO", "module": "worker", "message": "Processing job (semaphore acquired)", "taskName": "Task-1", "job_id": "11033db1-9b17-4b68-b44a-109dffccd65a"}
{"timestamp": "2025-11-14T23:05:38.352191Z", "level": "INFO", "module": "worker", "message": "Processing job", "taskName": "Task-1", "job_id": "11033db1-9b17-4b68-b44a-109dffccd65a", "user_id": "1ca24433-173e-4cea-8e37-465a08b18a79"}
{"timestamp": "2025-11-14T23:05:38.448933Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-45", "request_id": "765a8ead-e38d-4c0a-b94a-94d46ebd7cfb", "method": "OPTIONS", "path": "/api/v1/jobs/11033db1-9b17-4b68-b44a-109dffccd65a"}
{"timestamp": "2025-11-14T23:05:38.449847Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-47", "request_id": "dba2f1bc-d447-49ef-b281-d758ab489a2a", "method": "GET", "path": "/api/v1/jobs/11033db1-9b17-4b68-b44a-109dffccd65a"}
{"timestamp": "2025-11-14T23:05:38.874808Z", "level": "WARNING", "module": "orchestrator", "message": "Audio Parser module not found, using stub", "taskName": "Task-1", "job_id": "11033db1-9b17-4b68-b44a-109dffccd65a"}
{"timestamp": "2025-11-14T23:05:38.880053Z", "level": "ERROR", "module": "orchestrator", "message": "Pipeline execution failed", "taskName": "Task-1", "job_id": "11033db1-9b17-4b68-b44a-109dffccd65a", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/api_gateway/orchestrator.py\", line 197, in execute_pipeline\n        })\n    \n    ...<4 lines>...\n        logger.warning(\"Audio Parser module not found, using stub\", extra={\"job_id\": job_id})\n        ^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/pydantic/main.py\", line 250, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\npydantic_core._pydantic_core.ValidationError: 4 validation errors for SongStructure\ntype\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nstart\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nend\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nenergy\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing"}
{"timestamp": "2025-11-14T23:05:39.174961Z", "level": "ERROR", "module": "orchestrator", "message": "Pipeline error handled", "taskName": "Task-1", "job_id": "11033db1-9b17-4b68-b44a-109dffccd65a", "error_code": null, "exception": "shared.errors.PipelineError: Pipeline execution failed: 4 validation errors for SongStructure\ntype\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nstart\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nend\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nenergy\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing"}
{"timestamp": "2025-11-14T23:05:39.179177Z", "level": "ERROR", "module": "worker", "message": "Unexpected error processing job", "taskName": "Task-1", "job_id": "11033db1-9b17-4b68-b44a-109dffccd65a", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/api_gateway/worker.py\", line 56, in process_job\n    await execute_pipeline(job_id, audio_url, user_prompt)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/api_gateway/orchestrator.py\", line 197, in execute_pipeline\n        })\n    \n    ...<4 lines>...\n        logger.warning(\"Audio Parser module not found, using stub\", extra={\"job_id\": job_id})\n        ^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/pydantic/main.py\", line 250, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\npydantic_core._pydantic_core.ValidationError: 4 validation errors for SongStructure\ntype\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nstart\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nend\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nenergy\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing"}
{"timestamp": "2025-11-14T23:05:39.291052Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-49", "request_id": "745d9716-56cf-4f5b-ae0b-41d23470d3e4", "method": "GET", "path": "/api/v1/jobs/11033db1-9b17-4b68-b44a-109dffccd65a"}
{"timestamp": "2025-11-14T23:05:39.299195Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-51", "request_id": "8a05f5f9-1c9f-4e72-ab0b-2e4d5637eb41", "method": "GET", "path": "/api/v1/jobs/11033db1-9b17-4b68-b44a-109dffccd65a/stream"}
{"timestamp": "2025-11-14T23:05:39.310183Z", "level": "INFO", "module": "worker", "message": "Job completed (semaphore released)", "taskName": "Task-1", "job_id": "11033db1-9b17-4b68-b44a-109dffccd65a"}
{"timestamp": "2025-11-14T23:05:39.605243Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-53", "request_id": "545ed2d7-4c76-4010-b873-2339c744fcee", "method": "GET", "path": "/api/v1/jobs/11033db1-9b17-4b68-b44a-109dffccd65a"}
{"timestamp": "2025-11-14T23:05:40.036984Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-59", "request_id": "e6a021be-0bee-4104-94a2-39caf9ab1af0", "method": "GET", "path": "/api/v1/jobs/11033db1-9b17-4b68-b44a-109dffccd65a"}
{"timestamp": "2025-11-14T23:05:40.396739Z", "level": "INFO", "module": "stream", "message": "SSE stream started", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "11033db1-9b17-4b68-b44a-109dffccd65a"}
{"timestamp": "2025-11-14T23:06:47.380967Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-63", "request_id": "e34de609-7dfe-4a84-92a6-1ec4735ecd0b", "method": "GET", "path": "/api/v1/jobs/11033db1-9b17-4b68-b44a-109dffccd65a/stream"}
{"timestamp": "2025-11-14T23:06:47.381709Z", "level": "INFO", "module": "stream", "message": "SSE stream cancelled", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "11033db1-9b17-4b68-b44a-109dffccd65a"}
{"timestamp": "2025-11-14T23:06:48.202684Z", "level": "INFO", "module": "stream", "message": "SSE stream started", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "11033db1-9b17-4b68-b44a-109dffccd65a"}
{"timestamp": "2025-11-14T23:06:49.466124Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-71", "request_id": "dc429859-3c89-4994-b6e0-3d9bca113869", "method": "GET", "path": "/api/v1/jobs/11033db1-9b17-4b68-b44a-109dffccd65a/stream"}
{"timestamp": "2025-11-14T23:06:49.466557Z", "level": "INFO", "module": "stream", "message": "SSE stream cancelled", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "11033db1-9b17-4b68-b44a-109dffccd65a"}
{"timestamp": "2025-11-14T23:06:50.156820Z", "level": "INFO", "module": "stream", "message": "SSE stream started", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "11033db1-9b17-4b68-b44a-109dffccd65a"}
{"timestamp": "2025-11-14T23:07:04.486891Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-3", "request_id": "5e6eae4f-1f96-466a-ad3a-70562d14a26f", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T23:07:40.981266Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-5", "request_id": "fa8169ba-65e7-4ae5-95eb-af23a80bd75b", "method": "OPTIONS", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T23:07:40.984569Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-7", "request_id": "732bb0f9-70e0-4aed-b2a3-7f3b58bcfa4f", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T23:07:42.344782Z", "level": "INFO", "module": "upload", "message": "Sanitized filename for storage", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "original_filename": "KendrickLamar.mp3", "sanitized_filename": "KendrickLamar.mp3", "storage_path": "1ca24433-173e-4cea-8e37-465a08b18a79/1ad3f351-a6b7-4f15-9d29-85786444d119/KendrickLamar.mp3"}
{"timestamp": "2025-11-14T23:07:43.255789Z", "level": "INFO", "module": "storage", "message": "Uploaded file to audio-uploads/1ca24433-173e-4cea-8e37-465a08b18a79/1ad3f351-a6b7-4f15-9d29-85786444d119/KendrickLamar.mp3", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "bucket": "audio-uploads", "path": "1ca24433-173e-4cea-8e37-465a08b18a79/1ad3f351-a6b7-4f15-9d29-85786444d119/KendrickLamar.mp3", "size": 4969409}
{"timestamp": "2025-11-14T23:07:43.656559Z", "level": "INFO", "module": "queue_service", "message": "Job enqueued", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "job_id": "1ad3f351-a6b7-4f15-9d29-85786444d119", "user_id": "1ca24433-173e-4cea-8e37-465a08b18a79"}
{"timestamp": "2025-11-14T23:07:43.656874Z", "level": "INFO", "module": "upload", "message": "Job created and enqueued", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "job_id": "1ad3f351-a6b7-4f15-9d29-85786444d119", "user_id": "1ca24433-173e-4cea-8e37-465a08b18a79", "estimated_cost": 8.859428571428571, "duration_minutes": 5.906285714285715}
{"timestamp": "2025-11-14T23:07:43.658028Z", "level": "INFO", "module": "worker", "message": "Acquiring semaphore for job", "taskName": "Task-1", "job_id": "1ad3f351-a6b7-4f15-9d29-85786444d119", "available_slots": 3}
{"timestamp": "2025-11-14T23:07:43.658351Z", "level": "INFO", "module": "worker", "message": "Processing job (semaphore acquired)", "taskName": "Task-1", "job_id": "1ad3f351-a6b7-4f15-9d29-85786444d119"}
{"timestamp": "2025-11-14T23:07:43.658518Z", "level": "INFO", "module": "worker", "message": "Processing job", "taskName": "Task-1", "job_id": "1ad3f351-a6b7-4f15-9d29-85786444d119", "user_id": "1ca24433-173e-4cea-8e37-465a08b18a79"}
{"timestamp": "2025-11-14T23:07:43.775474Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-49", "request_id": "0d670bfd-8627-4e05-8cdb-20762e6a3aeb", "method": "OPTIONS", "path": "/api/v1/jobs/1ad3f351-a6b7-4f15-9d29-85786444d119"}
{"timestamp": "2025-11-14T23:07:43.776771Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-51", "request_id": "0ea0d4e7-0d14-42e7-875b-18c8bdc21469", "method": "GET", "path": "/api/v1/jobs/1ad3f351-a6b7-4f15-9d29-85786444d119"}
{"timestamp": "2025-11-14T23:07:44.178072Z", "level": "WARNING", "module": "orchestrator", "message": "Audio Parser module not found, using stub", "taskName": "Task-1", "job_id": "1ad3f351-a6b7-4f15-9d29-85786444d119"}
{"timestamp": "2025-11-14T23:07:44.180825Z", "level": "ERROR", "module": "orchestrator", "message": "Pipeline execution failed", "taskName": "Task-1", "job_id": "1ad3f351-a6b7-4f15-9d29-85786444d119", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/api_gateway/orchestrator.py\", line 197, in execute_pipeline\n        })\n    \n    ...<4 lines>...\n        logger.warning(\"Audio Parser module not found, using stub\", extra={\"job_id\": job_id})\n        ^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/pydantic/main.py\", line 250, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\npydantic_core._pydantic_core.ValidationError: 4 validation errors for SongStructure\ntype\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nstart\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nend\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nenergy\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing"}
{"timestamp": "2025-11-14T23:07:44.488734Z", "level": "ERROR", "module": "orchestrator", "message": "Pipeline error handled", "taskName": "Task-1", "job_id": "1ad3f351-a6b7-4f15-9d29-85786444d119", "error_code": null, "exception": "shared.errors.PipelineError: Pipeline execution failed: 4 validation errors for SongStructure\ntype\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nstart\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nend\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nenergy\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing"}
{"timestamp": "2025-11-14T23:07:44.492650Z", "level": "ERROR", "module": "worker", "message": "Unexpected error processing job", "taskName": "Task-1", "job_id": "1ad3f351-a6b7-4f15-9d29-85786444d119", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/api_gateway/worker.py\", line 56, in process_job\n    await execute_pipeline(job_id, audio_url, user_prompt)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/api_gateway/orchestrator.py\", line 197, in execute_pipeline\n        })\n    \n    ...<4 lines>...\n        logger.warning(\"Audio Parser module not found, using stub\", extra={\"job_id\": job_id})\n        ^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/pydantic/main.py\", line 250, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\npydantic_core._pydantic_core.ValidationError: 4 validation errors for SongStructure\ntype\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nstart\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nend\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nenergy\n  Field required [type=missing, input_value={'intro': 0.0, 'verse': 1...': 30.0, 'outro': 120.0}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing"}
{"timestamp": "2025-11-14T23:07:44.601494Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-53", "request_id": "57af263b-1757-4ea9-af19-4da95ffa6993", "method": "GET", "path": "/api/v1/jobs/1ad3f351-a6b7-4f15-9d29-85786444d119"}
{"timestamp": "2025-11-14T23:07:44.611572Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-55", "request_id": "add85bf9-bb08-4fb3-9d97-a89653c7edd0", "method": "GET", "path": "/api/v1/jobs/1ad3f351-a6b7-4f15-9d29-85786444d119/stream"}
{"timestamp": "2025-11-14T23:07:44.615727Z", "level": "INFO", "module": "worker", "message": "Job completed (semaphore released)", "taskName": "Task-1", "job_id": "1ad3f351-a6b7-4f15-9d29-85786444d119"}
{"timestamp": "2025-11-14T23:07:44.913340Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-57", "request_id": "2973f74b-cd1c-4d23-8f41-96374114cb0e", "method": "GET", "path": "/api/v1/jobs/1ad3f351-a6b7-4f15-9d29-85786444d119"}
{"timestamp": "2025-11-14T23:07:45.365905Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-63", "request_id": "c8e6eb85-9a9f-4ebc-a36b-acee8f820b79", "method": "GET", "path": "/api/v1/jobs/1ad3f351-a6b7-4f15-9d29-85786444d119"}
{"timestamp": "2025-11-14T23:07:45.746762Z", "level": "INFO", "module": "stream", "message": "SSE stream started", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "1ad3f351-a6b7-4f15-9d29-85786444d119"}
{"timestamp": "2025-11-14T23:08:07.825533Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-67", "request_id": "9b9b2212-86cf-4a36-bc00-b1a88cc52545", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T23:08:23.774792Z", "level": "ERROR", "module": "monitor_queue", "message": "Failed to get recent jobs", "taskName": "Task-1", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/scripts/monitor_queue.py\", line 67, in get_recent_jobs\n    result = await db_client.table(\"jobs\").select(\"*\").order(\"created_at\", desc=True).limit(limit).execute()\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nAttributeError: 'AsyncTableQueryBuilder' object has no attribute 'order'"}
{"timestamp": "2025-11-14T23:08:58.664877Z", "level": "INFO", "module": "worker", "message": "Worker started", "taskName": "Task-1", "queue_name": "video_generation"}
{"timestamp": "2025-11-14T23:09:12.435381Z", "level": "INFO", "module": "worker", "message": "Worker started", "taskName": "Task-1", "queue_name": "video_generation"}
{"timestamp": "2025-11-14T23:09:25.503250Z", "level": "INFO", "module": "stream", "message": "SSE stream cancelled", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "1ad3f351-a6b7-4f15-9d29-85786444d119"}
{"timestamp": "2025-11-14T23:09:26.639553Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-3", "request_id": "9010ec13-162c-47ae-9507-bcebc07690ab", "method": "GET", "path": "/api/v1/jobs/1ad3f351-a6b7-4f15-9d29-85786444d119"}
{"timestamp": "2025-11-14T23:09:26.639769Z", "level": "WARNING", "module": "dependencies", "message": "No token provided in header or query parameter", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-14T23:09:26.644914Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-5", "request_id": "e8718471-ccec-4c46-abeb-8cf5d88656c2", "method": "GET", "path": "/api/v1/jobs/1ad3f351-a6b7-4f15-9d29-85786444d119"}
{"timestamp": "2025-11-14T23:09:26.645043Z", "level": "WARNING", "module": "dependencies", "message": "No token provided in header or query parameter", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-14T23:09:26.645969Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-7", "request_id": "110a7b50-bc4b-4c8b-83c9-4435a775a6da", "method": "GET", "path": "/api/v1/jobs/1ad3f351-a6b7-4f15-9d29-85786444d119"}
{"timestamp": "2025-11-14T23:09:26.646160Z", "level": "WARNING", "module": "dependencies", "message": "No token provided in header or query parameter", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-14T23:09:26.646711Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-9", "request_id": "10647a0b-2305-4e82-bce6-2fc47c61ecdd", "method": "GET", "path": "/api/v1/jobs/1ad3f351-a6b7-4f15-9d29-85786444d119"}
{"timestamp": "2025-11-14T23:09:26.646877Z", "level": "WARNING", "module": "dependencies", "message": "No token provided in header or query parameter", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-14T23:09:41.142972Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-3", "request_id": "3944b5f4-0610-4c73-b538-fcbe4d59f0ea", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T23:09:42.726699Z", "level": "INFO", "module": "upload", "message": "Sanitized filename for storage", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "original_filename": "KendrickLamar.mp3", "sanitized_filename": "KendrickLamar.mp3", "storage_path": "1ca24433-173e-4cea-8e37-465a08b18a79/1d82658f-725b-4e42-b5d2-6862e36172bc/KendrickLamar.mp3"}
{"timestamp": "2025-11-14T23:09:43.432582Z", "level": "INFO", "module": "storage", "message": "Uploaded file to audio-uploads/1ca24433-173e-4cea-8e37-465a08b18a79/1d82658f-725b-4e42-b5d2-6862e36172bc/KendrickLamar.mp3", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "bucket": "audio-uploads", "path": "1ca24433-173e-4cea-8e37-465a08b18a79/1d82658f-725b-4e42-b5d2-6862e36172bc/KendrickLamar.mp3", "size": 4969409}
{"timestamp": "2025-11-14T23:09:44.159366Z", "level": "INFO", "module": "queue_service", "message": "Job enqueued", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "job_id": "1d82658f-725b-4e42-b5d2-6862e36172bc", "user_id": "1ca24433-173e-4cea-8e37-465a08b18a79"}
{"timestamp": "2025-11-14T23:09:44.159585Z", "level": "INFO", "module": "upload", "message": "Job created and enqueued", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "job_id": "1d82658f-725b-4e42-b5d2-6862e36172bc", "user_id": "1ca24433-173e-4cea-8e37-465a08b18a79", "estimated_cost": 8.859428571428571, "duration_minutes": 5.906285714285715}
{"timestamp": "2025-11-14T23:09:44.159948Z", "level": "INFO", "module": "worker", "message": "Acquiring semaphore for job", "taskName": "Task-1", "job_id": "1d82658f-725b-4e42-b5d2-6862e36172bc", "available_slots": 3}
{"timestamp": "2025-11-14T23:09:44.160192Z", "level": "INFO", "module": "worker", "message": "Processing job (semaphore acquired)", "taskName": "Task-1", "job_id": "1d82658f-725b-4e42-b5d2-6862e36172bc"}
{"timestamp": "2025-11-14T23:09:44.160440Z", "level": "INFO", "module": "worker", "message": "Processing job", "taskName": "Task-1", "job_id": "1d82658f-725b-4e42-b5d2-6862e36172bc", "user_id": "1ca24433-173e-4cea-8e37-465a08b18a79"}
{"timestamp": "2025-11-14T23:09:45.050734Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-3", "request_id": "0e6d4979-b886-41aa-9869-e31f785379e7", "method": "OPTIONS", "path": "/api/v1/jobs/1d82658f-725b-4e42-b5d2-6862e36172bc"}
{"timestamp": "2025-11-14T23:09:45.050912Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-5", "request_id": "c3df175f-6fca-4f65-96c6-9535cb3e253e", "method": "OPTIONS", "path": "/api/v1/jobs/1d82658f-725b-4e42-b5d2-6862e36172bc"}
{"timestamp": "2025-11-14T23:09:45.051041Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-7", "request_id": "bd5904a3-87ce-458a-9db6-b1c57494aa68", "method": "OPTIONS", "path": "/api/v1/jobs/1d82658f-725b-4e42-b5d2-6862e36172bc"}
{"timestamp": "2025-11-14T23:09:45.051223Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-9", "request_id": "27f8d85d-07ed-4905-9fdd-f7cd9f606265", "method": "OPTIONS", "path": "/api/v1/jobs/1d82658f-725b-4e42-b5d2-6862e36172bc"}
{"timestamp": "2025-11-14T23:09:45.054848Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-11", "request_id": "e7a01d60-6811-40a1-82b0-3d1801733f78", "method": "GET", "path": "/api/v1/jobs/1d82658f-725b-4e42-b5d2-6862e36172bc"}
{"timestamp": "2025-11-14T23:09:45.784534Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "taskName": "Task-1", "job_id": "1d82658f-725b-4e42-b5d2-6862e36172bc", "progress": 2, "stage": "audio_parser"}
{"timestamp": "2025-11-14T23:09:45.993339Z", "level": "WARNING", "module": "beat_detection", "message": "aubio not available, using librosa onset detection as fallback", "taskName": "Task-1"}
{"timestamp": "2025-11-14T23:09:46.817898Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-3", "request_id": "950269c6-943a-4a33-a421-a789c6ce5e8b", "method": "GET", "path": "/api/v1/jobs/1d82658f-725b-4e42-b5d2-6862e36172bc"}
{"timestamp": "2025-11-14T23:09:46.820066Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-5", "request_id": "a0bd630f-2ff8-4b54-b026-f097566ca33b", "method": "GET", "path": "/api/v1/jobs/1d82658f-725b-4e42-b5d2-6862e36172bc/stream"}
{"timestamp": "2025-11-14T23:09:47.710669Z", "level": "WARNING", "module": "orchestrator", "message": "Audio Parser module not found, using stub", "taskName": "Task-1", "job_id": "1d82658f-725b-4e42-b5d2-6862e36172bc"}
{"timestamp": "2025-11-14T23:09:48.131440Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "taskName": "Task-1", "job_id": "1d82658f-725b-4e42-b5d2-6862e36172bc", "progress": 5, "stage": "audio_parser"}
{"timestamp": "2025-11-14T23:09:48.174652Z", "level": "INFO", "module": "stream", "message": "SSE stream started", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "1d82658f-725b-4e42-b5d2-6862e36172bc"}
{"timestamp": "2025-11-14T23:09:48.938145Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "taskName": "Task-1", "job_id": "1d82658f-725b-4e42-b5d2-6862e36172bc", "progress": 7, "stage": "audio_parser"}
{"timestamp": "2025-11-14T23:09:49.855984Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "taskName": "Task-1", "job_id": "1d82658f-725b-4e42-b5d2-6862e36172bc", "progress": 9, "stage": "audio_parser"}
{"timestamp": "2025-11-14T23:09:50.176917Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "taskName": "Task-1", "job_id": "1d82658f-725b-4e42-b5d2-6862e36172bc", "progress": 10, "stage": "audio_parser"}
{"timestamp": "2025-11-14T23:09:50.632539Z", "level": "WARNING", "module": "orchestrator", "message": "Scene Planner module not found, using stub", "taskName": "Task-1", "job_id": "1d82658f-725b-4e42-b5d2-6862e36172bc"}
{"timestamp": "2025-11-14T23:09:50.637343Z", "level": "ERROR", "module": "orchestrator", "message": "Pipeline execution failed", "taskName": "Task-1", "job_id": "1d82658f-725b-4e42-b5d2-6862e36172bc", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/api_gateway/orchestrator.py\", line 274, in execute_pipeline\n    characters=[Character(name=\"Character1\", description=\"Main character\")],\n                ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/pydantic/main.py\", line 250, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\npydantic_core._pydantic_core.ValidationError: 2 validation errors for Character\nid\n  Field required [type=missing, input_value={'name': 'Character1', 'd...tion': 'Main character'}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nrole\n  Field required [type=missing, input_value={'name': 'Character1', 'd...tion': 'Main character'}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing"}
{"timestamp": "2025-11-14T23:09:50.968482Z", "level": "ERROR", "module": "orchestrator", "message": "Pipeline error handled", "taskName": "Task-1", "job_id": "1d82658f-725b-4e42-b5d2-6862e36172bc", "error_code": null, "exception": "shared.errors.PipelineError: Pipeline execution failed: 2 validation errors for Character\nid\n  Field required [type=missing, input_value={'name': 'Character1', 'd...tion': 'Main character'}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nrole\n  Field required [type=missing, input_value={'name': 'Character1', 'd...tion': 'Main character'}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing"}
{"timestamp": "2025-11-14T23:09:50.972605Z", "level": "ERROR", "module": "worker", "message": "Unexpected error processing job", "taskName": "Task-1", "job_id": "1d82658f-725b-4e42-b5d2-6862e36172bc", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/api_gateway/worker.py\", line 56, in process_job\n    await execute_pipeline(job_id, audio_url, user_prompt)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/api_gateway/orchestrator.py\", line 274, in execute_pipeline\n    characters=[Character(name=\"Character1\", description=\"Main character\")],\n                ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/pydantic/main.py\", line 250, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\npydantic_core._pydantic_core.ValidationError: 2 validation errors for Character\nid\n  Field required [type=missing, input_value={'name': 'Character1', 'd...tion': 'Main character'}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nrole\n  Field required [type=missing, input_value={'name': 'Character1', 'd...tion': 'Main character'}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing"}
{"timestamp": "2025-11-14T23:09:50.976883Z", "level": "INFO", "module": "stream", "message": "SSE stream cancelled", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "1d82658f-725b-4e42-b5d2-6862e36172bc"}
{"timestamp": "2025-11-14T23:09:51.127021Z", "level": "INFO", "module": "worker", "message": "Job completed (semaphore released)", "taskName": "Task-1", "job_id": "1d82658f-725b-4e42-b5d2-6862e36172bc"}
{"timestamp": "2025-11-14T23:09:51.488608Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-3", "request_id": "2f548106-494c-4de4-873e-e4bbc3b064cc", "method": "GET", "path": "/api/v1/jobs/1d82658f-725b-4e42-b5d2-6862e36172bc"}
{"timestamp": "2025-11-14T23:09:53.059190Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-3", "request_id": "960f50b6-6c92-4917-b928-38b7ed0b4c95", "method": "GET", "path": "/api/v1/jobs/1d82658f-725b-4e42-b5d2-6862e36172bc"}
{"timestamp": "2025-11-14T23:09:53.060002Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-5", "request_id": "c5fbee18-9611-4968-9aa0-c8356e0f4159", "method": "GET", "path": "/api/v1/jobs/1d82658f-725b-4e42-b5d2-6862e36172bc/stream"}
{"timestamp": "2025-11-14T23:09:54.655221Z", "level": "INFO", "module": "stream", "message": "SSE stream started", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "1d82658f-725b-4e42-b5d2-6862e36172bc"}
{"timestamp": "2025-11-14T23:11:58.487877Z", "level": "INFO", "module": "stream", "message": "SSE stream cancelled", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "1d82658f-725b-4e42-b5d2-6862e36172bc"}
{"timestamp": "2025-11-14T23:16:13.331042Z", "level": "INFO", "module": "worker", "message": "Worker started", "taskName": "Task-1", "queue_name": "video_generation"}
{"timestamp": "2025-11-14T23:17:30.774541Z", "level": "INFO", "module": "worker", "message": "Worker started", "taskName": "Task-1", "queue_name": "video_generation"}
{"timestamp": "2025-11-14T23:18:01.096784Z", "level": "INFO", "module": "worker", "message": "Worker started", "taskName": "Task-1", "queue_name": "video_generation"}
{"timestamp": "2025-11-14T23:18:07.174769Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-3", "request_id": "f55771ab-ed23-466d-b318-c04a0342c2b0", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T23:18:13.434997Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-5", "request_id": "d24161a0-f023-46ed-ac22-4977ca4e86ce", "method": "GET", "path": "/api/v1/health"}
{"timestamp": "2025-11-14T23:18:24.930850Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-3", "request_id": "12e10fb3-5deb-4fb7-89bf-24649a164969", "method": "GET", "path": "/"}
{"timestamp": "2025-11-14T23:18:25.844647Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-5", "request_id": "ff0ca141-a924-4260-979f-a1ff84140a49", "method": "GET", "path": "/favicon.ico"}
{"timestamp": "2025-11-14T23:18:45.065754Z", "level": "INFO", "module": "worker", "message": "Worker started", "taskName": "Task-1", "queue_name": "video_generation"}
{"timestamp": "2025-11-14T23:19:29.906490Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-3", "request_id": "2f9f89e8-4f02-442a-a66e-0f03476769ec", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T23:19:31.383505Z", "level": "INFO", "module": "upload", "message": "Sanitized filename for storage", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "original_filename": "KendrickLamar.mp3", "sanitized_filename": "KendrickLamar.mp3", "storage_path": "1ca24433-173e-4cea-8e37-465a08b18a79/5fd12f80-6446-48a8-b8d6-9d933b9190f6/KendrickLamar.mp3"}
{"timestamp": "2025-11-14T23:19:32.114911Z", "level": "INFO", "module": "storage", "message": "Uploaded file to audio-uploads/1ca24433-173e-4cea-8e37-465a08b18a79/5fd12f80-6446-48a8-b8d6-9d933b9190f6/KendrickLamar.mp3", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "bucket": "audio-uploads", "path": "1ca24433-173e-4cea-8e37-465a08b18a79/5fd12f80-6446-48a8-b8d6-9d933b9190f6/KendrickLamar.mp3", "size": 4969409}
{"timestamp": "2025-11-14T23:19:32.849284Z", "level": "INFO", "module": "worker", "message": "Acquiring semaphore for job", "taskName": "Task-1", "job_id": "5fd12f80-6446-48a8-b8d6-9d933b9190f6", "available_slots": 3}
{"timestamp": "2025-11-14T23:19:32.849634Z", "level": "INFO", "module": "worker", "message": "Processing job (semaphore acquired)", "taskName": "Task-1", "job_id": "5fd12f80-6446-48a8-b8d6-9d933b9190f6"}
{"timestamp": "2025-11-14T23:19:32.849816Z", "level": "INFO", "module": "worker", "message": "Processing job", "taskName": "Task-1", "job_id": "5fd12f80-6446-48a8-b8d6-9d933b9190f6", "user_id": "1ca24433-173e-4cea-8e37-465a08b18a79"}
{"timestamp": "2025-11-14T23:19:32.852011Z", "level": "INFO", "module": "queue_service", "message": "Job enqueued", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "job_id": "5fd12f80-6446-48a8-b8d6-9d933b9190f6", "user_id": "1ca24433-173e-4cea-8e37-465a08b18a79"}
{"timestamp": "2025-11-14T23:19:32.852215Z", "level": "INFO", "module": "upload", "message": "Job created and enqueued", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "job_id": "5fd12f80-6446-48a8-b8d6-9d933b9190f6", "user_id": "1ca24433-173e-4cea-8e37-465a08b18a79", "estimated_cost": 8.859428571428571, "duration_minutes": 5.906285714285715}
{"timestamp": "2025-11-14T23:19:33.370617Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-45", "request_id": "e4b02f1c-4b41-4fae-a836-e0e2b10ad79d", "method": "OPTIONS", "path": "/api/v1/jobs/5fd12f80-6446-48a8-b8d6-9d933b9190f6"}
{"timestamp": "2025-11-14T23:19:33.371776Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-47", "request_id": "2bba8904-7c00-49b0-8d17-fded606e9e32", "method": "OPTIONS", "path": "/api/v1/jobs/5fd12f80-6446-48a8-b8d6-9d933b9190f6"}
{"timestamp": "2025-11-14T23:19:33.372004Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-49", "request_id": "37f8815c-4625-4b8e-b93a-28ec6c9a7556", "method": "OPTIONS", "path": "/api/v1/jobs/5fd12f80-6446-48a8-b8d6-9d933b9190f6"}
{"timestamp": "2025-11-14T23:19:33.372412Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-51", "request_id": "fcb4ac6b-686f-43f8-8db9-d6ae5334fe16", "method": "GET", "path": "/api/v1/jobs/5fd12f80-6446-48a8-b8d6-9d933b9190f6"}
{"timestamp": "2025-11-14T23:19:34.175735Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-53", "request_id": "756856e6-cdce-4462-b991-b37864d22cb1", "method": "GET", "path": "/api/v1/jobs/5fd12f80-6446-48a8-b8d6-9d933b9190f6"}
{"timestamp": "2025-11-14T23:19:34.183772Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-55", "request_id": "53208b6f-3e5c-4d30-8a51-d017a45f8127", "method": "GET", "path": "/api/v1/jobs/5fd12f80-6446-48a8-b8d6-9d933b9190f6/stream"}
{"timestamp": "2025-11-14T23:19:34.495803Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "taskName": "Task-1", "job_id": "5fd12f80-6446-48a8-b8d6-9d933b9190f6", "progress": 2, "stage": "audio_parser"}
{"timestamp": "2025-11-14T23:19:34.504220Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-57", "request_id": "6c452e8e-7c66-43c2-80f3-d2bdd8522b01", "method": "GET", "path": "/api/v1/jobs/5fd12f80-6446-48a8-b8d6-9d933b9190f6"}
{"timestamp": "2025-11-14T23:19:34.604154Z", "level": "WARNING", "module": "beat_detection", "message": "aubio not available, using librosa onset detection as fallback", "taskName": "Task-1"}
{"timestamp": "2025-11-14T23:19:34.900485Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-63", "request_id": "04569c80-4117-4e19-bbab-52ca4d795c91", "method": "GET", "path": "/api/v1/jobs/5fd12f80-6446-48a8-b8d6-9d933b9190f6"}
{"timestamp": "2025-11-14T23:19:35.284398Z", "level": "INFO", "module": "stream", "message": "SSE stream started", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "5fd12f80-6446-48a8-b8d6-9d933b9190f6"}
{"timestamp": "2025-11-14T23:19:35.513900Z", "level": "WARNING", "module": "orchestrator", "message": "Audio Parser module not found, using stub", "taskName": "Task-1", "job_id": "5fd12f80-6446-48a8-b8d6-9d933b9190f6"}
{"timestamp": "2025-11-14T23:19:35.944448Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "taskName": "Task-1", "job_id": "5fd12f80-6446-48a8-b8d6-9d933b9190f6", "progress": 5, "stage": "audio_parser"}
{"timestamp": "2025-11-14T23:19:36.760305Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "taskName": "Task-1", "job_id": "5fd12f80-6446-48a8-b8d6-9d933b9190f6", "progress": 7, "stage": "audio_parser"}
{"timestamp": "2025-11-14T23:19:37.690821Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "taskName": "Task-1", "job_id": "5fd12f80-6446-48a8-b8d6-9d933b9190f6", "progress": 9, "stage": "audio_parser"}
{"timestamp": "2025-11-14T23:19:37.997943Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "taskName": "Task-1", "job_id": "5fd12f80-6446-48a8-b8d6-9d933b9190f6", "progress": 100, "stage": "audio_parser"}
{"timestamp": "2025-11-14T23:19:38.245633Z", "level": "INFO", "module": "orchestrator", "message": "Audio parser results", "taskName": "Task-1", "job_id": "5fd12f80-6446-48a8-b8d6-9d933b9190f6", "bpm": 120.0, "duration": 120.0, "beat_count": 240, "structure_segments": 6, "mood": "energetic", "energy_level": "high"}
{"timestamp": "2025-11-14T23:19:38.708473Z", "level": "INFO", "module": "orchestrator", "message": "Pipeline completed successfully (audio parser only)", "taskName": "Task-1", "job_id": "5fd12f80-6446-48a8-b8d6-9d933b9190f6", "total_cost": "0.00"}
{"timestamp": "2025-11-14T23:19:38.708857Z", "level": "INFO", "module": "worker", "message": "Job processed successfully", "taskName": "Task-1", "job_id": "5fd12f80-6446-48a8-b8d6-9d933b9190f6"}
{"timestamp": "2025-11-14T23:19:38.709016Z", "level": "INFO", "module": "worker", "message": "Job completed (semaphore released)", "taskName": "Task-1", "job_id": "5fd12f80-6446-48a8-b8d6-9d933b9190f6"}
{"timestamp": "2025-11-14T23:19:40.716153Z", "level": "INFO", "module": "stream", "message": "SSE stream cancelled", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "5fd12f80-6446-48a8-b8d6-9d933b9190f6"}
{"timestamp": "2025-11-14T23:22:34.268156Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-3", "request_id": "aee7fd34-457d-4cb2-8386-b913e306cc4b", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T23:22:35.610645Z", "level": "INFO", "module": "upload", "message": "Sanitized filename for storage", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "original_filename": "KendrickLamar.mp3", "sanitized_filename": "KendrickLamar.mp3", "storage_path": "1ca24433-173e-4cea-8e37-465a08b18a79/cefaa78c-2c9a-4390-8807-2135f6a70ff8/KendrickLamar.mp3"}
{"timestamp": "2025-11-14T23:22:36.841117Z", "level": "INFO", "module": "storage", "message": "Uploaded file to audio-uploads/1ca24433-173e-4cea-8e37-465a08b18a79/cefaa78c-2c9a-4390-8807-2135f6a70ff8/KendrickLamar.mp3", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "bucket": "audio-uploads", "path": "1ca24433-173e-4cea-8e37-465a08b18a79/cefaa78c-2c9a-4390-8807-2135f6a70ff8/KendrickLamar.mp3", "size": 4969409}
{"timestamp": "2025-11-14T23:22:37.624365Z", "level": "INFO", "module": "worker", "message": "Acquiring semaphore for job", "taskName": "Task-1", "job_id": "cefaa78c-2c9a-4390-8807-2135f6a70ff8", "available_slots": 3}
{"timestamp": "2025-11-14T23:22:37.624616Z", "level": "INFO", "module": "worker", "message": "Processing job (semaphore acquired)", "taskName": "Task-1", "job_id": "cefaa78c-2c9a-4390-8807-2135f6a70ff8"}
{"timestamp": "2025-11-14T23:22:37.624718Z", "level": "INFO", "module": "worker", "message": "Processing job", "taskName": "Task-1", "job_id": "cefaa78c-2c9a-4390-8807-2135f6a70ff8", "user_id": "1ca24433-173e-4cea-8e37-465a08b18a79"}
{"timestamp": "2025-11-14T23:22:37.632243Z", "level": "INFO", "module": "queue_service", "message": "Job enqueued", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "job_id": "cefaa78c-2c9a-4390-8807-2135f6a70ff8", "user_id": "1ca24433-173e-4cea-8e37-465a08b18a79"}
{"timestamp": "2025-11-14T23:22:37.632378Z", "level": "INFO", "module": "upload", "message": "Job created and enqueued", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "job_id": "cefaa78c-2c9a-4390-8807-2135f6a70ff8", "user_id": "1ca24433-173e-4cea-8e37-465a08b18a79", "estimated_cost": 8.859428571428571, "duration_minutes": 5.906285714285715}
{"timestamp": "2025-11-14T23:22:37.724843Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-45", "request_id": "12f6bcda-def0-4f83-a49d-13e891f3cce9", "method": "OPTIONS", "path": "/api/v1/jobs/cefaa78c-2c9a-4390-8807-2135f6a70ff8"}
{"timestamp": "2025-11-14T23:22:37.730917Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-47", "request_id": "f1e8acbc-f435-4379-92d8-5b1b9e5919c2", "method": "OPTIONS", "path": "/api/v1/jobs/cefaa78c-2c9a-4390-8807-2135f6a70ff8"}
{"timestamp": "2025-11-14T23:22:37.732246Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-49", "request_id": "07637039-2127-4b26-94d1-415885ae1b00", "method": "OPTIONS", "path": "/api/v1/jobs/cefaa78c-2c9a-4390-8807-2135f6a70ff8"}
{"timestamp": "2025-11-14T23:22:37.733769Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-51", "request_id": "fbb06695-0c42-46d3-9c86-bed60c6e3b86", "method": "OPTIONS", "path": "/api/v1/jobs/cefaa78c-2c9a-4390-8807-2135f6a70ff8"}
{"timestamp": "2025-11-14T23:22:37.735166Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-53", "request_id": "ed19223b-9033-4d9b-956f-15d99cc55088", "method": "GET", "path": "/api/v1/jobs/cefaa78c-2c9a-4390-8807-2135f6a70ff8"}
{"timestamp": "2025-11-14T23:22:38.541790Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "taskName": "Task-1", "job_id": "cefaa78c-2c9a-4390-8807-2135f6a70ff8", "progress": 2, "stage": "audio_parser"}
{"timestamp": "2025-11-14T23:22:38.542783Z", "level": "WARNING", "module": "orchestrator", "message": "Audio Parser module not found, using stub", "taskName": "Task-1", "job_id": "cefaa78c-2c9a-4390-8807-2135f6a70ff8"}
{"timestamp": "2025-11-14T23:22:38.579432Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-55", "request_id": "576d9d97-897f-45c1-8d71-955d5c968dbe", "method": "GET", "path": "/api/v1/jobs/cefaa78c-2c9a-4390-8807-2135f6a70ff8"}
{"timestamp": "2025-11-14T23:22:38.588921Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-57", "request_id": "84911c3f-118b-453d-8631-6cada320a8c2", "method": "GET", "path": "/api/v1/jobs/cefaa78c-2c9a-4390-8807-2135f6a70ff8/stream"}
{"timestamp": "2025-11-14T23:22:38.901804Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-59", "request_id": "80b6eab2-b192-4716-8a59-0b9029f693d4", "method": "GET", "path": "/api/v1/jobs/cefaa78c-2c9a-4390-8807-2135f6a70ff8"}
{"timestamp": "2025-11-14T23:22:38.954395Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "taskName": "Task-1", "job_id": "cefaa78c-2c9a-4390-8807-2135f6a70ff8", "progress": 5, "stage": "audio_parser"}
{"timestamp": "2025-11-14T23:22:39.282682Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-65", "request_id": "31098dfc-4698-483c-81c7-39ea675a1929", "method": "GET", "path": "/api/v1/jobs/cefaa78c-2c9a-4390-8807-2135f6a70ff8"}
{"timestamp": "2025-11-14T23:22:39.657948Z", "level": "INFO", "module": "stream", "message": "SSE stream started", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "cefaa78c-2c9a-4390-8807-2135f6a70ff8"}
{"timestamp": "2025-11-14T23:22:39.766576Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "taskName": "Task-1", "job_id": "cefaa78c-2c9a-4390-8807-2135f6a70ff8", "progress": 7, "stage": "audio_parser"}
{"timestamp": "2025-11-14T23:22:40.711043Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "taskName": "Task-1", "job_id": "cefaa78c-2c9a-4390-8807-2135f6a70ff8", "progress": 9, "stage": "audio_parser"}
{"timestamp": "2025-11-14T23:22:41.012243Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "taskName": "Task-1", "job_id": "cefaa78c-2c9a-4390-8807-2135f6a70ff8", "progress": 100, "stage": "audio_parser"}
{"timestamp": "2025-11-14T23:22:41.238070Z", "level": "INFO", "module": "orchestrator", "message": "Audio parser results", "taskName": "Task-1", "job_id": "cefaa78c-2c9a-4390-8807-2135f6a70ff8", "bpm": 120.0, "duration": 120.0, "beat_count": 240, "structure_segments": 6, "mood": "energetic", "energy_level": "high"}
{"timestamp": "2025-11-14T23:22:41.648006Z", "level": "INFO", "module": "orchestrator", "message": "Pipeline completed successfully (audio parser only)", "taskName": "Task-1", "job_id": "cefaa78c-2c9a-4390-8807-2135f6a70ff8", "total_cost": "0.00"}
{"timestamp": "2025-11-14T23:22:41.648175Z", "level": "INFO", "module": "worker", "message": "Job processed successfully", "taskName": "Task-1", "job_id": "cefaa78c-2c9a-4390-8807-2135f6a70ff8"}
{"timestamp": "2025-11-14T23:22:41.648237Z", "level": "INFO", "module": "worker", "message": "Job completed (semaphore released)", "taskName": "Task-1", "job_id": "cefaa78c-2c9a-4390-8807-2135f6a70ff8"}
{"timestamp": "2025-11-14T23:22:43.653925Z", "level": "INFO", "module": "stream", "message": "SSE stream cancelled", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "cefaa78c-2c9a-4390-8807-2135f6a70ff8"}
{"timestamp": "2025-11-14T23:23:07.183197Z", "level": "WARNING", "module": "beat_detection", "message": "aubio not available, using librosa onset detection as fallback", "taskName": null}
{"timestamp": "2025-11-14T23:23:09.799842Z", "level": "WARNING", "module": "beat_detection", "message": "aubio not available, using librosa onset detection as fallback", "taskName": null}
{"timestamp": "2025-11-14T23:23:18.481279Z", "level": "WARNING", "module": "beat_detection", "message": "BPM 0.00 outside valid range [60, 200], using default 120 BPM", "taskName": null}
{"timestamp": "2025-11-14T23:23:18.481359Z", "level": "WARNING", "module": "beat_detection", "message": "Low confidence (0.50) in beat detection, using tempo-based boundaries", "taskName": null}
{"timestamp": "2025-11-14T23:23:18.485748Z", "level": "WARNING", "module": "beat_detection", "message": "BPM 0.00 outside valid range [60, 200], using default 120 BPM", "taskName": null}
{"timestamp": "2025-11-14T23:23:18.485809Z", "level": "WARNING", "module": "beat_detection", "message": "Low confidence (0.50) in beat detection, using tempo-based boundaries", "taskName": null}
{"timestamp": "2025-11-14T23:23:18.490772Z", "level": "WARNING", "module": "beat_detection", "message": "BPM 0.00 outside valid range [60, 200], using default 120 BPM", "taskName": null}
{"timestamp": "2025-11-14T23:23:18.490834Z", "level": "WARNING", "module": "beat_detection", "message": "Low confidence (0.50) in beat detection, using tempo-based boundaries", "taskName": null}
{"timestamp": "2025-11-14T23:23:18.494460Z", "level": "WARNING", "module": "beat_detection", "message": "BPM 0.00 outside valid range [60, 200], using default 120 BPM", "taskName": null}
{"timestamp": "2025-11-14T23:23:18.494503Z", "level": "WARNING", "module": "beat_detection", "message": "Low confidence (0.50) in beat detection, using tempo-based boundaries", "taskName": null}
{"timestamp": "2025-11-14T23:23:18.496855Z", "level": "WARNING", "module": "beat_detection", "message": "BPM 0.00 outside valid range [60, 200], using default 120 BPM", "taskName": null}
{"timestamp": "2025-11-14T23:23:18.496896Z", "level": "WARNING", "module": "beat_detection", "message": "Low confidence (0.50) in beat detection, using tempo-based boundaries", "taskName": null}
{"timestamp": "2025-11-14T23:23:18.498371Z", "level": "WARNING", "module": "boundaries", "message": "Only 2 boundaries generated, need 3. Regenerating with reduced duration per clip.", "taskName": null}
{"timestamp": "2025-11-14T23:23:18.498426Z", "level": "INFO", "module": "boundaries", "message": "Generated 3 clip boundaries", "taskName": null}
{"timestamp": "2025-11-14T23:23:18.498717Z", "level": "WARNING", "module": "boundaries", "message": "Only 2 boundaries generated, need 3. Regenerating with reduced duration per clip.", "taskName": null}
{"timestamp": "2025-11-14T23:23:18.498770Z", "level": "INFO", "module": "boundaries", "message": "Generated 3 clip boundaries", "taskName": null}
{"timestamp": "2025-11-14T23:23:18.499056Z", "level": "INFO", "module": "boundaries", "message": "Generated 5 clip boundaries", "taskName": null}
{"timestamp": "2025-11-14T23:23:18.499329Z", "level": "WARNING", "module": "boundaries", "message": "Only 1 boundaries generated, need 3. Regenerating with reduced duration per clip.", "taskName": null}
{"timestamp": "2025-11-14T23:23:18.499374Z", "level": "INFO", "module": "boundaries", "message": "Generated 3 clip boundaries", "taskName": null}
{"timestamp": "2025-11-14T23:23:18.499646Z", "level": "WARNING", "module": "boundaries", "message": "No beat timestamps available, generating uniform boundaries", "taskName": null}
{"timestamp": "2025-11-14T23:23:18.499916Z", "level": "WARNING", "module": "boundaries", "message": "Only 0 boundaries generated, need 3. Regenerating with reduced duration per clip.", "taskName": null}
{"timestamp": "2025-11-14T23:23:18.499964Z", "level": "INFO", "module": "boundaries", "message": "Generated 3 clip boundaries", "taskName": null}
{"timestamp": "2025-11-14T23:23:18.500442Z", "level": "INFO", "module": "boundaries", "message": "Generated 25 clip boundaries", "taskName": null}
{"timestamp": "2025-11-14T23:23:18.500711Z", "level": "WARNING", "module": "boundaries", "message": "Only 2 boundaries generated, need 3. Regenerating with reduced duration per clip.", "taskName": null}
{"timestamp": "2025-11-14T23:23:18.500760Z", "level": "INFO", "module": "boundaries", "message": "Generated 3 clip boundaries", "taskName": null}
{"timestamp": "2025-11-14T23:23:18.972005Z", "level": "INFO", "module": "cache", "message": "Stored analysis in Redis cache: test_hash_12345", "taskName": "Task-1"}
{"timestamp": "2025-11-14T23:23:18.995522Z", "level": "WARNING", "module": "cache", "message": "Failed to store cached analysis: 'AsyncTableQueryBuilder' object has no attribute 'upsert'", "taskName": "Task-1", "file_hash": "test_hash_12345", "error": "'AsyncTableQueryBuilder' object has no attribute 'upsert'"}
{"timestamp": "2025-11-14T23:23:19.130865Z", "level": "INFO", "module": "cache", "message": "Cache hit for file hash: test_hash_12345", "taskName": "Task-1"}
{"timestamp": "2025-11-14T23:23:19.134862Z", "level": "WARNING", "module": "cache", "message": "Failed to get cached analysis: Failed to get JSON from Redis: Failed to get Redis key: Event loop is closed", "taskName": "Task-4", "file_hash": "nonexistent_hash"}
{"timestamp": "2025-11-14T23:23:19.597738Z", "level": "INFO", "module": "cache", "message": "Stored analysis in Redis cache: test_serialization", "taskName": "Task-7"}
{"timestamp": "2025-11-14T23:23:19.597838Z", "level": "WARNING", "module": "cache", "message": "Failed to store cached analysis: 'AsyncTableQueryBuilder' object has no attribute 'upsert'", "taskName": "Task-7", "file_hash": "test_serialization", "error": "'AsyncTableQueryBuilder' object has no attribute 'upsert'"}
{"timestamp": "2025-11-14T23:23:19.711123Z", "level": "INFO", "module": "cache", "message": "Cache hit for file hash: test_serialization", "taskName": "Task-7"}
{"timestamp": "2025-11-14T23:23:19.712673Z", "level": "WARNING", "module": "cache", "message": "Failed to store cached analysis: Failed to set JSON in Redis: Failed to set Redis key: Event loop is closed", "taskName": "Task-10", "file_hash": "test_ttl", "error": "Failed to set JSON in Redis: Failed to set Redis key: Event loop is closed"}
{"timestamp": "2025-11-14T23:23:20.174992Z", "level": "INFO", "module": "cache", "message": "Cache hit for file hash: test_ttl", "taskName": "Task-10"}
{"timestamp": "2025-11-14T23:23:20.190267Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=energetic, secondary=dark, energy=high, confidence=0.93", "taskName": null}
{"timestamp": "2025-11-14T23:23:20.202206Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=dark, secondary=calm, energy=low, confidence=0.83", "taskName": null}
{"timestamp": "2025-11-14T23:23:20.213478Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=dark, secondary=calm, energy=high, confidence=0.77", "taskName": null}
{"timestamp": "2025-11-14T23:23:20.249728Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=energetic, secondary=None, energy=high, confidence=0.73", "taskName": null}
{"timestamp": "2025-11-14T23:23:20.256897Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=dark, secondary=energetic, energy=high, confidence=0.77", "taskName": null}
{"timestamp": "2025-11-14T23:23:20.263364Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=dark, secondary=energetic, energy=high, confidence=0.77", "taskName": null}
{"timestamp": "2025-11-14T23:23:20.264104Z", "level": "ERROR", "module": "mood_classifier", "message": "Mood classification failed: can't extend empty axis 0 using modes other than 'constant' or 'empty'", "taskName": null}
{"timestamp": "2025-11-14T23:23:20.268077Z", "level": "INFO", "module": "parser", "message": "Loading audio file for job d594d7d2-46e1-4ee4-ac3a-7138b53ea4ed", "job_id": "d594d7d2-46e1-4ee4-ac3a-7138b53ea4ed", "taskName": "Task-13"}
{"timestamp": "2025-11-14T23:23:20.929667Z", "level": "INFO", "module": "parser", "message": "Audio loaded: duration=10.00s, sample_rate=22050 Hz", "job_id": "d594d7d2-46e1-4ee4-ac3a-7138b53ea4ed", "taskName": "Task-13"}
{"timestamp": "2025-11-14T23:23:20.929901Z", "level": "INFO", "module": "parser", "message": "Detecting beats...", "job_id": "d594d7d2-46e1-4ee4-ac3a-7138b53ea4ed", "taskName": "Task-13"}
{"timestamp": "2025-11-14T23:23:20.945162Z", "level": "WARNING", "module": "beat_detection", "message": "BPM 0.00 outside valid range [60, 200], using default 120 BPM", "job_id": "d594d7d2-46e1-4ee4-ac3a-7138b53ea4ed", "taskName": "Task-13"}
{"timestamp": "2025-11-14T23:23:20.945215Z", "level": "WARNING", "module": "beat_detection", "message": "Low confidence (0.50) in beat detection, using tempo-based boundaries", "job_id": "d594d7d2-46e1-4ee4-ac3a-7138b53ea4ed", "taskName": "Task-13"}
{"timestamp": "2025-11-14T23:23:20.945257Z", "level": "INFO", "module": "parser", "message": "Beat detection complete: BPM=120.00, beats=20, confidence=0.50", "job_id": "d594d7d2-46e1-4ee4-ac3a-7138b53ea4ed", "taskName": "Task-13"}
{"timestamp": "2025-11-14T23:23:20.945285Z", "level": "INFO", "module": "parser", "message": "Analyzing song structure...", "job_id": "d594d7d2-46e1-4ee4-ac3a-7138b53ea4ed", "taskName": "Task-13"}
{"timestamp": "2025-11-14T23:23:20.954067Z", "level": "INFO", "module": "structure_analysis", "message": "Distance matrix shape: (431, 431), frames: 431", "job_id": "d594d7d2-46e1-4ee4-ac3a-7138b53ea4ed", "taskName": "Task-13"}
{"timestamp": "2025-11-14T23:23:20.954471Z", "level": "INFO", "module": "structure_analysis", "message": "Attempting clustering with 3 clusters on 431 frames", "job_id": "d594d7d2-46e1-4ee4-ac3a-7138b53ea4ed", "taskName": "Task-13"}
{"timestamp": "2025-11-14T23:23:20.986627Z", "level": "INFO", "module": "structure_analysis", "message": "Clustering successful: 3 unique segments detected", "job_id": "d594d7d2-46e1-4ee4-ac3a-7138b53ea4ed", "taskName": "Task-13"}
{"timestamp": "2025-11-14T23:23:21.013851Z", "level": "INFO", "module": "structure_analysis", "message": "Structure analysis complete: 122 segments detected via clustering. Segments: ['bridge(0.0-0.0s, medium)', 'bridge(0.0-0.0s, medium)', 'chorus(0.0-0.2s, high)', 'bridge(0.2-0.2s, medium)', 'bridge(0.2-0.3s, medium)', 'bridge(0.3-0.3s, medium)', 'chorus(0.3-0.5s, high)', 'bridge(0.5-0.6s, medium)', 'chorus(0.6-0.7s, high)', 'bridge(0.7-0.7s, medium)', 'bridge(0.7-0.8s, medium)', 'bridge(0.8-0.8s, medium)', 'chorus(0.8-1.0s, high)', 'bridge(1.0-1.0s, medium)', 'chorus(1.0-1.2s, high)', 'bridge(1.2-1.2s, medium)', 'bridge(1.2-1.3s, medium)', 'bridge(1.3-1.3s, medium)', 'chorus(1.3-1.5s, high)', 'bridge(1.5-1.6s, medium)', 'chorus(1.6-1.7s, high)', 'bridge(1.7-1.7s, medium)', 'bridge(1.7-1.8s, medium)', 'bridge(1.8-1.8s, medium)', 'chorus(1.8-2.0s, high)', 'bridge(2.0-2.0s, medium)', 'chorus(2.0-2.2s, high)', 'bridge(2.2-2.2s, medium)', 'bridge(2.2-2.3s, medium)', 'bridge(2.3-2.3s, medium)', 'chorus(2.3-2.5s, high)', 'bridge(2.5-2.6s, medium)', 'chorus(2.6-2.7s, high)', 'bridge(2.7-2.7s, medium)', 'bridge(2.7-2.8s, medium)', 'bridge(2.8-2.8s, medium)', 'chorus(2.8-3.0s, high)', 'bridge(3.0-3.0s, medium)', 'chorus(3.0-3.2s, high)', 'bridge(3.2-3.2s, medium)', 'bridge(3.2-3.3s, medium)', 'bridge(3.3-3.3s, medium)', 'chorus(3.3-3.5s, high)', 'bridge(3.5-3.6s, medium)', 'chorus(3.6-3.7s, high)', 'bridge(3.7-3.7s, medium)', 'bridge(3.7-3.8s, medium)', 'bridge(3.8-3.8s, medium)', 'chorus(3.8-4.0s, high)', 'bridge(4.0-4.0s, medium)', 'chorus(4.0-4.2s, high)', 'bridge(4.2-4.2s, medium)', 'bridge(4.2-4.3s, medium)', 'bridge(4.3-4.3s, medium)', 'chorus(4.3-4.5s, high)', 'bridge(4.5-4.6s, medium)', 'chorus(4.6-4.7s, high)', 'bridge(4.7-4.7s, medium)', 'bridge(4.7-4.8s, medium)', 'bridge(4.8-4.8s, medium)', 'chorus(4.8-5.0s, high)', 'chorus(5.0-5.1s, high)', 'chorus(5.1-5.2s, high)', 'bridge(5.2-5.2s, medium)', 'bridge(5.2-5.3s, medium)', 'bridge(5.3-5.3s, medium)', 'chorus(5.3-5.5s, high)', 'bridge(5.5-5.5s, medium)', 'chorus(5.5-5.7s, high)', 'bridge(5.7-5.7s, medium)', 'bridge(5.7-5.8s, medium)', 'bridge(5.8-5.8s, medium)', 'chorus(5.8-6.0s, high)', 'chorus(6.0-6.1s, high)', 'chorus(6.1-6.2s, high)', 'bridge(6.2-6.2s, medium)', 'bridge(6.2-6.3s, medium)', 'bridge(6.3-6.3s, medium)', 'chorus(6.3-6.5s, high)', 'bridge(6.5-6.5s, medium)', 'chorus(6.5-6.7s, high)', 'bridge(6.7-6.7s, medium)', 'bridge(6.7-6.8s, medium)', 'bridge(6.8-6.8s, medium)', 'chorus(6.8-7.0s, high)', 'chorus(7.0-7.1s, high)', 'chorus(7.1-7.2s, high)', 'bridge(7.2-7.2s, medium)', 'bridge(7.2-7.3s, medium)', 'bridge(7.3-7.3s, medium)', 'chorus(7.3-7.5s, high)', 'bridge(7.5-7.5s, medium)', 'chorus(7.5-7.7s, high)', 'bridge(7.7-7.7s, medium)', 'bridge(7.7-7.8s, medium)', 'bridge(7.8-7.8s, medium)', 'chorus(7.8-8.0s, high)', 'bridge(8.0-8.1s, medium)', 'chorus(8.1-8.2s, high)', 'bridge(8.2-8.2s, medium)', 'bridge(8.2-8.3s, medium)', 'bridge(8.3-8.3s, medium)', 'chorus(8.3-8.5s, high)', 'bridge(8.5-8.5s, medium)', 'chorus(8.5-8.7s, high)', 'bridge(8.7-8.7s, medium)', 'bridge(8.7-8.8s, medium)', 'bridge(8.8-8.8s, medium)', 'chorus(8.8-9.0s, high)', 'bridge(9.0-9.1s, medium)', 'chorus(9.1-9.2s, high)', 'bridge(9.2-9.2s, medium)', 'bridge(9.2-9.3s, medium)', 'bridge(9.3-9.3s, medium)', 'chorus(9.3-9.5s, high)', 'bridge(9.5-9.5s, medium)', 'chorus(9.5-9.7s, high)', 'bridge(9.7-9.7s, medium)', 'bridge(9.7-9.8s, medium)', 'bridge(9.8-9.8s, medium)', 'chorus(9.8-10.0s, high)', 'bridge(10.0-10.0s, medium)']", "job_id": "d594d7d2-46e1-4ee4-ac3a-7138b53ea4ed", "taskName": "Task-13"}
{"timestamp": "2025-11-14T23:23:21.013998Z", "level": "INFO", "module": "parser", "message": "Structure analysis complete: 122 segments", "job_id": "d594d7d2-46e1-4ee4-ac3a-7138b53ea4ed", "taskName": "Task-13"}
{"timestamp": "2025-11-14T23:23:21.014052Z", "level": "INFO", "module": "parser", "message": "Extracting lyrics...", "job_id": "d594d7d2-46e1-4ee4-ac3a-7138b53ea4ed", "taskName": "Task-13"}
{"timestamp": "2025-11-14T23:23:21.014415Z", "level": "INFO", "module": "whisper_client", "message": "Created temporary audio file: /var/folders/d5/vzgmwykd2jsbxfy1k60z4ds00000gq/T/tmp910wyz3_.mp3", "job_id": "d594d7d2-46e1-4ee4-ac3a-7138b53ea4ed", "taskName": "Task-13"}
{"timestamp": "2025-11-14T23:23:22.394139Z", "level": "INFO", "module": "whisper_client", "message": "Whisper API response received: 1 words", "job_id": "d594d7d2-46e1-4ee4-ac3a-7138b53ea4ed", "taskName": "Task-13"}
{"timestamp": "2025-11-14T23:23:22.394359Z", "level": "ERROR", "module": "whisper_client", "message": "Whisper API call failed: 'TranscriptionWord' object has no attribute 'get'", "job_id": "d594d7d2-46e1-4ee4-ac3a-7138b53ea4ed", "taskName": "Task-13"}
{"timestamp": "2025-11-14T23:23:22.394709Z", "level": "WARNING", "module": "whisper_client", "message": "Whisper API call failed after retries: Failed to extract lyrics: 'TranscriptionWord' object has no attribute 'get', returning empty lyrics", "job_id": "d594d7d2-46e1-4ee4-ac3a-7138b53ea4ed", "taskName": "Task-13"}
{"timestamp": "2025-11-14T23:23:22.394845Z", "level": "INFO", "module": "parser", "message": "Lyrics extraction complete: 0 words", "job_id": "d594d7d2-46e1-4ee4-ac3a-7138b53ea4ed", "taskName": "Task-13"}
{"timestamp": "2025-11-14T23:23:22.394928Z", "level": "INFO", "module": "parser", "message": "Classifying mood...", "job_id": "d594d7d2-46e1-4ee4-ac3a-7138b53ea4ed", "taskName": "Task-13"}
{"timestamp": "2025-11-14T23:23:22.413567Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=dark, secondary=energetic, energy=high, confidence=0.77", "job_id": "d594d7d2-46e1-4ee4-ac3a-7138b53ea4ed", "taskName": "Task-13"}
{"timestamp": "2025-11-14T23:23:22.413694Z", "level": "INFO", "module": "parser", "message": "Mood classification complete: dark, confidence=0.77", "job_id": "d594d7d2-46e1-4ee4-ac3a-7138b53ea4ed", "taskName": "Task-13"}
{"timestamp": "2025-11-14T23:23:22.413781Z", "level": "INFO", "module": "parser", "message": "Generating clip boundaries...", "job_id": "d594d7d2-46e1-4ee4-ac3a-7138b53ea4ed", "taskName": "Task-13"}
{"timestamp": "2025-11-14T23:23:22.413886Z", "level": "WARNING", "module": "boundaries", "message": "Only 2 boundaries generated, need 3. Regenerating with reduced duration per clip.", "job_id": "d594d7d2-46e1-4ee4-ac3a-7138b53ea4ed", "taskName": "Task-13"}
{"timestamp": "2025-11-14T23:23:22.413969Z", "level": "INFO", "module": "boundaries", "message": "Generated 3 clip boundaries", "job_id": "d594d7d2-46e1-4ee4-ac3a-7138b53ea4ed", "taskName": "Task-13"}
{"timestamp": "2025-11-14T23:23:22.414023Z", "level": "INFO", "module": "parser", "message": "Boundary generation complete: 3 boundaries", "job_id": "d594d7d2-46e1-4ee4-ac3a-7138b53ea4ed", "taskName": "Task-13"}
{"timestamp": "2025-11-14T23:23:22.414104Z", "level": "INFO", "module": "parser", "message": "Audio analysis complete for job d594d7d2-46e1-4ee4-ac3a-7138b53ea4ed: duration=10.00s, processing_time=2.15s, beats=20, segments=122, lyrics=0, boundaries=3", "job_id": "d594d7d2-46e1-4ee4-ac3a-7138b53ea4ed", "taskName": "Task-13"}
{"timestamp": "2025-11-14T23:23:22.420425Z", "level": "INFO", "module": "parser", "message": "Loading audio file for job 227ec420-5fef-4aa4-b294-d4f858398751", "job_id": "227ec420-5fef-4aa4-b294-d4f858398751", "taskName": "Task-16"}
{"timestamp": "2025-11-14T23:23:22.421114Z", "level": "INFO", "module": "parser", "message": "Audio loaded: duration=10.00s, sample_rate=22050 Hz", "job_id": "227ec420-5fef-4aa4-b294-d4f858398751", "taskName": "Task-16"}
{"timestamp": "2025-11-14T23:23:22.421162Z", "level": "INFO", "module": "parser", "message": "Detecting beats...", "job_id": "227ec420-5fef-4aa4-b294-d4f858398751", "taskName": "Task-16"}
{"timestamp": "2025-11-14T23:23:22.431804Z", "level": "WARNING", "module": "beat_detection", "message": "BPM 0.00 outside valid range [60, 200], using default 120 BPM", "job_id": "227ec420-5fef-4aa4-b294-d4f858398751", "taskName": "Task-16"}
{"timestamp": "2025-11-14T23:23:22.431894Z", "level": "WARNING", "module": "beat_detection", "message": "Low confidence (0.50) in beat detection, using tempo-based boundaries", "job_id": "227ec420-5fef-4aa4-b294-d4f858398751", "taskName": "Task-16"}
{"timestamp": "2025-11-14T23:23:22.431949Z", "level": "INFO", "module": "parser", "message": "Beat detection complete: BPM=120.00, beats=20, confidence=0.50", "job_id": "227ec420-5fef-4aa4-b294-d4f858398751", "taskName": "Task-16"}
{"timestamp": "2025-11-14T23:23:22.431991Z", "level": "INFO", "module": "parser", "message": "Analyzing song structure...", "job_id": "227ec420-5fef-4aa4-b294-d4f858398751", "taskName": "Task-16"}
{"timestamp": "2025-11-14T23:23:22.441244Z", "level": "INFO", "module": "structure_analysis", "message": "Distance matrix shape: (431, 431), frames: 431", "job_id": "227ec420-5fef-4aa4-b294-d4f858398751", "taskName": "Task-16"}
{"timestamp": "2025-11-14T23:23:22.441701Z", "level": "INFO", "module": "structure_analysis", "message": "Attempting clustering with 3 clusters on 431 frames", "job_id": "227ec420-5fef-4aa4-b294-d4f858398751", "taskName": "Task-16"}
{"timestamp": "2025-11-14T23:23:22.443780Z", "level": "INFO", "module": "structure_analysis", "message": "Clustering successful: 3 unique segments detected", "job_id": "227ec420-5fef-4aa4-b294-d4f858398751", "taskName": "Task-16"}
{"timestamp": "2025-11-14T23:23:22.472162Z", "level": "INFO", "module": "structure_analysis", "message": "Structure analysis complete: 122 segments detected via clustering. Segments: ['bridge(0.0-0.0s, medium)', 'bridge(0.0-0.0s, medium)', 'chorus(0.0-0.2s, high)', 'bridge(0.2-0.2s, medium)', 'bridge(0.2-0.3s, medium)', 'bridge(0.3-0.3s, medium)', 'chorus(0.3-0.5s, high)', 'bridge(0.5-0.6s, medium)', 'chorus(0.6-0.7s, high)', 'bridge(0.7-0.7s, medium)', 'bridge(0.7-0.8s, medium)', 'bridge(0.8-0.8s, medium)', 'chorus(0.8-1.0s, high)', 'bridge(1.0-1.0s, medium)', 'chorus(1.0-1.2s, high)', 'bridge(1.2-1.2s, medium)', 'bridge(1.2-1.3s, medium)', 'bridge(1.3-1.3s, medium)', 'chorus(1.3-1.5s, high)', 'bridge(1.5-1.6s, medium)', 'chorus(1.6-1.7s, high)', 'bridge(1.7-1.7s, medium)', 'bridge(1.7-1.8s, medium)', 'bridge(1.8-1.8s, medium)', 'chorus(1.8-2.0s, high)', 'bridge(2.0-2.0s, medium)', 'chorus(2.0-2.2s, high)', 'bridge(2.2-2.2s, medium)', 'bridge(2.2-2.3s, medium)', 'bridge(2.3-2.3s, medium)', 'chorus(2.3-2.5s, high)', 'bridge(2.5-2.6s, medium)', 'chorus(2.6-2.7s, high)', 'bridge(2.7-2.7s, medium)', 'bridge(2.7-2.8s, medium)', 'bridge(2.8-2.8s, medium)', 'chorus(2.8-3.0s, high)', 'bridge(3.0-3.0s, medium)', 'chorus(3.0-3.2s, high)', 'bridge(3.2-3.2s, medium)', 'bridge(3.2-3.3s, medium)', 'bridge(3.3-3.3s, medium)', 'chorus(3.3-3.5s, high)', 'bridge(3.5-3.6s, medium)', 'chorus(3.6-3.7s, high)', 'bridge(3.7-3.7s, medium)', 'bridge(3.7-3.8s, medium)', 'bridge(3.8-3.8s, medium)', 'chorus(3.8-4.0s, high)', 'bridge(4.0-4.0s, medium)', 'chorus(4.0-4.2s, high)', 'bridge(4.2-4.2s, medium)', 'bridge(4.2-4.3s, medium)', 'bridge(4.3-4.3s, medium)', 'chorus(4.3-4.5s, high)', 'bridge(4.5-4.6s, medium)', 'chorus(4.6-4.7s, high)', 'bridge(4.7-4.7s, medium)', 'bridge(4.7-4.8s, medium)', 'bridge(4.8-4.8s, medium)', 'chorus(4.8-5.0s, high)', 'chorus(5.0-5.1s, high)', 'chorus(5.1-5.2s, high)', 'bridge(5.2-5.2s, medium)', 'bridge(5.2-5.3s, medium)', 'bridge(5.3-5.3s, medium)', 'chorus(5.3-5.5s, high)', 'bridge(5.5-5.5s, medium)', 'chorus(5.5-5.7s, high)', 'bridge(5.7-5.7s, medium)', 'bridge(5.7-5.8s, medium)', 'bridge(5.8-5.8s, medium)', 'chorus(5.8-6.0s, high)', 'chorus(6.0-6.1s, high)', 'chorus(6.1-6.2s, high)', 'bridge(6.2-6.2s, medium)', 'bridge(6.2-6.3s, medium)', 'bridge(6.3-6.3s, medium)', 'chorus(6.3-6.5s, high)', 'bridge(6.5-6.5s, medium)', 'chorus(6.5-6.7s, high)', 'bridge(6.7-6.7s, medium)', 'bridge(6.7-6.8s, medium)', 'bridge(6.8-6.8s, medium)', 'chorus(6.8-7.0s, high)', 'chorus(7.0-7.1s, high)', 'chorus(7.1-7.2s, high)', 'bridge(7.2-7.2s, medium)', 'bridge(7.2-7.3s, medium)', 'bridge(7.3-7.3s, medium)', 'chorus(7.3-7.5s, high)', 'bridge(7.5-7.5s, medium)', 'chorus(7.5-7.7s, high)', 'bridge(7.7-7.7s, medium)', 'bridge(7.7-7.8s, medium)', 'bridge(7.8-7.8s, medium)', 'chorus(7.8-8.0s, high)', 'bridge(8.0-8.1s, medium)', 'chorus(8.1-8.2s, high)', 'bridge(8.2-8.2s, medium)', 'bridge(8.2-8.3s, medium)', 'bridge(8.3-8.3s, medium)', 'chorus(8.3-8.5s, high)', 'bridge(8.5-8.5s, medium)', 'chorus(8.5-8.7s, high)', 'bridge(8.7-8.7s, medium)', 'bridge(8.7-8.8s, medium)', 'bridge(8.8-8.8s, medium)', 'chorus(8.8-9.0s, high)', 'bridge(9.0-9.1s, medium)', 'chorus(9.1-9.2s, high)', 'bridge(9.2-9.2s, medium)', 'bridge(9.2-9.3s, medium)', 'bridge(9.3-9.3s, medium)', 'chorus(9.3-9.5s, high)', 'bridge(9.5-9.5s, medium)', 'chorus(9.5-9.7s, high)', 'bridge(9.7-9.7s, medium)', 'bridge(9.7-9.8s, medium)', 'bridge(9.8-9.8s, medium)', 'chorus(9.8-10.0s, high)', 'bridge(10.0-10.0s, medium)']", "job_id": "227ec420-5fef-4aa4-b294-d4f858398751", "taskName": "Task-16"}
{"timestamp": "2025-11-14T23:23:22.472286Z", "level": "INFO", "module": "parser", "message": "Structure analysis complete: 122 segments", "job_id": "227ec420-5fef-4aa4-b294-d4f858398751", "taskName": "Task-16"}
{"timestamp": "2025-11-14T23:23:22.472325Z", "level": "INFO", "module": "parser", "message": "Extracting lyrics...", "job_id": "227ec420-5fef-4aa4-b294-d4f858398751", "taskName": "Task-16"}
{"timestamp": "2025-11-14T23:23:22.472678Z", "level": "INFO", "module": "whisper_client", "message": "Created temporary audio file: /var/folders/d5/vzgmwykd2jsbxfy1k60z4ds00000gq/T/tmpxzmetg88.mp3", "job_id": "227ec420-5fef-4aa4-b294-d4f858398751", "taskName": "Task-16"}
{"timestamp": "2025-11-14T23:23:23.747387Z", "level": "INFO", "module": "whisper_client", "message": "Whisper API response received: 1 words", "job_id": "227ec420-5fef-4aa4-b294-d4f858398751", "taskName": "Task-16"}
{"timestamp": "2025-11-14T23:23:23.747470Z", "level": "ERROR", "module": "whisper_client", "message": "Whisper API call failed: 'TranscriptionWord' object has no attribute 'get'", "job_id": "227ec420-5fef-4aa4-b294-d4f858398751", "taskName": "Task-16"}
{"timestamp": "2025-11-14T23:23:23.747718Z", "level": "WARNING", "module": "whisper_client", "message": "Whisper API call failed after retries: Failed to extract lyrics: 'TranscriptionWord' object has no attribute 'get', returning empty lyrics", "job_id": "227ec420-5fef-4aa4-b294-d4f858398751", "taskName": "Task-16"}
{"timestamp": "2025-11-14T23:23:23.747773Z", "level": "INFO", "module": "parser", "message": "Lyrics extraction complete: 0 words", "job_id": "227ec420-5fef-4aa4-b294-d4f858398751", "taskName": "Task-16"}
{"timestamp": "2025-11-14T23:23:23.747815Z", "level": "INFO", "module": "parser", "message": "Classifying mood...", "job_id": "227ec420-5fef-4aa4-b294-d4f858398751", "taskName": "Task-16"}
{"timestamp": "2025-11-14T23:23:23.757820Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=dark, secondary=energetic, energy=high, confidence=0.77", "job_id": "227ec420-5fef-4aa4-b294-d4f858398751", "taskName": "Task-16"}
{"timestamp": "2025-11-14T23:23:23.757894Z", "level": "INFO", "module": "parser", "message": "Mood classification complete: dark, confidence=0.77", "job_id": "227ec420-5fef-4aa4-b294-d4f858398751", "taskName": "Task-16"}
{"timestamp": "2025-11-14T23:23:23.757941Z", "level": "INFO", "module": "parser", "message": "Generating clip boundaries...", "job_id": "227ec420-5fef-4aa4-b294-d4f858398751", "taskName": "Task-16"}
{"timestamp": "2025-11-14T23:23:23.758005Z", "level": "WARNING", "module": "boundaries", "message": "Only 2 boundaries generated, need 3. Regenerating with reduced duration per clip.", "job_id": "227ec420-5fef-4aa4-b294-d4f858398751", "taskName": "Task-16"}
{"timestamp": "2025-11-14T23:23:23.758064Z", "level": "INFO", "module": "boundaries", "message": "Generated 3 clip boundaries", "job_id": "227ec420-5fef-4aa4-b294-d4f858398751", "taskName": "Task-16"}
{"timestamp": "2025-11-14T23:23:23.758100Z", "level": "INFO", "module": "parser", "message": "Boundary generation complete: 3 boundaries", "job_id": "227ec420-5fef-4aa4-b294-d4f858398751", "taskName": "Task-16"}
{"timestamp": "2025-11-14T23:23:23.758151Z", "level": "INFO", "module": "parser", "message": "Audio analysis complete for job 227ec420-5fef-4aa4-b294-d4f858398751: duration=10.00s, processing_time=1.34s, beats=20, segments=122, lyrics=0, boundaries=3", "job_id": "227ec420-5fef-4aa4-b294-d4f858398751", "taskName": "Task-16"}
{"timestamp": "2025-11-14T23:23:23.759627Z", "level": "INFO", "module": "parser", "message": "Loading audio file for job ea4a66ba-635b-416d-bd8b-7d822cfcd3fa", "job_id": "ea4a66ba-635b-416d-bd8b-7d822cfcd3fa", "taskName": "Task-19"}
{"timestamp": "2025-11-14T23:23:23.759767Z", "level": "ERROR", "module": "parser", "message": "Audio parsing failed for job ea4a66ba-635b-416d-bd8b-7d822cfcd3fa: Error opening <_io.BytesIO object at 0x1193113a0>: Format not recognised.", "job_id": "ea4a66ba-635b-416d-bd8b-7d822cfcd3fa", "taskName": "Task-19"}
{"timestamp": "2025-11-14T23:23:23.760450Z", "level": "INFO", "module": "parser", "message": "Loading audio file for job 48c95f1f-9da6-4a4c-b93b-43ed629979f6", "job_id": "48c95f1f-9da6-4a4c-b93b-43ed629979f6", "taskName": "Task-22"}
{"timestamp": "2025-11-14T23:23:23.760540Z", "level": "ERROR", "module": "parser", "message": "Audio parsing failed for job 48c95f1f-9da6-4a4c-b93b-43ed629979f6: Error opening <_io.BytesIO object at 0x1193113f0>: Format not recognised.", "job_id": "48c95f1f-9da6-4a4c-b93b-43ed629979f6", "taskName": "Task-22"}
{"timestamp": "2025-11-14T23:23:23.761511Z", "level": "INFO", "module": "main", "message": "Starting audio analysis for job None, audio_url=test_url", "taskName": "Task-25"}
{"timestamp": "2025-11-14T23:23:23.762073Z", "level": "INFO", "module": "main", "message": "Starting audio analysis for job 91a73f7a-d06b-4383-9b58-51049d4f2006, audio_url=None", "job_id": "91a73f7a-d06b-4383-9b58-51049d4f2006", "taskName": "Task-28"}
{"timestamp": "2025-11-14T23:23:23.764607Z", "level": "INFO", "module": "parser", "message": "Loading audio file for job 2bad07d6-8d21-4b50-b4f3-22435087a481", "job_id": "2bad07d6-8d21-4b50-b4f3-22435087a481", "taskName": "Task-31"}
{"timestamp": "2025-11-14T23:23:23.764860Z", "level": "INFO", "module": "parser", "message": "Audio loaded: duration=5.00s, sample_rate=22050 Hz", "job_id": "2bad07d6-8d21-4b50-b4f3-22435087a481", "taskName": "Task-31"}
{"timestamp": "2025-11-14T23:23:23.764895Z", "level": "INFO", "module": "parser", "message": "Detecting beats...", "job_id": "2bad07d6-8d21-4b50-b4f3-22435087a481", "taskName": "Task-31"}
{"timestamp": "2025-11-14T23:23:23.769500Z", "level": "ERROR", "module": "beat_detection", "message": "Beat detection failed: unsupported format string passed to numpy.ndarray.__format__", "job_id": "2bad07d6-8d21-4b50-b4f3-22435087a481", "taskName": "Task-31"}
{"timestamp": "2025-11-14T23:23:23.769558Z", "level": "WARNING", "module": "beat_detection", "message": "Using fallback tempo-based beats: BPM=120.0, beats=10", "job_id": "2bad07d6-8d21-4b50-b4f3-22435087a481", "taskName": "Task-31"}
{"timestamp": "2025-11-14T23:23:23.769605Z", "level": "INFO", "module": "parser", "message": "Beat detection complete: BPM=120.00, beats=10, confidence=0.50", "job_id": "2bad07d6-8d21-4b50-b4f3-22435087a481", "taskName": "Task-31"}
{"timestamp": "2025-11-14T23:23:23.769639Z", "level": "INFO", "module": "parser", "message": "Analyzing song structure...", "job_id": "2bad07d6-8d21-4b50-b4f3-22435087a481", "taskName": "Task-31"}
{"timestamp": "2025-11-14T23:23:23.775518Z", "level": "INFO", "module": "structure_analysis", "message": "Distance matrix shape: (216, 216), frames: 216", "job_id": "2bad07d6-8d21-4b50-b4f3-22435087a481", "taskName": "Task-31"}
{"timestamp": "2025-11-14T23:23:23.775809Z", "level": "INFO", "module": "structure_analysis", "message": "Attempting clustering with 3 clusters on 216 frames", "job_id": "2bad07d6-8d21-4b50-b4f3-22435087a481", "taskName": "Task-31"}
{"timestamp": "2025-11-14T23:23:23.776678Z", "level": "INFO", "module": "structure_analysis", "message": "Clustering successful: 3 unique segments detected", "job_id": "2bad07d6-8d21-4b50-b4f3-22435087a481", "taskName": "Task-31"}
{"timestamp": "2025-11-14T23:23:23.781817Z", "level": "INFO", "module": "structure_analysis", "message": "Structure analysis complete: 4 segments detected via clustering. Segments: ['chorus(0.0-1.3s, high)', 'bridge(1.3-1.3s, medium)', 'chorus(1.3-5.0s, high)', 'bridge(5.0-5.0s, medium)']", "job_id": "2bad07d6-8d21-4b50-b4f3-22435087a481", "taskName": "Task-31"}
{"timestamp": "2025-11-14T23:23:23.781899Z", "level": "INFO", "module": "parser", "message": "Structure analysis complete: 4 segments", "job_id": "2bad07d6-8d21-4b50-b4f3-22435087a481", "taskName": "Task-31"}
{"timestamp": "2025-11-14T23:23:23.781940Z", "level": "INFO", "module": "parser", "message": "Extracting lyrics...", "job_id": "2bad07d6-8d21-4b50-b4f3-22435087a481", "taskName": "Task-31"}
{"timestamp": "2025-11-14T23:23:23.782212Z", "level": "INFO", "module": "whisper_client", "message": "Created temporary audio file: /var/folders/d5/vzgmwykd2jsbxfy1k60z4ds00000gq/T/tmp7obhkxuc.mp3", "job_id": "2bad07d6-8d21-4b50-b4f3-22435087a481", "taskName": "Task-31"}
{"timestamp": "2025-11-14T23:23:24.549154Z", "level": "INFO", "module": "whisper_client", "message": "Whisper API response received: 4 words", "job_id": "2bad07d6-8d21-4b50-b4f3-22435087a481", "taskName": "Task-31"}
{"timestamp": "2025-11-14T23:23:24.549311Z", "level": "ERROR", "module": "whisper_client", "message": "Whisper API call failed: 'TranscriptionWord' object has no attribute 'get'", "job_id": "2bad07d6-8d21-4b50-b4f3-22435087a481", "taskName": "Task-31"}
{"timestamp": "2025-11-14T23:23:24.549645Z", "level": "WARNING", "module": "whisper_client", "message": "Whisper API call failed after retries: Failed to extract lyrics: 'TranscriptionWord' object has no attribute 'get', returning empty lyrics", "job_id": "2bad07d6-8d21-4b50-b4f3-22435087a481", "taskName": "Task-31"}
{"timestamp": "2025-11-14T23:23:24.549754Z", "level": "INFO", "module": "parser", "message": "Lyrics extraction complete: 0 words", "job_id": "2bad07d6-8d21-4b50-b4f3-22435087a481", "taskName": "Task-31"}
{"timestamp": "2025-11-14T23:23:24.549819Z", "level": "INFO", "module": "parser", "message": "Classifying mood...", "job_id": "2bad07d6-8d21-4b50-b4f3-22435087a481", "taskName": "Task-31"}
{"timestamp": "2025-11-14T23:23:24.559838Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=bright, secondary=energetic, energy=low, confidence=0.77", "job_id": "2bad07d6-8d21-4b50-b4f3-22435087a481", "taskName": "Task-31"}
{"timestamp": "2025-11-14T23:23:24.559924Z", "level": "INFO", "module": "parser", "message": "Mood classification complete: bright, confidence=0.77", "job_id": "2bad07d6-8d21-4b50-b4f3-22435087a481", "taskName": "Task-31"}
{"timestamp": "2025-11-14T23:23:24.559990Z", "level": "INFO", "module": "parser", "message": "Generating clip boundaries...", "job_id": "2bad07d6-8d21-4b50-b4f3-22435087a481", "taskName": "Task-31"}
{"timestamp": "2025-11-14T23:23:24.560077Z", "level": "WARNING", "module": "boundaries", "message": "Only 1 boundaries generated, need 3. Regenerating with reduced duration per clip.", "job_id": "2bad07d6-8d21-4b50-b4f3-22435087a481", "taskName": "Task-31"}
{"timestamp": "2025-11-14T23:23:24.560170Z", "level": "INFO", "module": "boundaries", "message": "Generated 3 clip boundaries", "job_id": "2bad07d6-8d21-4b50-b4f3-22435087a481", "taskName": "Task-31"}
{"timestamp": "2025-11-14T23:23:24.560230Z", "level": "INFO", "module": "parser", "message": "Boundary generation complete: 3 boundaries", "job_id": "2bad07d6-8d21-4b50-b4f3-22435087a481", "taskName": "Task-31"}
{"timestamp": "2025-11-14T23:23:24.560315Z", "level": "INFO", "module": "parser", "message": "Audio analysis complete for job 2bad07d6-8d21-4b50-b4f3-22435087a481: duration=5.00s, processing_time=0.80s, beats=10, segments=4, lyrics=0, boundaries=3", "job_id": "2bad07d6-8d21-4b50-b4f3-22435087a481", "taskName": "Task-31"}
{"timestamp": "2025-11-14T23:23:24.565105Z", "level": "INFO", "module": "parser", "message": "Loading audio file for job 16647417-0f3f-4aaa-a590-d4b0938717b7", "job_id": "16647417-0f3f-4aaa-a590-d4b0938717b7", "taskName": "Task-34"}
{"timestamp": "2025-11-14T23:23:24.565819Z", "level": "INFO", "module": "parser", "message": "Audio loaded: duration=10.00s, sample_rate=22050 Hz", "job_id": "16647417-0f3f-4aaa-a590-d4b0938717b7", "taskName": "Task-34"}
{"timestamp": "2025-11-14T23:23:24.565909Z", "level": "INFO", "module": "parser", "message": "Detecting beats...", "job_id": "16647417-0f3f-4aaa-a590-d4b0938717b7", "taskName": "Task-34"}
{"timestamp": "2025-11-14T23:23:24.577446Z", "level": "WARNING", "module": "beat_detection", "message": "BPM 0.00 outside valid range [60, 200], using default 120 BPM", "job_id": "16647417-0f3f-4aaa-a590-d4b0938717b7", "taskName": "Task-34"}
{"timestamp": "2025-11-14T23:23:24.577512Z", "level": "WARNING", "module": "beat_detection", "message": "Low confidence (0.50) in beat detection, using tempo-based boundaries", "job_id": "16647417-0f3f-4aaa-a590-d4b0938717b7", "taskName": "Task-34"}
{"timestamp": "2025-11-14T23:23:24.577574Z", "level": "INFO", "module": "parser", "message": "Beat detection complete: BPM=120.00, beats=20, confidence=0.50", "job_id": "16647417-0f3f-4aaa-a590-d4b0938717b7", "taskName": "Task-34"}
{"timestamp": "2025-11-14T23:23:24.577619Z", "level": "INFO", "module": "parser", "message": "Analyzing song structure...", "job_id": "16647417-0f3f-4aaa-a590-d4b0938717b7", "taskName": "Task-34"}
{"timestamp": "2025-11-14T23:23:24.590115Z", "level": "INFO", "module": "structure_analysis", "message": "Distance matrix shape: (431, 431), frames: 431", "job_id": "16647417-0f3f-4aaa-a590-d4b0938717b7", "taskName": "Task-34"}
{"timestamp": "2025-11-14T23:23:24.594020Z", "level": "INFO", "module": "structure_analysis", "message": "Attempting clustering with 3 clusters on 431 frames", "job_id": "16647417-0f3f-4aaa-a590-d4b0938717b7", "taskName": "Task-34"}
{"timestamp": "2025-11-14T23:23:24.596192Z", "level": "INFO", "module": "structure_analysis", "message": "Clustering successful: 3 unique segments detected", "job_id": "16647417-0f3f-4aaa-a590-d4b0938717b7", "taskName": "Task-34"}
{"timestamp": "2025-11-14T23:23:24.627519Z", "level": "INFO", "module": "structure_analysis", "message": "Structure analysis complete: 122 segments detected via clustering. Segments: ['bridge(0.0-0.0s, medium)', 'bridge(0.0-0.0s, medium)', 'chorus(0.0-0.2s, high)', 'bridge(0.2-0.2s, medium)', 'bridge(0.2-0.3s, medium)', 'bridge(0.3-0.3s, medium)', 'chorus(0.3-0.5s, high)', 'bridge(0.5-0.6s, medium)', 'chorus(0.6-0.7s, high)', 'bridge(0.7-0.7s, medium)', 'bridge(0.7-0.8s, medium)', 'bridge(0.8-0.8s, medium)', 'chorus(0.8-1.0s, high)', 'bridge(1.0-1.0s, medium)', 'chorus(1.0-1.2s, high)', 'bridge(1.2-1.2s, medium)', 'bridge(1.2-1.3s, medium)', 'bridge(1.3-1.3s, medium)', 'chorus(1.3-1.5s, high)', 'bridge(1.5-1.6s, medium)', 'chorus(1.6-1.7s, high)', 'bridge(1.7-1.7s, medium)', 'bridge(1.7-1.8s, medium)', 'bridge(1.8-1.8s, medium)', 'chorus(1.8-2.0s, high)', 'bridge(2.0-2.0s, medium)', 'chorus(2.0-2.2s, high)', 'bridge(2.2-2.2s, medium)', 'bridge(2.2-2.3s, medium)', 'bridge(2.3-2.3s, medium)', 'chorus(2.3-2.5s, high)', 'bridge(2.5-2.6s, medium)', 'chorus(2.6-2.7s, high)', 'bridge(2.7-2.7s, medium)', 'bridge(2.7-2.8s, medium)', 'bridge(2.8-2.8s, medium)', 'chorus(2.8-3.0s, high)', 'bridge(3.0-3.0s, medium)', 'chorus(3.0-3.2s, high)', 'bridge(3.2-3.2s, medium)', 'bridge(3.2-3.3s, medium)', 'bridge(3.3-3.3s, medium)', 'chorus(3.3-3.5s, high)', 'bridge(3.5-3.6s, medium)', 'chorus(3.6-3.7s, high)', 'bridge(3.7-3.7s, medium)', 'bridge(3.7-3.8s, medium)', 'bridge(3.8-3.8s, medium)', 'chorus(3.8-4.0s, high)', 'bridge(4.0-4.0s, medium)', 'chorus(4.0-4.2s, high)', 'bridge(4.2-4.2s, medium)', 'bridge(4.2-4.3s, medium)', 'bridge(4.3-4.3s, medium)', 'chorus(4.3-4.5s, high)', 'bridge(4.5-4.6s, medium)', 'chorus(4.6-4.7s, high)', 'bridge(4.7-4.7s, medium)', 'bridge(4.7-4.8s, medium)', 'bridge(4.8-4.8s, medium)', 'chorus(4.8-5.0s, high)', 'chorus(5.0-5.1s, high)', 'chorus(5.1-5.2s, high)', 'bridge(5.2-5.2s, medium)', 'bridge(5.2-5.3s, medium)', 'bridge(5.3-5.3s, medium)', 'chorus(5.3-5.5s, high)', 'bridge(5.5-5.5s, medium)', 'chorus(5.5-5.7s, high)', 'bridge(5.7-5.7s, medium)', 'bridge(5.7-5.8s, medium)', 'bridge(5.8-5.8s, medium)', 'chorus(5.8-6.0s, high)', 'chorus(6.0-6.1s, high)', 'chorus(6.1-6.2s, high)', 'bridge(6.2-6.2s, medium)', 'bridge(6.2-6.3s, medium)', 'bridge(6.3-6.3s, medium)', 'chorus(6.3-6.5s, high)', 'bridge(6.5-6.5s, medium)', 'chorus(6.5-6.7s, high)', 'bridge(6.7-6.7s, medium)', 'bridge(6.7-6.8s, medium)', 'bridge(6.8-6.8s, medium)', 'chorus(6.8-7.0s, high)', 'chorus(7.0-7.1s, high)', 'chorus(7.1-7.2s, high)', 'bridge(7.2-7.2s, medium)', 'bridge(7.2-7.3s, medium)', 'bridge(7.3-7.3s, medium)', 'chorus(7.3-7.5s, high)', 'bridge(7.5-7.5s, medium)', 'chorus(7.5-7.7s, high)', 'bridge(7.7-7.7s, medium)', 'bridge(7.7-7.8s, medium)', 'bridge(7.8-7.8s, medium)', 'chorus(7.8-8.0s, high)', 'bridge(8.0-8.1s, medium)', 'chorus(8.1-8.2s, high)', 'bridge(8.2-8.2s, medium)', 'bridge(8.2-8.3s, medium)', 'bridge(8.3-8.3s, medium)', 'chorus(8.3-8.5s, high)', 'bridge(8.5-8.5s, medium)', 'chorus(8.5-8.7s, high)', 'bridge(8.7-8.7s, medium)', 'bridge(8.7-8.8s, medium)', 'bridge(8.8-8.8s, medium)', 'chorus(8.8-9.0s, high)', 'bridge(9.0-9.1s, medium)', 'chorus(9.1-9.2s, high)', 'bridge(9.2-9.2s, medium)', 'bridge(9.2-9.3s, medium)', 'bridge(9.3-9.3s, medium)', 'chorus(9.3-9.5s, high)', 'bridge(9.5-9.5s, medium)', 'chorus(9.5-9.7s, high)', 'bridge(9.7-9.7s, medium)', 'bridge(9.7-9.8s, medium)', 'bridge(9.8-9.8s, medium)', 'chorus(9.8-10.0s, high)', 'bridge(10.0-10.0s, medium)']", "job_id": "16647417-0f3f-4aaa-a590-d4b0938717b7", "taskName": "Task-34"}
{"timestamp": "2025-11-14T23:23:24.627641Z", "level": "INFO", "module": "parser", "message": "Structure analysis complete: 122 segments", "job_id": "16647417-0f3f-4aaa-a590-d4b0938717b7", "taskName": "Task-34"}
{"timestamp": "2025-11-14T23:23:24.627680Z", "level": "INFO", "module": "parser", "message": "Extracting lyrics...", "job_id": "16647417-0f3f-4aaa-a590-d4b0938717b7", "taskName": "Task-34"}
{"timestamp": "2025-11-14T23:23:24.628406Z", "level": "INFO", "module": "whisper_client", "message": "Created temporary audio file: /var/folders/d5/vzgmwykd2jsbxfy1k60z4ds00000gq/T/tmp3ipw_tgp.mp3", "job_id": "16647417-0f3f-4aaa-a590-d4b0938717b7", "taskName": "Task-34"}
{"timestamp": "2025-11-14T23:23:26.249691Z", "level": "INFO", "module": "whisper_client", "message": "Whisper API response received: 1 words", "job_id": "16647417-0f3f-4aaa-a590-d4b0938717b7", "taskName": "Task-34"}
{"timestamp": "2025-11-14T23:23:26.249835Z", "level": "ERROR", "module": "whisper_client", "message": "Whisper API call failed: 'TranscriptionWord' object has no attribute 'get'", "job_id": "16647417-0f3f-4aaa-a590-d4b0938717b7", "taskName": "Task-34"}
{"timestamp": "2025-11-14T23:23:26.250239Z", "level": "WARNING", "module": "whisper_client", "message": "Whisper API call failed after retries: Failed to extract lyrics: 'TranscriptionWord' object has no attribute 'get', returning empty lyrics", "job_id": "16647417-0f3f-4aaa-a590-d4b0938717b7", "taskName": "Task-34"}
{"timestamp": "2025-11-14T23:23:26.250374Z", "level": "INFO", "module": "parser", "message": "Lyrics extraction complete: 0 words", "job_id": "16647417-0f3f-4aaa-a590-d4b0938717b7", "taskName": "Task-34"}
{"timestamp": "2025-11-14T23:23:26.250458Z", "level": "INFO", "module": "parser", "message": "Classifying mood...", "job_id": "16647417-0f3f-4aaa-a590-d4b0938717b7", "taskName": "Task-34"}
{"timestamp": "2025-11-14T23:23:26.268722Z", "level": "INFO", "module": "mood_classifier", "message": "Mood classification: primary=dark, secondary=energetic, energy=high, confidence=0.77", "job_id": "16647417-0f3f-4aaa-a590-d4b0938717b7", "taskName": "Task-34"}
{"timestamp": "2025-11-14T23:23:26.268834Z", "level": "INFO", "module": "parser", "message": "Mood classification complete: dark, confidence=0.77", "job_id": "16647417-0f3f-4aaa-a590-d4b0938717b7", "taskName": "Task-34"}
{"timestamp": "2025-11-14T23:23:26.268919Z", "level": "INFO", "module": "parser", "message": "Generating clip boundaries...", "job_id": "16647417-0f3f-4aaa-a590-d4b0938717b7", "taskName": "Task-34"}
{"timestamp": "2025-11-14T23:23:26.269003Z", "level": "WARNING", "module": "boundaries", "message": "Only 2 boundaries generated, need 3. Regenerating with reduced duration per clip.", "job_id": "16647417-0f3f-4aaa-a590-d4b0938717b7", "taskName": "Task-34"}
{"timestamp": "2025-11-14T23:23:26.269087Z", "level": "INFO", "module": "boundaries", "message": "Generated 3 clip boundaries", "job_id": "16647417-0f3f-4aaa-a590-d4b0938717b7", "taskName": "Task-34"}
{"timestamp": "2025-11-14T23:23:26.269143Z", "level": "INFO", "module": "parser", "message": "Boundary generation complete: 3 boundaries", "job_id": "16647417-0f3f-4aaa-a590-d4b0938717b7", "taskName": "Task-34"}
{"timestamp": "2025-11-14T23:23:26.269221Z", "level": "INFO", "module": "parser", "message": "Audio analysis complete for job 16647417-0f3f-4aaa-a590-d4b0938717b7: duration=10.00s, processing_time=1.70s, beats=20, segments=122, lyrics=0, boundaries=3", "job_id": "16647417-0f3f-4aaa-a590-d4b0938717b7", "taskName": "Task-34"}
{"timestamp": "2025-11-14T23:23:26.271197Z", "level": "INFO", "module": "parser", "message": "Loading audio file for job bb1c5e89-c6b5-4cd1-8bba-f7405dad4c00", "job_id": "bb1c5e89-c6b5-4cd1-8bba-f7405dad4c00", "taskName": "Task-37"}
{"timestamp": "2025-11-14T23:23:26.271349Z", "level": "ERROR", "module": "parser", "message": "Audio parsing failed for job bb1c5e89-c6b5-4cd1-8bba-f7405dad4c00: Error opening <_io.BytesIO object at 0x1193a6700>: Format not recognised.", "job_id": "bb1c5e89-c6b5-4cd1-8bba-f7405dad4c00", "taskName": "Task-37"}
{"timestamp": "2025-11-14T23:23:26.272232Z", "level": "INFO", "module": "parser", "message": "Loading audio file for job 2ce32b77-da65-4419-8971-dbd07250fc46", "job_id": "2ce32b77-da65-4419-8971-dbd07250fc46", "taskName": "Task-40"}
{"timestamp": "2025-11-14T23:23:26.272334Z", "level": "ERROR", "module": "parser", "message": "Audio parsing failed for job 2ce32b77-da65-4419-8971-dbd07250fc46: Error opening <_io.BytesIO object at 0x1193a6840>: Format not recognised.", "job_id": "2ce32b77-da65-4419-8971-dbd07250fc46", "taskName": "Task-40"}
{"timestamp": "2025-11-14T23:23:26.323379Z", "level": "INFO", "module": "structure_analysis", "message": "Distance matrix shape: (1292, 1292), frames: 1292", "taskName": null}
{"timestamp": "2025-11-14T23:23:26.332692Z", "level": "INFO", "module": "structure_analysis", "message": "Attempting clustering with 3 clusters on 1292 frames", "taskName": null}
{"timestamp": "2025-11-14T23:23:26.344320Z", "level": "INFO", "module": "structure_analysis", "message": "Clustering successful: 3 unique segments detected", "taskName": null}
{"timestamp": "2025-11-14T23:23:26.373853Z", "level": "INFO", "module": "structure_analysis", "message": "Structure analysis complete: 6 segments detected via clustering. Segments: ['bridge(0.0-0.0s, medium)', 'bridge(0.0-0.0s, medium)', 'bridge(0.0-10.0s, medium)', 'chorus(10.0-10.0s, high)', 'chorus(10.0-30.0s, high)', 'bridge(30.0-30.0s, medium)']", "taskName": null}
{"timestamp": "2025-11-14T23:23:26.390578Z", "level": "INFO", "module": "structure_analysis", "message": "Distance matrix shape: (862, 862), frames: 862", "taskName": null}
{"timestamp": "2025-11-14T23:23:26.392189Z", "level": "INFO", "module": "structure_analysis", "message": "Attempting clustering with 3 clusters on 862 frames", "taskName": null}
{"timestamp": "2025-11-14T23:23:26.397656Z", "level": "INFO", "module": "structure_analysis", "message": "Clustering successful: 3 unique segments detected", "taskName": null}
{"timestamp": "2025-11-14T23:23:26.414957Z", "level": "INFO", "module": "structure_analysis", "message": "Structure analysis complete: 3 segments detected via clustering. Segments: ['bridge(0.0-0.0s, medium)', 'chorus(0.0-20.0s, high)', 'bridge(20.0-20.0s, medium)']", "taskName": null}
{"timestamp": "2025-11-14T23:23:26.426417Z", "level": "INFO", "module": "structure_analysis", "message": "Distance matrix shape: (646, 646), frames: 646", "taskName": null}
{"timestamp": "2025-11-14T23:23:26.427318Z", "level": "INFO", "module": "structure_analysis", "message": "Attempting clustering with 3 clusters on 646 frames", "taskName": null}
{"timestamp": "2025-11-14T23:23:26.430657Z", "level": "INFO", "module": "structure_analysis", "message": "Clustering successful: 3 unique segments detected", "taskName": null}
{"timestamp": "2025-11-14T23:23:26.445221Z", "level": "INFO", "module": "structure_analysis", "message": "Structure analysis complete: 4 segments detected via clustering. Segments: ['bridge(0.0-0.0s, medium)', 'chorus(0.0-0.0s, high)', 'chorus(0.0-15.0s, high)', 'bridge(15.0-15.0s, medium)']", "taskName": null}
{"timestamp": "2025-11-14T23:23:26.446875Z", "level": "INFO", "module": "structure_analysis", "message": "Distance matrix shape: (1, 1), frames: 1", "taskName": null}
{"timestamp": "2025-11-14T23:23:26.446972Z", "level": "WARNING", "module": "structure_analysis", "message": "Insufficient frames for clustering: 1 frames < 3 clusters. Reducing clusters to 1 or using fallback.", "taskName": null}
{"timestamp": "2025-11-14T23:23:26.447016Z", "level": "INFO", "module": "structure_analysis", "message": "Attempting clustering with 2 clusters on 1 frames", "taskName": null}
{"timestamp": "2025-11-14T23:23:26.447234Z", "level": "ERROR", "module": "structure_analysis", "message": "Agglomerative clustering failed (ValueError): Found array with 1 sample(s) (shape=(1, 1)) while a minimum of 2 is required by AgglomerativeClustering.. Diagnostics: n_frames=1, n_segments=2, matrix_shape=(1, 1), matrix_min=1.0000, matrix_max=1.0000, matrix_mean=1.0000. Falling back to uniform segmentation.", "taskName": null}
{"timestamp": "2025-11-14T23:23:26.447273Z", "level": "WARNING", "module": "structure_analysis", "message": "Empty audio detected, returning single-segment fallback", "taskName": null}
{"timestamp": "2025-11-14T23:23:26.456713Z", "level": "INFO", "module": "structure_analysis", "message": "Distance matrix shape: (431, 431), frames: 431", "taskName": null}
{"timestamp": "2025-11-14T23:23:26.458231Z", "level": "INFO", "module": "structure_analysis", "message": "Attempting clustering with 3 clusters on 431 frames", "taskName": null}
{"timestamp": "2025-11-14T23:23:26.459945Z", "level": "INFO", "module": "structure_analysis", "message": "Clustering successful: 3 unique segments detected", "taskName": null}
{"timestamp": "2025-11-14T23:23:26.469634Z", "level": "INFO", "module": "structure_analysis", "message": "Structure analysis complete: 3 segments detected via clustering. Segments: ['bridge(0.0-0.0s, medium)', 'chorus(0.0-10.0s, high)', 'bridge(10.0-10.0s, medium)']", "taskName": null}
{"timestamp": "2025-11-14T23:23:26.472333Z", "level": "INFO", "module": "whisper_client", "message": "Created temporary audio file: /var/folders/d5/vzgmwykd2jsbxfy1k60z4ds00000gq/T/tmpah8_ufxl.mp3", "taskName": "Task-46"}
{"timestamp": "2025-11-14T23:23:26.472604Z", "level": "INFO", "module": "whisper_client", "message": "Whisper API response received: 0 words", "taskName": "Task-46"}
{"timestamp": "2025-11-14T23:23:26.472644Z", "level": "INFO", "module": "whisper_client", "message": "Extracted 0 lyrics from audio", "taskName": "Task-46"}
{"timestamp": "2025-11-14T23:23:32.812721Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job da952163-9de1-48a6-9568-9e3fe60db841: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(da952163-9de1-48a6-9568-9e3fe60db841) is not present in table \"jobs\".'}", "taskName": "Task-46", "job_id": "da952163-9de1-48a6-9568-9e3fe60db841", "error": "Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(da952163-9de1-48a6-9568-9e3fe60db841) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-14T23:23:32.813479Z", "level": "ERROR", "module": "whisper_client", "message": "Whisper API call failed: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(da952163-9de1-48a6-9568-9e3fe60db841) is not present in table \"jobs\".'}", "taskName": "Task-46", "job_id": "da952163-9de1-48a6-9568-9e3fe60db841"}
{"timestamp": "2025-11-14T23:23:32.814114Z", "level": "WARNING", "module": "whisper_client", "message": "Whisper API call failed after retries: Failed to extract lyrics: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(da952163-9de1-48a6-9568-9e3fe60db841) is not present in table \"jobs\".'}, returning empty lyrics", "taskName": "Task-46", "job_id": "da952163-9de1-48a6-9568-9e3fe60db841"}
{"timestamp": "2025-11-14T23:23:32.823412Z", "level": "INFO", "module": "whisper_client", "message": "Created temporary audio file: /var/folders/d5/vzgmwykd2jsbxfy1k60z4ds00000gq/T/tmpodj_lxb6.mp3", "taskName": "Task-49"}
{"timestamp": "2025-11-14T23:23:32.823897Z", "level": "INFO", "module": "whisper_client", "message": "Whisper API response received: 4 words", "taskName": "Task-49"}
{"timestamp": "2025-11-14T23:23:32.824055Z", "level": "INFO", "module": "whisper_client", "message": "Extracted 2 lyrics from audio", "taskName": "Task-49"}
{"timestamp": "2025-11-14T23:23:32.824193Z", "level": "INFO", "module": "whisper_client", "message": "Tracked Whisper API cost: $0.006 for 60.00s audio", "taskName": "Task-49"}
{"timestamp": "2025-11-14T23:23:32.826824Z", "level": "INFO", "module": "whisper_client", "message": "Created temporary audio file: /var/folders/d5/vzgmwykd2jsbxfy1k60z4ds00000gq/T/tmpgv_hyqn9.mp3", "taskName": "Task-52"}
{"timestamp": "2025-11-14T23:23:32.827430Z", "level": "ERROR", "module": "whisper_client", "message": "Whisper API call failed: API Error", "taskName": "Task-52", "job_id": "f311df1b-a6e8-443a-b14e-7f7edf5aa3e9"}
{"timestamp": "2025-11-14T23:23:32.827711Z", "level": "WARNING", "module": "whisper_client", "message": "Whisper API call failed after retries: Failed to extract lyrics: API Error, returning empty lyrics", "taskName": "Task-52", "job_id": "f311df1b-a6e8-443a-b14e-7f7edf5aa3e9"}
{"timestamp": "2025-11-14T23:23:32.830672Z", "level": "INFO", "module": "whisper_client", "message": "Created temporary audio file: /var/folders/d5/vzgmwykd2jsbxfy1k60z4ds00000gq/T/tmpi0m9mzac.mp3", "taskName": "Task-55"}
{"timestamp": "2025-11-14T23:23:32.831043Z", "level": "INFO", "module": "whisper_client", "message": "Whisper API response received: 1 words", "taskName": "Task-55"}
{"timestamp": "2025-11-14T23:23:32.831141Z", "level": "INFO", "module": "whisper_client", "message": "Extracted 1 lyrics from audio", "taskName": "Task-55"}
{"timestamp": "2025-11-14T23:23:32.831400Z", "level": "ERROR", "module": "whisper_client", "message": "Whisper API call failed: object MagicMock can't be used in 'await' expression", "taskName": "Task-55", "job_id": "eeab8feb-34d9-4341-b3ab-346c63598d3b"}
{"timestamp": "2025-11-14T23:23:32.831638Z", "level": "WARNING", "module": "whisper_client", "message": "Whisper API call failed after retries: Failed to extract lyrics: object MagicMock can't be used in 'await' expression, returning empty lyrics", "taskName": "Task-55", "job_id": "eeab8feb-34d9-4341-b3ab-346c63598d3b"}
{"timestamp": "2025-11-14T23:23:43.632084Z", "level": "WARNING", "module": "beat_detection", "message": "aubio not available, using librosa onset detection as fallback", "taskName": null}
{"timestamp": "2025-11-14T23:23:52.438568Z", "level": "INFO", "module": "worker", "message": "Worker started", "taskName": "Task-1", "queue_name": "video_generation"}
{"timestamp": "2025-11-14T23:25:07.061164Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-3", "request_id": "7dc46f14-8dfc-4a1b-a5c1-cb90b885703d", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T23:25:08.519515Z", "level": "INFO", "module": "upload", "message": "Sanitized filename for storage", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "original_filename": "KendrickLamar.mp3", "sanitized_filename": "KendrickLamar.mp3", "storage_path": "1ca24433-173e-4cea-8e37-465a08b18a79/323969b7-3489-44ba-9512-d8e1faff313a/KendrickLamar.mp3"}
{"timestamp": "2025-11-14T23:25:09.463190Z", "level": "INFO", "module": "storage", "message": "Uploaded file to audio-uploads/1ca24433-173e-4cea-8e37-465a08b18a79/323969b7-3489-44ba-9512-d8e1faff313a/KendrickLamar.mp3", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "bucket": "audio-uploads", "path": "1ca24433-173e-4cea-8e37-465a08b18a79/323969b7-3489-44ba-9512-d8e1faff313a/KendrickLamar.mp3", "size": 4969409}
{"timestamp": "2025-11-14T23:25:10.281018Z", "level": "INFO", "module": "queue_service", "message": "Job enqueued", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "job_id": "323969b7-3489-44ba-9512-d8e1faff313a", "user_id": "1ca24433-173e-4cea-8e37-465a08b18a79"}
{"timestamp": "2025-11-14T23:25:10.281303Z", "level": "INFO", "module": "upload", "message": "Job created and enqueued", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "job_id": "323969b7-3489-44ba-9512-d8e1faff313a", "user_id": "1ca24433-173e-4cea-8e37-465a08b18a79", "estimated_cost": 8.859428571428571, "duration_minutes": 5.906285714285715}
{"timestamp": "2025-11-14T23:25:10.282113Z", "level": "INFO", "module": "worker", "message": "Acquiring semaphore for job", "taskName": "Task-1", "job_id": "323969b7-3489-44ba-9512-d8e1faff313a", "available_slots": 3}
{"timestamp": "2025-11-14T23:25:10.282352Z", "level": "INFO", "module": "worker", "message": "Processing job (semaphore acquired)", "taskName": "Task-1", "job_id": "323969b7-3489-44ba-9512-d8e1faff313a"}
{"timestamp": "2025-11-14T23:25:10.282548Z", "level": "INFO", "module": "worker", "message": "Processing job", "taskName": "Task-1", "job_id": "323969b7-3489-44ba-9512-d8e1faff313a", "user_id": "1ca24433-173e-4cea-8e37-465a08b18a79"}
{"timestamp": "2025-11-14T23:25:10.709068Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-45", "request_id": "41677353-37e9-4a56-a94f-f7eb65016225", "method": "OPTIONS", "path": "/api/v1/jobs/323969b7-3489-44ba-9512-d8e1faff313a"}
{"timestamp": "2025-11-14T23:25:10.709917Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-47", "request_id": "ac9768f1-0e67-4d62-8742-da754bac075e", "method": "GET", "path": "/api/v1/jobs/323969b7-3489-44ba-9512-d8e1faff313a"}
{"timestamp": "2025-11-14T23:25:11.517643Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-49", "request_id": "491442d4-9174-4097-8b8e-f1dccefe44b9", "method": "GET", "path": "/api/v1/jobs/323969b7-3489-44ba-9512-d8e1faff313a"}
{"timestamp": "2025-11-14T23:25:11.524480Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-51", "request_id": "615d682e-ca79-4cb4-bf91-63835a427a87", "method": "GET", "path": "/api/v1/jobs/323969b7-3489-44ba-9512-d8e1faff313a/stream"}
{"timestamp": "2025-11-14T23:25:11.564562Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-53", "request_id": "b3e0ad1c-f28d-45ea-b91d-b69a530a38b0", "method": "GET", "path": "/api/v1/jobs/323969b7-3489-44ba-9512-d8e1faff313a"}
{"timestamp": "2025-11-14T23:25:11.961464Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "taskName": "Task-1", "job_id": "323969b7-3489-44ba-9512-d8e1faff313a", "progress": 2, "stage": "audio_parser"}
{"timestamp": "2025-11-14T23:25:12.069133Z", "level": "WARNING", "module": "beat_detection", "message": "aubio not available, using librosa onset detection as fallback", "taskName": "Task-1"}
{"timestamp": "2025-11-14T23:25:12.132520Z", "level": "INFO", "module": "stream", "message": "SSE stream ended", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "323969b7-3489-44ba-9512-d8e1faff313a"}
{"timestamp": "2025-11-14T23:25:12.943173Z", "level": "WARNING", "module": "orchestrator", "message": "Audio Parser module not found, using stub", "taskName": "Task-1", "job_id": "323969b7-3489-44ba-9512-d8e1faff313a"}
{"timestamp": "2025-11-14T23:25:13.414884Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "taskName": "Task-1", "job_id": "323969b7-3489-44ba-9512-d8e1faff313a", "progress": 5, "stage": "audio_parser"}
{"timestamp": "2025-11-14T23:25:14.232037Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "taskName": "Task-1", "job_id": "323969b7-3489-44ba-9512-d8e1faff313a", "progress": 7, "stage": "audio_parser"}
{"timestamp": "2025-11-14T23:25:15.183745Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "taskName": "Task-1", "job_id": "323969b7-3489-44ba-9512-d8e1faff313a", "progress": 9, "stage": "audio_parser"}
{"timestamp": "2025-11-14T23:25:15.493910Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "taskName": "Task-1", "job_id": "323969b7-3489-44ba-9512-d8e1faff313a", "progress": 100, "stage": "audio_parser"}
{"timestamp": "2025-11-14T23:25:15.732141Z", "level": "INFO", "module": "orchestrator", "message": "Audio parser results", "taskName": "Task-1", "job_id": "323969b7-3489-44ba-9512-d8e1faff313a", "bpm": 120.0, "duration": 120.0, "beat_count": 240, "structure_segments": 6, "mood": "energetic", "energy_level": "high"}
{"timestamp": "2025-11-14T23:25:16.164773Z", "level": "INFO", "module": "orchestrator", "message": "Pipeline completed successfully (audio parser only)", "taskName": "Task-1", "job_id": "323969b7-3489-44ba-9512-d8e1faff313a", "total_cost": "0.00"}
{"timestamp": "2025-11-14T23:25:16.164960Z", "level": "INFO", "module": "worker", "message": "Job processed successfully", "taskName": "Task-1", "job_id": "323969b7-3489-44ba-9512-d8e1faff313a"}
{"timestamp": "2025-11-14T23:25:16.165032Z", "level": "INFO", "module": "worker", "message": "Job completed (semaphore released)", "taskName": "Task-1", "job_id": "323969b7-3489-44ba-9512-d8e1faff313a"}
{"timestamp": "2025-11-14T23:26:35.615537Z", "level": "INFO", "module": "worker", "message": "Worker started", "taskName": "Task-1", "queue_name": "video_generation"}
{"timestamp": "2025-11-14T23:27:06.475579Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-3", "request_id": "15e3810e-94ae-44c7-8db3-4490287b87e7", "method": "POST", "path": "/api/v1/upload-audio"}
{"timestamp": "2025-11-14T23:27:08.004783Z", "level": "INFO", "module": "upload", "message": "Sanitized filename for storage", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "original_filename": "KendrickLamar.mp3", "sanitized_filename": "KendrickLamar.mp3", "storage_path": "1ca24433-173e-4cea-8e37-465a08b18a79/3deb093b-28a9-492e-a1af-e2f5782b71d3/KendrickLamar.mp3"}
{"timestamp": "2025-11-14T23:27:08.875876Z", "level": "INFO", "module": "storage", "message": "Uploaded file to audio-uploads/1ca24433-173e-4cea-8e37-465a08b18a79/3deb093b-28a9-492e-a1af-e2f5782b71d3/KendrickLamar.mp3", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "bucket": "audio-uploads", "path": "1ca24433-173e-4cea-8e37-465a08b18a79/3deb093b-28a9-492e-a1af-e2f5782b71d3/KendrickLamar.mp3", "size": 4969409}
{"timestamp": "2025-11-14T23:27:09.614168Z", "level": "INFO", "module": "worker", "message": "Acquiring semaphore for job", "taskName": "Task-1", "job_id": "3deb093b-28a9-492e-a1af-e2f5782b71d3", "available_slots": 3}
{"timestamp": "2025-11-14T23:27:09.614398Z", "level": "INFO", "module": "worker", "message": "Processing job (semaphore acquired)", "taskName": "Task-1", "job_id": "3deb093b-28a9-492e-a1af-e2f5782b71d3"}
{"timestamp": "2025-11-14T23:27:09.614534Z", "level": "INFO", "module": "worker", "message": "Processing job", "taskName": "Task-1", "job_id": "3deb093b-28a9-492e-a1af-e2f5782b71d3", "user_id": "1ca24433-173e-4cea-8e37-465a08b18a79"}
{"timestamp": "2025-11-14T23:27:09.617859Z", "level": "INFO", "module": "queue_service", "message": "Job enqueued", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "job_id": "3deb093b-28a9-492e-a1af-e2f5782b71d3", "user_id": "1ca24433-173e-4cea-8e37-465a08b18a79"}
{"timestamp": "2025-11-14T23:27:09.618127Z", "level": "INFO", "module": "upload", "message": "Job created and enqueued", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "job_id": "3deb093b-28a9-492e-a1af-e2f5782b71d3", "user_id": "1ca24433-173e-4cea-8e37-465a08b18a79", "estimated_cost": 8.859428571428571, "duration_minutes": 5.906285714285715}
{"timestamp": "2025-11-14T23:27:10.160513Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-45", "request_id": "bed5d8cb-523a-4719-bad6-d31caf1fe84c", "method": "OPTIONS", "path": "/api/v1/jobs/3deb093b-28a9-492e-a1af-e2f5782b71d3"}
{"timestamp": "2025-11-14T23:27:10.161421Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-47", "request_id": "dd3ec486-b564-4b79-a76e-4f0b110e461e", "method": "GET", "path": "/api/v1/jobs/3deb093b-28a9-492e-a1af-e2f5782b71d3"}
{"timestamp": "2025-11-14T23:27:11.005561Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-49", "request_id": "777bf12b-402e-4ce4-bafb-f4472cb5ea37", "method": "GET", "path": "/api/v1/jobs/3deb093b-28a9-492e-a1af-e2f5782b71d3"}
{"timestamp": "2025-11-14T23:27:11.015774Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-51", "request_id": "6f5b9f31-f69b-465b-b0d4-6016f1698127", "method": "GET", "path": "/api/v1/jobs/3deb093b-28a9-492e-a1af-e2f5782b71d3/stream"}
{"timestamp": "2025-11-14T23:27:11.276968Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "taskName": "Task-1", "job_id": "3deb093b-28a9-492e-a1af-e2f5782b71d3", "progress": 2, "stage": "audio_parser"}
{"timestamp": "2025-11-14T23:27:11.325847Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-53", "request_id": "55e818cb-f4d8-41ee-9076-7e631413a1e6", "method": "GET", "path": "/api/v1/jobs/3deb093b-28a9-492e-a1af-e2f5782b71d3"}
{"timestamp": "2025-11-14T23:27:11.393393Z", "level": "WARNING", "module": "beat_detection", "message": "aubio not available, using librosa onset detection as fallback", "taskName": "Task-1"}
{"timestamp": "2025-11-14T23:27:11.797745Z", "level": "INFO", "module": "main", "message": "Request started", "taskName": "Task-59", "request_id": "1dedca07-f196-4788-a158-ed8443214e37", "method": "GET", "path": "/api/v1/jobs/3deb093b-28a9-492e-a1af-e2f5782b71d3"}
{"timestamp": "2025-11-14T23:27:12.182092Z", "level": "INFO", "module": "stream", "message": "SSE stream started", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "3deb093b-28a9-492e-a1af-e2f5782b71d3"}
{"timestamp": "2025-11-14T23:27:12.280533Z", "level": "WARNING", "module": "orchestrator", "message": "Audio Parser module not found, using stub", "taskName": "Task-1", "job_id": "3deb093b-28a9-492e-a1af-e2f5782b71d3"}
{"timestamp": "2025-11-14T23:27:12.698107Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "taskName": "Task-1", "job_id": "3deb093b-28a9-492e-a1af-e2f5782b71d3", "progress": 5, "stage": "audio_parser"}
{"timestamp": "2025-11-14T23:27:13.524724Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "taskName": "Task-1", "job_id": "3deb093b-28a9-492e-a1af-e2f5782b71d3", "progress": 7, "stage": "audio_parser"}
{"timestamp": "2025-11-14T23:27:14.449064Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "taskName": "Task-1", "job_id": "3deb093b-28a9-492e-a1af-e2f5782b71d3", "progress": 9, "stage": "audio_parser"}
{"timestamp": "2025-11-14T23:27:14.775232Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "taskName": "Task-1", "job_id": "3deb093b-28a9-492e-a1af-e2f5782b71d3", "progress": 100, "stage": "audio_parser"}
{"timestamp": "2025-11-14T23:27:15.063789Z", "level": "INFO", "module": "orchestrator", "message": "Audio parser results", "taskName": "Task-1", "job_id": "3deb093b-28a9-492e-a1af-e2f5782b71d3", "bpm": 120.0, "duration": 120.0, "beat_count": 240, "structure_segments": 6, "mood": "energetic", "energy_level": "high"}
{"timestamp": "2025-11-14T23:27:15.498134Z", "level": "INFO", "module": "orchestrator", "message": "Pipeline completed successfully (audio parser only)", "taskName": "Task-1", "job_id": "3deb093b-28a9-492e-a1af-e2f5782b71d3", "total_cost": "0.00"}
{"timestamp": "2025-11-14T23:27:15.498836Z", "level": "INFO", "module": "worker", "message": "Job processed successfully", "taskName": "Task-1", "job_id": "3deb093b-28a9-492e-a1af-e2f5782b71d3"}
{"timestamp": "2025-11-14T23:27:15.499151Z", "level": "INFO", "module": "worker", "message": "Job completed (semaphore released)", "taskName": "Task-1", "job_id": "3deb093b-28a9-492e-a1af-e2f5782b71d3"}
{"timestamp": "2025-11-14T23:27:17.501311Z", "level": "INFO", "module": "stream", "message": "SSE stream cancelled", "taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap", "job_id": "3deb093b-28a9-492e-a1af-e2f5782b71d3"}
{"timestamp": "2025-11-15T00:10:51.903267Z", "level": "INFO", "module": "worker", "message": "Acquiring semaphore for job", "taskName": "Task-1", "job_id": "35d79ad4-b273-4414-9858-04dbd0b3e898", "available_slots": 3}
{"timestamp": "2025-11-15T00:10:51.904458Z", "level": "INFO", "module": "worker", "message": "Processing job (semaphore acquired)", "taskName": "Task-1", "job_id": "35d79ad4-b273-4414-9858-04dbd0b3e898"}
{"timestamp": "2025-11-15T00:10:51.904681Z", "level": "INFO", "module": "worker", "message": "Processing job", "taskName": "Task-1", "job_id": "35d79ad4-b273-4414-9858-04dbd0b3e898", "user_id": "ab454fab-5fe5-4bf2-af2d-f269c79a5130"}
{"timestamp": "2025-11-15T00:10:52.874587Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "taskName": "Task-1", "job_id": "35d79ad4-b273-4414-9858-04dbd0b3e898", "progress": 2, "stage": "audio_parser"}
{"timestamp": "2025-11-15T00:10:52.875724Z", "level": "WARNING", "module": "orchestrator", "message": "Audio Parser module not found, using stub", "taskName": "Task-1", "job_id": "35d79ad4-b273-4414-9858-04dbd0b3e898"}
{"timestamp": "2025-11-15T00:10:53.349349Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "taskName": "Task-1", "job_id": "35d79ad4-b273-4414-9858-04dbd0b3e898", "progress": 5, "stage": "audio_parser"}
{"timestamp": "2025-11-15T00:10:54.157309Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "taskName": "Task-1", "job_id": "35d79ad4-b273-4414-9858-04dbd0b3e898", "progress": 7, "stage": "audio_parser"}
{"timestamp": "2025-11-15T00:10:55.090721Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "taskName": "Task-1", "job_id": "35d79ad4-b273-4414-9858-04dbd0b3e898", "progress": 9, "stage": "audio_parser"}
{"timestamp": "2025-11-15T00:10:55.396860Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "taskName": "Task-1", "job_id": "35d79ad4-b273-4414-9858-04dbd0b3e898", "progress": 100, "stage": "audio_parser"}
{"timestamp": "2025-11-15T00:10:55.642659Z", "level": "INFO", "module": "orchestrator", "message": "Audio parser results", "taskName": "Task-1", "job_id": "35d79ad4-b273-4414-9858-04dbd0b3e898", "bpm": 120.0, "duration": 120.0, "beat_count": 240, "structure_segments": 6, "mood": "energetic", "energy_level": "high"}
{"timestamp": "2025-11-15T00:10:56.100248Z", "level": "INFO", "module": "orchestrator", "message": "Pipeline completed successfully (audio parser only)", "taskName": "Task-1", "job_id": "35d79ad4-b273-4414-9858-04dbd0b3e898", "total_cost": "0.00"}
{"timestamp": "2025-11-15T00:10:56.100882Z", "level": "INFO", "module": "worker", "message": "Job processed successfully", "taskName": "Task-1", "job_id": "35d79ad4-b273-4414-9858-04dbd0b3e898"}
{"timestamp": "2025-11-15T00:10:56.101393Z", "level": "INFO", "module": "worker", "message": "Job completed (semaphore released)", "taskName": "Task-1", "job_id": "35d79ad4-b273-4414-9858-04dbd0b3e898"}
{"timestamp": "2025-11-15T00:18:05.088940Z", "level": "INFO", "module": "worker", "message": "Worker started", "taskName": "Task-1", "queue_name": "video_generation"}
{"timestamp": "2025-11-15T00:23:34.034761Z", "level": "INFO", "module": "worker", "message": "Acquiring semaphore for job", "taskName": "Task-1", "job_id": "f6067930-a192-42af-b113-9abe413bcac4", "available_slots": 3}
{"timestamp": "2025-11-15T00:23:34.034875Z", "level": "INFO", "module": "worker", "message": "Processing job (semaphore acquired)", "taskName": "Task-1", "job_id": "f6067930-a192-42af-b113-9abe413bcac4"}
{"timestamp": "2025-11-15T00:23:34.034926Z", "level": "INFO", "module": "worker", "message": "Processing job", "taskName": "Task-1", "job_id": "f6067930-a192-42af-b113-9abe413bcac4", "user_id": "ab454fab-5fe5-4bf2-af2d-f269c79a5130"}
{"timestamp": "2025-11-15T00:23:35.810874Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "taskName": "Task-1", "job_id": "f6067930-a192-42af-b113-9abe413bcac4", "progress": 2, "stage": "audio_parser"}
{"timestamp": "2025-11-15T00:23:35.915580Z", "level": "WARNING", "module": "beat_detection", "message": "aubio not available, using librosa onset detection as fallback", "taskName": "Task-1"}
{"timestamp": "2025-11-15T00:23:36.882733Z", "level": "WARNING", "module": "orchestrator", "message": "Audio Parser module not found, using stub", "taskName": "Task-1", "job_id": "f6067930-a192-42af-b113-9abe413bcac4"}
{"timestamp": "2025-11-15T00:23:37.329604Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "taskName": "Task-1", "job_id": "f6067930-a192-42af-b113-9abe413bcac4", "progress": 5, "stage": "audio_parser"}
{"timestamp": "2025-11-15T00:23:38.160273Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "taskName": "Task-1", "job_id": "f6067930-a192-42af-b113-9abe413bcac4", "progress": 7, "stage": "audio_parser"}
{"timestamp": "2025-11-15T00:23:39.095227Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "taskName": "Task-1", "job_id": "f6067930-a192-42af-b113-9abe413bcac4", "progress": 9, "stage": "audio_parser"}
{"timestamp": "2025-11-15T00:23:39.410514Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "taskName": "Task-1", "job_id": "f6067930-a192-42af-b113-9abe413bcac4", "progress": 100, "stage": "audio_parser"}
{"timestamp": "2025-11-15T00:23:39.684172Z", "level": "INFO", "module": "orchestrator", "message": "Audio parser results", "taskName": "Task-1", "job_id": "f6067930-a192-42af-b113-9abe413bcac4", "bpm": 120.0, "duration": 120.0, "beat_count": 240, "structure_segments": 6, "mood": "energetic", "energy_level": "high"}
{"timestamp": "2025-11-15T00:23:40.163654Z", "level": "INFO", "module": "orchestrator", "message": "Pipeline completed successfully (audio parser only)", "taskName": "Task-1", "job_id": "f6067930-a192-42af-b113-9abe413bcac4", "total_cost": "0.00"}
{"timestamp": "2025-11-15T00:23:40.163757Z", "level": "INFO", "module": "worker", "message": "Job processed successfully", "taskName": "Task-1", "job_id": "f6067930-a192-42af-b113-9abe413bcac4"}
{"timestamp": "2025-11-15T00:23:40.163802Z", "level": "INFO", "module": "worker", "message": "Job completed (semaphore released)", "taskName": "Task-1", "job_id": "f6067930-a192-42af-b113-9abe413bcac4"}
{"timestamp": "2025-11-15T00:25:44.170717Z", "level": "ERROR", "module": "director_knowledge", "message": "Director knowledge file not found: /Users/mylessjs/Desktop/VideoGen/project/planning/agent_prompts/scene_planner_director_knowledge.md", "taskName": null}
{"timestamp": "2025-11-15T00:25:44.199807Z", "level": "ERROR", "module": "director_knowledge", "message": "Director knowledge file not found: /Users/mylessjs/Desktop/VideoGen/project/planning/agent_prompts/scene_planner_director_knowledge.md", "taskName": null}
{"timestamp": "2025-11-15T00:25:44.202601Z", "level": "INFO", "module": "main", "message": "Processing scene planning", "job_id": "8ef5eab0-12ea-42a2-9383-2a82c88057e9", "taskName": "Task-1", "user_prompt_length": 62, "clip_count": 5, "bpm": 120.0, "mood": "energetic"}
{"timestamp": "2025-11-15T00:25:44.202666Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "job_id": "8ef5eab0-12ea-42a2-9383-2a82c88057e9", "taskName": "Task-1", "user_prompt_length": 62, "clip_count": 5}
{"timestamp": "2025-11-15T00:25:44.202736Z", "level": "ERROR", "module": "director_knowledge", "message": "Director knowledge file not found: /Users/mylessjs/Desktop/VideoGen/project/planning/agent_prompts/scene_planner_director_knowledge.md", "job_id": "8ef5eab0-12ea-42a2-9383-2a82c88057e9", "taskName": "Task-1"}
{"timestamp": "2025-11-15T00:25:44.203232Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: Director knowledge file not found: /Users/mylessjs/Desktop/VideoGen/project/planning/agent_prompts/scene_planner_director_knowledge.md", "job_id": "8ef5eab0-12ea-42a2-9383-2a82c88057e9", "taskName": "Task-1", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/director_knowledge.py\", line 30, in get_director_knowledge\n    with open(knowledge_path, \"r\", encoding=\"utf-8\") as f:\n         ~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nFileNotFoundError: [Errno 2] No such file or directory: '/Users/mylessjs/Desktop/VideoGen/project/planning/agent_prompts/scene_planner_director_knowledge.md'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 63, in plan_scenes\n    director_knowledge = get_director_knowledge()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/director_knowledge.py\", line 38, in get_director_knowledge\n    raise FileNotFoundError(f\"Director knowledge file not found: {knowledge_path}\")\nFileNotFoundError: Director knowledge file not found: /Users/mylessjs/Desktop/VideoGen/project/planning/agent_prompts/scene_planner_director_knowledge.md"}
{"timestamp": "2025-11-15T00:25:44.268214Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-16", "job_id": "83a69101-695e-48b4-a677-f1b51f52df19", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T00:25:44.268356Z", "level": "ERROR", "module": "director_knowledge", "message": "Director knowledge file not found: /Users/mylessjs/Desktop/VideoGen/project/planning/agent_prompts/scene_planner_director_knowledge.md", "taskName": "Task-16"}
{"timestamp": "2025-11-15T00:25:44.269187Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: Director knowledge file not found: /Users/mylessjs/Desktop/VideoGen/project/planning/agent_prompts/scene_planner_director_knowledge.md", "taskName": "Task-16", "job_id": "83a69101-695e-48b4-a677-f1b51f52df19", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/director_knowledge.py\", line 30, in get_director_knowledge\n    with open(knowledge_path, \"r\", encoding=\"utf-8\") as f:\n         ~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nFileNotFoundError: [Errno 2] No such file or directory: '/Users/mylessjs/Desktop/VideoGen/project/planning/agent_prompts/scene_planner_director_knowledge.md'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 63, in plan_scenes\n    director_knowledge = get_director_knowledge()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/director_knowledge.py\", line 38, in get_director_knowledge\n    raise FileNotFoundError(f\"Director knowledge file not found: {knowledge_path}\")\nFileNotFoundError: Director knowledge file not found: /Users/mylessjs/Desktop/VideoGen/project/planning/agent_prompts/scene_planner_director_knowledge.md"}
{"timestamp": "2025-11-15T00:25:44.274715Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-19", "job_id": "3fc493ac-d586-4d48-8f1f-a040dda11ff1", "user_prompt_length": 42, "clip_count": 3}
{"timestamp": "2025-11-15T00:25:44.274798Z", "level": "ERROR", "module": "director_knowledge", "message": "Director knowledge file not found: /Users/mylessjs/Desktop/VideoGen/project/planning/agent_prompts/scene_planner_director_knowledge.md", "taskName": "Task-19"}
{"timestamp": "2025-11-15T00:25:44.275133Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: Director knowledge file not found: /Users/mylessjs/Desktop/VideoGen/project/planning/agent_prompts/scene_planner_director_knowledge.md", "taskName": "Task-19", "job_id": "3fc493ac-d586-4d48-8f1f-a040dda11ff1", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/director_knowledge.py\", line 30, in get_director_knowledge\n    with open(knowledge_path, \"r\", encoding=\"utf-8\") as f:\n         ~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nFileNotFoundError: [Errno 2] No such file or directory: '/Users/mylessjs/Desktop/VideoGen/project/planning/agent_prompts/scene_planner_director_knowledge.md'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 63, in plan_scenes\n    director_knowledge = get_director_knowledge()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/director_knowledge.py\", line 38, in get_director_knowledge\n    raise FileNotFoundError(f\"Director knowledge file not found: {knowledge_path}\")\nFileNotFoundError: Director knowledge file not found: /Users/mylessjs/Desktop/VideoGen/project/planning/agent_prompts/scene_planner_director_knowledge.md"}
{"timestamp": "2025-11-15T00:25:44.281293Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-22", "job_id": "2d3a60d8-9bdc-4ee1-8afc-b211bf5ab850", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T00:25:44.281375Z", "level": "ERROR", "module": "director_knowledge", "message": "Director knowledge file not found: /Users/mylessjs/Desktop/VideoGen/project/planning/agent_prompts/scene_planner_director_knowledge.md", "taskName": "Task-22"}
{"timestamp": "2025-11-15T00:25:44.281685Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: Director knowledge file not found: /Users/mylessjs/Desktop/VideoGen/project/planning/agent_prompts/scene_planner_director_knowledge.md", "taskName": "Task-22", "job_id": "2d3a60d8-9bdc-4ee1-8afc-b211bf5ab850", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/director_knowledge.py\", line 30, in get_director_knowledge\n    with open(knowledge_path, \"r\", encoding=\"utf-8\") as f:\n         ~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nFileNotFoundError: [Errno 2] No such file or directory: '/Users/mylessjs/Desktop/VideoGen/project/planning/agent_prompts/scene_planner_director_knowledge.md'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 63, in plan_scenes\n    director_knowledge = get_director_knowledge()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/director_knowledge.py\", line 38, in get_director_knowledge\n    raise FileNotFoundError(f\"Director knowledge file not found: {knowledge_path}\")\nFileNotFoundError: Director knowledge file not found: /Users/mylessjs/Desktop/VideoGen/project/planning/agent_prompts/scene_planner_director_knowledge.md"}
{"timestamp": "2025-11-15T00:25:44.282762Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-25", "job_id": "6b31f038-f629-474b-bc63-aec7b0fa2c94", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T00:25:44.282844Z", "level": "ERROR", "module": "director_knowledge", "message": "Director knowledge file not found: /Users/mylessjs/Desktop/VideoGen/project/planning/agent_prompts/scene_planner_director_knowledge.md", "taskName": "Task-25"}
{"timestamp": "2025-11-15T00:25:44.283196Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: Director knowledge file not found: /Users/mylessjs/Desktop/VideoGen/project/planning/agent_prompts/scene_planner_director_knowledge.md", "taskName": "Task-25", "job_id": "6b31f038-f629-474b-bc63-aec7b0fa2c94", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/director_knowledge.py\", line 30, in get_director_knowledge\n    with open(knowledge_path, \"r\", encoding=\"utf-8\") as f:\n         ~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nFileNotFoundError: [Errno 2] No such file or directory: '/Users/mylessjs/Desktop/VideoGen/project/planning/agent_prompts/scene_planner_director_knowledge.md'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 63, in plan_scenes\n    director_knowledge = get_director_knowledge()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/director_knowledge.py\", line 38, in get_director_knowledge\n    raise FileNotFoundError(f\"Director knowledge file not found: {knowledge_path}\")\nFileNotFoundError: Director knowledge file not found: /Users/mylessjs/Desktop/VideoGen/project/planning/agent_prompts/scene_planner_director_knowledge.md"}
{"timestamp": "2025-11-15T00:25:44.289532Z", "level": "INFO", "module": "main", "message": "Processing scene planning", "job_id": "8c88408e-da5a-40da-81dd-134c065189c2", "taskName": "Task-28", "user_prompt_length": 83, "clip_count": 5, "bpm": 120.0, "mood": "energetic"}
{"timestamp": "2025-11-15T00:25:44.289600Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "job_id": "8c88408e-da5a-40da-81dd-134c065189c2", "taskName": "Task-28", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T00:25:44.289694Z", "level": "ERROR", "module": "director_knowledge", "message": "Director knowledge file not found: /Users/mylessjs/Desktop/VideoGen/project/planning/agent_prompts/scene_planner_director_knowledge.md", "job_id": "8c88408e-da5a-40da-81dd-134c065189c2", "taskName": "Task-28"}
{"timestamp": "2025-11-15T00:25:44.290080Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: Director knowledge file not found: /Users/mylessjs/Desktop/VideoGen/project/planning/agent_prompts/scene_planner_director_knowledge.md", "job_id": "8c88408e-da5a-40da-81dd-134c065189c2", "taskName": "Task-28", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/director_knowledge.py\", line 30, in get_director_knowledge\n    with open(knowledge_path, \"r\", encoding=\"utf-8\") as f:\n         ~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nFileNotFoundError: [Errno 2] No such file or directory: '/Users/mylessjs/Desktop/VideoGen/project/planning/agent_prompts/scene_planner_director_knowledge.md'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 63, in plan_scenes\n    director_knowledge = get_director_knowledge()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/director_knowledge.py\", line 38, in get_director_knowledge\n    raise FileNotFoundError(f\"Director knowledge file not found: {knowledge_path}\")\nFileNotFoundError: Director knowledge file not found: /Users/mylessjs/Desktop/VideoGen/project/planning/agent_prompts/scene_planner_director_knowledge.md"}
{"timestamp": "2025-11-15T00:25:44.301161Z", "level": "INFO", "module": "script_generator", "message": "Generated 3 clip scripts", "taskName": null, "clip_count": 3}
{"timestamp": "2025-11-15T00:25:44.301736Z", "level": "INFO", "module": "transition_planner", "message": "Planned 2 transitions", "taskName": null, "transition_count": 2}
{"timestamp": "2025-11-15T00:25:44.302670Z", "level": "INFO", "module": "validator", "message": "ScenePlan validation passed", "taskName": null}
{"timestamp": "2025-11-15T00:25:44.303014Z", "level": "WARNING", "module": "validator", "message": "Validation found 1 issues", "taskName": null, "issues": "['Clip 0 start time mismatch: 1.0s vs 0.0s (tolerance: \u00b10.5s)']"}
{"timestamp": "2025-11-15T00:25:44.303461Z", "level": "WARNING", "module": "validator", "message": "Transition count mismatch: 2 vs 1", "taskName": null}
{"timestamp": "2025-11-15T00:25:44.303531Z", "level": "WARNING", "module": "validator", "message": "Validation found 2 issues", "taskName": null, "issues": "['Transition count mismatch: 2 transitions, expected 1', 'Invalid transition to_clip index: 2']"}
{"timestamp": "2025-11-15T00:25:44.305758Z", "level": "WARNING", "module": "validator", "message": "Validation found 1 issues", "taskName": null, "issues": "['Clip 0 references unknown character: nonexistent']"}
{"timestamp": "2025-11-15T00:25:44.306174Z", "level": "WARNING", "module": "validator", "message": "Validation found 1 issues", "taskName": null, "issues": "['Clip 0 references unknown scene: nonexistent']"}
{"timestamp": "2025-11-15T00:25:44.306615Z", "level": "WARNING", "module": "validator", "message": "Validation found 1 issues", "taskName": null, "issues": "['Missing color palette']"}
{"timestamp": "2025-11-15T00:25:44.307267Z", "level": "WARNING", "module": "validator", "message": "Clip count mismatch: 3 vs 2", "taskName": null, "expected": 2, "actual": 3}
{"timestamp": "2025-11-15T00:25:44.307324Z", "level": "WARNING", "module": "validator", "message": "Transition count mismatch: 1 vs 2", "taskName": null}
{"timestamp": "2025-11-15T00:25:44.307366Z", "level": "WARNING", "module": "validator", "message": "Validation found 2 issues", "taskName": null, "issues": "['Clip count mismatch: 3 clips, expected 2', 'Transition count mismatch: 1 transitions, expected 2']"}
{"timestamp": "2025-11-15T00:26:12.043223Z", "level": "INFO", "module": "main", "message": "Processing scene planning", "job_id": "ad9ab3e1-94a8-4b87-aa53-398a1b8e0929", "taskName": "Task-1", "user_prompt_length": 62, "clip_count": 5, "bpm": 120.0, "mood": "energetic"}
{"timestamp": "2025-11-15T00:26:12.043317Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "job_id": "ad9ab3e1-94a8-4b87-aa53-398a1b8e0929", "taskName": "Task-1", "user_prompt_length": 62, "clip_count": 5}
{"timestamp": "2025-11-15T00:26:12.043446Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "job_id": "ad9ab3e1-94a8-4b87-aa53-398a1b8e0929", "taskName": "Task-1", "model": "gpt-4o", "system_prompt_length": 37859, "user_prompt_length": 721}
{"timestamp": "2025-11-15T00:26:36.352959Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job ad9ab3e1-94a8-4b87-aa53-398a1b8e0929: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(ad9ab3e1-94a8-4b87-aa53-398a1b8e0929) is not present in table \"jobs\".'}", "job_id": "ad9ab3e1-94a8-4b87-aa53-398a1b8e0929", "taskName": "Task-1", "error": "Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(ad9ab3e1-94a8-4b87-aa53-398a1b8e0929) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:26:36.359177Z", "level": "ERROR", "module": "llm_client", "message": "Unexpected error in LLM call: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(ad9ab3e1-94a8-4b87-aa53-398a1b8e0929) is not present in table \"jobs\".'}", "job_id": "ad9ab3e1-94a8-4b87-aa53-398a1b8e0929", "taskName": "Task-1", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(ad9ab3e1-94a8-4b87-aa53-398a1b8e0929) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(ad9ab3e1-94a8-4b87-aa53-398a1b8e0929) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(ad9ab3e1-94a8-4b87-aa53-398a1b8e0929) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:26:36.360919Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in generate_scene_plan: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(ad9ab3e1-94a8-4b87-aa53-398a1b8e0929) is not present in table \"jobs\".'}", "job_id": "ad9ab3e1-94a8-4b87-aa53-398a1b8e0929", "taskName": "Task-1", "error": "Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(ad9ab3e1-94a8-4b87-aa53-398a1b8e0929) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:26:36.364045Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(ad9ab3e1-94a8-4b87-aa53-398a1b8e0929) is not present in table \"jobs\".'}", "job_id": "ad9ab3e1-94a8-4b87-aa53-398a1b8e0929", "taskName": "Task-1", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(ad9ab3e1-94a8-4b87-aa53-398a1b8e0929) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(ad9ab3e1-94a8-4b87-aa53-398a1b8e0929) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(ad9ab3e1-94a8-4b87-aa53-398a1b8e0929) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 67, in plan_scenes\n    llm_output = await generate_scene_plan(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/retry.py\", line 49, in async_wrapper\n    return await func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 492, in generate_scene_plan\n    raise GenerationError(f\"Unexpected error: {str(e)}\", job_id=job_id) from e\nshared.errors.GenerationError: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(ad9ab3e1-94a8-4b87-aa53-398a1b8e0929) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:26:36.431380Z", "level": "INFO", "module": "main", "message": "Processing scene planning", "job_id": "89c3cccf-6c1f-4b9e-bc51-c6ad9209004a", "taskName": "Task-4", "user_prompt_length": 130, "clip_count": 5, "bpm": 140.0, "mood": "energetic"}
{"timestamp": "2025-11-15T00:26:36.431452Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "job_id": "89c3cccf-6c1f-4b9e-bc51-c6ad9209004a", "taskName": "Task-4", "user_prompt_length": 130, "clip_count": 5}
{"timestamp": "2025-11-15T00:26:36.431798Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "job_id": "89c3cccf-6c1f-4b9e-bc51-c6ad9209004a", "taskName": "Task-4", "model": "gpt-4o", "system_prompt_length": 37859, "user_prompt_length": 788}
{"timestamp": "2025-11-15T00:27:01.522672Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job 89c3cccf-6c1f-4b9e-bc51-c6ad9209004a: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(89c3cccf-6c1f-4b9e-bc51-c6ad9209004a) is not present in table \"jobs\".'}", "job_id": "89c3cccf-6c1f-4b9e-bc51-c6ad9209004a", "taskName": "Task-4", "error": "Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(89c3cccf-6c1f-4b9e-bc51-c6ad9209004a) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:27:01.527229Z", "level": "ERROR", "module": "llm_client", "message": "Unexpected error in LLM call: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(89c3cccf-6c1f-4b9e-bc51-c6ad9209004a) is not present in table \"jobs\".'}", "job_id": "89c3cccf-6c1f-4b9e-bc51-c6ad9209004a", "taskName": "Task-4", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(89c3cccf-6c1f-4b9e-bc51-c6ad9209004a) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(89c3cccf-6c1f-4b9e-bc51-c6ad9209004a) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(89c3cccf-6c1f-4b9e-bc51-c6ad9209004a) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:27:01.529563Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in generate_scene_plan: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(89c3cccf-6c1f-4b9e-bc51-c6ad9209004a) is not present in table \"jobs\".'}", "job_id": "89c3cccf-6c1f-4b9e-bc51-c6ad9209004a", "taskName": "Task-4", "error": "Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(89c3cccf-6c1f-4b9e-bc51-c6ad9209004a) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:27:01.531935Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(89c3cccf-6c1f-4b9e-bc51-c6ad9209004a) is not present in table \"jobs\".'}", "job_id": "89c3cccf-6c1f-4b9e-bc51-c6ad9209004a", "taskName": "Task-4", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(89c3cccf-6c1f-4b9e-bc51-c6ad9209004a) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(89c3cccf-6c1f-4b9e-bc51-c6ad9209004a) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(89c3cccf-6c1f-4b9e-bc51-c6ad9209004a) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 67, in plan_scenes\n    llm_output = await generate_scene_plan(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/retry.py\", line 49, in async_wrapper\n    return await func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 492, in generate_scene_plan\n    raise GenerationError(f\"Unexpected error: {str(e)}\", job_id=job_id) from e\nshared.errors.GenerationError: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(89c3cccf-6c1f-4b9e-bc51-c6ad9209004a) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:27:01.564224Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-7", "job_id": "b2a066dc-4aa4-40d3-b15d-a34cfd5d969a", "model": "gpt-4o", "system_prompt_length": 6744, "user_prompt_length": 637}
{"timestamp": "2025-11-15T00:27:01.564444Z", "level": "INFO", "module": "llm_client", "message": "Scene plan generated successfully", "taskName": "Task-7", "job_id": "b2a066dc-4aa4-40d3-b15d-a34cfd5d969a", "model": "gpt-4o", "input_tokens": 1000, "output_tokens": 500, "cost": 0.0125}
{"timestamp": "2025-11-15T00:27:01.627230Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-16", "job_id": "2e82c989-a83d-4dd2-9ccd-d93a2db97923", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T00:27:01.627909Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-16", "job_id": "2e82c989-a83d-4dd2-9ccd-d93a2db97923", "model": "gpt-4o", "system_prompt_length": 37860, "user_prompt_length": 1101}
{"timestamp": "2025-11-15T00:27:15.571338Z", "level": "INFO", "module": "main", "message": "Processing scene planning", "job_id": "dd40e60a-ff41-4cc1-9202-a43776b16e89", "taskName": "Task-1", "user_prompt_length": 62, "clip_count": 5, "bpm": 120.0, "mood": "energetic"}
{"timestamp": "2025-11-15T00:27:15.571496Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "job_id": "dd40e60a-ff41-4cc1-9202-a43776b16e89", "taskName": "Task-1", "user_prompt_length": 62, "clip_count": 5}
{"timestamp": "2025-11-15T00:27:15.571651Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "job_id": "dd40e60a-ff41-4cc1-9202-a43776b16e89", "taskName": "Task-1", "model": "gpt-4o", "system_prompt_length": 37859, "user_prompt_length": 721}
{"timestamp": "2025-11-15T00:27:26.519770Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job 2e82c989-a83d-4dd2-9ccd-d93a2db97923: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(2e82c989-a83d-4dd2-9ccd-d93a2db97923) is not present in table \"jobs\".'}", "taskName": "Task-16", "job_id": "2e82c989-a83d-4dd2-9ccd-d93a2db97923", "error": "Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(2e82c989-a83d-4dd2-9ccd-d93a2db97923) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:27:26.522409Z", "level": "ERROR", "module": "llm_client", "message": "Unexpected error in LLM call: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(2e82c989-a83d-4dd2-9ccd-d93a2db97923) is not present in table \"jobs\".'}", "taskName": "Task-16", "job_id": "2e82c989-a83d-4dd2-9ccd-d93a2db97923", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(2e82c989-a83d-4dd2-9ccd-d93a2db97923) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(2e82c989-a83d-4dd2-9ccd-d93a2db97923) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(2e82c989-a83d-4dd2-9ccd-d93a2db97923) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:27:26.524015Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in generate_scene_plan: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(2e82c989-a83d-4dd2-9ccd-d93a2db97923) is not present in table \"jobs\".'}", "taskName": "Task-16", "error": "Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(2e82c989-a83d-4dd2-9ccd-d93a2db97923) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:27:26.526064Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(2e82c989-a83d-4dd2-9ccd-d93a2db97923) is not present in table \"jobs\".'}", "taskName": "Task-16", "job_id": "2e82c989-a83d-4dd2-9ccd-d93a2db97923", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(2e82c989-a83d-4dd2-9ccd-d93a2db97923) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(2e82c989-a83d-4dd2-9ccd-d93a2db97923) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(2e82c989-a83d-4dd2-9ccd-d93a2db97923) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 67, in plan_scenes\n    llm_output = await generate_scene_plan(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/retry.py\", line 49, in async_wrapper\n    return await func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 492, in generate_scene_plan\n    raise GenerationError(f\"Unexpected error: {str(e)}\", job_id=job_id) from e\nshared.errors.GenerationError: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(2e82c989-a83d-4dd2-9ccd-d93a2db97923) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:27:26.583093Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-19", "job_id": "f0a14ad0-aa15-4d02-830b-8f3c90fdcd82", "user_prompt_length": 42, "clip_count": 3}
{"timestamp": "2025-11-15T00:27:26.583481Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-19", "job_id": "f0a14ad0-aa15-4d02-830b-8f3c90fdcd82", "model": "gpt-4o", "system_prompt_length": 37742, "user_prompt_length": 811}
{"timestamp": "2025-11-15T00:27:40.021619Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job dd40e60a-ff41-4cc1-9202-a43776b16e89: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(dd40e60a-ff41-4cc1-9202-a43776b16e89) is not present in table \"jobs\".'}", "job_id": "dd40e60a-ff41-4cc1-9202-a43776b16e89", "taskName": "Task-1", "error": "Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(dd40e60a-ff41-4cc1-9202-a43776b16e89) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:27:40.032406Z", "level": "ERROR", "module": "llm_client", "message": "Unexpected error in LLM call: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(dd40e60a-ff41-4cc1-9202-a43776b16e89) is not present in table \"jobs\".'}", "job_id": "dd40e60a-ff41-4cc1-9202-a43776b16e89", "taskName": "Task-1", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(dd40e60a-ff41-4cc1-9202-a43776b16e89) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(dd40e60a-ff41-4cc1-9202-a43776b16e89) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(dd40e60a-ff41-4cc1-9202-a43776b16e89) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:27:40.035302Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in generate_scene_plan: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(dd40e60a-ff41-4cc1-9202-a43776b16e89) is not present in table \"jobs\".'}", "job_id": "dd40e60a-ff41-4cc1-9202-a43776b16e89", "taskName": "Task-1", "error": "Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(dd40e60a-ff41-4cc1-9202-a43776b16e89) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:27:40.039575Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(dd40e60a-ff41-4cc1-9202-a43776b16e89) is not present in table \"jobs\".'}", "job_id": "dd40e60a-ff41-4cc1-9202-a43776b16e89", "taskName": "Task-1", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(dd40e60a-ff41-4cc1-9202-a43776b16e89) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(dd40e60a-ff41-4cc1-9202-a43776b16e89) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(dd40e60a-ff41-4cc1-9202-a43776b16e89) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 67, in plan_scenes\n    llm_output = await generate_scene_plan(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/retry.py\", line 49, in async_wrapper\n    return await func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 492, in generate_scene_plan\n    raise GenerationError(f\"Unexpected error: {str(e)}\", job_id=job_id) from e\nshared.errors.GenerationError: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(dd40e60a-ff41-4cc1-9202-a43776b16e89) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:27:40.115258Z", "level": "INFO", "module": "main", "message": "Processing scene planning", "job_id": "69555756-23d2-4351-8fd3-bbaa2fcf5792", "taskName": "Task-4", "user_prompt_length": 130, "clip_count": 5, "bpm": 140.0, "mood": "energetic"}
{"timestamp": "2025-11-15T00:27:40.115316Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "job_id": "69555756-23d2-4351-8fd3-bbaa2fcf5792", "taskName": "Task-4", "user_prompt_length": 130, "clip_count": 5}
{"timestamp": "2025-11-15T00:27:40.115448Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "job_id": "69555756-23d2-4351-8fd3-bbaa2fcf5792", "taskName": "Task-4", "model": "gpt-4o", "system_prompt_length": 37859, "user_prompt_length": 788}
{"timestamp": "2025-11-15T00:27:46.876756Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job f0a14ad0-aa15-4d02-830b-8f3c90fdcd82: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(f0a14ad0-aa15-4d02-830b-8f3c90fdcd82) is not present in table \"jobs\".'}", "taskName": "Task-19", "job_id": "f0a14ad0-aa15-4d02-830b-8f3c90fdcd82", "error": "Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(f0a14ad0-aa15-4d02-830b-8f3c90fdcd82) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:27:46.879078Z", "level": "ERROR", "module": "llm_client", "message": "Unexpected error in LLM call: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(f0a14ad0-aa15-4d02-830b-8f3c90fdcd82) is not present in table \"jobs\".'}", "taskName": "Task-19", "job_id": "f0a14ad0-aa15-4d02-830b-8f3c90fdcd82", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(f0a14ad0-aa15-4d02-830b-8f3c90fdcd82) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(f0a14ad0-aa15-4d02-830b-8f3c90fdcd82) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(f0a14ad0-aa15-4d02-830b-8f3c90fdcd82) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:27:46.880650Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in generate_scene_plan: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(f0a14ad0-aa15-4d02-830b-8f3c90fdcd82) is not present in table \"jobs\".'}", "taskName": "Task-19", "error": "Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(f0a14ad0-aa15-4d02-830b-8f3c90fdcd82) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:27:46.883413Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(f0a14ad0-aa15-4d02-830b-8f3c90fdcd82) is not present in table \"jobs\".'}", "taskName": "Task-19", "job_id": "f0a14ad0-aa15-4d02-830b-8f3c90fdcd82", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(f0a14ad0-aa15-4d02-830b-8f3c90fdcd82) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(f0a14ad0-aa15-4d02-830b-8f3c90fdcd82) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(f0a14ad0-aa15-4d02-830b-8f3c90fdcd82) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 67, in plan_scenes\n    llm_output = await generate_scene_plan(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/retry.py\", line 49, in async_wrapper\n    return await func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 492, in generate_scene_plan\n    raise GenerationError(f\"Unexpected error: {str(e)}\", job_id=job_id) from e\nshared.errors.GenerationError: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(f0a14ad0-aa15-4d02-830b-8f3c90fdcd82) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:27:46.911963Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-22", "job_id": "70b96b59-5152-441a-81c1-c565a5db5867", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T00:27:46.912179Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-22", "job_id": "70b96b59-5152-441a-81c1-c565a5db5867", "model": "gpt-4o", "system_prompt_length": 37860, "user_prompt_length": 1101}
{"timestamp": "2025-11-15T00:28:05.446240Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job 69555756-23d2-4351-8fd3-bbaa2fcf5792: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(69555756-23d2-4351-8fd3-bbaa2fcf5792) is not present in table \"jobs\".'}", "job_id": "69555756-23d2-4351-8fd3-bbaa2fcf5792", "taskName": "Task-4", "error": "Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(69555756-23d2-4351-8fd3-bbaa2fcf5792) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:28:05.451662Z", "level": "ERROR", "module": "llm_client", "message": "Unexpected error in LLM call: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(69555756-23d2-4351-8fd3-bbaa2fcf5792) is not present in table \"jobs\".'}", "job_id": "69555756-23d2-4351-8fd3-bbaa2fcf5792", "taskName": "Task-4", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(69555756-23d2-4351-8fd3-bbaa2fcf5792) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(69555756-23d2-4351-8fd3-bbaa2fcf5792) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(69555756-23d2-4351-8fd3-bbaa2fcf5792) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:28:05.454603Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in generate_scene_plan: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(69555756-23d2-4351-8fd3-bbaa2fcf5792) is not present in table \"jobs\".'}", "job_id": "69555756-23d2-4351-8fd3-bbaa2fcf5792", "taskName": "Task-4", "error": "Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(69555756-23d2-4351-8fd3-bbaa2fcf5792) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:28:05.457019Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(69555756-23d2-4351-8fd3-bbaa2fcf5792) is not present in table \"jobs\".'}", "job_id": "69555756-23d2-4351-8fd3-bbaa2fcf5792", "taskName": "Task-4", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(69555756-23d2-4351-8fd3-bbaa2fcf5792) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(69555756-23d2-4351-8fd3-bbaa2fcf5792) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(69555756-23d2-4351-8fd3-bbaa2fcf5792) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 67, in plan_scenes\n    llm_output = await generate_scene_plan(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/retry.py\", line 49, in async_wrapper\n    return await func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 492, in generate_scene_plan\n    raise GenerationError(f\"Unexpected error: {str(e)}\", job_id=job_id) from e\nshared.errors.GenerationError: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(69555756-23d2-4351-8fd3-bbaa2fcf5792) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:28:05.491127Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-7", "job_id": "4b0a15b5-9d08-4584-ac85-e7a6b51cbb8f", "model": "gpt-4o", "system_prompt_length": 6744, "user_prompt_length": 637}
{"timestamp": "2025-11-15T00:28:05.491352Z", "level": "INFO", "module": "llm_client", "message": "Scene plan generated successfully", "taskName": "Task-7", "job_id": "4b0a15b5-9d08-4584-ac85-e7a6b51cbb8f", "model": "gpt-4o", "input_tokens": 1000, "output_tokens": 500, "cost": 0.0125}
{"timestamp": "2025-11-15T00:28:05.547804Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-16", "job_id": "fc72b73e-5288-471b-ae08-f1a03ebf42af", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T00:28:05.548366Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-16", "job_id": "fc72b73e-5288-471b-ae08-f1a03ebf42af", "model": "gpt-4o", "system_prompt_length": 37860, "user_prompt_length": 1101}
{"timestamp": "2025-11-15T00:28:12.441632Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job 70b96b59-5152-441a-81c1-c565a5db5867: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(70b96b59-5152-441a-81c1-c565a5db5867) is not present in table \"jobs\".'}", "taskName": "Task-22", "job_id": "70b96b59-5152-441a-81c1-c565a5db5867", "error": "Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(70b96b59-5152-441a-81c1-c565a5db5867) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:28:12.443820Z", "level": "ERROR", "module": "llm_client", "message": "Unexpected error in LLM call: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(70b96b59-5152-441a-81c1-c565a5db5867) is not present in table \"jobs\".'}", "taskName": "Task-22", "job_id": "70b96b59-5152-441a-81c1-c565a5db5867", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(70b96b59-5152-441a-81c1-c565a5db5867) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(70b96b59-5152-441a-81c1-c565a5db5867) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(70b96b59-5152-441a-81c1-c565a5db5867) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:28:12.444976Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in generate_scene_plan: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(70b96b59-5152-441a-81c1-c565a5db5867) is not present in table \"jobs\".'}", "taskName": "Task-22", "error": "Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(70b96b59-5152-441a-81c1-c565a5db5867) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:28:12.446566Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(70b96b59-5152-441a-81c1-c565a5db5867) is not present in table \"jobs\".'}", "taskName": "Task-22", "job_id": "70b96b59-5152-441a-81c1-c565a5db5867", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(70b96b59-5152-441a-81c1-c565a5db5867) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(70b96b59-5152-441a-81c1-c565a5db5867) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(70b96b59-5152-441a-81c1-c565a5db5867) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 67, in plan_scenes\n    llm_output = await generate_scene_plan(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/retry.py\", line 49, in async_wrapper\n    return await func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 492, in generate_scene_plan\n    raise GenerationError(f\"Unexpected error: {str(e)}\", job_id=job_id) from e\nshared.errors.GenerationError: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(70b96b59-5152-441a-81c1-c565a5db5867) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:28:12.452509Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-25", "job_id": "c4eec25c-f343-4ff2-acab-808dc91b2096", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T00:28:12.452818Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-25", "job_id": "c4eec25c-f343-4ff2-acab-808dc91b2096", "model": "gpt-4o", "system_prompt_length": 37860, "user_prompt_length": 1101}
{"timestamp": "2025-11-15T00:28:30.310264Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job fc72b73e-5288-471b-ae08-f1a03ebf42af: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(fc72b73e-5288-471b-ae08-f1a03ebf42af) is not present in table \"jobs\".'}", "taskName": "Task-16", "job_id": "fc72b73e-5288-471b-ae08-f1a03ebf42af", "error": "Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(fc72b73e-5288-471b-ae08-f1a03ebf42af) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:28:30.314611Z", "level": "ERROR", "module": "llm_client", "message": "Unexpected error in LLM call: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(fc72b73e-5288-471b-ae08-f1a03ebf42af) is not present in table \"jobs\".'}", "taskName": "Task-16", "job_id": "fc72b73e-5288-471b-ae08-f1a03ebf42af", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(fc72b73e-5288-471b-ae08-f1a03ebf42af) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(fc72b73e-5288-471b-ae08-f1a03ebf42af) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(fc72b73e-5288-471b-ae08-f1a03ebf42af) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:28:30.317037Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in generate_scene_plan: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(fc72b73e-5288-471b-ae08-f1a03ebf42af) is not present in table \"jobs\".'}", "taskName": "Task-16", "error": "Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(fc72b73e-5288-471b-ae08-f1a03ebf42af) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:28:30.321095Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(fc72b73e-5288-471b-ae08-f1a03ebf42af) is not present in table \"jobs\".'}", "taskName": "Task-16", "job_id": "fc72b73e-5288-471b-ae08-f1a03ebf42af", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(fc72b73e-5288-471b-ae08-f1a03ebf42af) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(fc72b73e-5288-471b-ae08-f1a03ebf42af) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(fc72b73e-5288-471b-ae08-f1a03ebf42af) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 67, in plan_scenes\n    llm_output = await generate_scene_plan(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/retry.py\", line 49, in async_wrapper\n    return await func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 492, in generate_scene_plan\n    raise GenerationError(f\"Unexpected error: {str(e)}\", job_id=job_id) from e\nshared.errors.GenerationError: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(fc72b73e-5288-471b-ae08-f1a03ebf42af) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:28:30.369727Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-19", "job_id": "17050212-29bf-4445-a9fb-5dd87f34fd79", "user_prompt_length": 42, "clip_count": 3}
{"timestamp": "2025-11-15T00:28:30.370107Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-19", "job_id": "17050212-29bf-4445-a9fb-5dd87f34fd79", "model": "gpt-4o", "system_prompt_length": 37742, "user_prompt_length": 811}
{"timestamp": "2025-11-15T00:28:35.219061Z", "level": "INFO", "module": "main", "message": "Processing scene planning", "job_id": "6bc8a53c-50ca-40e8-8940-c5d49414dfe2", "taskName": "Task-1", "user_prompt_length": 62, "clip_count": 5, "bpm": 120.0, "mood": "energetic"}
{"timestamp": "2025-11-15T00:28:35.219142Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "job_id": "6bc8a53c-50ca-40e8-8940-c5d49414dfe2", "taskName": "Task-1", "user_prompt_length": 62, "clip_count": 5}
{"timestamp": "2025-11-15T00:28:35.219284Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "job_id": "6bc8a53c-50ca-40e8-8940-c5d49414dfe2", "taskName": "Task-1", "model": "gpt-4o", "system_prompt_length": 37859, "user_prompt_length": 721}
{"timestamp": "2025-11-15T00:28:38.534600Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job c4eec25c-f343-4ff2-acab-808dc91b2096: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(c4eec25c-f343-4ff2-acab-808dc91b2096) is not present in table \"jobs\".'}", "taskName": "Task-25", "job_id": "c4eec25c-f343-4ff2-acab-808dc91b2096", "error": "Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(c4eec25c-f343-4ff2-acab-808dc91b2096) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:28:38.542546Z", "level": "ERROR", "module": "llm_client", "message": "Unexpected error in LLM call: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(c4eec25c-f343-4ff2-acab-808dc91b2096) is not present in table \"jobs\".'}", "taskName": "Task-25", "job_id": "c4eec25c-f343-4ff2-acab-808dc91b2096", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(c4eec25c-f343-4ff2-acab-808dc91b2096) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(c4eec25c-f343-4ff2-acab-808dc91b2096) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(c4eec25c-f343-4ff2-acab-808dc91b2096) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:28:38.544428Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in generate_scene_plan: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(c4eec25c-f343-4ff2-acab-808dc91b2096) is not present in table \"jobs\".'}", "taskName": "Task-25", "error": "Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(c4eec25c-f343-4ff2-acab-808dc91b2096) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:28:38.546479Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(c4eec25c-f343-4ff2-acab-808dc91b2096) is not present in table \"jobs\".'}", "taskName": "Task-25", "job_id": "c4eec25c-f343-4ff2-acab-808dc91b2096", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(c4eec25c-f343-4ff2-acab-808dc91b2096) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(c4eec25c-f343-4ff2-acab-808dc91b2096) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(c4eec25c-f343-4ff2-acab-808dc91b2096) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 67, in plan_scenes\n    llm_output = await generate_scene_plan(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/retry.py\", line 49, in async_wrapper\n    return await func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 492, in generate_scene_plan\n    raise GenerationError(f\"Unexpected error: {str(e)}\", job_id=job_id) from e\nshared.errors.GenerationError: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(c4eec25c-f343-4ff2-acab-808dc91b2096) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:28:38.575025Z", "level": "INFO", "module": "main", "message": "Processing scene planning", "job_id": "aca86de4-f3ef-4ce9-81fd-7a37f6833d6f", "taskName": "Task-28", "user_prompt_length": 83, "clip_count": 5, "bpm": 120.0, "mood": "energetic"}
{"timestamp": "2025-11-15T00:28:38.575107Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "job_id": "aca86de4-f3ef-4ce9-81fd-7a37f6833d6f", "taskName": "Task-28", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T00:28:38.575349Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "job_id": "aca86de4-f3ef-4ce9-81fd-7a37f6833d6f", "taskName": "Task-28", "model": "gpt-4o", "system_prompt_length": 37860, "user_prompt_length": 1101}
{"timestamp": "2025-11-15T00:28:50.281430Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job 17050212-29bf-4445-a9fb-5dd87f34fd79: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(17050212-29bf-4445-a9fb-5dd87f34fd79) is not present in table \"jobs\".'}", "taskName": "Task-19", "job_id": "17050212-29bf-4445-a9fb-5dd87f34fd79", "error": "Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(17050212-29bf-4445-a9fb-5dd87f34fd79) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:28:50.284241Z", "level": "ERROR", "module": "llm_client", "message": "Unexpected error in LLM call: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(17050212-29bf-4445-a9fb-5dd87f34fd79) is not present in table \"jobs\".'}", "taskName": "Task-19", "job_id": "17050212-29bf-4445-a9fb-5dd87f34fd79", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(17050212-29bf-4445-a9fb-5dd87f34fd79) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(17050212-29bf-4445-a9fb-5dd87f34fd79) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(17050212-29bf-4445-a9fb-5dd87f34fd79) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:28:50.286750Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in generate_scene_plan: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(17050212-29bf-4445-a9fb-5dd87f34fd79) is not present in table \"jobs\".'}", "taskName": "Task-19", "error": "Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(17050212-29bf-4445-a9fb-5dd87f34fd79) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:28:50.290875Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(17050212-29bf-4445-a9fb-5dd87f34fd79) is not present in table \"jobs\".'}", "taskName": "Task-19", "job_id": "17050212-29bf-4445-a9fb-5dd87f34fd79", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(17050212-29bf-4445-a9fb-5dd87f34fd79) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(17050212-29bf-4445-a9fb-5dd87f34fd79) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(17050212-29bf-4445-a9fb-5dd87f34fd79) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 67, in plan_scenes\n    llm_output = await generate_scene_plan(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/retry.py\", line 49, in async_wrapper\n    return await func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 492, in generate_scene_plan\n    raise GenerationError(f\"Unexpected error: {str(e)}\", job_id=job_id) from e\nshared.errors.GenerationError: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(17050212-29bf-4445-a9fb-5dd87f34fd79) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:28:50.320500Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-22", "job_id": "910b93ac-2d0b-4a1d-a576-55272118ddfe", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T00:28:50.320718Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-22", "job_id": "910b93ac-2d0b-4a1d-a576-55272118ddfe", "model": "gpt-4o", "system_prompt_length": 37860, "user_prompt_length": 1101}
{"timestamp": "2025-11-15T00:29:00.691479Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job 6bc8a53c-50ca-40e8-8940-c5d49414dfe2: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(6bc8a53c-50ca-40e8-8940-c5d49414dfe2) is not present in table \"jobs\".'}", "job_id": "6bc8a53c-50ca-40e8-8940-c5d49414dfe2", "taskName": "Task-1", "error": "Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(6bc8a53c-50ca-40e8-8940-c5d49414dfe2) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:29:00.696120Z", "level": "ERROR", "module": "llm_client", "message": "Unexpected error in LLM call: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(6bc8a53c-50ca-40e8-8940-c5d49414dfe2) is not present in table \"jobs\".'}", "job_id": "6bc8a53c-50ca-40e8-8940-c5d49414dfe2", "taskName": "Task-1", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(6bc8a53c-50ca-40e8-8940-c5d49414dfe2) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(6bc8a53c-50ca-40e8-8940-c5d49414dfe2) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(6bc8a53c-50ca-40e8-8940-c5d49414dfe2) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:29:00.697862Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in generate_scene_plan: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(6bc8a53c-50ca-40e8-8940-c5d49414dfe2) is not present in table \"jobs\".'}", "job_id": "6bc8a53c-50ca-40e8-8940-c5d49414dfe2", "taskName": "Task-1", "error": "Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(6bc8a53c-50ca-40e8-8940-c5d49414dfe2) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:29:00.700705Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(6bc8a53c-50ca-40e8-8940-c5d49414dfe2) is not present in table \"jobs\".'}", "job_id": "6bc8a53c-50ca-40e8-8940-c5d49414dfe2", "taskName": "Task-1", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(6bc8a53c-50ca-40e8-8940-c5d49414dfe2) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(6bc8a53c-50ca-40e8-8940-c5d49414dfe2) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(6bc8a53c-50ca-40e8-8940-c5d49414dfe2) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 67, in plan_scenes\n    llm_output = await generate_scene_plan(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/retry.py\", line 49, in async_wrapper\n    return await func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 492, in generate_scene_plan\n    raise GenerationError(f\"Unexpected error: {str(e)}\", job_id=job_id) from e\nshared.errors.GenerationError: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(6bc8a53c-50ca-40e8-8940-c5d49414dfe2) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:29:03.019244Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job aca86de4-f3ef-4ce9-81fd-7a37f6833d6f: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(aca86de4-f3ef-4ce9-81fd-7a37f6833d6f) is not present in table \"jobs\".'}", "job_id": "aca86de4-f3ef-4ce9-81fd-7a37f6833d6f", "taskName": "Task-28", "error": "Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(aca86de4-f3ef-4ce9-81fd-7a37f6833d6f) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:29:03.021857Z", "level": "ERROR", "module": "llm_client", "message": "Unexpected error in LLM call: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(aca86de4-f3ef-4ce9-81fd-7a37f6833d6f) is not present in table \"jobs\".'}", "job_id": "aca86de4-f3ef-4ce9-81fd-7a37f6833d6f", "taskName": "Task-28", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(aca86de4-f3ef-4ce9-81fd-7a37f6833d6f) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(aca86de4-f3ef-4ce9-81fd-7a37f6833d6f) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(aca86de4-f3ef-4ce9-81fd-7a37f6833d6f) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:29:03.023074Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in generate_scene_plan: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(aca86de4-f3ef-4ce9-81fd-7a37f6833d6f) is not present in table \"jobs\".'}", "job_id": "aca86de4-f3ef-4ce9-81fd-7a37f6833d6f", "taskName": "Task-28", "error": "Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(aca86de4-f3ef-4ce9-81fd-7a37f6833d6f) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:29:03.024668Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(aca86de4-f3ef-4ce9-81fd-7a37f6833d6f) is not present in table \"jobs\".'}", "job_id": "aca86de4-f3ef-4ce9-81fd-7a37f6833d6f", "taskName": "Task-28", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(aca86de4-f3ef-4ce9-81fd-7a37f6833d6f) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(aca86de4-f3ef-4ce9-81fd-7a37f6833d6f) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(aca86de4-f3ef-4ce9-81fd-7a37f6833d6f) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 67, in plan_scenes\n    llm_output = await generate_scene_plan(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/retry.py\", line 49, in async_wrapper\n    return await func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 492, in generate_scene_plan\n    raise GenerationError(f\"Unexpected error: {str(e)}\", job_id=job_id) from e\nshared.errors.GenerationError: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(aca86de4-f3ef-4ce9-81fd-7a37f6833d6f) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:29:03.053558Z", "level": "INFO", "module": "script_generator", "message": "Generated 3 clip scripts", "taskName": null, "clip_count": 3}
{"timestamp": "2025-11-15T00:29:03.054265Z", "level": "INFO", "module": "transition_planner", "message": "Planned 2 transitions", "taskName": null, "transition_count": 2}
{"timestamp": "2025-11-15T00:29:03.055414Z", "level": "INFO", "module": "validator", "message": "ScenePlan validation passed", "taskName": null}
{"timestamp": "2025-11-15T00:29:03.055887Z", "level": "WARNING", "module": "validator", "message": "Validation found 1 issues", "taskName": null, "issues": "['Clip 0 start time mismatch: 1.0s vs 0.0s (tolerance: \u00b10.5s)']"}
{"timestamp": "2025-11-15T00:29:03.056287Z", "level": "WARNING", "module": "validator", "message": "Transition count mismatch: 2 vs 1", "taskName": null}
{"timestamp": "2025-11-15T00:29:03.056346Z", "level": "WARNING", "module": "validator", "message": "Validation found 2 issues", "taskName": null, "issues": "['Transition count mismatch: 2 transitions, expected 1', 'Invalid transition to_clip index: 2']"}
{"timestamp": "2025-11-15T00:29:03.056745Z", "level": "WARNING", "module": "validator", "message": "Validation found 1 issues", "taskName": null, "issues": "['Clip 0 references unknown character: nonexistent']"}
{"timestamp": "2025-11-15T00:29:03.057237Z", "level": "WARNING", "module": "validator", "message": "Validation found 1 issues", "taskName": null, "issues": "['Clip 0 references unknown scene: nonexistent']"}
{"timestamp": "2025-11-15T00:29:03.057876Z", "level": "WARNING", "module": "validator", "message": "Validation found 1 issues", "taskName": null, "issues": "['Missing color palette']"}
{"timestamp": "2025-11-15T00:29:03.058294Z", "level": "WARNING", "module": "validator", "message": "Clip count mismatch: 3 vs 2", "taskName": null, "expected": 2, "actual": 3}
{"timestamp": "2025-11-15T00:29:03.058342Z", "level": "WARNING", "module": "validator", "message": "Transition count mismatch: 1 vs 2", "taskName": null}
{"timestamp": "2025-11-15T00:29:03.058387Z", "level": "WARNING", "module": "validator", "message": "Validation found 2 issues", "taskName": null, "issues": "['Clip count mismatch: 3 clips, expected 2', 'Transition count mismatch: 1 transitions, expected 2']"}
{"timestamp": "2025-11-15T00:29:17.571660Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job 910b93ac-2d0b-4a1d-a576-55272118ddfe: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(910b93ac-2d0b-4a1d-a576-55272118ddfe) is not present in table \"jobs\".'}", "taskName": "Task-22", "job_id": "910b93ac-2d0b-4a1d-a576-55272118ddfe", "error": "Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(910b93ac-2d0b-4a1d-a576-55272118ddfe) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:29:17.575622Z", "level": "ERROR", "module": "llm_client", "message": "Unexpected error in LLM call: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(910b93ac-2d0b-4a1d-a576-55272118ddfe) is not present in table \"jobs\".'}", "taskName": "Task-22", "job_id": "910b93ac-2d0b-4a1d-a576-55272118ddfe", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(910b93ac-2d0b-4a1d-a576-55272118ddfe) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(910b93ac-2d0b-4a1d-a576-55272118ddfe) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(910b93ac-2d0b-4a1d-a576-55272118ddfe) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:29:17.577669Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in generate_scene_plan: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(910b93ac-2d0b-4a1d-a576-55272118ddfe) is not present in table \"jobs\".'}", "taskName": "Task-22", "error": "Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(910b93ac-2d0b-4a1d-a576-55272118ddfe) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:29:17.580464Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(910b93ac-2d0b-4a1d-a576-55272118ddfe) is not present in table \"jobs\".'}", "taskName": "Task-22", "job_id": "910b93ac-2d0b-4a1d-a576-55272118ddfe", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(910b93ac-2d0b-4a1d-a576-55272118ddfe) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(910b93ac-2d0b-4a1d-a576-55272118ddfe) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(910b93ac-2d0b-4a1d-a576-55272118ddfe) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 67, in plan_scenes\n    llm_output = await generate_scene_plan(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/retry.py\", line 49, in async_wrapper\n    return await func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 492, in generate_scene_plan\n    raise GenerationError(f\"Unexpected error: {str(e)}\", job_id=job_id) from e\nshared.errors.GenerationError: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(910b93ac-2d0b-4a1d-a576-55272118ddfe) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:29:17.590799Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-25", "job_id": "86906eac-4f04-4b16-b49e-92367ade7693", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T00:29:17.591798Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-25", "job_id": "86906eac-4f04-4b16-b49e-92367ade7693", "model": "gpt-4o", "system_prompt_length": 37860, "user_prompt_length": 1101}
{"timestamp": "2025-11-15T00:30:05.830993Z", "level": "INFO", "module": "main", "message": "Processing scene planning", "job_id": "2b71b53c-51bb-4316-ba02-99d839ab3e49", "taskName": "Task-1", "user_prompt_length": 62, "clip_count": 5, "bpm": 120.0, "mood": "energetic"}
{"timestamp": "2025-11-15T00:30:05.831238Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "job_id": "2b71b53c-51bb-4316-ba02-99d839ab3e49", "taskName": "Task-1", "user_prompt_length": 62, "clip_count": 5}
{"timestamp": "2025-11-15T00:30:05.831637Z", "level": "INFO", "module": "script_generator", "message": "Generated 5 clip scripts", "job_id": "2b71b53c-51bb-4316-ba02-99d839ab3e49", "taskName": "Task-1", "clip_count": 5}
{"timestamp": "2025-11-15T00:30:05.831702Z", "level": "INFO", "module": "transition_planner", "message": "Planned 4 transitions", "job_id": "2b71b53c-51bb-4316-ba02-99d839ab3e49", "taskName": "Task-1", "transition_count": 4}
{"timestamp": "2025-11-15T00:30:05.831760Z", "level": "WARNING", "module": "planner", "message": "LLM job_id mismatch: 071ff2ad-91fa-41a7-b924-4b6d7dfd48f0 vs 2b71b53c-51bb-4316-ba02-99d839ab3e49, using provided job_id", "job_id": "2b71b53c-51bb-4316-ba02-99d839ab3e49", "taskName": "Task-1"}
{"timestamp": "2025-11-15T00:30:05.831822Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "job_id": "2b71b53c-51bb-4316-ba02-99d839ab3e49", "taskName": "Task-1", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T00:30:05.831864Z", "level": "WARNING", "module": "planner", "message": "Style inconsistencies found, refining...", "job_id": "2b71b53c-51bb-4316-ba02-99d839ab3e49", "taskName": "Task-1"}
{"timestamp": "2025-11-15T00:30:05.831914Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "job_id": "2b71b53c-51bb-4316-ba02-99d839ab3e49", "taskName": "Task-1", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T00:30:05.831953Z", "level": "WARNING", "module": "style_analyzer", "message": "Style inconsistencies found, but auto-refinement not implemented", "job_id": "2b71b53c-51bb-4316-ba02-99d839ab3e49", "taskName": "Task-1"}
{"timestamp": "2025-11-15T00:30:05.832006Z", "level": "INFO", "module": "validator", "message": "ScenePlan validation passed", "job_id": "2b71b53c-51bb-4316-ba02-99d839ab3e49", "taskName": "Task-1"}
{"timestamp": "2025-11-15T00:30:05.832047Z", "level": "INFO", "module": "planner", "message": "Scene planning complete", "job_id": "2b71b53c-51bb-4316-ba02-99d839ab3e49", "taskName": "Task-1", "characters": 1, "scenes": 1, "clips": 5, "transitions": 4}
{"timestamp": "2025-11-15T00:30:05.832091Z", "level": "INFO", "module": "main", "message": "Scene planning complete", "job_id": "2b71b53c-51bb-4316-ba02-99d839ab3e49", "taskName": "Task-1", "characters": 1, "scenes": 1, "clips": 5}
{"timestamp": "2025-11-15T00:30:46.212784Z", "level": "INFO", "module": "main", "message": "Processing scene planning", "job_id": "b7ffeadc-d79d-41ac-92ee-d36089711a00", "taskName": "Task-1", "user_prompt_length": 62, "clip_count": 5, "bpm": 120.0, "mood": "energetic"}
{"timestamp": "2025-11-15T00:30:46.212871Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "job_id": "b7ffeadc-d79d-41ac-92ee-d36089711a00", "taskName": "Task-1", "user_prompt_length": 62, "clip_count": 5}
{"timestamp": "2025-11-15T00:30:46.213048Z", "level": "INFO", "module": "script_generator", "message": "Generated 5 clip scripts", "job_id": "b7ffeadc-d79d-41ac-92ee-d36089711a00", "taskName": "Task-1", "clip_count": 5}
{"timestamp": "2025-11-15T00:30:46.213477Z", "level": "INFO", "module": "transition_planner", "message": "Planned 4 transitions", "job_id": "b7ffeadc-d79d-41ac-92ee-d36089711a00", "taskName": "Task-1", "transition_count": 4}
{"timestamp": "2025-11-15T00:30:46.213895Z", "level": "WARNING", "module": "planner", "message": "LLM job_id mismatch: f4af27c5-1027-4745-8f00-d5bce0466204 vs b7ffeadc-d79d-41ac-92ee-d36089711a00, using provided job_id", "job_id": "b7ffeadc-d79d-41ac-92ee-d36089711a00", "taskName": "Task-1"}
{"timestamp": "2025-11-15T00:30:46.214096Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "job_id": "b7ffeadc-d79d-41ac-92ee-d36089711a00", "taskName": "Task-1", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T00:30:46.214142Z", "level": "WARNING", "module": "planner", "message": "Style inconsistencies found, refining...", "job_id": "b7ffeadc-d79d-41ac-92ee-d36089711a00", "taskName": "Task-1"}
{"timestamp": "2025-11-15T00:30:46.214183Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "job_id": "b7ffeadc-d79d-41ac-92ee-d36089711a00", "taskName": "Task-1", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T00:30:46.214231Z", "level": "WARNING", "module": "style_analyzer", "message": "Style inconsistencies found, but auto-refinement not implemented", "job_id": "b7ffeadc-d79d-41ac-92ee-d36089711a00", "taskName": "Task-1"}
{"timestamp": "2025-11-15T00:30:46.214286Z", "level": "INFO", "module": "validator", "message": "ScenePlan validation passed", "job_id": "b7ffeadc-d79d-41ac-92ee-d36089711a00", "taskName": "Task-1"}
{"timestamp": "2025-11-15T00:30:46.214582Z", "level": "INFO", "module": "planner", "message": "Scene planning complete", "job_id": "b7ffeadc-d79d-41ac-92ee-d36089711a00", "taskName": "Task-1", "characters": 1, "scenes": 1, "clips": 5, "transitions": 4}
{"timestamp": "2025-11-15T00:30:46.214619Z", "level": "INFO", "module": "main", "message": "Scene planning complete", "job_id": "b7ffeadc-d79d-41ac-92ee-d36089711a00", "taskName": "Task-1", "characters": 1, "scenes": 1, "clips": 5}
{"timestamp": "2025-11-15T00:30:46.216032Z", "level": "INFO", "module": "main", "message": "Processing scene planning", "job_id": "33a2658b-602e-4d18-8ec4-95f2b4bc3429", "taskName": "Task-4", "user_prompt_length": 130, "clip_count": 5, "bpm": 140.0, "mood": "energetic"}
{"timestamp": "2025-11-15T00:30:46.216074Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "job_id": "33a2658b-602e-4d18-8ec4-95f2b4bc3429", "taskName": "Task-4", "user_prompt_length": 130, "clip_count": 5}
{"timestamp": "2025-11-15T00:30:46.216207Z", "level": "INFO", "module": "script_generator", "message": "Generated 5 clip scripts", "job_id": "33a2658b-602e-4d18-8ec4-95f2b4bc3429", "taskName": "Task-4", "clip_count": 5}
{"timestamp": "2025-11-15T00:30:46.216256Z", "level": "INFO", "module": "transition_planner", "message": "Planned 4 transitions", "job_id": "33a2658b-602e-4d18-8ec4-95f2b4bc3429", "taskName": "Task-4", "transition_count": 4}
{"timestamp": "2025-11-15T00:30:46.216297Z", "level": "WARNING", "module": "planner", "message": "LLM job_id mismatch: 6b662e10-5938-4701-9dc9-0c1605fff0c5 vs 33a2658b-602e-4d18-8ec4-95f2b4bc3429, using provided job_id", "job_id": "33a2658b-602e-4d18-8ec4-95f2b4bc3429", "taskName": "Task-4"}
{"timestamp": "2025-11-15T00:30:46.216337Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "job_id": "33a2658b-602e-4d18-8ec4-95f2b4bc3429", "taskName": "Task-4", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T00:30:46.216370Z", "level": "WARNING", "module": "planner", "message": "Style inconsistencies found, refining...", "job_id": "33a2658b-602e-4d18-8ec4-95f2b4bc3429", "taskName": "Task-4"}
{"timestamp": "2025-11-15T00:30:46.216403Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "job_id": "33a2658b-602e-4d18-8ec4-95f2b4bc3429", "taskName": "Task-4", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T00:30:46.216433Z", "level": "WARNING", "module": "style_analyzer", "message": "Style inconsistencies found, but auto-refinement not implemented", "job_id": "33a2658b-602e-4d18-8ec4-95f2b4bc3429", "taskName": "Task-4"}
{"timestamp": "2025-11-15T00:30:46.216468Z", "level": "INFO", "module": "validator", "message": "ScenePlan validation passed", "job_id": "33a2658b-602e-4d18-8ec4-95f2b4bc3429", "taskName": "Task-4"}
{"timestamp": "2025-11-15T00:30:46.216501Z", "level": "INFO", "module": "planner", "message": "Scene planning complete", "job_id": "33a2658b-602e-4d18-8ec4-95f2b4bc3429", "taskName": "Task-4", "characters": 1, "scenes": 1, "clips": 5, "transitions": 4}
{"timestamp": "2025-11-15T00:30:46.216535Z", "level": "INFO", "module": "main", "message": "Scene planning complete", "job_id": "33a2658b-602e-4d18-8ec4-95f2b4bc3429", "taskName": "Task-4", "characters": 1, "scenes": 1, "clips": 5}
{"timestamp": "2025-11-15T00:30:46.219889Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-7", "job_id": "6feabbf2-8977-48c3-95c1-9f878be23b38", "model": "gpt-4o", "system_prompt_length": 6744, "user_prompt_length": 637}
{"timestamp": "2025-11-15T00:30:46.220030Z", "level": "INFO", "module": "llm_client", "message": "Scene plan generated successfully", "taskName": "Task-7", "job_id": "6feabbf2-8977-48c3-95c1-9f878be23b38", "model": "gpt-4o", "input_tokens": 1000, "output_tokens": 500, "cost": 0.0125}
{"timestamp": "2025-11-15T00:30:46.221097Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-10", "job_id": "996fe0ad-1b20-4675-b45e-d2b51563f2cf", "model": "gpt-4o", "system_prompt_length": 6744, "user_prompt_length": 618}
{"timestamp": "2025-11-15T00:30:46.221159Z", "level": "WARNING", "module": "llm_client", "message": "Rate limit error: Rate limit exceeded", "taskName": "Task-10", "job_id": "996fe0ad-1b20-4675-b45e-d2b51563f2cf"}
{"timestamp": "2025-11-15T00:30:46.221198Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/3 for generate_scene_plan after 2s delay", "taskName": "Task-10", "error": "Rate limit error: Rate limit exceeded", "attempt": 1}
{"timestamp": "2025-11-15T00:30:48.223081Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-10", "job_id": "996fe0ad-1b20-4675-b45e-d2b51563f2cf", "model": "gpt-4o", "system_prompt_length": 6744, "user_prompt_length": 618}
{"timestamp": "2025-11-15T00:30:48.223597Z", "level": "WARNING", "module": "llm_client", "message": "Rate limit error: Rate limit exceeded", "taskName": "Task-10", "job_id": "996fe0ad-1b20-4675-b45e-d2b51563f2cf"}
{"timestamp": "2025-11-15T00:30:48.223849Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 2/3 for generate_scene_plan after 4s delay", "taskName": "Task-10", "error": "Rate limit error: Rate limit exceeded", "attempt": 2}
{"timestamp": "2025-11-15T00:30:52.225871Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-10", "job_id": "996fe0ad-1b20-4675-b45e-d2b51563f2cf", "model": "gpt-4o", "system_prompt_length": 6744, "user_prompt_length": 618}
{"timestamp": "2025-11-15T00:30:52.226544Z", "level": "WARNING", "module": "llm_client", "message": "Rate limit error: Rate limit exceeded", "taskName": "Task-10", "job_id": "996fe0ad-1b20-4675-b45e-d2b51563f2cf"}
{"timestamp": "2025-11-15T00:30:52.227024Z", "level": "ERROR", "module": "retry", "message": "All 3 retry attempts failed for generate_scene_plan", "taskName": "Task-10", "error": "Rate limit error: Rate limit exceeded"}
{"timestamp": "2025-11-15T00:30:52.233598Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-13", "job_id": "3050c4b9-a8d5-4617-9882-1000d2972837", "model": "gpt-4o", "system_prompt_length": 6744, "user_prompt_length": 618}
{"timestamp": "2025-11-15T00:30:52.233936Z", "level": "ERROR", "module": "llm_client", "message": "Failed to parse LLM JSON response: Expecting value: line 1 column 1 (char 0)", "taskName": "Task-13", "job_id": "3050c4b9-a8d5-4617-9882-1000d2972837", "response_preview": "not valid json"}
{"timestamp": "2025-11-15T00:30:52.237789Z", "level": "ERROR", "module": "llm_client", "message": "Unexpected error in LLM call: Invalid JSON from LLM: Expecting value: line 1 column 1 (char 0)", "taskName": "Task-13", "job_id": "3050c4b9-a8d5-4617-9882-1000d2972837", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 441, in generate_scene_plan\n    scene_plan_dict = json.loads(content)\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/json/__init__.py\", line 346, in loads\n    return _default_decoder.decode(s)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/json/decoder.py\", line 345, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/json/decoder.py\", line 363, in raw_decode\n    raise JSONDecodeError(\"Expecting value\", s, err.value) from None\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 447, in generate_scene_plan\n    raise RetryableError(f\"Invalid JSON from LLM: {str(e)}\", job_id=job_id) from e\nshared.errors.RetryableError: Invalid JSON from LLM: Expecting value: line 1 column 1 (char 0)"}
{"timestamp": "2025-11-15T00:30:52.238914Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in generate_scene_plan: Unexpected error: Invalid JSON from LLM: Expecting value: line 1 column 1 (char 0)", "taskName": "Task-13", "error": "Unexpected error: Invalid JSON from LLM: Expecting value: line 1 column 1 (char 0)"}
{"timestamp": "2025-11-15T00:30:52.295010Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-16", "job_id": "69f2b12a-4bd5-47ac-b66e-45903b90c2db", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T00:30:52.295976Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: LLM output missing 'clip_scripts' field", "taskName": "Task-16", "job_id": "69f2b12a-4bd5-47ac-b66e-45903b90c2db", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 76, in plan_scenes\n    clip_scripts = generate_clip_scripts(\n        llm_output=llm_output,\n        clip_boundaries=audio_data.clip_boundaries,\n        lyrics=audio_data.lyrics\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/script_generator.py\", line 37, in generate_clip_scripts\n    raise ValueError(\"LLM output missing 'clip_scripts' field\")\nValueError: LLM output missing 'clip_scripts' field"}
{"timestamp": "2025-11-15T00:30:52.302335Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-19", "job_id": "552c2512-d97f-4958-9675-4011c6c23c62", "user_prompt_length": 42, "clip_count": 3}
{"timestamp": "2025-11-15T00:30:52.302680Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: LLM output missing 'clip_scripts' field", "taskName": "Task-19", "job_id": "552c2512-d97f-4958-9675-4011c6c23c62", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 76, in plan_scenes\n    clip_scripts = generate_clip_scripts(\n        llm_output=llm_output,\n        clip_boundaries=audio_data.clip_boundaries,\n        lyrics=audio_data.lyrics\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/script_generator.py\", line 37, in generate_clip_scripts\n    raise ValueError(\"LLM output missing 'clip_scripts' field\")\nValueError: LLM output missing 'clip_scripts' field"}
{"timestamp": "2025-11-15T00:30:52.308930Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-22", "job_id": "4e3d738e-e72a-4937-95bb-d4e63d6e869f", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T00:30:52.309092Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-22", "job_id": "4e3d738e-e72a-4937-95bb-d4e63d6e869f", "model": "gpt-4o", "system_prompt_length": 37860, "user_prompt_length": 1101}
{"timestamp": "2025-11-15T00:31:21.750811Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job 4e3d738e-e72a-4937-95bb-d4e63d6e869f: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(4e3d738e-e72a-4937-95bb-d4e63d6e869f) is not present in table \"jobs\".'}", "taskName": "Task-22", "job_id": "4e3d738e-e72a-4937-95bb-d4e63d6e869f", "error": "Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(4e3d738e-e72a-4937-95bb-d4e63d6e869f) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:31:21.760275Z", "level": "ERROR", "module": "llm_client", "message": "Unexpected error in LLM call: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(4e3d738e-e72a-4937-95bb-d4e63d6e869f) is not present in table \"jobs\".'}", "taskName": "Task-22", "job_id": "4e3d738e-e72a-4937-95bb-d4e63d6e869f", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(4e3d738e-e72a-4937-95bb-d4e63d6e869f) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(4e3d738e-e72a-4937-95bb-d4e63d6e869f) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(4e3d738e-e72a-4937-95bb-d4e63d6e869f) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:31:21.764049Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in generate_scene_plan: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(4e3d738e-e72a-4937-95bb-d4e63d6e869f) is not present in table \"jobs\".'}", "taskName": "Task-22", "error": "Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(4e3d738e-e72a-4937-95bb-d4e63d6e869f) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:31:21.768812Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(4e3d738e-e72a-4937-95bb-d4e63d6e869f) is not present in table \"jobs\".'}", "taskName": "Task-22", "job_id": "4e3d738e-e72a-4937-95bb-d4e63d6e869f", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(4e3d738e-e72a-4937-95bb-d4e63d6e869f) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(4e3d738e-e72a-4937-95bb-d4e63d6e869f) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(4e3d738e-e72a-4937-95bb-d4e63d6e869f) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 67, in plan_scenes\n    llm_output = await generate_scene_plan(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/retry.py\", line 49, in async_wrapper\n    return await func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 492, in generate_scene_plan\n    raise GenerationError(f\"Unexpected error: {str(e)}\", job_id=job_id) from e\nshared.errors.GenerationError: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(4e3d738e-e72a-4937-95bb-d4e63d6e869f) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:31:21.778944Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-25", "job_id": "d70091c7-2d9f-4a9c-adea-ad17ce7c6cc7", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T00:31:21.779861Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: LLM output missing 'clip_scripts' field", "taskName": "Task-25", "job_id": "d70091c7-2d9f-4a9c-adea-ad17ce7c6cc7", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 76, in plan_scenes\n    clip_scripts = generate_clip_scripts(\n        llm_output=llm_output,\n        clip_boundaries=audio_data.clip_boundaries,\n        lyrics=audio_data.lyrics\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/script_generator.py\", line 37, in generate_clip_scripts\n    raise ValueError(\"LLM output missing 'clip_scripts' field\")\nValueError: LLM output missing 'clip_scripts' field"}
{"timestamp": "2025-11-15T00:31:21.793891Z", "level": "INFO", "module": "main", "message": "Processing scene planning", "job_id": "55202b24-6d70-4707-ac40-4a1bd8326ee7", "taskName": "Task-28", "user_prompt_length": 83, "clip_count": 5, "bpm": 120.0, "mood": "energetic"}
{"timestamp": "2025-11-15T00:31:21.793999Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "job_id": "55202b24-6d70-4707-ac40-4a1bd8326ee7", "taskName": "Task-28", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T00:31:21.794198Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "job_id": "55202b24-6d70-4707-ac40-4a1bd8326ee7", "taskName": "Task-28", "model": "gpt-4o", "system_prompt_length": 37860, "user_prompt_length": 1101}
{"timestamp": "2025-11-15T00:31:45.812007Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-1", "job_id": "f1f2e2c8-9fc6-4b4f-9d6c-a5193e149d00", "model": "gpt-4o", "system_prompt_length": 6744, "user_prompt_length": 618}
{"timestamp": "2025-11-15T00:31:45.812147Z", "level": "ERROR", "module": "llm_client", "message": "Failed to parse LLM JSON response: Expecting value: line 1 column 1 (char 0)", "taskName": "Task-1", "job_id": "f1f2e2c8-9fc6-4b4f-9d6c-a5193e149d00", "response_preview": "not valid json"}
{"timestamp": "2025-11-15T00:31:45.813268Z", "level": "ERROR", "module": "llm_client", "message": "Unexpected error in LLM call: Invalid JSON from LLM: Expecting value: line 1 column 1 (char 0)", "taskName": "Task-1", "job_id": "f1f2e2c8-9fc6-4b4f-9d6c-a5193e149d00", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 441, in generate_scene_plan\n    scene_plan_dict = json.loads(content)\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/json/__init__.py\", line 346, in loads\n    return _default_decoder.decode(s)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/json/decoder.py\", line 345, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/json/decoder.py\", line 363, in raw_decode\n    raise JSONDecodeError(\"Expecting value\", s, err.value) from None\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 447, in generate_scene_plan\n    raise RetryableError(f\"Invalid JSON from LLM: {str(e)}\", job_id=job_id) from e\nshared.errors.RetryableError: Invalid JSON from LLM: Expecting value: line 1 column 1 (char 0)"}
{"timestamp": "2025-11-15T00:31:45.813716Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in generate_scene_plan: Unexpected error: Invalid JSON from LLM: Expecting value: line 1 column 1 (char 0)", "taskName": "Task-1", "error": "Unexpected error: Invalid JSON from LLM: Expecting value: line 1 column 1 (char 0)"}
{"timestamp": "2025-11-15T00:31:48.029273Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-1", "job_id": "977b923f-cfb0-4865-8a5c-b8bfe89e7d04", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T00:31:48.030343Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: LLM output missing 'clip_scripts' field", "taskName": "Task-1", "job_id": "977b923f-cfb0-4865-8a5c-b8bfe89e7d04", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 76, in plan_scenes\n    clip_scripts = generate_clip_scripts(\n        llm_output=llm_output,\n        clip_boundaries=audio_data.clip_boundaries,\n        lyrics=audio_data.lyrics\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/script_generator.py\", line 37, in generate_clip_scripts\n    raise ValueError(\"LLM output missing 'clip_scripts' field\")\nValueError: LLM output missing 'clip_scripts' field"}
{"timestamp": "2025-11-15T00:31:50.075173Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job 55202b24-6d70-4707-ac40-4a1bd8326ee7: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(55202b24-6d70-4707-ac40-4a1bd8326ee7) is not present in table \"jobs\".'}", "job_id": "55202b24-6d70-4707-ac40-4a1bd8326ee7", "taskName": "Task-28", "error": "Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(55202b24-6d70-4707-ac40-4a1bd8326ee7) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:31:50.081701Z", "level": "ERROR", "module": "llm_client", "message": "Unexpected error in LLM call: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(55202b24-6d70-4707-ac40-4a1bd8326ee7) is not present in table \"jobs\".'}", "job_id": "55202b24-6d70-4707-ac40-4a1bd8326ee7", "taskName": "Task-28", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(55202b24-6d70-4707-ac40-4a1bd8326ee7) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(55202b24-6d70-4707-ac40-4a1bd8326ee7) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(55202b24-6d70-4707-ac40-4a1bd8326ee7) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:31:50.085058Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in generate_scene_plan: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(55202b24-6d70-4707-ac40-4a1bd8326ee7) is not present in table \"jobs\".'}", "job_id": "55202b24-6d70-4707-ac40-4a1bd8326ee7", "taskName": "Task-28", "error": "Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(55202b24-6d70-4707-ac40-4a1bd8326ee7) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:31:50.092643Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(55202b24-6d70-4707-ac40-4a1bd8326ee7) is not present in table \"jobs\".'}", "job_id": "55202b24-6d70-4707-ac40-4a1bd8326ee7", "taskName": "Task-28", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(55202b24-6d70-4707-ac40-4a1bd8326ee7) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(55202b24-6d70-4707-ac40-4a1bd8326ee7) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(55202b24-6d70-4707-ac40-4a1bd8326ee7) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 67, in plan_scenes\n    llm_output = await generate_scene_plan(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/retry.py\", line 49, in async_wrapper\n    return await func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 492, in generate_scene_plan\n    raise GenerationError(f\"Unexpected error: {str(e)}\", job_id=job_id) from e\nshared.errors.GenerationError: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(55202b24-6d70-4707-ac40-4a1bd8326ee7) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:31:50.158361Z", "level": "INFO", "module": "script_generator", "message": "Generated 3 clip scripts", "taskName": null, "clip_count": 3}
{"timestamp": "2025-11-15T00:31:50.159332Z", "level": "INFO", "module": "transition_planner", "message": "Planned 2 transitions", "taskName": null, "transition_count": 2}
{"timestamp": "2025-11-15T00:31:50.160471Z", "level": "INFO", "module": "validator", "message": "ScenePlan validation passed", "taskName": null}
{"timestamp": "2025-11-15T00:31:50.160881Z", "level": "WARNING", "module": "validator", "message": "Validation found 1 issues", "taskName": null, "issues": "['Clip 0 start time mismatch: 1.0s vs 0.0s (tolerance: \u00b10.5s)']"}
{"timestamp": "2025-11-15T00:31:50.161247Z", "level": "WARNING", "module": "validator", "message": "Transition count mismatch: 2 vs 1", "taskName": null}
{"timestamp": "2025-11-15T00:31:50.161293Z", "level": "WARNING", "module": "validator", "message": "Validation found 2 issues", "taskName": null, "issues": "['Transition count mismatch: 2 transitions, expected 1', 'Invalid transition to_clip index: 2']"}
{"timestamp": "2025-11-15T00:31:50.161658Z", "level": "WARNING", "module": "validator", "message": "Validation found 1 issues", "taskName": null, "issues": "['Clip 0 references unknown character: nonexistent']"}
{"timestamp": "2025-11-15T00:31:50.162015Z", "level": "WARNING", "module": "validator", "message": "Validation found 1 issues", "taskName": null, "issues": "['Clip 0 references unknown scene: nonexistent']"}
{"timestamp": "2025-11-15T00:31:50.162374Z", "level": "WARNING", "module": "validator", "message": "Validation found 1 issues", "taskName": null, "issues": "['Missing color palette']"}
{"timestamp": "2025-11-15T00:31:50.162787Z", "level": "WARNING", "module": "validator", "message": "Clip count mismatch: 3 vs 2", "taskName": null, "expected": 2, "actual": 3}
{"timestamp": "2025-11-15T00:31:50.162863Z", "level": "WARNING", "module": "validator", "message": "Transition count mismatch: 1 vs 2", "taskName": null}
{"timestamp": "2025-11-15T00:31:50.162915Z", "level": "WARNING", "module": "validator", "message": "Validation found 2 issues", "taskName": null, "issues": "['Clip count mismatch: 3 clips, expected 2', 'Transition count mismatch: 1 transitions, expected 2']"}
{"timestamp": "2025-11-15T00:32:35.015444Z", "level": "INFO", "module": "worker", "message": "Acquiring semaphore for job", "taskName": "Task-1", "job_id": "06305837-4768-4e45-94cf-b1b10db7c83c", "available_slots": 3}
{"timestamp": "2025-11-15T00:32:35.017219Z", "level": "INFO", "module": "worker", "message": "Processing job (semaphore acquired)", "taskName": "Task-1", "job_id": "06305837-4768-4e45-94cf-b1b10db7c83c"}
{"timestamp": "2025-11-15T00:32:35.017447Z", "level": "INFO", "module": "worker", "message": "Processing job", "taskName": "Task-1", "job_id": "06305837-4768-4e45-94cf-b1b10db7c83c", "user_id": "ab454fab-5fe5-4bf2-af2d-f269c79a5130"}
{"timestamp": "2025-11-15T00:32:36.042399Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "taskName": "Task-1", "job_id": "06305837-4768-4e45-94cf-b1b10db7c83c", "progress": 2, "stage": "audio_parser"}
{"timestamp": "2025-11-15T00:32:36.042665Z", "level": "WARNING", "module": "orchestrator", "message": "Audio Parser module not found, using stub", "taskName": "Task-1", "job_id": "06305837-4768-4e45-94cf-b1b10db7c83c"}
{"timestamp": "2025-11-15T00:32:36.491551Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "taskName": "Task-1", "job_id": "06305837-4768-4e45-94cf-b1b10db7c83c", "progress": 5, "stage": "audio_parser"}
{"timestamp": "2025-11-15T00:32:37.415547Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "taskName": "Task-1", "job_id": "06305837-4768-4e45-94cf-b1b10db7c83c", "progress": 7, "stage": "audio_parser"}
{"timestamp": "2025-11-15T00:32:38.411283Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "taskName": "Task-1", "job_id": "06305837-4768-4e45-94cf-b1b10db7c83c", "progress": 9, "stage": "audio_parser"}
{"timestamp": "2025-11-15T00:32:38.743588Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "taskName": "Task-1", "job_id": "06305837-4768-4e45-94cf-b1b10db7c83c", "progress": 100, "stage": "audio_parser"}
{"timestamp": "2025-11-15T00:32:39.005994Z", "level": "INFO", "module": "orchestrator", "message": "Audio parser results", "taskName": "Task-1", "job_id": "06305837-4768-4e45-94cf-b1b10db7c83c", "bpm": 120.0, "duration": 120.0, "beat_count": 240, "structure_segments": 6, "mood": "energetic", "energy_level": "high"}
{"timestamp": "2025-11-15T00:32:39.456663Z", "level": "INFO", "module": "orchestrator", "message": "Pipeline completed successfully (audio parser only)", "taskName": "Task-1", "job_id": "06305837-4768-4e45-94cf-b1b10db7c83c", "total_cost": "0.00"}
{"timestamp": "2025-11-15T00:32:39.456818Z", "level": "INFO", "module": "worker", "message": "Job processed successfully", "taskName": "Task-1", "job_id": "06305837-4768-4e45-94cf-b1b10db7c83c"}
{"timestamp": "2025-11-15T00:32:39.456872Z", "level": "INFO", "module": "worker", "message": "Job completed (semaphore released)", "taskName": "Task-1", "job_id": "06305837-4768-4e45-94cf-b1b10db7c83c"}
{"timestamp": "2025-11-15T00:33:41.688138Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-1", "job_id": "d4eb4274-8b12-4d66-aa6b-b4aba928132d", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T00:33:41.688892Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: LLM output missing 'clip_scripts' field", "taskName": "Task-1", "job_id": "d4eb4274-8b12-4d66-aa6b-b4aba928132d", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 76, in plan_scenes\n    clip_scripts = generate_clip_scripts(\n        llm_output=llm_output,\n        clip_boundaries=audio_data.clip_boundaries,\n        lyrics=audio_data.lyrics\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/script_generator.py\", line 37, in generate_clip_scripts\n    raise ValueError(\"LLM output missing 'clip_scripts' field\")\nValueError: LLM output missing 'clip_scripts' field"}
{"timestamp": "2025-11-15T00:33:51.791814Z", "level": "INFO", "module": "main", "message": "Processing scene planning", "job_id": "0f5c3277-1dc4-4369-a2b2-a94dac996094", "taskName": "Task-1", "user_prompt_length": 62, "clip_count": 5, "bpm": 120.0, "mood": "energetic"}
{"timestamp": "2025-11-15T00:33:51.791902Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "job_id": "0f5c3277-1dc4-4369-a2b2-a94dac996094", "taskName": "Task-1", "user_prompt_length": 62, "clip_count": 5}
{"timestamp": "2025-11-15T00:33:51.792016Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "job_id": "0f5c3277-1dc4-4369-a2b2-a94dac996094", "taskName": "Task-1", "model": "gpt-4o", "system_prompt_length": 37859, "user_prompt_length": 721}
{"timestamp": "2025-11-15T00:34:18.291713Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job 0f5c3277-1dc4-4369-a2b2-a94dac996094: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(0f5c3277-1dc4-4369-a2b2-a94dac996094) is not present in table \"jobs\".'}", "job_id": "0f5c3277-1dc4-4369-a2b2-a94dac996094", "taskName": "Task-1", "error": "Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(0f5c3277-1dc4-4369-a2b2-a94dac996094) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:34:18.300274Z", "level": "ERROR", "module": "llm_client", "message": "Unexpected error in LLM call: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(0f5c3277-1dc4-4369-a2b2-a94dac996094) is not present in table \"jobs\".'}", "job_id": "0f5c3277-1dc4-4369-a2b2-a94dac996094", "taskName": "Task-1", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(0f5c3277-1dc4-4369-a2b2-a94dac996094) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(0f5c3277-1dc4-4369-a2b2-a94dac996094) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(0f5c3277-1dc4-4369-a2b2-a94dac996094) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:34:18.302439Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in generate_scene_plan: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(0f5c3277-1dc4-4369-a2b2-a94dac996094) is not present in table \"jobs\".'}", "job_id": "0f5c3277-1dc4-4369-a2b2-a94dac996094", "taskName": "Task-1", "error": "Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(0f5c3277-1dc4-4369-a2b2-a94dac996094) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:34:18.305522Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(0f5c3277-1dc4-4369-a2b2-a94dac996094) is not present in table \"jobs\".'}", "job_id": "0f5c3277-1dc4-4369-a2b2-a94dac996094", "taskName": "Task-1", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(0f5c3277-1dc4-4369-a2b2-a94dac996094) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(0f5c3277-1dc4-4369-a2b2-a94dac996094) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(0f5c3277-1dc4-4369-a2b2-a94dac996094) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 67, in plan_scenes\n    llm_output = await generate_scene_plan(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/retry.py\", line 49, in async_wrapper\n    return await func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 492, in generate_scene_plan\n    raise GenerationError(f\"Unexpected error: {str(e)}\", job_id=job_id) from e\nshared.errors.GenerationError: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(0f5c3277-1dc4-4369-a2b2-a94dac996094) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:34:18.375477Z", "level": "INFO", "module": "main", "message": "Processing scene planning", "job_id": "88510e6f-11fa-46bf-b262-a4fa8d741726", "taskName": "Task-4", "user_prompt_length": 130, "clip_count": 5, "bpm": 140.0, "mood": "energetic"}
{"timestamp": "2025-11-15T00:34:18.375555Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "job_id": "88510e6f-11fa-46bf-b262-a4fa8d741726", "taskName": "Task-4", "user_prompt_length": 130, "clip_count": 5}
{"timestamp": "2025-11-15T00:34:18.375889Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "job_id": "88510e6f-11fa-46bf-b262-a4fa8d741726", "taskName": "Task-4", "model": "gpt-4o", "system_prompt_length": 37859, "user_prompt_length": 788}
{"timestamp": "2025-11-15T00:34:25.415232Z", "level": "INFO", "module": "main", "message": "Processing scene planning", "job_id": "886f0633-cba8-4bd0-ab3e-b39dad817611", "taskName": "Task-1", "user_prompt_length": 62, "clip_count": 5, "bpm": 120.0, "mood": "energetic"}
{"timestamp": "2025-11-15T00:34:25.415395Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "job_id": "886f0633-cba8-4bd0-ab3e-b39dad817611", "taskName": "Task-1", "user_prompt_length": 62, "clip_count": 5}
{"timestamp": "2025-11-15T00:34:25.415498Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "job_id": "886f0633-cba8-4bd0-ab3e-b39dad817611", "taskName": "Task-1", "model": "gpt-4o", "system_prompt_length": 37859, "user_prompt_length": 721}
{"timestamp": "2025-11-15T00:34:46.985168Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job 88510e6f-11fa-46bf-b262-a4fa8d741726: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(88510e6f-11fa-46bf-b262-a4fa8d741726) is not present in table \"jobs\".'}", "job_id": "88510e6f-11fa-46bf-b262-a4fa8d741726", "taskName": "Task-4", "error": "Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(88510e6f-11fa-46bf-b262-a4fa8d741726) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:34:46.990809Z", "level": "ERROR", "module": "llm_client", "message": "Unexpected error in LLM call: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(88510e6f-11fa-46bf-b262-a4fa8d741726) is not present in table \"jobs\".'}", "job_id": "88510e6f-11fa-46bf-b262-a4fa8d741726", "taskName": "Task-4", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(88510e6f-11fa-46bf-b262-a4fa8d741726) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(88510e6f-11fa-46bf-b262-a4fa8d741726) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(88510e6f-11fa-46bf-b262-a4fa8d741726) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:34:46.993443Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in generate_scene_plan: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(88510e6f-11fa-46bf-b262-a4fa8d741726) is not present in table \"jobs\".'}", "job_id": "88510e6f-11fa-46bf-b262-a4fa8d741726", "taskName": "Task-4", "error": "Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(88510e6f-11fa-46bf-b262-a4fa8d741726) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:34:46.995977Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(88510e6f-11fa-46bf-b262-a4fa8d741726) is not present in table \"jobs\".'}", "job_id": "88510e6f-11fa-46bf-b262-a4fa8d741726", "taskName": "Task-4", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(88510e6f-11fa-46bf-b262-a4fa8d741726) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(88510e6f-11fa-46bf-b262-a4fa8d741726) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(88510e6f-11fa-46bf-b262-a4fa8d741726) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 67, in plan_scenes\n    llm_output = await generate_scene_plan(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/retry.py\", line 49, in async_wrapper\n    return await func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 492, in generate_scene_plan\n    raise GenerationError(f\"Unexpected error: {str(e)}\", job_id=job_id) from e\nshared.errors.GenerationError: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(88510e6f-11fa-46bf-b262-a4fa8d741726) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:34:47.034445Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-7", "job_id": "365f32ee-f2a9-4e00-9170-44108db7ad02", "model": "gpt-4o", "system_prompt_length": 6744, "user_prompt_length": 637}
{"timestamp": "2025-11-15T00:34:47.034670Z", "level": "INFO", "module": "llm_client", "message": "Scene plan generated successfully", "taskName": "Task-7", "job_id": "365f32ee-f2a9-4e00-9170-44108db7ad02", "model": "gpt-4o", "input_tokens": 1000, "output_tokens": 500, "cost": 0.0125}
{"timestamp": "2025-11-15T00:34:47.036825Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-10", "job_id": "650d588c-cf5d-4717-ba7e-0a4496036060", "model": "gpt-4o", "system_prompt_length": 6744, "user_prompt_length": 618}
{"timestamp": "2025-11-15T00:34:47.036957Z", "level": "WARNING", "module": "llm_client", "message": "Rate limit error: Rate limit exceeded", "taskName": "Task-10", "job_id": "650d588c-cf5d-4717-ba7e-0a4496036060"}
{"timestamp": "2025-11-15T00:34:47.037036Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/3 for generate_scene_plan after 2s delay", "taskName": "Task-10", "error": "Rate limit error: Rate limit exceeded", "attempt": 1}
{"timestamp": "2025-11-15T00:34:48.482907Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job 886f0633-cba8-4bd0-ab3e-b39dad817611: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(886f0633-cba8-4bd0-ab3e-b39dad817611) is not present in table \"jobs\".'}", "job_id": "886f0633-cba8-4bd0-ab3e-b39dad817611", "taskName": "Task-1", "error": "Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(886f0633-cba8-4bd0-ab3e-b39dad817611) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:34:48.492434Z", "level": "ERROR", "module": "llm_client", "message": "Unexpected error in LLM call: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(886f0633-cba8-4bd0-ab3e-b39dad817611) is not present in table \"jobs\".'}", "job_id": "886f0633-cba8-4bd0-ab3e-b39dad817611", "taskName": "Task-1", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(886f0633-cba8-4bd0-ab3e-b39dad817611) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(886f0633-cba8-4bd0-ab3e-b39dad817611) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(886f0633-cba8-4bd0-ab3e-b39dad817611) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:34:48.494289Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in generate_scene_plan: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(886f0633-cba8-4bd0-ab3e-b39dad817611) is not present in table \"jobs\".'}", "job_id": "886f0633-cba8-4bd0-ab3e-b39dad817611", "taskName": "Task-1", "error": "Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(886f0633-cba8-4bd0-ab3e-b39dad817611) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:34:48.497384Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(886f0633-cba8-4bd0-ab3e-b39dad817611) is not present in table \"jobs\".'}", "job_id": "886f0633-cba8-4bd0-ab3e-b39dad817611", "taskName": "Task-1", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(886f0633-cba8-4bd0-ab3e-b39dad817611) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(886f0633-cba8-4bd0-ab3e-b39dad817611) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(886f0633-cba8-4bd0-ab3e-b39dad817611) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 67, in plan_scenes\n    llm_output = await generate_scene_plan(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/retry.py\", line 49, in async_wrapper\n    return await func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 492, in generate_scene_plan\n    raise GenerationError(f\"Unexpected error: {str(e)}\", job_id=job_id) from e\nshared.errors.GenerationError: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(886f0633-cba8-4bd0-ab3e-b39dad817611) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:34:48.588217Z", "level": "INFO", "module": "main", "message": "Processing scene planning", "job_id": "a7c1040a-a8c9-4e14-a51b-e5b90efddbee", "taskName": "Task-4", "user_prompt_length": 130, "clip_count": 5, "bpm": 140.0, "mood": "energetic"}
{"timestamp": "2025-11-15T00:34:48.588279Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "job_id": "a7c1040a-a8c9-4e14-a51b-e5b90efddbee", "taskName": "Task-4", "user_prompt_length": 130, "clip_count": 5}
{"timestamp": "2025-11-15T00:34:48.588812Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "job_id": "a7c1040a-a8c9-4e14-a51b-e5b90efddbee", "taskName": "Task-4", "model": "gpt-4o", "system_prompt_length": 37859, "user_prompt_length": 788}
{"timestamp": "2025-11-15T00:34:49.038335Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-10", "job_id": "650d588c-cf5d-4717-ba7e-0a4496036060", "model": "gpt-4o", "system_prompt_length": 6744, "user_prompt_length": 618}
{"timestamp": "2025-11-15T00:34:49.038505Z", "level": "WARNING", "module": "llm_client", "message": "Rate limit error: Rate limit exceeded", "taskName": "Task-10", "job_id": "650d588c-cf5d-4717-ba7e-0a4496036060"}
{"timestamp": "2025-11-15T00:34:49.038584Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 2/3 for generate_scene_plan after 4s delay", "taskName": "Task-10", "error": "Rate limit error: Rate limit exceeded", "attempt": 2}
{"timestamp": "2025-11-15T00:34:53.039989Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-10", "job_id": "650d588c-cf5d-4717-ba7e-0a4496036060", "model": "gpt-4o", "system_prompt_length": 6744, "user_prompt_length": 618}
{"timestamp": "2025-11-15T00:34:53.040332Z", "level": "WARNING", "module": "llm_client", "message": "Rate limit error: Rate limit exceeded", "taskName": "Task-10", "job_id": "650d588c-cf5d-4717-ba7e-0a4496036060"}
{"timestamp": "2025-11-15T00:34:53.040448Z", "level": "ERROR", "module": "retry", "message": "All 3 retry attempts failed for generate_scene_plan", "taskName": "Task-10", "error": "Rate limit error: Rate limit exceeded"}
{"timestamp": "2025-11-15T00:34:53.042748Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-13", "job_id": "f8e031e4-a51d-4968-95f5-7ae575e383e5", "model": "gpt-4o", "system_prompt_length": 6744, "user_prompt_length": 618}
{"timestamp": "2025-11-15T00:34:53.042862Z", "level": "ERROR", "module": "llm_client", "message": "Failed to parse LLM JSON response: Expecting value: line 1 column 1 (char 0)", "taskName": "Task-13", "job_id": "f8e031e4-a51d-4968-95f5-7ae575e383e5", "response_preview": "not valid json"}
{"timestamp": "2025-11-15T00:34:53.044226Z", "level": "ERROR", "module": "llm_client", "message": "Unexpected error in LLM call: Invalid JSON from LLM: Expecting value: line 1 column 1 (char 0)", "taskName": "Task-13", "job_id": "f8e031e4-a51d-4968-95f5-7ae575e383e5", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 441, in generate_scene_plan\n    scene_plan_dict = json.loads(content)\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/json/__init__.py\", line 346, in loads\n    return _default_decoder.decode(s)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/json/decoder.py\", line 345, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/json/decoder.py\", line 363, in raw_decode\n    raise JSONDecodeError(\"Expecting value\", s, err.value) from None\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 447, in generate_scene_plan\n    raise RetryableError(f\"Invalid JSON from LLM: {str(e)}\", job_id=job_id) from e\nshared.errors.RetryableError: Invalid JSON from LLM: Expecting value: line 1 column 1 (char 0)"}
{"timestamp": "2025-11-15T00:34:53.044690Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in generate_scene_plan: Unexpected error: Invalid JSON from LLM: Expecting value: line 1 column 1 (char 0)", "taskName": "Task-13", "error": "Unexpected error: Invalid JSON from LLM: Expecting value: line 1 column 1 (char 0)"}
{"timestamp": "2025-11-15T00:34:53.045809Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-16", "job_id": "c20ac8b5-b1dd-42c2-8b34-a42df6b6088f", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T00:34:53.045961Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-16", "job_id": "c20ac8b5-b1dd-42c2-8b34-a42df6b6088f", "model": "gpt-4o", "system_prompt_length": 37860, "user_prompt_length": 1101}
{"timestamp": "2025-11-15T00:35:13.031536Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job a7c1040a-a8c9-4e14-a51b-e5b90efddbee: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(a7c1040a-a8c9-4e14-a51b-e5b90efddbee) is not present in table \"jobs\".'}", "job_id": "a7c1040a-a8c9-4e14-a51b-e5b90efddbee", "taskName": "Task-4", "error": "Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(a7c1040a-a8c9-4e14-a51b-e5b90efddbee) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:35:13.039727Z", "level": "ERROR", "module": "llm_client", "message": "Unexpected error in LLM call: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(a7c1040a-a8c9-4e14-a51b-e5b90efddbee) is not present in table \"jobs\".'}", "job_id": "a7c1040a-a8c9-4e14-a51b-e5b90efddbee", "taskName": "Task-4", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(a7c1040a-a8c9-4e14-a51b-e5b90efddbee) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(a7c1040a-a8c9-4e14-a51b-e5b90efddbee) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(a7c1040a-a8c9-4e14-a51b-e5b90efddbee) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:35:13.042728Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in generate_scene_plan: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(a7c1040a-a8c9-4e14-a51b-e5b90efddbee) is not present in table \"jobs\".'}", "job_id": "a7c1040a-a8c9-4e14-a51b-e5b90efddbee", "taskName": "Task-4", "error": "Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(a7c1040a-a8c9-4e14-a51b-e5b90efddbee) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:35:13.047406Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(a7c1040a-a8c9-4e14-a51b-e5b90efddbee) is not present in table \"jobs\".'}", "job_id": "a7c1040a-a8c9-4e14-a51b-e5b90efddbee", "taskName": "Task-4", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(a7c1040a-a8c9-4e14-a51b-e5b90efddbee) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(a7c1040a-a8c9-4e14-a51b-e5b90efddbee) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(a7c1040a-a8c9-4e14-a51b-e5b90efddbee) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 67, in plan_scenes\n    llm_output = await generate_scene_plan(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/retry.py\", line 49, in async_wrapper\n    return await func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 492, in generate_scene_plan\n    raise GenerationError(f\"Unexpected error: {str(e)}\", job_id=job_id) from e\nshared.errors.GenerationError: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(a7c1040a-a8c9-4e14-a51b-e5b90efddbee) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:35:13.098973Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-7", "job_id": "97e63670-8997-49ab-a1cb-846bcbfe244e", "model": "gpt-4o", "system_prompt_length": 6744, "user_prompt_length": 637}
{"timestamp": "2025-11-15T00:35:13.099347Z", "level": "INFO", "module": "llm_client", "message": "Scene plan generated successfully", "taskName": "Task-7", "job_id": "97e63670-8997-49ab-a1cb-846bcbfe244e", "model": "gpt-4o", "input_tokens": 1000, "output_tokens": 500, "cost": 0.0125}
{"timestamp": "2025-11-15T00:35:13.102230Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-10", "job_id": "7ef008f0-53ef-4229-b979-27ee1f2507ed", "model": "gpt-4o", "system_prompt_length": 6744, "user_prompt_length": 618}
{"timestamp": "2025-11-15T00:35:13.102353Z", "level": "WARNING", "module": "llm_client", "message": "Rate limit error: Rate limit exceeded", "taskName": "Task-10", "job_id": "7ef008f0-53ef-4229-b979-27ee1f2507ed"}
{"timestamp": "2025-11-15T00:35:13.102427Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/3 for generate_scene_plan after 2s delay", "taskName": "Task-10", "error": "Rate limit error: Rate limit exceeded", "attempt": 1}
{"timestamp": "2025-11-15T00:35:14.553544Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job c20ac8b5-b1dd-42c2-8b34-a42df6b6088f: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(c20ac8b5-b1dd-42c2-8b34-a42df6b6088f) is not present in table \"jobs\".'}", "taskName": "Task-16", "job_id": "c20ac8b5-b1dd-42c2-8b34-a42df6b6088f", "error": "Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(c20ac8b5-b1dd-42c2-8b34-a42df6b6088f) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:35:14.555596Z", "level": "ERROR", "module": "llm_client", "message": "Unexpected error in LLM call: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(c20ac8b5-b1dd-42c2-8b34-a42df6b6088f) is not present in table \"jobs\".'}", "taskName": "Task-16", "job_id": "c20ac8b5-b1dd-42c2-8b34-a42df6b6088f", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(c20ac8b5-b1dd-42c2-8b34-a42df6b6088f) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(c20ac8b5-b1dd-42c2-8b34-a42df6b6088f) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(c20ac8b5-b1dd-42c2-8b34-a42df6b6088f) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:35:14.556518Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in generate_scene_plan: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(c20ac8b5-b1dd-42c2-8b34-a42df6b6088f) is not present in table \"jobs\".'}", "taskName": "Task-16", "error": "Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(c20ac8b5-b1dd-42c2-8b34-a42df6b6088f) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:35:14.557593Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(c20ac8b5-b1dd-42c2-8b34-a42df6b6088f) is not present in table \"jobs\".'}", "taskName": "Task-16", "job_id": "c20ac8b5-b1dd-42c2-8b34-a42df6b6088f", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(c20ac8b5-b1dd-42c2-8b34-a42df6b6088f) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(c20ac8b5-b1dd-42c2-8b34-a42df6b6088f) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(c20ac8b5-b1dd-42c2-8b34-a42df6b6088f) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 67, in plan_scenes\n    llm_output = await generate_scene_plan(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/retry.py\", line 49, in async_wrapper\n    return await func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 492, in generate_scene_plan\n    raise GenerationError(f\"Unexpected error: {str(e)}\", job_id=job_id) from e\nshared.errors.GenerationError: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(c20ac8b5-b1dd-42c2-8b34-a42df6b6088f) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:35:14.582376Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-19", "job_id": "4ea71dfe-f6c9-441e-b24c-3b31272d9251", "user_prompt_length": 42, "clip_count": 3}
{"timestamp": "2025-11-15T00:35:14.582865Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-19", "job_id": "4ea71dfe-f6c9-441e-b24c-3b31272d9251", "model": "gpt-4o", "system_prompt_length": 37742, "user_prompt_length": 811}
{"timestamp": "2025-11-15T00:35:15.105707Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-10", "job_id": "7ef008f0-53ef-4229-b979-27ee1f2507ed", "model": "gpt-4o", "system_prompt_length": 6744, "user_prompt_length": 618}
{"timestamp": "2025-11-15T00:35:15.106903Z", "level": "WARNING", "module": "llm_client", "message": "Rate limit error: Rate limit exceeded", "taskName": "Task-10", "job_id": "7ef008f0-53ef-4229-b979-27ee1f2507ed"}
{"timestamp": "2025-11-15T00:35:15.107463Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 2/3 for generate_scene_plan after 4s delay", "taskName": "Task-10", "error": "Rate limit error: Rate limit exceeded", "attempt": 2}
{"timestamp": "2025-11-15T00:35:19.110098Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-10", "job_id": "7ef008f0-53ef-4229-b979-27ee1f2507ed", "model": "gpt-4o", "system_prompt_length": 6744, "user_prompt_length": 618}
{"timestamp": "2025-11-15T00:35:19.110440Z", "level": "WARNING", "module": "llm_client", "message": "Rate limit error: Rate limit exceeded", "taskName": "Task-10", "job_id": "7ef008f0-53ef-4229-b979-27ee1f2507ed"}
{"timestamp": "2025-11-15T00:35:19.110573Z", "level": "ERROR", "module": "retry", "message": "All 3 retry attempts failed for generate_scene_plan", "taskName": "Task-10", "error": "Rate limit error: Rate limit exceeded"}
{"timestamp": "2025-11-15T00:35:19.138125Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-13", "job_id": "b5d710d7-6aa5-42a8-97ee-fe43c4617aa8", "model": "gpt-4o", "system_prompt_length": 6744, "user_prompt_length": 618}
{"timestamp": "2025-11-15T00:35:19.138612Z", "level": "ERROR", "module": "llm_client", "message": "Failed to parse LLM JSON response: Expecting value: line 1 column 1 (char 0)", "taskName": "Task-13", "job_id": "b5d710d7-6aa5-42a8-97ee-fe43c4617aa8", "response_preview": "not valid json"}
{"timestamp": "2025-11-15T00:35:19.141529Z", "level": "ERROR", "module": "llm_client", "message": "Unexpected error in LLM call: Invalid JSON from LLM: Expecting value: line 1 column 1 (char 0)", "taskName": "Task-13", "job_id": "b5d710d7-6aa5-42a8-97ee-fe43c4617aa8", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 441, in generate_scene_plan\n    scene_plan_dict = json.loads(content)\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/json/__init__.py\", line 346, in loads\n    return _default_decoder.decode(s)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/json/decoder.py\", line 345, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/json/decoder.py\", line 363, in raw_decode\n    raise JSONDecodeError(\"Expecting value\", s, err.value) from None\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 447, in generate_scene_plan\n    raise RetryableError(f\"Invalid JSON from LLM: {str(e)}\", job_id=job_id) from e\nshared.errors.RetryableError: Invalid JSON from LLM: Expecting value: line 1 column 1 (char 0)"}
{"timestamp": "2025-11-15T00:35:19.142278Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in generate_scene_plan: Unexpected error: Invalid JSON from LLM: Expecting value: line 1 column 1 (char 0)", "taskName": "Task-13", "error": "Unexpected error: Invalid JSON from LLM: Expecting value: line 1 column 1 (char 0)"}
{"timestamp": "2025-11-15T00:35:19.144262Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-16", "job_id": "580eff57-4ebb-40ab-a42b-e8725b6e289a", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T00:35:19.144559Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-16", "job_id": "580eff57-4ebb-40ab-a42b-e8725b6e289a", "model": "gpt-4o", "system_prompt_length": 37860, "user_prompt_length": 1101}
{"timestamp": "2025-11-15T00:35:45.220398Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job 4ea71dfe-f6c9-441e-b24c-3b31272d9251: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(4ea71dfe-f6c9-441e-b24c-3b31272d9251) is not present in table \"jobs\".'}", "taskName": "Task-19", "job_id": "4ea71dfe-f6c9-441e-b24c-3b31272d9251", "error": "Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(4ea71dfe-f6c9-441e-b24c-3b31272d9251) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:35:45.223348Z", "level": "ERROR", "module": "llm_client", "message": "Unexpected error in LLM call: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(4ea71dfe-f6c9-441e-b24c-3b31272d9251) is not present in table \"jobs\".'}", "taskName": "Task-19", "job_id": "4ea71dfe-f6c9-441e-b24c-3b31272d9251", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(4ea71dfe-f6c9-441e-b24c-3b31272d9251) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(4ea71dfe-f6c9-441e-b24c-3b31272d9251) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(4ea71dfe-f6c9-441e-b24c-3b31272d9251) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:35:45.224432Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in generate_scene_plan: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(4ea71dfe-f6c9-441e-b24c-3b31272d9251) is not present in table \"jobs\".'}", "taskName": "Task-19", "error": "Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(4ea71dfe-f6c9-441e-b24c-3b31272d9251) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:35:45.225855Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(4ea71dfe-f6c9-441e-b24c-3b31272d9251) is not present in table \"jobs\".'}", "taskName": "Task-19", "job_id": "4ea71dfe-f6c9-441e-b24c-3b31272d9251", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(4ea71dfe-f6c9-441e-b24c-3b31272d9251) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(4ea71dfe-f6c9-441e-b24c-3b31272d9251) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(4ea71dfe-f6c9-441e-b24c-3b31272d9251) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 67, in plan_scenes\n    llm_output = await generate_scene_plan(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/retry.py\", line 49, in async_wrapper\n    return await func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 492, in generate_scene_plan\n    raise GenerationError(f\"Unexpected error: {str(e)}\", job_id=job_id) from e\nshared.errors.GenerationError: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(4ea71dfe-f6c9-441e-b24c-3b31272d9251) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:35:45.284974Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-22", "job_id": "e8ac9c75-0dd8-49b4-987e-3c221abae027", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T00:35:45.285613Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-22", "job_id": "e8ac9c75-0dd8-49b4-987e-3c221abae027", "model": "gpt-4o", "system_prompt_length": 37860, "user_prompt_length": 1101}
{"timestamp": "2025-11-15T00:35:54.082959Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job 580eff57-4ebb-40ab-a42b-e8725b6e289a: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(580eff57-4ebb-40ab-a42b-e8725b6e289a) is not present in table \"jobs\".'}", "taskName": "Task-16", "job_id": "580eff57-4ebb-40ab-a42b-e8725b6e289a", "error": "Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(580eff57-4ebb-40ab-a42b-e8725b6e289a) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:35:54.088619Z", "level": "ERROR", "module": "llm_client", "message": "Unexpected error in LLM call: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(580eff57-4ebb-40ab-a42b-e8725b6e289a) is not present in table \"jobs\".'}", "taskName": "Task-16", "job_id": "580eff57-4ebb-40ab-a42b-e8725b6e289a", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(580eff57-4ebb-40ab-a42b-e8725b6e289a) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(580eff57-4ebb-40ab-a42b-e8725b6e289a) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(580eff57-4ebb-40ab-a42b-e8725b6e289a) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:35:54.090760Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in generate_scene_plan: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(580eff57-4ebb-40ab-a42b-e8725b6e289a) is not present in table \"jobs\".'}", "taskName": "Task-16", "error": "Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(580eff57-4ebb-40ab-a42b-e8725b6e289a) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:35:54.094828Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(580eff57-4ebb-40ab-a42b-e8725b6e289a) is not present in table \"jobs\".'}", "taskName": "Task-16", "job_id": "580eff57-4ebb-40ab-a42b-e8725b6e289a", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(580eff57-4ebb-40ab-a42b-e8725b6e289a) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(580eff57-4ebb-40ab-a42b-e8725b6e289a) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(580eff57-4ebb-40ab-a42b-e8725b6e289a) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 67, in plan_scenes\n    llm_output = await generate_scene_plan(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/retry.py\", line 49, in async_wrapper\n    return await func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 492, in generate_scene_plan\n    raise GenerationError(f\"Unexpected error: {str(e)}\", job_id=job_id) from e\nshared.errors.GenerationError: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(580eff57-4ebb-40ab-a42b-e8725b6e289a) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:35:54.127979Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-19", "job_id": "a380762e-bcbb-4186-bc3a-759deb0aefb9", "user_prompt_length": 42, "clip_count": 3}
{"timestamp": "2025-11-15T00:35:54.128734Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-19", "job_id": "a380762e-bcbb-4186-bc3a-759deb0aefb9", "model": "gpt-4o", "system_prompt_length": 37742, "user_prompt_length": 811}
{"timestamp": "2025-11-15T00:36:11.472452Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job e8ac9c75-0dd8-49b4-987e-3c221abae027: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(e8ac9c75-0dd8-49b4-987e-3c221abae027) is not present in table \"jobs\".'}", "taskName": "Task-22", "job_id": "e8ac9c75-0dd8-49b4-987e-3c221abae027", "error": "Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(e8ac9c75-0dd8-49b4-987e-3c221abae027) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:36:11.475814Z", "level": "ERROR", "module": "llm_client", "message": "Unexpected error in LLM call: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(e8ac9c75-0dd8-49b4-987e-3c221abae027) is not present in table \"jobs\".'}", "taskName": "Task-22", "job_id": "e8ac9c75-0dd8-49b4-987e-3c221abae027", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(e8ac9c75-0dd8-49b4-987e-3c221abae027) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(e8ac9c75-0dd8-49b4-987e-3c221abae027) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(e8ac9c75-0dd8-49b4-987e-3c221abae027) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:36:11.478372Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in generate_scene_plan: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(e8ac9c75-0dd8-49b4-987e-3c221abae027) is not present in table \"jobs\".'}", "taskName": "Task-22", "error": "Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(e8ac9c75-0dd8-49b4-987e-3c221abae027) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:36:11.480597Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(e8ac9c75-0dd8-49b4-987e-3c221abae027) is not present in table \"jobs\".'}", "taskName": "Task-22", "job_id": "e8ac9c75-0dd8-49b4-987e-3c221abae027", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(e8ac9c75-0dd8-49b4-987e-3c221abae027) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(e8ac9c75-0dd8-49b4-987e-3c221abae027) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(e8ac9c75-0dd8-49b4-987e-3c221abae027) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 67, in plan_scenes\n    llm_output = await generate_scene_plan(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/retry.py\", line 49, in async_wrapper\n    return await func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 492, in generate_scene_plan\n    raise GenerationError(f\"Unexpected error: {str(e)}\", job_id=job_id) from e\nshared.errors.GenerationError: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(e8ac9c75-0dd8-49b4-987e-3c221abae027) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:36:11.489955Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-25", "job_id": "3650470d-774d-47d8-ac2c-40c217a35c49", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T00:36:11.490562Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-25", "job_id": "3650470d-774d-47d8-ac2c-40c217a35c49", "model": "gpt-4o", "system_prompt_length": 37860, "user_prompt_length": 1101}
{"timestamp": "2025-11-15T00:36:14.348534Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job a380762e-bcbb-4186-bc3a-759deb0aefb9: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(a380762e-bcbb-4186-bc3a-759deb0aefb9) is not present in table \"jobs\".'}", "taskName": "Task-19", "job_id": "a380762e-bcbb-4186-bc3a-759deb0aefb9", "error": "Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(a380762e-bcbb-4186-bc3a-759deb0aefb9) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:36:14.356443Z", "level": "ERROR", "module": "llm_client", "message": "Unexpected error in LLM call: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(a380762e-bcbb-4186-bc3a-759deb0aefb9) is not present in table \"jobs\".'}", "taskName": "Task-19", "job_id": "a380762e-bcbb-4186-bc3a-759deb0aefb9", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(a380762e-bcbb-4186-bc3a-759deb0aefb9) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(a380762e-bcbb-4186-bc3a-759deb0aefb9) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(a380762e-bcbb-4186-bc3a-759deb0aefb9) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:36:14.359750Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in generate_scene_plan: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(a380762e-bcbb-4186-bc3a-759deb0aefb9) is not present in table \"jobs\".'}", "taskName": "Task-19", "error": "Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(a380762e-bcbb-4186-bc3a-759deb0aefb9) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:36:14.364384Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(a380762e-bcbb-4186-bc3a-759deb0aefb9) is not present in table \"jobs\".'}", "taskName": "Task-19", "job_id": "a380762e-bcbb-4186-bc3a-759deb0aefb9", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(a380762e-bcbb-4186-bc3a-759deb0aefb9) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(a380762e-bcbb-4186-bc3a-759deb0aefb9) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(a380762e-bcbb-4186-bc3a-759deb0aefb9) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 67, in plan_scenes\n    llm_output = await generate_scene_plan(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/retry.py\", line 49, in async_wrapper\n    return await func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 492, in generate_scene_plan\n    raise GenerationError(f\"Unexpected error: {str(e)}\", job_id=job_id) from e\nshared.errors.GenerationError: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(a380762e-bcbb-4186-bc3a-759deb0aefb9) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:36:14.410905Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-22", "job_id": "a23f9437-f60a-453d-a098-86b736652436", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T00:36:14.411240Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-22", "job_id": "a23f9437-f60a-453d-a098-86b736652436", "model": "gpt-4o", "system_prompt_length": 37860, "user_prompt_length": 1101}
{"timestamp": "2025-11-15T00:36:38.523552Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job 3650470d-774d-47d8-ac2c-40c217a35c49: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(3650470d-774d-47d8-ac2c-40c217a35c49) is not present in table \"jobs\".'}", "taskName": "Task-25", "job_id": "3650470d-774d-47d8-ac2c-40c217a35c49", "error": "Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(3650470d-774d-47d8-ac2c-40c217a35c49) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:36:38.528634Z", "level": "ERROR", "module": "llm_client", "message": "Unexpected error in LLM call: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(3650470d-774d-47d8-ac2c-40c217a35c49) is not present in table \"jobs\".'}", "taskName": "Task-25", "job_id": "3650470d-774d-47d8-ac2c-40c217a35c49", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(3650470d-774d-47d8-ac2c-40c217a35c49) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(3650470d-774d-47d8-ac2c-40c217a35c49) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(3650470d-774d-47d8-ac2c-40c217a35c49) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:36:38.530545Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in generate_scene_plan: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(3650470d-774d-47d8-ac2c-40c217a35c49) is not present in table \"jobs\".'}", "taskName": "Task-25", "error": "Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(3650470d-774d-47d8-ac2c-40c217a35c49) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:36:38.532825Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(3650470d-774d-47d8-ac2c-40c217a35c49) is not present in table \"jobs\".'}", "taskName": "Task-25", "job_id": "3650470d-774d-47d8-ac2c-40c217a35c49", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(3650470d-774d-47d8-ac2c-40c217a35c49) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(3650470d-774d-47d8-ac2c-40c217a35c49) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(3650470d-774d-47d8-ac2c-40c217a35c49) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 67, in plan_scenes\n    llm_output = await generate_scene_plan(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/retry.py\", line 49, in async_wrapper\n    return await func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 492, in generate_scene_plan\n    raise GenerationError(f\"Unexpected error: {str(e)}\", job_id=job_id) from e\nshared.errors.GenerationError: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(3650470d-774d-47d8-ac2c-40c217a35c49) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:36:38.568504Z", "level": "INFO", "module": "main", "message": "Processing scene planning", "job_id": "89ab46e1-54cd-48c4-bc0e-ec2ab89c59f9", "taskName": "Task-28", "user_prompt_length": 83, "clip_count": 5, "bpm": 120.0, "mood": "energetic"}
{"timestamp": "2025-11-15T00:36:38.568595Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "job_id": "89ab46e1-54cd-48c4-bc0e-ec2ab89c59f9", "taskName": "Task-28", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T00:36:38.569856Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "job_id": "89ab46e1-54cd-48c4-bc0e-ec2ab89c59f9", "taskName": "Task-28", "model": "gpt-4o", "system_prompt_length": 37860, "user_prompt_length": 1101}
{"timestamp": "2025-11-15T00:36:42.672201Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job a23f9437-f60a-453d-a098-86b736652436: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(a23f9437-f60a-453d-a098-86b736652436) is not present in table \"jobs\".'}", "taskName": "Task-22", "job_id": "a23f9437-f60a-453d-a098-86b736652436", "error": "Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(a23f9437-f60a-453d-a098-86b736652436) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:36:42.679133Z", "level": "ERROR", "module": "llm_client", "message": "Unexpected error in LLM call: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(a23f9437-f60a-453d-a098-86b736652436) is not present in table \"jobs\".'}", "taskName": "Task-22", "job_id": "a23f9437-f60a-453d-a098-86b736652436", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(a23f9437-f60a-453d-a098-86b736652436) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(a23f9437-f60a-453d-a098-86b736652436) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(a23f9437-f60a-453d-a098-86b736652436) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:36:42.681678Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in generate_scene_plan: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(a23f9437-f60a-453d-a098-86b736652436) is not present in table \"jobs\".'}", "taskName": "Task-22", "error": "Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(a23f9437-f60a-453d-a098-86b736652436) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:36:42.684595Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(a23f9437-f60a-453d-a098-86b736652436) is not present in table \"jobs\".'}", "taskName": "Task-22", "job_id": "a23f9437-f60a-453d-a098-86b736652436", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(a23f9437-f60a-453d-a098-86b736652436) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(a23f9437-f60a-453d-a098-86b736652436) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(a23f9437-f60a-453d-a098-86b736652436) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 67, in plan_scenes\n    llm_output = await generate_scene_plan(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/retry.py\", line 49, in async_wrapper\n    return await func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 492, in generate_scene_plan\n    raise GenerationError(f\"Unexpected error: {str(e)}\", job_id=job_id) from e\nshared.errors.GenerationError: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(a23f9437-f60a-453d-a098-86b736652436) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:36:42.693204Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-25", "job_id": "2408ef02-06ef-4686-a4a1-c1176028c24c", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T00:36:42.693897Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-25", "job_id": "2408ef02-06ef-4686-a4a1-c1176028c24c", "model": "gpt-4o", "system_prompt_length": 37860, "user_prompt_length": 1101}
{"timestamp": "2025-11-15T00:36:58.803719Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-1", "job_id": "52db60ef-e30d-478b-b507-986e5d85c29e", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T00:36:58.803914Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-1", "job_id": "52db60ef-e30d-478b-b507-986e5d85c29e", "model": "gpt-4o", "system_prompt_length": 37860, "user_prompt_length": 1101}
{"timestamp": "2025-11-15T00:37:06.365549Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job 89ab46e1-54cd-48c4-bc0e-ec2ab89c59f9: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(89ab46e1-54cd-48c4-bc0e-ec2ab89c59f9) is not present in table \"jobs\".'}", "job_id": "89ab46e1-54cd-48c4-bc0e-ec2ab89c59f9", "taskName": "Task-28", "error": "Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(89ab46e1-54cd-48c4-bc0e-ec2ab89c59f9) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:37:06.369912Z", "level": "ERROR", "module": "llm_client", "message": "Unexpected error in LLM call: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(89ab46e1-54cd-48c4-bc0e-ec2ab89c59f9) is not present in table \"jobs\".'}", "job_id": "89ab46e1-54cd-48c4-bc0e-ec2ab89c59f9", "taskName": "Task-28", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(89ab46e1-54cd-48c4-bc0e-ec2ab89c59f9) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(89ab46e1-54cd-48c4-bc0e-ec2ab89c59f9) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(89ab46e1-54cd-48c4-bc0e-ec2ab89c59f9) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:37:06.371313Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in generate_scene_plan: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(89ab46e1-54cd-48c4-bc0e-ec2ab89c59f9) is not present in table \"jobs\".'}", "job_id": "89ab46e1-54cd-48c4-bc0e-ec2ab89c59f9", "taskName": "Task-28", "error": "Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(89ab46e1-54cd-48c4-bc0e-ec2ab89c59f9) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:37:06.373018Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(89ab46e1-54cd-48c4-bc0e-ec2ab89c59f9) is not present in table \"jobs\".'}", "job_id": "89ab46e1-54cd-48c4-bc0e-ec2ab89c59f9", "taskName": "Task-28", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(89ab46e1-54cd-48c4-bc0e-ec2ab89c59f9) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(89ab46e1-54cd-48c4-bc0e-ec2ab89c59f9) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(89ab46e1-54cd-48c4-bc0e-ec2ab89c59f9) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 67, in plan_scenes\n    llm_output = await generate_scene_plan(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/retry.py\", line 49, in async_wrapper\n    return await func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 492, in generate_scene_plan\n    raise GenerationError(f\"Unexpected error: {str(e)}\", job_id=job_id) from e\nshared.errors.GenerationError: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(89ab46e1-54cd-48c4-bc0e-ec2ab89c59f9) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:37:06.406896Z", "level": "INFO", "module": "script_generator", "message": "Generated 3 clip scripts", "taskName": null, "clip_count": 3}
{"timestamp": "2025-11-15T00:37:06.407622Z", "level": "INFO", "module": "transition_planner", "message": "Planned 2 transitions", "taskName": null, "transition_count": 2}
{"timestamp": "2025-11-15T00:37:06.408792Z", "level": "INFO", "module": "validator", "message": "ScenePlan validation passed", "taskName": null}
{"timestamp": "2025-11-15T00:37:06.409225Z", "level": "WARNING", "module": "validator", "message": "Validation found 1 issues", "taskName": null, "issues": "['Clip 0 start time mismatch: 1.0s vs 0.0s (tolerance: \u00b10.5s)']"}
{"timestamp": "2025-11-15T00:37:06.409619Z", "level": "WARNING", "module": "validator", "message": "Transition count mismatch: 2 vs 1", "taskName": null}
{"timestamp": "2025-11-15T00:37:06.409672Z", "level": "WARNING", "module": "validator", "message": "Validation found 2 issues", "taskName": null, "issues": "['Transition count mismatch: 2 transitions, expected 1', 'Invalid transition to_clip index: 2']"}
{"timestamp": "2025-11-15T00:37:06.410068Z", "level": "WARNING", "module": "validator", "message": "Validation found 1 issues", "taskName": null, "issues": "['Clip 0 references unknown character: nonexistent']"}
{"timestamp": "2025-11-15T00:37:06.410455Z", "level": "WARNING", "module": "validator", "message": "Validation found 1 issues", "taskName": null, "issues": "['Clip 0 references unknown scene: nonexistent']"}
{"timestamp": "2025-11-15T00:37:06.410833Z", "level": "WARNING", "module": "validator", "message": "Validation found 1 issues", "taskName": null, "issues": "['Missing color palette']"}
{"timestamp": "2025-11-15T00:37:06.411187Z", "level": "WARNING", "module": "validator", "message": "Clip count mismatch: 3 vs 2", "taskName": null, "expected": 2, "actual": 3}
{"timestamp": "2025-11-15T00:37:06.411227Z", "level": "WARNING", "module": "validator", "message": "Transition count mismatch: 1 vs 2", "taskName": null}
{"timestamp": "2025-11-15T00:37:06.411267Z", "level": "WARNING", "module": "validator", "message": "Validation found 2 issues", "taskName": null, "issues": "['Clip count mismatch: 3 clips, expected 2', 'Transition count mismatch: 1 transitions, expected 2']"}
{"timestamp": "2025-11-15T00:37:10.495432Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job 2408ef02-06ef-4686-a4a1-c1176028c24c: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(2408ef02-06ef-4686-a4a1-c1176028c24c) is not present in table \"jobs\".'}", "taskName": "Task-25", "job_id": "2408ef02-06ef-4686-a4a1-c1176028c24c", "error": "Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(2408ef02-06ef-4686-a4a1-c1176028c24c) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:37:10.502118Z", "level": "ERROR", "module": "llm_client", "message": "Unexpected error in LLM call: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(2408ef02-06ef-4686-a4a1-c1176028c24c) is not present in table \"jobs\".'}", "taskName": "Task-25", "job_id": "2408ef02-06ef-4686-a4a1-c1176028c24c", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(2408ef02-06ef-4686-a4a1-c1176028c24c) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(2408ef02-06ef-4686-a4a1-c1176028c24c) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(2408ef02-06ef-4686-a4a1-c1176028c24c) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:37:10.504807Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in generate_scene_plan: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(2408ef02-06ef-4686-a4a1-c1176028c24c) is not present in table \"jobs\".'}", "taskName": "Task-25", "error": "Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(2408ef02-06ef-4686-a4a1-c1176028c24c) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:37:10.508281Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(2408ef02-06ef-4686-a4a1-c1176028c24c) is not present in table \"jobs\".'}", "taskName": "Task-25", "job_id": "2408ef02-06ef-4686-a4a1-c1176028c24c", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(2408ef02-06ef-4686-a4a1-c1176028c24c) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(2408ef02-06ef-4686-a4a1-c1176028c24c) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(2408ef02-06ef-4686-a4a1-c1176028c24c) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 67, in plan_scenes\n    llm_output = await generate_scene_plan(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/retry.py\", line 49, in async_wrapper\n    return await func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 492, in generate_scene_plan\n    raise GenerationError(f\"Unexpected error: {str(e)}\", job_id=job_id) from e\nshared.errors.GenerationError: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(2408ef02-06ef-4686-a4a1-c1176028c24c) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:37:10.544725Z", "level": "INFO", "module": "main", "message": "Processing scene planning", "job_id": "674be34b-ae61-4ab7-8e07-8bc7742af23d", "taskName": "Task-28", "user_prompt_length": 83, "clip_count": 5, "bpm": 120.0, "mood": "energetic"}
{"timestamp": "2025-11-15T00:37:10.544803Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "job_id": "674be34b-ae61-4ab7-8e07-8bc7742af23d", "taskName": "Task-28", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T00:37:10.545031Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "job_id": "674be34b-ae61-4ab7-8e07-8bc7742af23d", "taskName": "Task-28", "model": "gpt-4o", "system_prompt_length": 37860, "user_prompt_length": 1101}
{"timestamp": "2025-11-15T00:37:25.205465Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job 52db60ef-e30d-478b-b507-986e5d85c29e: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(52db60ef-e30d-478b-b507-986e5d85c29e) is not present in table \"jobs\".'}", "taskName": "Task-1", "job_id": "52db60ef-e30d-478b-b507-986e5d85c29e", "error": "Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(52db60ef-e30d-478b-b507-986e5d85c29e) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:37:25.213627Z", "level": "ERROR", "module": "llm_client", "message": "Unexpected error in LLM call: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(52db60ef-e30d-478b-b507-986e5d85c29e) is not present in table \"jobs\".'}", "taskName": "Task-1", "job_id": "52db60ef-e30d-478b-b507-986e5d85c29e", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(52db60ef-e30d-478b-b507-986e5d85c29e) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(52db60ef-e30d-478b-b507-986e5d85c29e) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(52db60ef-e30d-478b-b507-986e5d85c29e) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:37:25.215480Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in generate_scene_plan: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(52db60ef-e30d-478b-b507-986e5d85c29e) is not present in table \"jobs\".'}", "taskName": "Task-1", "error": "Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(52db60ef-e30d-478b-b507-986e5d85c29e) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:37:25.219163Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(52db60ef-e30d-478b-b507-986e5d85c29e) is not present in table \"jobs\".'}", "taskName": "Task-1", "job_id": "52db60ef-e30d-478b-b507-986e5d85c29e", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(52db60ef-e30d-478b-b507-986e5d85c29e) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(52db60ef-e30d-478b-b507-986e5d85c29e) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(52db60ef-e30d-478b-b507-986e5d85c29e) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 67, in plan_scenes\n    llm_output = await generate_scene_plan(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/retry.py\", line 49, in async_wrapper\n    return await func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 492, in generate_scene_plan\n    raise GenerationError(f\"Unexpected error: {str(e)}\", job_id=job_id) from e\nshared.errors.GenerationError: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(52db60ef-e30d-478b-b507-986e5d85c29e) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:37:39.588936Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job 674be34b-ae61-4ab7-8e07-8bc7742af23d: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(674be34b-ae61-4ab7-8e07-8bc7742af23d) is not present in table \"jobs\".'}", "job_id": "674be34b-ae61-4ab7-8e07-8bc7742af23d", "taskName": "Task-28", "error": "Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(674be34b-ae61-4ab7-8e07-8bc7742af23d) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:37:39.593533Z", "level": "ERROR", "module": "llm_client", "message": "Unexpected error in LLM call: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(674be34b-ae61-4ab7-8e07-8bc7742af23d) is not present in table \"jobs\".'}", "job_id": "674be34b-ae61-4ab7-8e07-8bc7742af23d", "taskName": "Task-28", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(674be34b-ae61-4ab7-8e07-8bc7742af23d) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(674be34b-ae61-4ab7-8e07-8bc7742af23d) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(674be34b-ae61-4ab7-8e07-8bc7742af23d) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:37:39.597149Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in generate_scene_plan: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(674be34b-ae61-4ab7-8e07-8bc7742af23d) is not present in table \"jobs\".'}", "job_id": "674be34b-ae61-4ab7-8e07-8bc7742af23d", "taskName": "Task-28", "error": "Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(674be34b-ae61-4ab7-8e07-8bc7742af23d) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:37:39.601839Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(674be34b-ae61-4ab7-8e07-8bc7742af23d) is not present in table \"jobs\".'}", "job_id": "674be34b-ae61-4ab7-8e07-8bc7742af23d", "taskName": "Task-28", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(674be34b-ae61-4ab7-8e07-8bc7742af23d) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(674be34b-ae61-4ab7-8e07-8bc7742af23d) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(674be34b-ae61-4ab7-8e07-8bc7742af23d) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 67, in plan_scenes\n    llm_output = await generate_scene_plan(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/retry.py\", line 49, in async_wrapper\n    return await func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 492, in generate_scene_plan\n    raise GenerationError(f\"Unexpected error: {str(e)}\", job_id=job_id) from e\nshared.errors.GenerationError: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(674be34b-ae61-4ab7-8e07-8bc7742af23d) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:37:39.706395Z", "level": "INFO", "module": "script_generator", "message": "Generated 3 clip scripts", "taskName": null, "clip_count": 3}
{"timestamp": "2025-11-15T00:37:39.707463Z", "level": "INFO", "module": "transition_planner", "message": "Planned 2 transitions", "taskName": null, "transition_count": 2}
{"timestamp": "2025-11-15T00:37:39.708632Z", "level": "INFO", "module": "validator", "message": "ScenePlan validation passed", "taskName": null}
{"timestamp": "2025-11-15T00:37:39.709029Z", "level": "WARNING", "module": "validator", "message": "Validation found 1 issues", "taskName": null, "issues": "['Clip 0 start time mismatch: 1.0s vs 0.0s (tolerance: \u00b10.5s)']"}
{"timestamp": "2025-11-15T00:37:39.709396Z", "level": "WARNING", "module": "validator", "message": "Transition count mismatch: 2 vs 1", "taskName": null}
{"timestamp": "2025-11-15T00:37:39.709444Z", "level": "WARNING", "module": "validator", "message": "Validation found 2 issues", "taskName": null, "issues": "['Transition count mismatch: 2 transitions, expected 1', 'Invalid transition to_clip index: 2']"}
{"timestamp": "2025-11-15T00:37:39.709818Z", "level": "WARNING", "module": "validator", "message": "Validation found 1 issues", "taskName": null, "issues": "['Clip 0 references unknown character: nonexistent']"}
{"timestamp": "2025-11-15T00:37:39.710176Z", "level": "WARNING", "module": "validator", "message": "Validation found 1 issues", "taskName": null, "issues": "['Clip 0 references unknown scene: nonexistent']"}
{"timestamp": "2025-11-15T00:37:39.710533Z", "level": "WARNING", "module": "validator", "message": "Validation found 1 issues", "taskName": null, "issues": "['Missing color palette']"}
{"timestamp": "2025-11-15T00:37:39.710869Z", "level": "WARNING", "module": "validator", "message": "Clip count mismatch: 3 vs 2", "taskName": null, "expected": 2, "actual": 3}
{"timestamp": "2025-11-15T00:37:39.710906Z", "level": "WARNING", "module": "validator", "message": "Transition count mismatch: 1 vs 2", "taskName": null}
{"timestamp": "2025-11-15T00:37:39.710943Z", "level": "WARNING", "module": "validator", "message": "Validation found 2 issues", "taskName": null, "issues": "['Clip count mismatch: 3 clips, expected 2', 'Transition count mismatch: 1 transitions, expected 2']"}
{"timestamp": "2025-11-15T00:40:10.001711Z", "level": "INFO", "module": "main", "message": "Processing scene planning", "job_id": "100faf49-72e8-4ddd-beda-364a4cd9da92", "taskName": "Task-1", "user_prompt_length": 62, "clip_count": 5, "bpm": 120.0, "mood": "energetic"}
{"timestamp": "2025-11-15T00:40:10.001802Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "job_id": "100faf49-72e8-4ddd-beda-364a4cd9da92", "taskName": "Task-1", "user_prompt_length": 62, "clip_count": 5}
{"timestamp": "2025-11-15T00:40:10.001945Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "job_id": "100faf49-72e8-4ddd-beda-364a4cd9da92", "taskName": "Task-1", "model": "gpt-4o", "system_prompt_length": 37859, "user_prompt_length": 721}
{"timestamp": "2025-11-15T00:40:35.012026Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job 100faf49-72e8-4ddd-beda-364a4cd9da92: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(100faf49-72e8-4ddd-beda-364a4cd9da92) is not present in table \"jobs\".'}", "job_id": "100faf49-72e8-4ddd-beda-364a4cd9da92", "taskName": "Task-1", "error": "Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(100faf49-72e8-4ddd-beda-364a4cd9da92) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:40:35.020827Z", "level": "ERROR", "module": "llm_client", "message": "Unexpected error in LLM call: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(100faf49-72e8-4ddd-beda-364a4cd9da92) is not present in table \"jobs\".'}", "job_id": "100faf49-72e8-4ddd-beda-364a4cd9da92", "taskName": "Task-1", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(100faf49-72e8-4ddd-beda-364a4cd9da92) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(100faf49-72e8-4ddd-beda-364a4cd9da92) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(100faf49-72e8-4ddd-beda-364a4cd9da92) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:40:35.022547Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in generate_scene_plan: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(100faf49-72e8-4ddd-beda-364a4cd9da92) is not present in table \"jobs\".'}", "job_id": "100faf49-72e8-4ddd-beda-364a4cd9da92", "taskName": "Task-1", "error": "Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(100faf49-72e8-4ddd-beda-364a4cd9da92) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:40:35.025469Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(100faf49-72e8-4ddd-beda-364a4cd9da92) is not present in table \"jobs\".'}", "job_id": "100faf49-72e8-4ddd-beda-364a4cd9da92", "taskName": "Task-1", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(100faf49-72e8-4ddd-beda-364a4cd9da92) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(100faf49-72e8-4ddd-beda-364a4cd9da92) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(100faf49-72e8-4ddd-beda-364a4cd9da92) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 67, in plan_scenes\n    llm_output = await generate_scene_plan(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/retry.py\", line 49, in async_wrapper\n    return await func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 492, in generate_scene_plan\n    raise GenerationError(f\"Unexpected error: {str(e)}\", job_id=job_id) from e\nshared.errors.GenerationError: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(100faf49-72e8-4ddd-beda-364a4cd9da92) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:49:25.382158Z", "level": "INFO", "module": "worker", "message": "Acquiring semaphore for job", "taskName": "Task-1", "job_id": "ae8110d8-c31f-4813-b987-f0984a64dce9", "available_slots": 3}
{"timestamp": "2025-11-15T00:49:25.383135Z", "level": "INFO", "module": "worker", "message": "Processing job (semaphore acquired)", "taskName": "Task-1", "job_id": "ae8110d8-c31f-4813-b987-f0984a64dce9"}
{"timestamp": "2025-11-15T00:49:25.383278Z", "level": "INFO", "module": "worker", "message": "Processing job", "taskName": "Task-1", "job_id": "ae8110d8-c31f-4813-b987-f0984a64dce9", "user_id": "ab454fab-5fe5-4bf2-af2d-f269c79a5130"}
{"timestamp": "2025-11-15T00:49:26.419967Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "taskName": "Task-1", "job_id": "ae8110d8-c31f-4813-b987-f0984a64dce9", "progress": 2, "stage": "audio_parser"}
{"timestamp": "2025-11-15T00:49:26.420574Z", "level": "WARNING", "module": "orchestrator", "message": "Audio Parser module not found, using stub", "taskName": "Task-1", "job_id": "ae8110d8-c31f-4813-b987-f0984a64dce9"}
{"timestamp": "2025-11-15T00:49:26.863714Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "taskName": "Task-1", "job_id": "ae8110d8-c31f-4813-b987-f0984a64dce9", "progress": 5, "stage": "audio_parser"}
{"timestamp": "2025-11-15T00:49:27.690073Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "taskName": "Task-1", "job_id": "ae8110d8-c31f-4813-b987-f0984a64dce9", "progress": 7, "stage": "audio_parser"}
{"timestamp": "2025-11-15T00:49:28.646656Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "taskName": "Task-1", "job_id": "ae8110d8-c31f-4813-b987-f0984a64dce9", "progress": 9, "stage": "audio_parser"}
{"timestamp": "2025-11-15T00:49:29.001974Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "taskName": "Task-1", "job_id": "ae8110d8-c31f-4813-b987-f0984a64dce9", "progress": 100, "stage": "audio_parser"}
{"timestamp": "2025-11-15T00:49:29.246176Z", "level": "INFO", "module": "orchestrator", "message": "Audio parser results", "taskName": "Task-1", "job_id": "ae8110d8-c31f-4813-b987-f0984a64dce9", "bpm": 120.0, "duration": 120.0, "beat_count": 240, "structure_segments": 6, "mood": "energetic", "energy_level": "high"}
{"timestamp": "2025-11-15T00:49:29.690446Z", "level": "INFO", "module": "orchestrator", "message": "Pipeline completed successfully (audio parser only)", "taskName": "Task-1", "job_id": "ae8110d8-c31f-4813-b987-f0984a64dce9", "total_cost": "0.00"}
{"timestamp": "2025-11-15T00:49:29.690697Z", "level": "INFO", "module": "worker", "message": "Job processed successfully", "taskName": "Task-1", "job_id": "ae8110d8-c31f-4813-b987-f0984a64dce9"}
{"timestamp": "2025-11-15T00:49:29.690893Z", "level": "INFO", "module": "worker", "message": "Job completed (semaphore released)", "taskName": "Task-1", "job_id": "ae8110d8-c31f-4813-b987-f0984a64dce9"}
{"timestamp": "2025-11-15T00:50:47.058952Z", "level": "ERROR", "module": "worker", "message": "Error in worker loop", "taskName": "Task-1", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/api_gateway/worker.py\", line 129, in worker_loop\n    job_json = await redis_client.client.brpop(queue_key, timeout=5)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/redis/asyncio/client.py\", line 725, in execute_command\n    return await conn.retry.call_with_retry(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/redis/asyncio/retry.py\", line 55, in call_with_retry\n    raise error\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/redis/asyncio/retry.py\", line 50, in call_with_retry\n    return await do()\n           ^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/redis/asyncio/client.py\", line 700, in _send_command_parse_response\n    return await self.parse_response(conn, command_name, **options)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/redis/asyncio/client.py\", line 746, in parse_response\n    response = await connection.read_response()\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/redis/asyncio/connection.py\", line 607, in read_response\n    response = await self._parser.read_response(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        disable_decoding=disable_decoding\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/redis/_parsers/resp2.py\", line 82, in read_response\n    response = await self._read_response(disable_decoding=disable_decoding)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/redis/_parsers/resp2.py\", line 90, in _read_response\n    raw = await self._readline()\n          ^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/redis/_parsers/base.py\", line 470, in _readline\n    raise ConnectionError(SERVER_CLOSED_CONNECTION_ERROR)\nredis.exceptions.ConnectionError: Connection closed by server."}
{"timestamp": "2025-11-15T00:52:21.269056Z", "level": "INFO", "module": "worker", "message": "Acquiring semaphore for job", "taskName": "Task-1", "job_id": "8106fbdb-f4f3-46f5-b48c-433c4a4cbc8b", "available_slots": 3}
{"timestamp": "2025-11-15T00:52:21.270000Z", "level": "INFO", "module": "worker", "message": "Processing job (semaphore acquired)", "taskName": "Task-1", "job_id": "8106fbdb-f4f3-46f5-b48c-433c4a4cbc8b"}
{"timestamp": "2025-11-15T00:52:21.270175Z", "level": "INFO", "module": "worker", "message": "Processing job", "taskName": "Task-1", "job_id": "8106fbdb-f4f3-46f5-b48c-433c4a4cbc8b", "user_id": "ab454fab-5fe5-4bf2-af2d-f269c79a5130"}
{"timestamp": "2025-11-15T00:52:23.122864Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "taskName": "Task-1", "job_id": "8106fbdb-f4f3-46f5-b48c-433c4a4cbc8b", "progress": 2, "stage": "audio_parser"}
{"timestamp": "2025-11-15T00:52:23.123888Z", "level": "WARNING", "module": "orchestrator", "message": "Audio Parser module not found, using stub", "taskName": "Task-1", "job_id": "8106fbdb-f4f3-46f5-b48c-433c4a4cbc8b"}
{"timestamp": "2025-11-15T00:52:23.570346Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "taskName": "Task-1", "job_id": "8106fbdb-f4f3-46f5-b48c-433c4a4cbc8b", "progress": 5, "stage": "audio_parser"}
{"timestamp": "2025-11-15T00:52:24.389865Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "taskName": "Task-1", "job_id": "8106fbdb-f4f3-46f5-b48c-433c4a4cbc8b", "progress": 7, "stage": "audio_parser"}
{"timestamp": "2025-11-15T00:52:25.325699Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "taskName": "Task-1", "job_id": "8106fbdb-f4f3-46f5-b48c-433c4a4cbc8b", "progress": 9, "stage": "audio_parser"}
{"timestamp": "2025-11-15T00:52:25.653807Z", "level": "INFO", "module": "orchestrator", "message": "Progress updated", "taskName": "Task-1", "job_id": "8106fbdb-f4f3-46f5-b48c-433c4a4cbc8b", "progress": 100, "stage": "audio_parser"}
{"timestamp": "2025-11-15T00:52:25.888777Z", "level": "INFO", "module": "orchestrator", "message": "Audio parser results", "taskName": "Task-1", "job_id": "8106fbdb-f4f3-46f5-b48c-433c4a4cbc8b", "bpm": 120.0, "duration": 120.0, "beat_count": 240, "structure_segments": 6, "mood": "energetic", "energy_level": "high"}
{"timestamp": "2025-11-15T00:52:26.319692Z", "level": "INFO", "module": "orchestrator", "message": "Pipeline completed successfully (audio parser only)", "taskName": "Task-1", "job_id": "8106fbdb-f4f3-46f5-b48c-433c4a4cbc8b", "total_cost": "0.00"}
{"timestamp": "2025-11-15T00:52:26.319964Z", "level": "INFO", "module": "worker", "message": "Job processed successfully", "taskName": "Task-1", "job_id": "8106fbdb-f4f3-46f5-b48c-433c4a4cbc8b"}
{"timestamp": "2025-11-15T00:52:26.320050Z", "level": "INFO", "module": "worker", "message": "Job completed (semaphore released)", "taskName": "Task-1", "job_id": "8106fbdb-f4f3-46f5-b48c-433c4a4cbc8b"}
{"timestamp": "2025-11-15T00:55:51.142232Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-1", "job_id": "0af0d4c7-cd74-4e8b-ba0d-d4020d2c2536", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T00:55:51.143367Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: LLM output missing 'clip_scripts' field", "taskName": "Task-1", "job_id": "0af0d4c7-cd74-4e8b-ba0d-d4020d2c2536", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 76, in plan_scenes\n    clip_scripts = generate_clip_scripts(\n        llm_output=llm_output,\n        clip_boundaries=audio_data.clip_boundaries,\n        lyrics=audio_data.lyrics\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/script_generator.py\", line 37, in generate_clip_scripts\n    raise ValueError(\"LLM output missing 'clip_scripts' field\")\nValueError: LLM output missing 'clip_scripts' field"}
{"timestamp": "2025-11-15T00:56:11.324125Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-1", "job_id": "836616ac-4424-446b-9350-9f0ac1229ad5", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T00:56:11.324957Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: LLM output missing 'clip_scripts' field", "taskName": "Task-1", "job_id": "836616ac-4424-446b-9350-9f0ac1229ad5", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 76, in plan_scenes\n    clip_scripts = generate_clip_scripts(\n        llm_output=llm_output,\n        clip_boundaries=audio_data.clip_boundaries,\n        lyrics=audio_data.lyrics\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/script_generator.py\", line 37, in generate_clip_scripts\n    raise ValueError(\"LLM output missing 'clip_scripts' field\")\nValueError: LLM output missing 'clip_scripts' field"}
{"timestamp": "2025-11-15T00:56:19.779959Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-1", "job_id": "eba8f2bc-5c61-4143-a3b8-27ddc24db559", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T00:56:19.780723Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: LLM output missing 'clip_scripts' field", "taskName": "Task-1", "job_id": "eba8f2bc-5c61-4143-a3b8-27ddc24db559", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 76, in plan_scenes\n    clip_scripts = generate_clip_scripts(\n        llm_output=llm_output,\n        clip_boundaries=audio_data.clip_boundaries,\n        lyrics=audio_data.lyrics\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/script_generator.py\", line 37, in generate_clip_scripts\n    raise ValueError(\"LLM output missing 'clip_scripts' field\")\nValueError: LLM output missing 'clip_scripts' field"}
{"timestamp": "2025-11-15T00:56:29.298719Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-1", "job_id": "ab8bade6-3935-4932-a1fd-3ec38ff687a1", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T00:56:29.299261Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: LLM output missing 'clip_scripts' field", "taskName": "Task-1", "job_id": "ab8bade6-3935-4932-a1fd-3ec38ff687a1", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 76, in plan_scenes\n    clip_scripts = generate_clip_scripts(\n        llm_output=llm_output,\n        clip_boundaries=audio_data.clip_boundaries,\n        lyrics=audio_data.lyrics\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/script_generator.py\", line 37, in generate_clip_scripts\n    raise ValueError(\"LLM output missing 'clip_scripts' field\")\nValueError: LLM output missing 'clip_scripts' field"}
{"timestamp": "2025-11-15T00:56:33.963743Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-1", "job_id": "68395c97-7d57-45fe-a076-482ed85c0875", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T00:56:33.964733Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: object dict can't be used in 'await' expression", "taskName": "Task-1", "job_id": "68395c97-7d57-45fe-a076-482ed85c0875", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 67, in plan_scenes\n    llm_output = await generate_scene_plan(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\nTypeError: object dict can't be used in 'await' expression"}
{"timestamp": "2025-11-15T00:56:44.971601Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-1", "job_id": "502413b6-2513-4a6d-be01-bfa6d905dca5", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T00:56:44.972269Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: object dict can't be used in 'await' expression", "taskName": "Task-1", "job_id": "502413b6-2513-4a6d-be01-bfa6d905dca5", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 67, in plan_scenes\n    llm_output = await generate_scene_plan(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\nTypeError: object dict can't be used in 'await' expression"}
{"timestamp": "2025-11-15T00:56:47.478419Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-1", "job_id": "a0eefcdd-18f9-469f-920a-9a7330b61f47", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T00:56:47.478864Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: object dict can't be used in 'await' expression", "taskName": "Task-1", "job_id": "a0eefcdd-18f9-469f-920a-9a7330b61f47", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 67, in plan_scenes\n    llm_output = await generate_scene_plan(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\nTypeError: object dict can't be used in 'await' expression"}
{"timestamp": "2025-11-15T00:56:54.243690Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-1", "job_id": "2ac6b500-703a-4db9-accb-6513ae876241", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T00:56:54.243916Z", "level": "INFO", "module": "script_generator", "message": "Generated 5 clip scripts", "taskName": "Task-1", "clip_count": 5}
{"timestamp": "2025-11-15T00:56:54.244099Z", "level": "INFO", "module": "transition_planner", "message": "Planned 4 transitions", "taskName": "Task-1", "transition_count": 4}
{"timestamp": "2025-11-15T00:56:54.244265Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "taskName": "Task-1", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T00:56:54.244313Z", "level": "WARNING", "module": "planner", "message": "Style inconsistencies found, refining...", "taskName": "Task-1"}
{"timestamp": "2025-11-15T00:56:54.244357Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "taskName": "Task-1", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T00:56:54.244391Z", "level": "WARNING", "module": "style_analyzer", "message": "Style inconsistencies found, but auto-refinement not implemented", "taskName": "Task-1"}
{"timestamp": "2025-11-15T00:56:54.244435Z", "level": "INFO", "module": "validator", "message": "ScenePlan validation passed", "taskName": "Task-1"}
{"timestamp": "2025-11-15T00:56:54.244526Z", "level": "INFO", "module": "planner", "message": "Scene planning complete", "taskName": "Task-1", "job_id": "2ac6b500-703a-4db9-accb-6513ae876241", "characters": 1, "scenes": 1, "clips": 5, "transitions": 4}
{"timestamp": "2025-11-15T00:57:12.147151Z", "level": "INFO", "module": "main", "message": "Processing scene planning", "job_id": "141f6f72-8869-4557-95ab-35f1d80729b8", "taskName": "Task-1", "user_prompt_length": 62, "clip_count": 5, "bpm": 120.0, "mood": "energetic"}
{"timestamp": "2025-11-15T00:57:12.147249Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "job_id": "141f6f72-8869-4557-95ab-35f1d80729b8", "taskName": "Task-1", "user_prompt_length": 62, "clip_count": 5}
{"timestamp": "2025-11-15T00:57:12.147439Z", "level": "INFO", "module": "script_generator", "message": "Generated 5 clip scripts", "job_id": "141f6f72-8869-4557-95ab-35f1d80729b8", "taskName": "Task-1", "clip_count": 5}
{"timestamp": "2025-11-15T00:57:12.147504Z", "level": "INFO", "module": "transition_planner", "message": "Planned 4 transitions", "job_id": "141f6f72-8869-4557-95ab-35f1d80729b8", "taskName": "Task-1", "transition_count": 4}
{"timestamp": "2025-11-15T00:57:12.147562Z", "level": "WARNING", "module": "planner", "message": "LLM job_id mismatch: 6c2ba1a9-3b10-4077-bf44-63a9b7aed7ac vs 141f6f72-8869-4557-95ab-35f1d80729b8, using provided job_id", "job_id": "141f6f72-8869-4557-95ab-35f1d80729b8", "taskName": "Task-1"}
{"timestamp": "2025-11-15T00:57:12.147617Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "job_id": "141f6f72-8869-4557-95ab-35f1d80729b8", "taskName": "Task-1", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T00:57:12.147652Z", "level": "WARNING", "module": "planner", "message": "Style inconsistencies found, refining...", "job_id": "141f6f72-8869-4557-95ab-35f1d80729b8", "taskName": "Task-1"}
{"timestamp": "2025-11-15T00:57:12.147691Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "job_id": "141f6f72-8869-4557-95ab-35f1d80729b8", "taskName": "Task-1", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T00:57:12.147723Z", "level": "WARNING", "module": "style_analyzer", "message": "Style inconsistencies found, but auto-refinement not implemented", "job_id": "141f6f72-8869-4557-95ab-35f1d80729b8", "taskName": "Task-1"}
{"timestamp": "2025-11-15T00:57:12.147765Z", "level": "INFO", "module": "validator", "message": "ScenePlan validation passed", "job_id": "141f6f72-8869-4557-95ab-35f1d80729b8", "taskName": "Task-1"}
{"timestamp": "2025-11-15T00:57:12.147803Z", "level": "INFO", "module": "planner", "message": "Scene planning complete", "job_id": "141f6f72-8869-4557-95ab-35f1d80729b8", "taskName": "Task-1", "characters": 1, "scenes": 1, "clips": 5, "transitions": 4}
{"timestamp": "2025-11-15T00:57:12.147839Z", "level": "INFO", "module": "main", "message": "Scene planning complete", "job_id": "141f6f72-8869-4557-95ab-35f1d80729b8", "taskName": "Task-1", "characters": 1, "scenes": 1, "clips": 5}
{"timestamp": "2025-11-15T00:57:12.149848Z", "level": "INFO", "module": "main", "message": "Processing scene planning", "job_id": "e7c4495f-da34-43b6-8958-2f26480d61ae", "taskName": "Task-4", "user_prompt_length": 130, "clip_count": 5, "bpm": 140.0, "mood": "energetic"}
{"timestamp": "2025-11-15T00:57:12.149910Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "job_id": "e7c4495f-da34-43b6-8958-2f26480d61ae", "taskName": "Task-4", "user_prompt_length": 130, "clip_count": 5}
{"timestamp": "2025-11-15T00:57:12.150027Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "job_id": "e7c4495f-da34-43b6-8958-2f26480d61ae", "taskName": "Task-4", "model": "gpt-4o", "system_prompt_length": 37859, "user_prompt_length": 788}
{"timestamp": "2025-11-15T00:57:37.262280Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job e7c4495f-da34-43b6-8958-2f26480d61ae: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(e7c4495f-da34-43b6-8958-2f26480d61ae) is not present in table \"jobs\".'}", "job_id": "e7c4495f-da34-43b6-8958-2f26480d61ae", "taskName": "Task-4", "error": "Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(e7c4495f-da34-43b6-8958-2f26480d61ae) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:57:37.267922Z", "level": "ERROR", "module": "llm_client", "message": "Unexpected error in LLM call: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(e7c4495f-da34-43b6-8958-2f26480d61ae) is not present in table \"jobs\".'}", "job_id": "e7c4495f-da34-43b6-8958-2f26480d61ae", "taskName": "Task-4", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(e7c4495f-da34-43b6-8958-2f26480d61ae) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(e7c4495f-da34-43b6-8958-2f26480d61ae) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(e7c4495f-da34-43b6-8958-2f26480d61ae) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:57:37.269086Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in generate_scene_plan: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(e7c4495f-da34-43b6-8958-2f26480d61ae) is not present in table \"jobs\".'}", "job_id": "e7c4495f-da34-43b6-8958-2f26480d61ae", "taskName": "Task-4", "error": "Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(e7c4495f-da34-43b6-8958-2f26480d61ae) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:57:37.271247Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(e7c4495f-da34-43b6-8958-2f26480d61ae) is not present in table \"jobs\".'}", "job_id": "e7c4495f-da34-43b6-8958-2f26480d61ae", "taskName": "Task-4", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(e7c4495f-da34-43b6-8958-2f26480d61ae) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(e7c4495f-da34-43b6-8958-2f26480d61ae) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(e7c4495f-da34-43b6-8958-2f26480d61ae) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 67, in plan_scenes\n    llm_output = await generate_scene_plan(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/retry.py\", line 49, in async_wrapper\n    return await func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 492, in generate_scene_plan\n    raise GenerationError(f\"Unexpected error: {str(e)}\", job_id=job_id) from e\nshared.errors.GenerationError: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(e7c4495f-da34-43b6-8958-2f26480d61ae) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:57:37.337791Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-7", "job_id": "7362b414-3537-465e-bcb2-4d896307a6e2", "model": "gpt-4o", "system_prompt_length": 6744, "user_prompt_length": 637}
{"timestamp": "2025-11-15T00:57:37.337978Z", "level": "INFO", "module": "llm_client", "message": "Scene plan generated successfully", "taskName": "Task-7", "job_id": "7362b414-3537-465e-bcb2-4d896307a6e2", "model": "gpt-4o", "input_tokens": 1000, "output_tokens": 500, "cost": 0.0125}
{"timestamp": "2025-11-15T00:57:37.339282Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-10", "job_id": "c1055397-f108-4fa8-819b-6e0708cc1c74", "model": "gpt-4o", "system_prompt_length": 6744, "user_prompt_length": 618}
{"timestamp": "2025-11-15T00:57:37.339358Z", "level": "WARNING", "module": "llm_client", "message": "Rate limit error: Rate limit exceeded", "taskName": "Task-10", "job_id": "c1055397-f108-4fa8-819b-6e0708cc1c74"}
{"timestamp": "2025-11-15T00:57:37.339407Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/3 for generate_scene_plan after 2s delay", "taskName": "Task-10", "error": "Rate limit error: Rate limit exceeded", "attempt": 1}
{"timestamp": "2025-11-15T00:57:39.340658Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-10", "job_id": "c1055397-f108-4fa8-819b-6e0708cc1c74", "model": "gpt-4o", "system_prompt_length": 6744, "user_prompt_length": 618}
{"timestamp": "2025-11-15T00:57:39.340800Z", "level": "WARNING", "module": "llm_client", "message": "Rate limit error: Rate limit exceeded", "taskName": "Task-10", "job_id": "c1055397-f108-4fa8-819b-6e0708cc1c74"}
{"timestamp": "2025-11-15T00:57:39.340867Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 2/3 for generate_scene_plan after 4s delay", "taskName": "Task-10", "error": "Rate limit error: Rate limit exceeded", "attempt": 2}
{"timestamp": "2025-11-15T00:57:43.342676Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-10", "job_id": "c1055397-f108-4fa8-819b-6e0708cc1c74", "model": "gpt-4o", "system_prompt_length": 6744, "user_prompt_length": 618}
{"timestamp": "2025-11-15T00:57:43.343251Z", "level": "WARNING", "module": "llm_client", "message": "Rate limit error: Rate limit exceeded", "taskName": "Task-10", "job_id": "c1055397-f108-4fa8-819b-6e0708cc1c74"}
{"timestamp": "2025-11-15T00:57:43.343458Z", "level": "ERROR", "module": "retry", "message": "All 3 retry attempts failed for generate_scene_plan", "taskName": "Task-10", "error": "Rate limit error: Rate limit exceeded"}
{"timestamp": "2025-11-15T00:57:43.349875Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-13", "job_id": "47517148-ea31-477b-aad1-fb8f77f72e33", "model": "gpt-4o", "system_prompt_length": 6744, "user_prompt_length": 618}
{"timestamp": "2025-11-15T00:57:43.350172Z", "level": "ERROR", "module": "llm_client", "message": "Failed to parse LLM JSON response: Expecting value: line 1 column 1 (char 0)", "taskName": "Task-13", "job_id": "47517148-ea31-477b-aad1-fb8f77f72e33", "response_preview": "not valid json"}
{"timestamp": "2025-11-15T00:57:43.352983Z", "level": "ERROR", "module": "llm_client", "message": "Unexpected error in LLM call: Invalid JSON from LLM: Expecting value: line 1 column 1 (char 0)", "taskName": "Task-13", "job_id": "47517148-ea31-477b-aad1-fb8f77f72e33", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 441, in generate_scene_plan\n    scene_plan_dict = json.loads(content)\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/json/__init__.py\", line 346, in loads\n    return _default_decoder.decode(s)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/json/decoder.py\", line 345, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/json/decoder.py\", line 363, in raw_decode\n    raise JSONDecodeError(\"Expecting value\", s, err.value) from None\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 447, in generate_scene_plan\n    raise RetryableError(f\"Invalid JSON from LLM: {str(e)}\", job_id=job_id) from e\nshared.errors.RetryableError: Invalid JSON from LLM: Expecting value: line 1 column 1 (char 0)"}
{"timestamp": "2025-11-15T00:57:43.354273Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in generate_scene_plan: Unexpected error: Invalid JSON from LLM: Expecting value: line 1 column 1 (char 0)", "taskName": "Task-13", "error": "Unexpected error: Invalid JSON from LLM: Expecting value: line 1 column 1 (char 0)"}
{"timestamp": "2025-11-15T00:57:43.357107Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-16", "job_id": "89c9cfdf-3c97-479d-a2cf-c9d01d97023c", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T00:57:43.357559Z", "level": "INFO", "module": "script_generator", "message": "Generated 5 clip scripts", "taskName": "Task-16", "clip_count": 5}
{"timestamp": "2025-11-15T00:57:43.357752Z", "level": "INFO", "module": "transition_planner", "message": "Planned 4 transitions", "taskName": "Task-16", "transition_count": 4}
{"timestamp": "2025-11-15T00:57:43.357904Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "taskName": "Task-16", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T00:57:43.358006Z", "level": "WARNING", "module": "planner", "message": "Style inconsistencies found, refining...", "taskName": "Task-16"}
{"timestamp": "2025-11-15T00:57:43.358123Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "taskName": "Task-16", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T00:57:43.358194Z", "level": "WARNING", "module": "style_analyzer", "message": "Style inconsistencies found, but auto-refinement not implemented", "taskName": "Task-16"}
{"timestamp": "2025-11-15T00:57:43.358288Z", "level": "INFO", "module": "validator", "message": "ScenePlan validation passed", "taskName": "Task-16"}
{"timestamp": "2025-11-15T00:57:43.358361Z", "level": "INFO", "module": "planner", "message": "Scene planning complete", "taskName": "Task-16", "job_id": "89c9cfdf-3c97-479d-a2cf-c9d01d97023c", "characters": 1, "scenes": 1, "clips": 5, "transitions": 4}
{"timestamp": "2025-11-15T00:57:43.360887Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-19", "job_id": "d6d2cb26-64ba-4793-ad65-5fce16ea7fe1", "user_prompt_length": 42, "clip_count": 3}
{"timestamp": "2025-11-15T00:57:43.361191Z", "level": "INFO", "module": "script_generator", "message": "Generated 3 clip scripts", "taskName": "Task-19", "clip_count": 3}
{"timestamp": "2025-11-15T00:57:43.361321Z", "level": "INFO", "module": "transition_planner", "message": "Planned 2 transitions", "taskName": "Task-19", "transition_count": 2}
{"timestamp": "2025-11-15T00:57:43.361464Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "taskName": "Task-19", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T00:57:43.361554Z", "level": "WARNING", "module": "planner", "message": "Style inconsistencies found, refining...", "taskName": "Task-19"}
{"timestamp": "2025-11-15T00:57:43.361653Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "taskName": "Task-19", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T00:57:43.361731Z", "level": "WARNING", "module": "style_analyzer", "message": "Style inconsistencies found, but auto-refinement not implemented", "taskName": "Task-19"}
{"timestamp": "2025-11-15T00:57:43.361798Z", "level": "INFO", "module": "validator", "message": "ScenePlan validation passed", "taskName": "Task-19"}
{"timestamp": "2025-11-15T00:57:43.361879Z", "level": "INFO", "module": "planner", "message": "Scene planning complete", "taskName": "Task-19", "job_id": "d6d2cb26-64ba-4793-ad65-5fce16ea7fe1", "characters": 1, "scenes": 1, "clips": 3, "transitions": 2}
{"timestamp": "2025-11-15T00:57:43.371496Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-22", "job_id": "be002635-889a-42c4-b19e-479dd471a4ae", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T00:57:43.371744Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-22", "job_id": "be002635-889a-42c4-b19e-479dd471a4ae", "model": "gpt-4o", "system_prompt_length": 37860, "user_prompt_length": 1101}
{"timestamp": "2025-11-15T00:58:20.317630Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job be002635-889a-42c4-b19e-479dd471a4ae: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(be002635-889a-42c4-b19e-479dd471a4ae) is not present in table \"jobs\".'}", "taskName": "Task-22", "job_id": "be002635-889a-42c4-b19e-479dd471a4ae", "error": "Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(be002635-889a-42c4-b19e-479dd471a4ae) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:58:20.320976Z", "level": "ERROR", "module": "llm_client", "message": "Unexpected error in LLM call: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(be002635-889a-42c4-b19e-479dd471a4ae) is not present in table \"jobs\".'}", "taskName": "Task-22", "job_id": "be002635-889a-42c4-b19e-479dd471a4ae", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(be002635-889a-42c4-b19e-479dd471a4ae) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(be002635-889a-42c4-b19e-479dd471a4ae) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(be002635-889a-42c4-b19e-479dd471a4ae) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:58:20.322873Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in generate_scene_plan: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(be002635-889a-42c4-b19e-479dd471a4ae) is not present in table \"jobs\".'}", "taskName": "Task-22", "error": "Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(be002635-889a-42c4-b19e-479dd471a4ae) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:58:20.324868Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(be002635-889a-42c4-b19e-479dd471a4ae) is not present in table \"jobs\".'}", "taskName": "Task-22", "job_id": "be002635-889a-42c4-b19e-479dd471a4ae", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(be002635-889a-42c4-b19e-479dd471a4ae) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(be002635-889a-42c4-b19e-479dd471a4ae) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(be002635-889a-42c4-b19e-479dd471a4ae) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 67, in plan_scenes\n    llm_output = await generate_scene_plan(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/retry.py\", line 49, in async_wrapper\n    return await func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 492, in generate_scene_plan\n    raise GenerationError(f\"Unexpected error: {str(e)}\", job_id=job_id) from e\nshared.errors.GenerationError: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(be002635-889a-42c4-b19e-479dd471a4ae) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:58:20.337189Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-25", "job_id": "e944d6da-ff48-47d3-815b-4a0ab9481559", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T00:58:20.338356Z", "level": "INFO", "module": "script_generator", "message": "Generated 5 clip scripts", "taskName": "Task-25", "clip_count": 5}
{"timestamp": "2025-11-15T00:58:20.338553Z", "level": "INFO", "module": "transition_planner", "message": "Planned 4 transitions", "taskName": "Task-25", "transition_count": 4}
{"timestamp": "2025-11-15T00:58:20.338846Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "taskName": "Task-25", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T00:58:20.338889Z", "level": "WARNING", "module": "planner", "message": "Style inconsistencies found, refining...", "taskName": "Task-25"}
{"timestamp": "2025-11-15T00:58:20.339055Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "taskName": "Task-25", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T00:58:20.339120Z", "level": "WARNING", "module": "style_analyzer", "message": "Style inconsistencies found, but auto-refinement not implemented", "taskName": "Task-25"}
{"timestamp": "2025-11-15T00:58:20.339186Z", "level": "INFO", "module": "validator", "message": "ScenePlan validation passed", "taskName": "Task-25"}
{"timestamp": "2025-11-15T00:58:20.339284Z", "level": "INFO", "module": "planner", "message": "Scene planning complete", "taskName": "Task-25", "job_id": "e944d6da-ff48-47d3-815b-4a0ab9481559", "characters": 1, "scenes": 1, "clips": 5, "transitions": 4}
{"timestamp": "2025-11-15T00:58:20.347009Z", "level": "INFO", "module": "main", "message": "Processing scene planning", "job_id": "30b83b97-25d2-4af1-ab75-f62e4f4f529f", "taskName": "Task-28", "user_prompt_length": 83, "clip_count": 5, "bpm": 120.0, "mood": "energetic"}
{"timestamp": "2025-11-15T00:58:20.347187Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "job_id": "30b83b97-25d2-4af1-ab75-f62e4f4f529f", "taskName": "Task-28", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T00:58:20.347489Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "job_id": "30b83b97-25d2-4af1-ab75-f62e4f4f529f", "taskName": "Task-28", "model": "gpt-4o", "system_prompt_length": 37860, "user_prompt_length": 1101}
{"timestamp": "2025-11-15T00:58:46.756010Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job 30b83b97-25d2-4af1-ab75-f62e4f4f529f: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(30b83b97-25d2-4af1-ab75-f62e4f4f529f) is not present in table \"jobs\".'}", "job_id": "30b83b97-25d2-4af1-ab75-f62e4f4f529f", "taskName": "Task-28", "error": "Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(30b83b97-25d2-4af1-ab75-f62e4f4f529f) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:58:46.758092Z", "level": "ERROR", "module": "llm_client", "message": "Unexpected error in LLM call: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(30b83b97-25d2-4af1-ab75-f62e4f4f529f) is not present in table \"jobs\".'}", "job_id": "30b83b97-25d2-4af1-ab75-f62e4f4f529f", "taskName": "Task-28", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(30b83b97-25d2-4af1-ab75-f62e4f4f529f) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(30b83b97-25d2-4af1-ab75-f62e4f4f529f) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(30b83b97-25d2-4af1-ab75-f62e4f4f529f) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:58:46.759604Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in generate_scene_plan: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(30b83b97-25d2-4af1-ab75-f62e4f4f529f) is not present in table \"jobs\".'}", "job_id": "30b83b97-25d2-4af1-ab75-f62e4f4f529f", "taskName": "Task-28", "error": "Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(30b83b97-25d2-4af1-ab75-f62e4f4f529f) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:58:46.761594Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(30b83b97-25d2-4af1-ab75-f62e4f4f529f) is not present in table \"jobs\".'}", "job_id": "30b83b97-25d2-4af1-ab75-f62e4f4f529f", "taskName": "Task-28", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(30b83b97-25d2-4af1-ab75-f62e4f4f529f) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(30b83b97-25d2-4af1-ab75-f62e4f4f529f) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(30b83b97-25d2-4af1-ab75-f62e4f4f529f) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 67, in plan_scenes\n    llm_output = await generate_scene_plan(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/retry.py\", line 49, in async_wrapper\n    return await func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 492, in generate_scene_plan\n    raise GenerationError(f\"Unexpected error: {str(e)}\", job_id=job_id) from e\nshared.errors.GenerationError: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(30b83b97-25d2-4af1-ab75-f62e4f4f529f) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T00:58:46.800689Z", "level": "INFO", "module": "script_generator", "message": "Generated 3 clip scripts", "taskName": null, "clip_count": 3}
{"timestamp": "2025-11-15T00:58:46.801820Z", "level": "INFO", "module": "transition_planner", "message": "Planned 2 transitions", "taskName": null, "transition_count": 2}
{"timestamp": "2025-11-15T00:58:46.803723Z", "level": "INFO", "module": "validator", "message": "ScenePlan validation passed", "taskName": null}
{"timestamp": "2025-11-15T00:58:46.804255Z", "level": "WARNING", "module": "validator", "message": "Validation found 1 issues", "taskName": null, "issues": "['Clip 0 start time mismatch: 1.0s vs 0.0s (tolerance: \u00b10.5s)']"}
{"timestamp": "2025-11-15T00:58:46.804689Z", "level": "WARNING", "module": "validator", "message": "Transition count mismatch: 2 vs 1", "taskName": null}
{"timestamp": "2025-11-15T00:58:46.804745Z", "level": "WARNING", "module": "validator", "message": "Validation found 2 issues", "taskName": null, "issues": "['Transition count mismatch: 2 transitions, expected 1', 'Invalid transition to_clip index: 2']"}
{"timestamp": "2025-11-15T00:58:46.805187Z", "level": "WARNING", "module": "validator", "message": "Validation found 1 issues", "taskName": null, "issues": "['Clip 0 references unknown character: nonexistent']"}
{"timestamp": "2025-11-15T00:58:46.805608Z", "level": "WARNING", "module": "validator", "message": "Validation found 1 issues", "taskName": null, "issues": "['Clip 0 references unknown scene: nonexistent']"}
{"timestamp": "2025-11-15T00:58:46.806039Z", "level": "WARNING", "module": "validator", "message": "Validation found 1 issues", "taskName": null, "issues": "['Missing color palette']"}
{"timestamp": "2025-11-15T00:58:46.806441Z", "level": "WARNING", "module": "validator", "message": "Clip count mismatch: 3 vs 2", "taskName": null, "expected": 2, "actual": 3}
{"timestamp": "2025-11-15T00:58:46.806489Z", "level": "WARNING", "module": "validator", "message": "Transition count mismatch: 1 vs 2", "taskName": null}
{"timestamp": "2025-11-15T00:58:46.806533Z", "level": "WARNING", "module": "validator", "message": "Validation found 2 issues", "taskName": null, "issues": "['Clip count mismatch: 3 clips, expected 2', 'Transition count mismatch: 1 transitions, expected 2']"}
{"timestamp": "2025-11-15T01:04:24.102768Z", "level": "INFO", "module": "main", "message": "Processing scene planning", "job_id": "2d8040e7-2334-4811-8309-a213de8dcca7", "taskName": "Task-1", "user_prompt_length": 130, "clip_count": 5, "bpm": 140.0, "mood": "energetic"}
{"timestamp": "2025-11-15T01:04:24.103020Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "job_id": "2d8040e7-2334-4811-8309-a213de8dcca7", "taskName": "Task-1", "user_prompt_length": 130, "clip_count": 5}
{"timestamp": "2025-11-15T01:04:24.103402Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "job_id": "2d8040e7-2334-4811-8309-a213de8dcca7", "taskName": "Task-1", "model": "gpt-4o", "system_prompt_length": 37859, "user_prompt_length": 788}
{"timestamp": "2025-11-15T01:04:48.447940Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job 2d8040e7-2334-4811-8309-a213de8dcca7: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(2d8040e7-2334-4811-8309-a213de8dcca7) is not present in table \"jobs\".'}", "job_id": "2d8040e7-2334-4811-8309-a213de8dcca7", "taskName": "Task-1", "error": "Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(2d8040e7-2334-4811-8309-a213de8dcca7) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:04:48.452078Z", "level": "ERROR", "module": "llm_client", "message": "Unexpected error in LLM call: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(2d8040e7-2334-4811-8309-a213de8dcca7) is not present in table \"jobs\".'}", "job_id": "2d8040e7-2334-4811-8309-a213de8dcca7", "taskName": "Task-1", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(2d8040e7-2334-4811-8309-a213de8dcca7) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(2d8040e7-2334-4811-8309-a213de8dcca7) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(2d8040e7-2334-4811-8309-a213de8dcca7) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:04:48.453531Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in generate_scene_plan: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(2d8040e7-2334-4811-8309-a213de8dcca7) is not present in table \"jobs\".'}", "job_id": "2d8040e7-2334-4811-8309-a213de8dcca7", "taskName": "Task-1", "error": "Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(2d8040e7-2334-4811-8309-a213de8dcca7) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:04:48.456111Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(2d8040e7-2334-4811-8309-a213de8dcca7) is not present in table \"jobs\".'}", "job_id": "2d8040e7-2334-4811-8309-a213de8dcca7", "taskName": "Task-1", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(2d8040e7-2334-4811-8309-a213de8dcca7) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(2d8040e7-2334-4811-8309-a213de8dcca7) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(2d8040e7-2334-4811-8309-a213de8dcca7) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 67, in plan_scenes\n    llm_output = await generate_scene_plan(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/retry.py\", line 49, in async_wrapper\n    return await func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 492, in generate_scene_plan\n    raise GenerationError(f\"Unexpected error: {str(e)}\", job_id=job_id) from e\nshared.errors.GenerationError: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(2d8040e7-2334-4811-8309-a213de8dcca7) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:04:52.857557Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-1", "job_id": "13cf7e6e-9fcc-40e0-a3a3-058698ebcde6", "user_prompt_length": 42, "clip_count": 3}
{"timestamp": "2025-11-15T01:04:52.858007Z", "level": "INFO", "module": "script_generator", "message": "Generated 3 clip scripts", "taskName": "Task-1", "clip_count": 3}
{"timestamp": "2025-11-15T01:04:52.858086Z", "level": "INFO", "module": "transition_planner", "message": "Planned 2 transitions", "taskName": "Task-1", "transition_count": 2}
{"timestamp": "2025-11-15T01:04:52.858265Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "taskName": "Task-1", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:04:52.858316Z", "level": "WARNING", "module": "planner", "message": "Style inconsistencies found, refining...", "taskName": "Task-1"}
{"timestamp": "2025-11-15T01:04:52.858356Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "taskName": "Task-1", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:04:52.858386Z", "level": "WARNING", "module": "style_analyzer", "message": "Style inconsistencies found, but auto-refinement not implemented", "taskName": "Task-1"}
{"timestamp": "2025-11-15T01:04:52.858425Z", "level": "INFO", "module": "validator", "message": "ScenePlan validation passed", "taskName": "Task-1"}
{"timestamp": "2025-11-15T01:04:52.858461Z", "level": "INFO", "module": "planner", "message": "Scene planning complete", "taskName": "Task-1", "job_id": "13cf7e6e-9fcc-40e0-a3a3-058698ebcde6", "characters": 1, "scenes": 1, "clips": 3, "transitions": 2}
{"timestamp": "2025-11-15T01:04:55.136647Z", "level": "INFO", "module": "main", "message": "Processing scene planning", "job_id": "58e8bfda-4d04-46c2-861e-43dd0ee0999a", "taskName": "Task-1", "user_prompt_length": 62, "clip_count": 5, "bpm": 120.0, "mood": "energetic"}
{"timestamp": "2025-11-15T01:04:55.136737Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "job_id": "58e8bfda-4d04-46c2-861e-43dd0ee0999a", "taskName": "Task-1", "user_prompt_length": 62, "clip_count": 5}
{"timestamp": "2025-11-15T01:04:55.136909Z", "level": "INFO", "module": "script_generator", "message": "Generated 5 clip scripts", "job_id": "58e8bfda-4d04-46c2-861e-43dd0ee0999a", "taskName": "Task-1", "clip_count": 5}
{"timestamp": "2025-11-15T01:04:55.136974Z", "level": "INFO", "module": "transition_planner", "message": "Planned 4 transitions", "job_id": "58e8bfda-4d04-46c2-861e-43dd0ee0999a", "taskName": "Task-1", "transition_count": 4}
{"timestamp": "2025-11-15T01:04:55.137030Z", "level": "WARNING", "module": "planner", "message": "LLM job_id mismatch: eb970db1-ca83-439e-a319-586e8f899cfa vs 58e8bfda-4d04-46c2-861e-43dd0ee0999a, using provided job_id", "job_id": "58e8bfda-4d04-46c2-861e-43dd0ee0999a", "taskName": "Task-1"}
{"timestamp": "2025-11-15T01:04:55.137088Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "job_id": "58e8bfda-4d04-46c2-861e-43dd0ee0999a", "taskName": "Task-1", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:04:55.137123Z", "level": "WARNING", "module": "planner", "message": "Style inconsistencies found, refining...", "job_id": "58e8bfda-4d04-46c2-861e-43dd0ee0999a", "taskName": "Task-1"}
{"timestamp": "2025-11-15T01:04:55.137164Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "job_id": "58e8bfda-4d04-46c2-861e-43dd0ee0999a", "taskName": "Task-1", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:04:55.137196Z", "level": "WARNING", "module": "style_analyzer", "message": "Style inconsistencies found, but auto-refinement not implemented", "job_id": "58e8bfda-4d04-46c2-861e-43dd0ee0999a", "taskName": "Task-1"}
{"timestamp": "2025-11-15T01:04:55.137237Z", "level": "INFO", "module": "validator", "message": "ScenePlan validation passed", "job_id": "58e8bfda-4d04-46c2-861e-43dd0ee0999a", "taskName": "Task-1"}
{"timestamp": "2025-11-15T01:04:55.137273Z", "level": "INFO", "module": "planner", "message": "Scene planning complete", "job_id": "58e8bfda-4d04-46c2-861e-43dd0ee0999a", "taskName": "Task-1", "characters": 1, "scenes": 1, "clips": 5, "transitions": 4}
{"timestamp": "2025-11-15T01:04:55.137311Z", "level": "INFO", "module": "main", "message": "Scene planning complete", "job_id": "58e8bfda-4d04-46c2-861e-43dd0ee0999a", "taskName": "Task-1", "characters": 1, "scenes": 1, "clips": 5}
{"timestamp": "2025-11-15T01:04:55.138376Z", "level": "INFO", "module": "main", "message": "Processing scene planning", "job_id": "8173a4ca-e3ad-4311-a921-ad739a84714e", "taskName": "Task-4", "user_prompt_length": 130, "clip_count": 5, "bpm": 140.0, "mood": "energetic"}
{"timestamp": "2025-11-15T01:04:55.138422Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "job_id": "8173a4ca-e3ad-4311-a921-ad739a84714e", "taskName": "Task-4", "user_prompt_length": 130, "clip_count": 5}
{"timestamp": "2025-11-15T01:04:55.138529Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "job_id": "8173a4ca-e3ad-4311-a921-ad739a84714e", "taskName": "Task-4", "model": "gpt-4o", "system_prompt_length": 37859, "user_prompt_length": 788}
{"timestamp": "2025-11-15T01:05:08.271603Z", "level": "INFO", "module": "main", "message": "Processing scene planning", "job_id": "d33ba469-6722-4b19-90f7-efe8d0d4a841", "taskName": "Task-1", "user_prompt_length": 62, "clip_count": 5, "bpm": 120.0, "mood": "energetic"}
{"timestamp": "2025-11-15T01:05:08.271692Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "job_id": "d33ba469-6722-4b19-90f7-efe8d0d4a841", "taskName": "Task-1", "user_prompt_length": 62, "clip_count": 5}
{"timestamp": "2025-11-15T01:05:08.271835Z", "level": "INFO", "module": "script_generator", "message": "Generated 5 clip scripts", "job_id": "d33ba469-6722-4b19-90f7-efe8d0d4a841", "taskName": "Task-1", "clip_count": 5}
{"timestamp": "2025-11-15T01:05:08.271896Z", "level": "INFO", "module": "transition_planner", "message": "Planned 4 transitions", "job_id": "d33ba469-6722-4b19-90f7-efe8d0d4a841", "taskName": "Task-1", "transition_count": 4}
{"timestamp": "2025-11-15T01:05:08.271943Z", "level": "WARNING", "module": "planner", "message": "LLM job_id mismatch: aba09315-41df-4fa2-9c4d-49216ebbce82 vs d33ba469-6722-4b19-90f7-efe8d0d4a841, using provided job_id", "job_id": "d33ba469-6722-4b19-90f7-efe8d0d4a841", "taskName": "Task-1"}
{"timestamp": "2025-11-15T01:05:08.271990Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "job_id": "d33ba469-6722-4b19-90f7-efe8d0d4a841", "taskName": "Task-1", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:05:08.272020Z", "level": "WARNING", "module": "planner", "message": "Style inconsistencies found, refining...", "job_id": "d33ba469-6722-4b19-90f7-efe8d0d4a841", "taskName": "Task-1"}
{"timestamp": "2025-11-15T01:05:08.272056Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "job_id": "d33ba469-6722-4b19-90f7-efe8d0d4a841", "taskName": "Task-1", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:05:08.272085Z", "level": "WARNING", "module": "style_analyzer", "message": "Style inconsistencies found, but auto-refinement not implemented", "job_id": "d33ba469-6722-4b19-90f7-efe8d0d4a841", "taskName": "Task-1"}
{"timestamp": "2025-11-15T01:05:08.272122Z", "level": "INFO", "module": "validator", "message": "ScenePlan validation passed", "job_id": "d33ba469-6722-4b19-90f7-efe8d0d4a841", "taskName": "Task-1"}
{"timestamp": "2025-11-15T01:05:08.272153Z", "level": "INFO", "module": "planner", "message": "Scene planning complete", "job_id": "d33ba469-6722-4b19-90f7-efe8d0d4a841", "taskName": "Task-1", "characters": 1, "scenes": 1, "clips": 5, "transitions": 4}
{"timestamp": "2025-11-15T01:05:08.272186Z", "level": "INFO", "module": "main", "message": "Scene planning complete", "job_id": "d33ba469-6722-4b19-90f7-efe8d0d4a841", "taskName": "Task-1", "characters": 1, "scenes": 1, "clips": 5}
{"timestamp": "2025-11-15T01:05:08.273434Z", "level": "INFO", "module": "main", "message": "Processing scene planning", "job_id": "c5df9306-a19f-44ed-990e-b31866be33a2", "taskName": "Task-4", "user_prompt_length": 130, "clip_count": 5, "bpm": 140.0, "mood": "energetic"}
{"timestamp": "2025-11-15T01:05:08.273473Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "job_id": "c5df9306-a19f-44ed-990e-b31866be33a2", "taskName": "Task-4", "user_prompt_length": 130, "clip_count": 5}
{"timestamp": "2025-11-15T01:05:08.273563Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "job_id": "c5df9306-a19f-44ed-990e-b31866be33a2", "taskName": "Task-4", "model": "gpt-4o", "system_prompt_length": 37859, "user_prompt_length": 788}
{"timestamp": "2025-11-15T01:05:20.097256Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job 8173a4ca-e3ad-4311-a921-ad739a84714e: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(8173a4ca-e3ad-4311-a921-ad739a84714e) is not present in table \"jobs\".'}", "job_id": "8173a4ca-e3ad-4311-a921-ad739a84714e", "taskName": "Task-4", "error": "Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(8173a4ca-e3ad-4311-a921-ad739a84714e) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:05:20.104910Z", "level": "ERROR", "module": "llm_client", "message": "Unexpected error in LLM call: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(8173a4ca-e3ad-4311-a921-ad739a84714e) is not present in table \"jobs\".'}", "job_id": "8173a4ca-e3ad-4311-a921-ad739a84714e", "taskName": "Task-4", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(8173a4ca-e3ad-4311-a921-ad739a84714e) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(8173a4ca-e3ad-4311-a921-ad739a84714e) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(8173a4ca-e3ad-4311-a921-ad739a84714e) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:05:20.107006Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in generate_scene_plan: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(8173a4ca-e3ad-4311-a921-ad739a84714e) is not present in table \"jobs\".'}", "job_id": "8173a4ca-e3ad-4311-a921-ad739a84714e", "taskName": "Task-4", "error": "Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(8173a4ca-e3ad-4311-a921-ad739a84714e) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:05:20.111222Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(8173a4ca-e3ad-4311-a921-ad739a84714e) is not present in table \"jobs\".'}", "job_id": "8173a4ca-e3ad-4311-a921-ad739a84714e", "taskName": "Task-4", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(8173a4ca-e3ad-4311-a921-ad739a84714e) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(8173a4ca-e3ad-4311-a921-ad739a84714e) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(8173a4ca-e3ad-4311-a921-ad739a84714e) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 67, in plan_scenes\n    llm_output = await generate_scene_plan(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/retry.py\", line 49, in async_wrapper\n    return await func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 492, in generate_scene_plan\n    raise GenerationError(f\"Unexpected error: {str(e)}\", job_id=job_id) from e\nshared.errors.GenerationError: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(8173a4ca-e3ad-4311-a921-ad739a84714e) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:05:20.188710Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-7", "job_id": "6694a271-eafe-4e20-8ee0-536e8c4f8fcd", "model": "gpt-4o", "system_prompt_length": 6744, "user_prompt_length": 637}
{"timestamp": "2025-11-15T01:05:20.188892Z", "level": "INFO", "module": "llm_client", "message": "Scene plan generated successfully", "taskName": "Task-7", "job_id": "6694a271-eafe-4e20-8ee0-536e8c4f8fcd", "model": "gpt-4o", "input_tokens": 1000, "output_tokens": 500, "cost": 0.0125}
{"timestamp": "2025-11-15T01:05:20.190391Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-10", "job_id": "9bd4a830-2121-402c-ad8a-d1e322458fb0", "model": "gpt-4o", "system_prompt_length": 6744, "user_prompt_length": 618}
{"timestamp": "2025-11-15T01:05:20.190479Z", "level": "WARNING", "module": "llm_client", "message": "Rate limit error: Rate limit exceeded", "taskName": "Task-10", "job_id": "9bd4a830-2121-402c-ad8a-d1e322458fb0"}
{"timestamp": "2025-11-15T01:05:20.190529Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/3 for generate_scene_plan after 2s delay", "taskName": "Task-10", "error": "Rate limit error: Rate limit exceeded", "attempt": 1}
{"timestamp": "2025-11-15T01:05:22.191859Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-10", "job_id": "9bd4a830-2121-402c-ad8a-d1e322458fb0", "model": "gpt-4o", "system_prompt_length": 6744, "user_prompt_length": 618}
{"timestamp": "2025-11-15T01:05:22.191995Z", "level": "WARNING", "module": "llm_client", "message": "Rate limit error: Rate limit exceeded", "taskName": "Task-10", "job_id": "9bd4a830-2121-402c-ad8a-d1e322458fb0"}
{"timestamp": "2025-11-15T01:05:22.192060Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 2/3 for generate_scene_plan after 4s delay", "taskName": "Task-10", "error": "Rate limit error: Rate limit exceeded", "attempt": 2}
{"timestamp": "2025-11-15T01:05:26.195124Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-10", "job_id": "9bd4a830-2121-402c-ad8a-d1e322458fb0", "model": "gpt-4o", "system_prompt_length": 6744, "user_prompt_length": 618}
{"timestamp": "2025-11-15T01:05:26.195900Z", "level": "WARNING", "module": "llm_client", "message": "Rate limit error: Rate limit exceeded", "taskName": "Task-10", "job_id": "9bd4a830-2121-402c-ad8a-d1e322458fb0"}
{"timestamp": "2025-11-15T01:05:26.196184Z", "level": "ERROR", "module": "retry", "message": "All 3 retry attempts failed for generate_scene_plan", "taskName": "Task-10", "error": "Rate limit error: Rate limit exceeded"}
{"timestamp": "2025-11-15T01:05:26.203308Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-13", "job_id": "4ce87fdb-01a1-4cb5-990d-d26d095bb821", "model": "gpt-4o", "system_prompt_length": 6744, "user_prompt_length": 618}
{"timestamp": "2025-11-15T01:05:26.203670Z", "level": "ERROR", "module": "llm_client", "message": "Failed to parse LLM JSON response: Expecting value: line 1 column 1 (char 0)", "taskName": "Task-13", "job_id": "4ce87fdb-01a1-4cb5-990d-d26d095bb821", "response_preview": "not valid json"}
{"timestamp": "2025-11-15T01:05:26.206109Z", "level": "ERROR", "module": "llm_client", "message": "Unexpected error in LLM call: Invalid JSON from LLM: Expecting value: line 1 column 1 (char 0)", "taskName": "Task-13", "job_id": "4ce87fdb-01a1-4cb5-990d-d26d095bb821", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 441, in generate_scene_plan\n    scene_plan_dict = json.loads(content)\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/json/__init__.py\", line 346, in loads\n    return _default_decoder.decode(s)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/json/decoder.py\", line 345, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/json/decoder.py\", line 363, in raw_decode\n    raise JSONDecodeError(\"Expecting value\", s, err.value) from None\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 447, in generate_scene_plan\n    raise RetryableError(f\"Invalid JSON from LLM: {str(e)}\", job_id=job_id) from e\nshared.errors.RetryableError: Invalid JSON from LLM: Expecting value: line 1 column 1 (char 0)"}
{"timestamp": "2025-11-15T01:05:26.207154Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in generate_scene_plan: Unexpected error: Invalid JSON from LLM: Expecting value: line 1 column 1 (char 0)", "taskName": "Task-13", "error": "Unexpected error: Invalid JSON from LLM: Expecting value: line 1 column 1 (char 0)"}
{"timestamp": "2025-11-15T01:05:26.209420Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-16", "job_id": "4a082c66-6ddd-4fd0-b42f-13065c091ddb", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T01:05:26.210022Z", "level": "INFO", "module": "script_generator", "message": "Generated 5 clip scripts", "taskName": "Task-16", "clip_count": 5}
{"timestamp": "2025-11-15T01:05:26.210209Z", "level": "INFO", "module": "transition_planner", "message": "Planned 4 transitions", "taskName": "Task-16", "transition_count": 4}
{"timestamp": "2025-11-15T01:05:26.210375Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "taskName": "Task-16", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:05:26.210444Z", "level": "WARNING", "module": "planner", "message": "Style inconsistencies found, refining...", "taskName": "Task-16"}
{"timestamp": "2025-11-15T01:05:26.210517Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "taskName": "Task-16", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:05:26.210573Z", "level": "WARNING", "module": "style_analyzer", "message": "Style inconsistencies found, but auto-refinement not implemented", "taskName": "Task-16"}
{"timestamp": "2025-11-15T01:05:26.210645Z", "level": "INFO", "module": "validator", "message": "ScenePlan validation passed", "taskName": "Task-16"}
{"timestamp": "2025-11-15T01:05:26.210709Z", "level": "INFO", "module": "planner", "message": "Scene planning complete", "taskName": "Task-16", "job_id": "4a082c66-6ddd-4fd0-b42f-13065c091ddb", "characters": 1, "scenes": 1, "clips": 5, "transitions": 4}
{"timestamp": "2025-11-15T01:05:26.212244Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-19", "job_id": "df186649-94f7-433b-a586-09ea4f2306c2", "user_prompt_length": 42, "clip_count": 3}
{"timestamp": "2025-11-15T01:05:26.212470Z", "level": "INFO", "module": "script_generator", "message": "Generated 3 clip scripts", "taskName": "Task-19", "clip_count": 3}
{"timestamp": "2025-11-15T01:05:26.212567Z", "level": "INFO", "module": "transition_planner", "message": "Planned 2 transitions", "taskName": "Task-19", "transition_count": 2}
{"timestamp": "2025-11-15T01:05:26.212664Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "taskName": "Task-19", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:05:26.212723Z", "level": "WARNING", "module": "planner", "message": "Style inconsistencies found, refining...", "taskName": "Task-19"}
{"timestamp": "2025-11-15T01:05:26.212792Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "taskName": "Task-19", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:05:26.212845Z", "level": "WARNING", "module": "style_analyzer", "message": "Style inconsistencies found, but auto-refinement not implemented", "taskName": "Task-19"}
{"timestamp": "2025-11-15T01:05:26.212905Z", "level": "INFO", "module": "validator", "message": "ScenePlan validation passed", "taskName": "Task-19"}
{"timestamp": "2025-11-15T01:05:26.213001Z", "level": "INFO", "module": "planner", "message": "Scene planning complete", "taskName": "Task-19", "job_id": "df186649-94f7-433b-a586-09ea4f2306c2", "characters": 1, "scenes": 1, "clips": 3, "transitions": 2}
{"timestamp": "2025-11-15T01:05:26.219743Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-22", "job_id": "cf3f186a-aeaf-43ed-b900-84d871e9f65e", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T01:05:26.219995Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-22", "job_id": "cf3f186a-aeaf-43ed-b900-84d871e9f65e", "model": "gpt-4o", "system_prompt_length": 37860, "user_prompt_length": 1101}
{"timestamp": "2025-11-15T01:05:37.175066Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job c5df9306-a19f-44ed-990e-b31866be33a2: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(c5df9306-a19f-44ed-990e-b31866be33a2) is not present in table \"jobs\".'}", "job_id": "c5df9306-a19f-44ed-990e-b31866be33a2", "taskName": "Task-4", "error": "Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(c5df9306-a19f-44ed-990e-b31866be33a2) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:05:37.187422Z", "level": "ERROR", "module": "llm_client", "message": "Unexpected error in LLM call: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(c5df9306-a19f-44ed-990e-b31866be33a2) is not present in table \"jobs\".'}", "job_id": "c5df9306-a19f-44ed-990e-b31866be33a2", "taskName": "Task-4", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(c5df9306-a19f-44ed-990e-b31866be33a2) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(c5df9306-a19f-44ed-990e-b31866be33a2) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(c5df9306-a19f-44ed-990e-b31866be33a2) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:05:37.190558Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in generate_scene_plan: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(c5df9306-a19f-44ed-990e-b31866be33a2) is not present in table \"jobs\".'}", "job_id": "c5df9306-a19f-44ed-990e-b31866be33a2", "taskName": "Task-4", "error": "Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(c5df9306-a19f-44ed-990e-b31866be33a2) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:05:37.196509Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(c5df9306-a19f-44ed-990e-b31866be33a2) is not present in table \"jobs\".'}", "job_id": "c5df9306-a19f-44ed-990e-b31866be33a2", "taskName": "Task-4", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(c5df9306-a19f-44ed-990e-b31866be33a2) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(c5df9306-a19f-44ed-990e-b31866be33a2) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(c5df9306-a19f-44ed-990e-b31866be33a2) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 67, in plan_scenes\n    llm_output = await generate_scene_plan(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/retry.py\", line 49, in async_wrapper\n    return await func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 492, in generate_scene_plan\n    raise GenerationError(f\"Unexpected error: {str(e)}\", job_id=job_id) from e\nshared.errors.GenerationError: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(c5df9306-a19f-44ed-990e-b31866be33a2) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:05:37.275504Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-7", "job_id": "4d9d2978-a0a9-41a4-9c5e-551fab46ed6e", "model": "gpt-4o", "system_prompt_length": 6744, "user_prompt_length": 637}
{"timestamp": "2025-11-15T01:05:37.275664Z", "level": "INFO", "module": "llm_client", "message": "Scene plan generated successfully", "taskName": "Task-7", "job_id": "4d9d2978-a0a9-41a4-9c5e-551fab46ed6e", "model": "gpt-4o", "input_tokens": 1000, "output_tokens": 500, "cost": 0.0125}
{"timestamp": "2025-11-15T01:05:37.276910Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-10", "job_id": "b58c0f32-ef41-48f6-9497-6f873ae0492a", "model": "gpt-4o", "system_prompt_length": 6744, "user_prompt_length": 618}
{"timestamp": "2025-11-15T01:05:37.276977Z", "level": "WARNING", "module": "llm_client", "message": "Rate limit error: Rate limit exceeded", "taskName": "Task-10", "job_id": "b58c0f32-ef41-48f6-9497-6f873ae0492a"}
{"timestamp": "2025-11-15T01:05:37.277019Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/3 for generate_scene_plan after 2s delay", "taskName": "Task-10", "error": "Rate limit error: Rate limit exceeded", "attempt": 1}
{"timestamp": "2025-11-15T01:05:39.279126Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-10", "job_id": "b58c0f32-ef41-48f6-9497-6f873ae0492a", "model": "gpt-4o", "system_prompt_length": 6744, "user_prompt_length": 618}
{"timestamp": "2025-11-15T01:05:39.279551Z", "level": "WARNING", "module": "llm_client", "message": "Rate limit error: Rate limit exceeded", "taskName": "Task-10", "job_id": "b58c0f32-ef41-48f6-9497-6f873ae0492a"}
{"timestamp": "2025-11-15T01:05:39.279716Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 2/3 for generate_scene_plan after 4s delay", "taskName": "Task-10", "error": "Rate limit error: Rate limit exceeded", "attempt": 2}
{"timestamp": "2025-11-15T01:05:43.286451Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-10", "job_id": "b58c0f32-ef41-48f6-9497-6f873ae0492a", "model": "gpt-4o", "system_prompt_length": 6744, "user_prompt_length": 618}
{"timestamp": "2025-11-15T01:05:43.287235Z", "level": "WARNING", "module": "llm_client", "message": "Rate limit error: Rate limit exceeded", "taskName": "Task-10", "job_id": "b58c0f32-ef41-48f6-9497-6f873ae0492a"}
{"timestamp": "2025-11-15T01:05:43.287430Z", "level": "ERROR", "module": "retry", "message": "All 3 retry attempts failed for generate_scene_plan", "taskName": "Task-10", "error": "Rate limit error: Rate limit exceeded"}
{"timestamp": "2025-11-15T01:05:43.295157Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-13", "job_id": "6d150a1e-7bc0-4ed6-b723-5254ad8a0c57", "model": "gpt-4o", "system_prompt_length": 6744, "user_prompt_length": 618}
{"timestamp": "2025-11-15T01:05:43.295606Z", "level": "ERROR", "module": "llm_client", "message": "Failed to parse LLM JSON response: Expecting value: line 1 column 1 (char 0)", "taskName": "Task-13", "job_id": "6d150a1e-7bc0-4ed6-b723-5254ad8a0c57", "response_preview": "not valid json"}
{"timestamp": "2025-11-15T01:05:43.300006Z", "level": "ERROR", "module": "llm_client", "message": "Unexpected error in LLM call: Invalid JSON from LLM: Expecting value: line 1 column 1 (char 0)", "taskName": "Task-13", "job_id": "6d150a1e-7bc0-4ed6-b723-5254ad8a0c57", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 441, in generate_scene_plan\n    scene_plan_dict = json.loads(content)\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/json/__init__.py\", line 346, in loads\n    return _default_decoder.decode(s)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/json/decoder.py\", line 345, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/json/decoder.py\", line 363, in raw_decode\n    raise JSONDecodeError(\"Expecting value\", s, err.value) from None\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 447, in generate_scene_plan\n    raise RetryableError(f\"Invalid JSON from LLM: {str(e)}\", job_id=job_id) from e\nshared.errors.RetryableError: Invalid JSON from LLM: Expecting value: line 1 column 1 (char 0)"}
{"timestamp": "2025-11-15T01:05:43.301988Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in generate_scene_plan: Unexpected error: Invalid JSON from LLM: Expecting value: line 1 column 1 (char 0)", "taskName": "Task-13", "error": "Unexpected error: Invalid JSON from LLM: Expecting value: line 1 column 1 (char 0)"}
{"timestamp": "2025-11-15T01:05:43.309150Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-16", "job_id": "3c35954f-2b00-4b15-adcc-68480e647e8a", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T01:05:43.310285Z", "level": "INFO", "module": "script_generator", "message": "Generated 5 clip scripts", "taskName": "Task-16", "clip_count": 5}
{"timestamp": "2025-11-15T01:05:43.310569Z", "level": "INFO", "module": "transition_planner", "message": "Planned 4 transitions", "taskName": "Task-16", "transition_count": 4}
{"timestamp": "2025-11-15T01:05:43.310826Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "taskName": "Task-16", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:05:43.310929Z", "level": "WARNING", "module": "planner", "message": "Style inconsistencies found, refining...", "taskName": "Task-16"}
{"timestamp": "2025-11-15T01:05:43.311101Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "taskName": "Task-16", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:05:43.311211Z", "level": "WARNING", "module": "style_analyzer", "message": "Style inconsistencies found, but auto-refinement not implemented", "taskName": "Task-16"}
{"timestamp": "2025-11-15T01:05:43.311396Z", "level": "INFO", "module": "validator", "message": "ScenePlan validation passed", "taskName": "Task-16"}
{"timestamp": "2025-11-15T01:05:43.311508Z", "level": "INFO", "module": "planner", "message": "Scene planning complete", "taskName": "Task-16", "job_id": "3c35954f-2b00-4b15-adcc-68480e647e8a", "characters": 1, "scenes": 1, "clips": 5, "transitions": 4}
{"timestamp": "2025-11-15T01:05:43.314984Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-19", "job_id": "418e5f66-4ecc-4d88-ac29-4172a0eb6545", "user_prompt_length": 42, "clip_count": 3}
{"timestamp": "2025-11-15T01:05:43.315426Z", "level": "INFO", "module": "script_generator", "message": "Generated 3 clip scripts", "taskName": "Task-19", "clip_count": 3}
{"timestamp": "2025-11-15T01:05:43.315591Z", "level": "INFO", "module": "transition_planner", "message": "Planned 2 transitions", "taskName": "Task-19", "transition_count": 2}
{"timestamp": "2025-11-15T01:05:43.315757Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "taskName": "Task-19", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:05:43.315857Z", "level": "WARNING", "module": "planner", "message": "Style inconsistencies found, refining...", "taskName": "Task-19"}
{"timestamp": "2025-11-15T01:05:43.315957Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "taskName": "Task-19", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:05:43.316040Z", "level": "WARNING", "module": "style_analyzer", "message": "Style inconsistencies found, but auto-refinement not implemented", "taskName": "Task-19"}
{"timestamp": "2025-11-15T01:05:43.316135Z", "level": "INFO", "module": "validator", "message": "ScenePlan validation passed", "taskName": "Task-19"}
{"timestamp": "2025-11-15T01:05:43.316227Z", "level": "INFO", "module": "planner", "message": "Scene planning complete", "taskName": "Task-19", "job_id": "418e5f66-4ecc-4d88-ac29-4172a0eb6545", "characters": 1, "scenes": 1, "clips": 3, "transitions": 2}
{"timestamp": "2025-11-15T01:05:43.325814Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-22", "job_id": "63b53991-e8fc-4d57-a39c-3cbbca723f29", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T01:05:43.326297Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-22", "job_id": "63b53991-e8fc-4d57-a39c-3cbbca723f29", "model": "gpt-4o", "system_prompt_length": 37860, "user_prompt_length": 1101}
{"timestamp": "2025-11-15T01:05:49.937832Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job cf3f186a-aeaf-43ed-b900-84d871e9f65e: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(cf3f186a-aeaf-43ed-b900-84d871e9f65e) is not present in table \"jobs\".'}", "taskName": "Task-22", "job_id": "cf3f186a-aeaf-43ed-b900-84d871e9f65e", "error": "Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(cf3f186a-aeaf-43ed-b900-84d871e9f65e) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:05:49.942159Z", "level": "ERROR", "module": "llm_client", "message": "Unexpected error in LLM call: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(cf3f186a-aeaf-43ed-b900-84d871e9f65e) is not present in table \"jobs\".'}", "taskName": "Task-22", "job_id": "cf3f186a-aeaf-43ed-b900-84d871e9f65e", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(cf3f186a-aeaf-43ed-b900-84d871e9f65e) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(cf3f186a-aeaf-43ed-b900-84d871e9f65e) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(cf3f186a-aeaf-43ed-b900-84d871e9f65e) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:05:49.944319Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in generate_scene_plan: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(cf3f186a-aeaf-43ed-b900-84d871e9f65e) is not present in table \"jobs\".'}", "taskName": "Task-22", "error": "Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(cf3f186a-aeaf-43ed-b900-84d871e9f65e) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:05:49.946760Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(cf3f186a-aeaf-43ed-b900-84d871e9f65e) is not present in table \"jobs\".'}", "taskName": "Task-22", "job_id": "cf3f186a-aeaf-43ed-b900-84d871e9f65e", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(cf3f186a-aeaf-43ed-b900-84d871e9f65e) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(cf3f186a-aeaf-43ed-b900-84d871e9f65e) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(cf3f186a-aeaf-43ed-b900-84d871e9f65e) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 67, in plan_scenes\n    llm_output = await generate_scene_plan(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/retry.py\", line 49, in async_wrapper\n    return await func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 492, in generate_scene_plan\n    raise GenerationError(f\"Unexpected error: {str(e)}\", job_id=job_id) from e\nshared.errors.GenerationError: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(cf3f186a-aeaf-43ed-b900-84d871e9f65e) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:05:49.953690Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-25", "job_id": "ae1042a7-f44a-4d2b-9f7c-644c6087120e", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T01:05:49.954141Z", "level": "INFO", "module": "script_generator", "message": "Generated 5 clip scripts", "taskName": "Task-25", "clip_count": 5}
{"timestamp": "2025-11-15T01:05:49.954312Z", "level": "INFO", "module": "transition_planner", "message": "Planned 4 transitions", "taskName": "Task-25", "transition_count": 4}
{"timestamp": "2025-11-15T01:05:49.954458Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "taskName": "Task-25", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:05:49.954540Z", "level": "WARNING", "module": "planner", "message": "Style inconsistencies found, refining...", "taskName": "Task-25"}
{"timestamp": "2025-11-15T01:05:49.954632Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "taskName": "Task-25", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:05:49.954707Z", "level": "WARNING", "module": "style_analyzer", "message": "Style inconsistencies found, but auto-refinement not implemented", "taskName": "Task-25"}
{"timestamp": "2025-11-15T01:05:49.954809Z", "level": "INFO", "module": "validator", "message": "ScenePlan validation passed", "taskName": "Task-25"}
{"timestamp": "2025-11-15T01:05:49.954897Z", "level": "INFO", "module": "planner", "message": "Scene planning complete", "taskName": "Task-25", "job_id": "ae1042a7-f44a-4d2b-9f7c-644c6087120e", "characters": 1, "scenes": 1, "clips": 5, "transitions": 4}
{"timestamp": "2025-11-15T01:05:49.961001Z", "level": "INFO", "module": "main", "message": "Processing scene planning", "job_id": "295bff7e-ffc7-46dd-8cd3-8d530246f80f", "taskName": "Task-28", "user_prompt_length": 83, "clip_count": 5, "bpm": 120.0, "mood": "energetic"}
{"timestamp": "2025-11-15T01:05:49.961088Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "job_id": "295bff7e-ffc7-46dd-8cd3-8d530246f80f", "taskName": "Task-28", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T01:05:49.961308Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "job_id": "295bff7e-ffc7-46dd-8cd3-8d530246f80f", "taskName": "Task-28", "model": "gpt-4o", "system_prompt_length": 37860, "user_prompt_length": 1101}
{"timestamp": "2025-11-15T01:06:10.568253Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job 63b53991-e8fc-4d57-a39c-3cbbca723f29: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(63b53991-e8fc-4d57-a39c-3cbbca723f29) is not present in table \"jobs\".'}", "taskName": "Task-22", "job_id": "63b53991-e8fc-4d57-a39c-3cbbca723f29", "error": "Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(63b53991-e8fc-4d57-a39c-3cbbca723f29) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:06:10.572630Z", "level": "ERROR", "module": "llm_client", "message": "Unexpected error in LLM call: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(63b53991-e8fc-4d57-a39c-3cbbca723f29) is not present in table \"jobs\".'}", "taskName": "Task-22", "job_id": "63b53991-e8fc-4d57-a39c-3cbbca723f29", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(63b53991-e8fc-4d57-a39c-3cbbca723f29) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(63b53991-e8fc-4d57-a39c-3cbbca723f29) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(63b53991-e8fc-4d57-a39c-3cbbca723f29) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:06:10.575866Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in generate_scene_plan: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(63b53991-e8fc-4d57-a39c-3cbbca723f29) is not present in table \"jobs\".'}", "taskName": "Task-22", "error": "Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(63b53991-e8fc-4d57-a39c-3cbbca723f29) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:06:10.581687Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(63b53991-e8fc-4d57-a39c-3cbbca723f29) is not present in table \"jobs\".'}", "taskName": "Task-22", "job_id": "63b53991-e8fc-4d57-a39c-3cbbca723f29", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(63b53991-e8fc-4d57-a39c-3cbbca723f29) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(63b53991-e8fc-4d57-a39c-3cbbca723f29) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(63b53991-e8fc-4d57-a39c-3cbbca723f29) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 67, in plan_scenes\n    llm_output = await generate_scene_plan(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/retry.py\", line 49, in async_wrapper\n    return await func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 492, in generate_scene_plan\n    raise GenerationError(f\"Unexpected error: {str(e)}\", job_id=job_id) from e\nshared.errors.GenerationError: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(63b53991-e8fc-4d57-a39c-3cbbca723f29) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:06:10.593133Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-25", "job_id": "4ed04d67-b4b6-499f-ae89-4419d68aff90", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T01:06:10.594017Z", "level": "INFO", "module": "script_generator", "message": "Generated 5 clip scripts", "taskName": "Task-25", "clip_count": 5}
{"timestamp": "2025-11-15T01:06:10.594272Z", "level": "INFO", "module": "transition_planner", "message": "Planned 4 transitions", "taskName": "Task-25", "transition_count": 4}
{"timestamp": "2025-11-15T01:06:10.594397Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "taskName": "Task-25", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:06:10.594448Z", "level": "WARNING", "module": "planner", "message": "Style inconsistencies found, refining...", "taskName": "Task-25"}
{"timestamp": "2025-11-15T01:06:10.594495Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "taskName": "Task-25", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:06:10.594533Z", "level": "WARNING", "module": "style_analyzer", "message": "Style inconsistencies found, but auto-refinement not implemented", "taskName": "Task-25"}
{"timestamp": "2025-11-15T01:06:10.594587Z", "level": "INFO", "module": "validator", "message": "ScenePlan validation passed", "taskName": "Task-25"}
{"timestamp": "2025-11-15T01:06:10.594630Z", "level": "INFO", "module": "planner", "message": "Scene planning complete", "taskName": "Task-25", "job_id": "4ed04d67-b4b6-499f-ae89-4419d68aff90", "characters": 1, "scenes": 1, "clips": 5, "transitions": 4}
{"timestamp": "2025-11-15T01:06:10.599057Z", "level": "INFO", "module": "main", "message": "Processing scene planning", "job_id": "6ca97b50-18cb-45a9-9005-09574409ab4c", "taskName": "Task-28", "user_prompt_length": 83, "clip_count": 5, "bpm": 120.0, "mood": "energetic"}
{"timestamp": "2025-11-15T01:06:10.599116Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "job_id": "6ca97b50-18cb-45a9-9005-09574409ab4c", "taskName": "Task-28", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T01:06:10.599286Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "job_id": "6ca97b50-18cb-45a9-9005-09574409ab4c", "taskName": "Task-28", "model": "gpt-4o", "system_prompt_length": 37860, "user_prompt_length": 1101}
{"timestamp": "2025-11-15T01:06:17.186285Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job 295bff7e-ffc7-46dd-8cd3-8d530246f80f: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(295bff7e-ffc7-46dd-8cd3-8d530246f80f) is not present in table \"jobs\".'}", "job_id": "295bff7e-ffc7-46dd-8cd3-8d530246f80f", "taskName": "Task-28", "error": "Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(295bff7e-ffc7-46dd-8cd3-8d530246f80f) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:06:17.188647Z", "level": "ERROR", "module": "llm_client", "message": "Unexpected error in LLM call: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(295bff7e-ffc7-46dd-8cd3-8d530246f80f) is not present in table \"jobs\".'}", "job_id": "295bff7e-ffc7-46dd-8cd3-8d530246f80f", "taskName": "Task-28", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(295bff7e-ffc7-46dd-8cd3-8d530246f80f) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(295bff7e-ffc7-46dd-8cd3-8d530246f80f) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(295bff7e-ffc7-46dd-8cd3-8d530246f80f) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:06:17.190239Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in generate_scene_plan: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(295bff7e-ffc7-46dd-8cd3-8d530246f80f) is not present in table \"jobs\".'}", "job_id": "295bff7e-ffc7-46dd-8cd3-8d530246f80f", "taskName": "Task-28", "error": "Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(295bff7e-ffc7-46dd-8cd3-8d530246f80f) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:06:17.192332Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(295bff7e-ffc7-46dd-8cd3-8d530246f80f) is not present in table \"jobs\".'}", "job_id": "295bff7e-ffc7-46dd-8cd3-8d530246f80f", "taskName": "Task-28", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(295bff7e-ffc7-46dd-8cd3-8d530246f80f) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(295bff7e-ffc7-46dd-8cd3-8d530246f80f) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(295bff7e-ffc7-46dd-8cd3-8d530246f80f) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 67, in plan_scenes\n    llm_output = await generate_scene_plan(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/retry.py\", line 49, in async_wrapper\n    return await func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 492, in generate_scene_plan\n    raise GenerationError(f\"Unexpected error: {str(e)}\", job_id=job_id) from e\nshared.errors.GenerationError: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(295bff7e-ffc7-46dd-8cd3-8d530246f80f) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:06:17.228599Z", "level": "INFO", "module": "script_generator", "message": "Generated 3 clip scripts", "taskName": null, "clip_count": 3}
{"timestamp": "2025-11-15T01:06:17.229289Z", "level": "INFO", "module": "transition_planner", "message": "Planned 2 transitions", "taskName": null, "transition_count": 2}
{"timestamp": "2025-11-15T01:06:17.230395Z", "level": "INFO", "module": "validator", "message": "ScenePlan validation passed", "taskName": null}
{"timestamp": "2025-11-15T01:06:17.230817Z", "level": "WARNING", "module": "validator", "message": "Validation found 1 issues", "taskName": null, "issues": "['Clip 0 start time mismatch: 1.0s vs 0.0s (tolerance: \u00b10.5s)']"}
{"timestamp": "2025-11-15T01:06:17.231204Z", "level": "WARNING", "module": "validator", "message": "Transition count mismatch: 2 vs 1", "taskName": null}
{"timestamp": "2025-11-15T01:06:17.231259Z", "level": "WARNING", "module": "validator", "message": "Validation found 2 issues", "taskName": null, "issues": "['Transition count mismatch: 2 transitions, expected 1', 'Invalid transition to_clip index: 2']"}
{"timestamp": "2025-11-15T01:06:17.231651Z", "level": "WARNING", "module": "validator", "message": "Validation found 1 issues", "taskName": null, "issues": "['Clip 0 references unknown character: nonexistent']"}
{"timestamp": "2025-11-15T01:06:17.232015Z", "level": "WARNING", "module": "validator", "message": "Validation found 1 issues", "taskName": null, "issues": "['Clip 0 references unknown scene: nonexistent']"}
{"timestamp": "2025-11-15T01:06:17.232389Z", "level": "WARNING", "module": "validator", "message": "Validation found 1 issues", "taskName": null, "issues": "['Missing color palette']"}
{"timestamp": "2025-11-15T01:06:17.232752Z", "level": "WARNING", "module": "validator", "message": "Clip count mismatch: 3 vs 2", "taskName": null, "expected": 2, "actual": 3}
{"timestamp": "2025-11-15T01:06:17.232798Z", "level": "WARNING", "module": "validator", "message": "Transition count mismatch: 1 vs 2", "taskName": null}
{"timestamp": "2025-11-15T01:06:17.232848Z", "level": "WARNING", "module": "validator", "message": "Validation found 2 issues", "taskName": null, "issues": "['Clip count mismatch: 3 clips, expected 2', 'Transition count mismatch: 1 transitions, expected 2']"}
{"timestamp": "2025-11-15T01:06:22.191106Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-1", "job_id": "f8a7140a-ac2a-470c-b0a8-5f094b120128", "user_prompt_length": 42, "clip_count": 3}
{"timestamp": "2025-11-15T01:06:22.191502Z", "level": "INFO", "module": "script_generator", "message": "Generated 3 clip scripts", "taskName": "Task-1", "clip_count": 3}
{"timestamp": "2025-11-15T01:06:22.191577Z", "level": "INFO", "module": "transition_planner", "message": "Planned 2 transitions", "taskName": "Task-1", "transition_count": 2}
{"timestamp": "2025-11-15T01:06:22.191651Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "taskName": "Task-1", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:06:22.191688Z", "level": "WARNING", "module": "planner", "message": "Style inconsistencies found, refining...", "taskName": "Task-1"}
{"timestamp": "2025-11-15T01:06:22.191729Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "taskName": "Task-1", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:06:22.191760Z", "level": "WARNING", "module": "style_analyzer", "message": "Style inconsistencies found, but auto-refinement not implemented", "taskName": "Task-1"}
{"timestamp": "2025-11-15T01:06:22.191800Z", "level": "INFO", "module": "validator", "message": "ScenePlan validation passed", "taskName": "Task-1"}
{"timestamp": "2025-11-15T01:06:22.191836Z", "level": "INFO", "module": "planner", "message": "Scene planning complete", "taskName": "Task-1", "job_id": "f8a7140a-ac2a-470c-b0a8-5f094b120128", "characters": 1, "scenes": 1, "clips": 3, "transitions": 2}
{"timestamp": "2025-11-15T01:06:24.033514Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-1", "job_id": "5a2bd156-7d94-4804-87b7-e8566678040b", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T01:06:24.033728Z", "level": "INFO", "module": "script_generator", "message": "Generated 5 clip scripts", "taskName": "Task-1", "clip_count": 5}
{"timestamp": "2025-11-15T01:06:24.033834Z", "level": "INFO", "module": "transition_planner", "message": "Planned 4 transitions", "taskName": "Task-1", "transition_count": 4}
{"timestamp": "2025-11-15T01:06:24.033918Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "taskName": "Task-1", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:06:24.033962Z", "level": "WARNING", "module": "planner", "message": "Style inconsistencies found, refining...", "taskName": "Task-1"}
{"timestamp": "2025-11-15T01:06:24.034006Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "taskName": "Task-1", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:06:24.034042Z", "level": "WARNING", "module": "style_analyzer", "message": "Style inconsistencies found, but auto-refinement not implemented", "taskName": "Task-1"}
{"timestamp": "2025-11-15T01:06:24.034087Z", "level": "INFO", "module": "validator", "message": "ScenePlan validation passed", "taskName": "Task-1"}
{"timestamp": "2025-11-15T01:06:24.034131Z", "level": "INFO", "module": "planner", "message": "Scene planning complete", "taskName": "Task-1", "job_id": "5a2bd156-7d94-4804-87b7-e8566678040b", "characters": 1, "scenes": 1, "clips": 5, "transitions": 4}
{"timestamp": "2025-11-15T01:06:25.617841Z", "level": "INFO", "module": "main", "message": "Processing scene planning", "job_id": "25f90213-cbe5-4bb5-92e0-5a24375f0941", "taskName": "Task-1", "user_prompt_length": 83, "clip_count": 5, "bpm": 120.0, "mood": "energetic"}
{"timestamp": "2025-11-15T01:06:25.617928Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "job_id": "25f90213-cbe5-4bb5-92e0-5a24375f0941", "taskName": "Task-1", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T01:06:25.618095Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "job_id": "25f90213-cbe5-4bb5-92e0-5a24375f0941", "taskName": "Task-1", "model": "gpt-4o", "system_prompt_length": 37860, "user_prompt_length": 1101}
{"timestamp": "2025-11-15T01:06:33.058403Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job 6ca97b50-18cb-45a9-9005-09574409ab4c: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(6ca97b50-18cb-45a9-9005-09574409ab4c) is not present in table \"jobs\".'}", "job_id": "6ca97b50-18cb-45a9-9005-09574409ab4c", "taskName": "Task-28", "error": "Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(6ca97b50-18cb-45a9-9005-09574409ab4c) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:06:33.062707Z", "level": "ERROR", "module": "llm_client", "message": "Unexpected error in LLM call: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(6ca97b50-18cb-45a9-9005-09574409ab4c) is not present in table \"jobs\".'}", "job_id": "6ca97b50-18cb-45a9-9005-09574409ab4c", "taskName": "Task-28", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(6ca97b50-18cb-45a9-9005-09574409ab4c) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(6ca97b50-18cb-45a9-9005-09574409ab4c) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(6ca97b50-18cb-45a9-9005-09574409ab4c) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:06:33.065485Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in generate_scene_plan: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(6ca97b50-18cb-45a9-9005-09574409ab4c) is not present in table \"jobs\".'}", "job_id": "6ca97b50-18cb-45a9-9005-09574409ab4c", "taskName": "Task-28", "error": "Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(6ca97b50-18cb-45a9-9005-09574409ab4c) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:06:33.067551Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(6ca97b50-18cb-45a9-9005-09574409ab4c) is not present in table \"jobs\".'}", "job_id": "6ca97b50-18cb-45a9-9005-09574409ab4c", "taskName": "Task-28", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(6ca97b50-18cb-45a9-9005-09574409ab4c) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(6ca97b50-18cb-45a9-9005-09574409ab4c) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(6ca97b50-18cb-45a9-9005-09574409ab4c) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 67, in plan_scenes\n    llm_output = await generate_scene_plan(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/retry.py\", line 49, in async_wrapper\n    return await func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 492, in generate_scene_plan\n    raise GenerationError(f\"Unexpected error: {str(e)}\", job_id=job_id) from e\nshared.errors.GenerationError: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(6ca97b50-18cb-45a9-9005-09574409ab4c) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:06:33.106852Z", "level": "INFO", "module": "script_generator", "message": "Generated 3 clip scripts", "taskName": null, "clip_count": 3}
{"timestamp": "2025-11-15T01:06:33.107775Z", "level": "INFO", "module": "transition_planner", "message": "Planned 2 transitions", "taskName": null, "transition_count": 2}
{"timestamp": "2025-11-15T01:06:33.109309Z", "level": "INFO", "module": "validator", "message": "ScenePlan validation passed", "taskName": null}
{"timestamp": "2025-11-15T01:06:33.109837Z", "level": "WARNING", "module": "validator", "message": "Validation found 1 issues", "taskName": null, "issues": "['Clip 0 start time mismatch: 1.0s vs 0.0s (tolerance: \u00b10.5s)']"}
{"timestamp": "2025-11-15T01:06:33.110297Z", "level": "WARNING", "module": "validator", "message": "Transition count mismatch: 2 vs 1", "taskName": null}
{"timestamp": "2025-11-15T01:06:33.110351Z", "level": "WARNING", "module": "validator", "message": "Validation found 2 issues", "taskName": null, "issues": "['Transition count mismatch: 2 transitions, expected 1', 'Invalid transition to_clip index: 2']"}
{"timestamp": "2025-11-15T01:06:33.110818Z", "level": "WARNING", "module": "validator", "message": "Validation found 1 issues", "taskName": null, "issues": "['Clip 0 references unknown character: nonexistent']"}
{"timestamp": "2025-11-15T01:06:33.111265Z", "level": "WARNING", "module": "validator", "message": "Validation found 1 issues", "taskName": null, "issues": "['Clip 0 references unknown scene: nonexistent']"}
{"timestamp": "2025-11-15T01:06:33.111711Z", "level": "WARNING", "module": "validator", "message": "Validation found 1 issues", "taskName": null, "issues": "['Missing color palette']"}
{"timestamp": "2025-11-15T01:06:33.112142Z", "level": "WARNING", "module": "validator", "message": "Clip count mismatch: 3 vs 2", "taskName": null, "expected": 2, "actual": 3}
{"timestamp": "2025-11-15T01:06:33.112189Z", "level": "WARNING", "module": "validator", "message": "Transition count mismatch: 1 vs 2", "taskName": null}
{"timestamp": "2025-11-15T01:06:33.112238Z", "level": "WARNING", "module": "validator", "message": "Validation found 2 issues", "taskName": null, "issues": "['Clip count mismatch: 3 clips, expected 2', 'Transition count mismatch: 1 transitions, expected 2']"}
{"timestamp": "2025-11-15T01:06:51.766364Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job 25f90213-cbe5-4bb5-92e0-5a24375f0941: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(25f90213-cbe5-4bb5-92e0-5a24375f0941) is not present in table \"jobs\".'}", "job_id": "25f90213-cbe5-4bb5-92e0-5a24375f0941", "taskName": "Task-1", "error": "Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(25f90213-cbe5-4bb5-92e0-5a24375f0941) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:06:51.771601Z", "level": "ERROR", "module": "llm_client", "message": "Unexpected error in LLM call: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(25f90213-cbe5-4bb5-92e0-5a24375f0941) is not present in table \"jobs\".'}", "job_id": "25f90213-cbe5-4bb5-92e0-5a24375f0941", "taskName": "Task-1", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(25f90213-cbe5-4bb5-92e0-5a24375f0941) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(25f90213-cbe5-4bb5-92e0-5a24375f0941) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(25f90213-cbe5-4bb5-92e0-5a24375f0941) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:06:51.774007Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in generate_scene_plan: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(25f90213-cbe5-4bb5-92e0-5a24375f0941) is not present in table \"jobs\".'}", "job_id": "25f90213-cbe5-4bb5-92e0-5a24375f0941", "taskName": "Task-1", "error": "Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(25f90213-cbe5-4bb5-92e0-5a24375f0941) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:06:51.776698Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(25f90213-cbe5-4bb5-92e0-5a24375f0941) is not present in table \"jobs\".'}", "job_id": "25f90213-cbe5-4bb5-92e0-5a24375f0941", "taskName": "Task-1", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(25f90213-cbe5-4bb5-92e0-5a24375f0941) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(25f90213-cbe5-4bb5-92e0-5a24375f0941) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(25f90213-cbe5-4bb5-92e0-5a24375f0941) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 67, in plan_scenes\n    llm_output = await generate_scene_plan(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/retry.py\", line 49, in async_wrapper\n    return await func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 492, in generate_scene_plan\n    raise GenerationError(f\"Unexpected error: {str(e)}\", job_id=job_id) from e\nshared.errors.GenerationError: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(25f90213-cbe5-4bb5-92e0-5a24375f0941) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:07:37.799591Z", "level": "INFO", "module": "main", "message": "Processing scene planning", "job_id": "3b98d017-75ab-46ec-9624-53653bc60c2a", "taskName": "Task-1", "user_prompt_length": 62, "clip_count": 5, "bpm": 120.0, "mood": "energetic"}
{"timestamp": "2025-11-15T01:07:37.799687Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "job_id": "3b98d017-75ab-46ec-9624-53653bc60c2a", "taskName": "Task-1", "user_prompt_length": 62, "clip_count": 5}
{"timestamp": "2025-11-15T01:07:37.799849Z", "level": "INFO", "module": "script_generator", "message": "Generated 5 clip scripts", "job_id": "3b98d017-75ab-46ec-9624-53653bc60c2a", "taskName": "Task-1", "clip_count": 5}
{"timestamp": "2025-11-15T01:07:37.799925Z", "level": "INFO", "module": "transition_planner", "message": "Planned 4 transitions", "job_id": "3b98d017-75ab-46ec-9624-53653bc60c2a", "taskName": "Task-1", "transition_count": 4}
{"timestamp": "2025-11-15T01:07:37.799987Z", "level": "WARNING", "module": "planner", "message": "LLM job_id mismatch: 490e4a39-4f2c-4dfc-917b-0be0f0a733fb vs 3b98d017-75ab-46ec-9624-53653bc60c2a, using provided job_id", "job_id": "3b98d017-75ab-46ec-9624-53653bc60c2a", "taskName": "Task-1"}
{"timestamp": "2025-11-15T01:07:37.800049Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "job_id": "3b98d017-75ab-46ec-9624-53653bc60c2a", "taskName": "Task-1", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:07:37.800097Z", "level": "WARNING", "module": "planner", "message": "Style inconsistencies found, refining...", "job_id": "3b98d017-75ab-46ec-9624-53653bc60c2a", "taskName": "Task-1"}
{"timestamp": "2025-11-15T01:07:37.800146Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "job_id": "3b98d017-75ab-46ec-9624-53653bc60c2a", "taskName": "Task-1", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:07:37.800185Z", "level": "WARNING", "module": "style_analyzer", "message": "Style inconsistencies found, but auto-refinement not implemented", "job_id": "3b98d017-75ab-46ec-9624-53653bc60c2a", "taskName": "Task-1"}
{"timestamp": "2025-11-15T01:07:37.800277Z", "level": "INFO", "module": "validator", "message": "ScenePlan validation passed", "job_id": "3b98d017-75ab-46ec-9624-53653bc60c2a", "taskName": "Task-1"}
{"timestamp": "2025-11-15T01:07:37.800342Z", "level": "INFO", "module": "planner", "message": "Scene planning complete", "job_id": "3b98d017-75ab-46ec-9624-53653bc60c2a", "taskName": "Task-1", "characters": 1, "scenes": 1, "clips": 5, "transitions": 4}
{"timestamp": "2025-11-15T01:07:37.800395Z", "level": "INFO", "module": "main", "message": "Scene planning complete", "job_id": "3b98d017-75ab-46ec-9624-53653bc60c2a", "taskName": "Task-1", "characters": 1, "scenes": 1, "clips": 5}
{"timestamp": "2025-11-15T01:07:37.801623Z", "level": "INFO", "module": "main", "message": "Processing scene planning", "job_id": "3264b2e0-3008-46d7-b38c-d11fff5a773f", "taskName": "Task-4", "user_prompt_length": 130, "clip_count": 5, "bpm": 140.0, "mood": "energetic"}
{"timestamp": "2025-11-15T01:07:37.801670Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "job_id": "3264b2e0-3008-46d7-b38c-d11fff5a773f", "taskName": "Task-4", "user_prompt_length": 130, "clip_count": 5}
{"timestamp": "2025-11-15T01:07:37.801787Z", "level": "INFO", "module": "script_generator", "message": "Generated 5 clip scripts", "job_id": "3264b2e0-3008-46d7-b38c-d11fff5a773f", "taskName": "Task-4", "clip_count": 5}
{"timestamp": "2025-11-15T01:07:37.801844Z", "level": "INFO", "module": "transition_planner", "message": "Planned 4 transitions", "job_id": "3264b2e0-3008-46d7-b38c-d11fff5a773f", "taskName": "Task-4", "transition_count": 4}
{"timestamp": "2025-11-15T01:07:37.801895Z", "level": "WARNING", "module": "planner", "message": "LLM job_id mismatch: 470a1284-5ac7-4696-9212-cb28d9f9243e vs 3264b2e0-3008-46d7-b38c-d11fff5a773f, using provided job_id", "job_id": "3264b2e0-3008-46d7-b38c-d11fff5a773f", "taskName": "Task-4"}
{"timestamp": "2025-11-15T01:07:37.801943Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "job_id": "3264b2e0-3008-46d7-b38c-d11fff5a773f", "taskName": "Task-4", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:07:37.801984Z", "level": "WARNING", "module": "planner", "message": "Style inconsistencies found, refining...", "job_id": "3264b2e0-3008-46d7-b38c-d11fff5a773f", "taskName": "Task-4"}
{"timestamp": "2025-11-15T01:07:37.802027Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "job_id": "3264b2e0-3008-46d7-b38c-d11fff5a773f", "taskName": "Task-4", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:07:37.802067Z", "level": "WARNING", "module": "style_analyzer", "message": "Style inconsistencies found, but auto-refinement not implemented", "job_id": "3264b2e0-3008-46d7-b38c-d11fff5a773f", "taskName": "Task-4"}
{"timestamp": "2025-11-15T01:07:37.802107Z", "level": "INFO", "module": "validator", "message": "ScenePlan validation passed", "job_id": "3264b2e0-3008-46d7-b38c-d11fff5a773f", "taskName": "Task-4"}
{"timestamp": "2025-11-15T01:07:37.802143Z", "level": "INFO", "module": "planner", "message": "Scene planning complete", "job_id": "3264b2e0-3008-46d7-b38c-d11fff5a773f", "taskName": "Task-4", "characters": 1, "scenes": 1, "clips": 5, "transitions": 4}
{"timestamp": "2025-11-15T01:07:37.803165Z", "level": "INFO", "module": "main", "message": "Scene planning complete", "job_id": "3264b2e0-3008-46d7-b38c-d11fff5a773f", "taskName": "Task-4", "characters": 1, "scenes": 1, "clips": 5}
{"timestamp": "2025-11-15T01:07:37.806594Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-7", "job_id": "f86632d5-acdc-4af0-ac42-3193b792493e", "model": "gpt-4o", "system_prompt_length": 6744, "user_prompt_length": 637}
{"timestamp": "2025-11-15T01:07:37.806771Z", "level": "INFO", "module": "llm_client", "message": "Scene plan generated successfully", "taskName": "Task-7", "job_id": "f86632d5-acdc-4af0-ac42-3193b792493e", "model": "gpt-4o", "input_tokens": 1000, "output_tokens": 500, "cost": 0.0125}
{"timestamp": "2025-11-15T01:07:37.808099Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-10", "job_id": "65234b7f-535f-4b3e-83f8-1c97f3404e65", "model": "gpt-4o", "system_prompt_length": 6744, "user_prompt_length": 618}
{"timestamp": "2025-11-15T01:07:37.808213Z", "level": "WARNING", "module": "llm_client", "message": "Rate limit error: Rate limit exceeded", "taskName": "Task-10", "job_id": "65234b7f-535f-4b3e-83f8-1c97f3404e65"}
{"timestamp": "2025-11-15T01:07:37.808279Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/3 for generate_scene_plan after 2s delay", "taskName": "Task-10", "error": "Rate limit error: Rate limit exceeded", "attempt": 1}
{"timestamp": "2025-11-15T01:07:39.810986Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-10", "job_id": "65234b7f-535f-4b3e-83f8-1c97f3404e65", "model": "gpt-4o", "system_prompt_length": 6744, "user_prompt_length": 618}
{"timestamp": "2025-11-15T01:07:39.811735Z", "level": "WARNING", "module": "llm_client", "message": "Rate limit error: Rate limit exceeded", "taskName": "Task-10", "job_id": "65234b7f-535f-4b3e-83f8-1c97f3404e65"}
{"timestamp": "2025-11-15T01:07:39.812098Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 2/3 for generate_scene_plan after 4s delay", "taskName": "Task-10", "error": "Rate limit error: Rate limit exceeded", "attempt": 2}
{"timestamp": "2025-11-15T01:07:43.814020Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-10", "job_id": "65234b7f-535f-4b3e-83f8-1c97f3404e65", "model": "gpt-4o", "system_prompt_length": 6744, "user_prompt_length": 618}
{"timestamp": "2025-11-15T01:07:43.814525Z", "level": "WARNING", "module": "llm_client", "message": "Rate limit error: Rate limit exceeded", "taskName": "Task-10", "job_id": "65234b7f-535f-4b3e-83f8-1c97f3404e65"}
{"timestamp": "2025-11-15T01:07:43.814613Z", "level": "ERROR", "module": "retry", "message": "All 3 retry attempts failed for generate_scene_plan", "taskName": "Task-10", "error": "Rate limit error: Rate limit exceeded"}
{"timestamp": "2025-11-15T01:07:43.816724Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-13", "job_id": "f6fb7e44-ca64-442e-8afe-5113bb150be4", "model": "gpt-4o", "system_prompt_length": 6744, "user_prompt_length": 618}
{"timestamp": "2025-11-15T01:07:43.816862Z", "level": "ERROR", "module": "llm_client", "message": "Failed to parse LLM JSON response: Expecting value: line 1 column 1 (char 0)", "taskName": "Task-13", "job_id": "f6fb7e44-ca64-442e-8afe-5113bb150be4", "response_preview": "not valid json"}
{"timestamp": "2025-11-15T01:07:43.818912Z", "level": "ERROR", "module": "llm_client", "message": "Unexpected error in LLM call: Invalid JSON from LLM: Expecting value: line 1 column 1 (char 0)", "taskName": "Task-13", "job_id": "f6fb7e44-ca64-442e-8afe-5113bb150be4", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 441, in generate_scene_plan\n    scene_plan_dict = json.loads(content)\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/json/__init__.py\", line 346, in loads\n    return _default_decoder.decode(s)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/json/decoder.py\", line 345, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/json/decoder.py\", line 363, in raw_decode\n    raise JSONDecodeError(\"Expecting value\", s, err.value) from None\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 447, in generate_scene_plan\n    raise RetryableError(f\"Invalid JSON from LLM: {str(e)}\", job_id=job_id) from e\nshared.errors.RetryableError: Invalid JSON from LLM: Expecting value: line 1 column 1 (char 0)"}
{"timestamp": "2025-11-15T01:07:43.819471Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in generate_scene_plan: Unexpected error: Invalid JSON from LLM: Expecting value: line 1 column 1 (char 0)", "taskName": "Task-13", "error": "Unexpected error: Invalid JSON from LLM: Expecting value: line 1 column 1 (char 0)"}
{"timestamp": "2025-11-15T01:07:43.820712Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-16", "job_id": "ba634fe3-0364-4ec2-b27c-1754e1b53763", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T01:07:43.820896Z", "level": "INFO", "module": "script_generator", "message": "Generated 5 clip scripts", "taskName": "Task-16", "clip_count": 5}
{"timestamp": "2025-11-15T01:07:43.820986Z", "level": "INFO", "module": "transition_planner", "message": "Planned 4 transitions", "taskName": "Task-16", "transition_count": 4}
{"timestamp": "2025-11-15T01:07:43.821058Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "taskName": "Task-16", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:07:43.821098Z", "level": "WARNING", "module": "planner", "message": "Style inconsistencies found, refining...", "taskName": "Task-16"}
{"timestamp": "2025-11-15T01:07:43.821144Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "taskName": "Task-16", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:07:43.821179Z", "level": "WARNING", "module": "style_analyzer", "message": "Style inconsistencies found, but auto-refinement not implemented", "taskName": "Task-16"}
{"timestamp": "2025-11-15T01:07:43.821223Z", "level": "INFO", "module": "validator", "message": "ScenePlan validation passed", "taskName": "Task-16"}
{"timestamp": "2025-11-15T01:07:43.821263Z", "level": "INFO", "module": "planner", "message": "Scene planning complete", "taskName": "Task-16", "job_id": "ba634fe3-0364-4ec2-b27c-1754e1b53763", "characters": 1, "scenes": 1, "clips": 5, "transitions": 4}
{"timestamp": "2025-11-15T01:07:43.822560Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-19", "job_id": "ebc7e8bc-e1c1-4a6d-8d69-c6e0f0d3c53e", "user_prompt_length": 42, "clip_count": 3}
{"timestamp": "2025-11-15T01:07:43.822752Z", "level": "INFO", "module": "script_generator", "message": "Generated 3 clip scripts", "taskName": "Task-19", "clip_count": 3}
{"timestamp": "2025-11-15T01:07:43.822817Z", "level": "INFO", "module": "transition_planner", "message": "Planned 2 transitions", "taskName": "Task-19", "transition_count": 2}
{"timestamp": "2025-11-15T01:07:43.822888Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "taskName": "Task-19", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:07:43.822928Z", "level": "WARNING", "module": "planner", "message": "Style inconsistencies found, refining...", "taskName": "Task-19"}
{"timestamp": "2025-11-15T01:07:43.822971Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "taskName": "Task-19", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:07:43.823008Z", "level": "WARNING", "module": "style_analyzer", "message": "Style inconsistencies found, but auto-refinement not implemented", "taskName": "Task-19"}
{"timestamp": "2025-11-15T01:07:43.823049Z", "level": "INFO", "module": "validator", "message": "ScenePlan validation passed", "taskName": "Task-19"}
{"timestamp": "2025-11-15T01:07:43.823089Z", "level": "INFO", "module": "planner", "message": "Scene planning complete", "taskName": "Task-19", "job_id": "ebc7e8bc-e1c1-4a6d-8d69-c6e0f0d3c53e", "characters": 1, "scenes": 1, "clips": 3, "transitions": 2}
{"timestamp": "2025-11-15T01:07:43.824207Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-22", "job_id": "b9013a0f-8c6b-4565-b872-63759aa043a4", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T01:07:43.824388Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-22", "job_id": "b9013a0f-8c6b-4565-b872-63759aa043a4", "model": "gpt-4o", "system_prompt_length": 37860, "user_prompt_length": 1101}
{"timestamp": "2025-11-15T01:08:06.448196Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job b9013a0f-8c6b-4565-b872-63759aa043a4: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(b9013a0f-8c6b-4565-b872-63759aa043a4) is not present in table \"jobs\".'}", "taskName": "Task-22", "job_id": "b9013a0f-8c6b-4565-b872-63759aa043a4", "error": "Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(b9013a0f-8c6b-4565-b872-63759aa043a4) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:08:06.454651Z", "level": "ERROR", "module": "llm_client", "message": "Unexpected error in LLM call: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(b9013a0f-8c6b-4565-b872-63759aa043a4) is not present in table \"jobs\".'}", "taskName": "Task-22", "job_id": "b9013a0f-8c6b-4565-b872-63759aa043a4", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(b9013a0f-8c6b-4565-b872-63759aa043a4) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(b9013a0f-8c6b-4565-b872-63759aa043a4) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(b9013a0f-8c6b-4565-b872-63759aa043a4) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:08:06.456470Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in generate_scene_plan: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(b9013a0f-8c6b-4565-b872-63759aa043a4) is not present in table \"jobs\".'}", "taskName": "Task-22", "error": "Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(b9013a0f-8c6b-4565-b872-63759aa043a4) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:08:06.459606Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(b9013a0f-8c6b-4565-b872-63759aa043a4) is not present in table \"jobs\".'}", "taskName": "Task-22", "job_id": "b9013a0f-8c6b-4565-b872-63759aa043a4", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(b9013a0f-8c6b-4565-b872-63759aa043a4) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(b9013a0f-8c6b-4565-b872-63759aa043a4) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(b9013a0f-8c6b-4565-b872-63759aa043a4) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 67, in plan_scenes\n    llm_output = await generate_scene_plan(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/retry.py\", line 49, in async_wrapper\n    return await func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 492, in generate_scene_plan\n    raise GenerationError(f\"Unexpected error: {str(e)}\", job_id=job_id) from e\nshared.errors.GenerationError: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(b9013a0f-8c6b-4565-b872-63759aa043a4) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:08:06.465788Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-25", "job_id": "b32a0510-f921-4a82-8ad2-d1074ed70ef3", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T01:08:06.466306Z", "level": "INFO", "module": "script_generator", "message": "Generated 5 clip scripts", "taskName": "Task-25", "clip_count": 5}
{"timestamp": "2025-11-15T01:08:06.466443Z", "level": "INFO", "module": "transition_planner", "message": "Planned 4 transitions", "taskName": "Task-25", "transition_count": 4}
{"timestamp": "2025-11-15T01:08:06.466581Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "taskName": "Task-25", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:08:06.466642Z", "level": "WARNING", "module": "planner", "message": "Style inconsistencies found, refining...", "taskName": "Task-25"}
{"timestamp": "2025-11-15T01:08:06.466705Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "taskName": "Task-25", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:08:06.466758Z", "level": "WARNING", "module": "style_analyzer", "message": "Style inconsistencies found, but auto-refinement not implemented", "taskName": "Task-25"}
{"timestamp": "2025-11-15T01:08:06.466826Z", "level": "INFO", "module": "validator", "message": "ScenePlan validation passed", "taskName": "Task-25"}
{"timestamp": "2025-11-15T01:08:06.466885Z", "level": "INFO", "module": "planner", "message": "Scene planning complete", "taskName": "Task-25", "job_id": "b32a0510-f921-4a82-8ad2-d1074ed70ef3", "characters": 1, "scenes": 1, "clips": 5, "transitions": 4}
{"timestamp": "2025-11-15T01:08:06.511156Z", "level": "INFO", "module": "main", "message": "Processing scene planning", "job_id": "3ef12401-373b-4647-869c-050732928e5f", "taskName": "Task-28", "user_prompt_length": 83, "clip_count": 5, "bpm": 120.0, "mood": "energetic"}
{"timestamp": "2025-11-15T01:08:06.511217Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "job_id": "3ef12401-373b-4647-869c-050732928e5f", "taskName": "Task-28", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T01:08:06.511368Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "job_id": "3ef12401-373b-4647-869c-050732928e5f", "taskName": "Task-28", "model": "gpt-4o", "system_prompt_length": 37860, "user_prompt_length": 1101}
{"timestamp": "2025-11-15T01:08:31.633353Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job 3ef12401-373b-4647-869c-050732928e5f: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(3ef12401-373b-4647-869c-050732928e5f) is not present in table \"jobs\".'}", "job_id": "3ef12401-373b-4647-869c-050732928e5f", "taskName": "Task-28", "error": "Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(3ef12401-373b-4647-869c-050732928e5f) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:08:31.635443Z", "level": "ERROR", "module": "llm_client", "message": "Unexpected error in LLM call: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(3ef12401-373b-4647-869c-050732928e5f) is not present in table \"jobs\".'}", "job_id": "3ef12401-373b-4647-869c-050732928e5f", "taskName": "Task-28", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(3ef12401-373b-4647-869c-050732928e5f) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(3ef12401-373b-4647-869c-050732928e5f) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(3ef12401-373b-4647-869c-050732928e5f) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:08:31.636328Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in generate_scene_plan: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(3ef12401-373b-4647-869c-050732928e5f) is not present in table \"jobs\".'}", "job_id": "3ef12401-373b-4647-869c-050732928e5f", "taskName": "Task-28", "error": "Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(3ef12401-373b-4647-869c-050732928e5f) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:08:31.638687Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(3ef12401-373b-4647-869c-050732928e5f) is not present in table \"jobs\".'}", "job_id": "3ef12401-373b-4647-869c-050732928e5f", "taskName": "Task-28", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(3ef12401-373b-4647-869c-050732928e5f) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(3ef12401-373b-4647-869c-050732928e5f) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(3ef12401-373b-4647-869c-050732928e5f) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 67, in plan_scenes\n    llm_output = await generate_scene_plan(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/retry.py\", line 49, in async_wrapper\n    return await func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 492, in generate_scene_plan\n    raise GenerationError(f\"Unexpected error: {str(e)}\", job_id=job_id) from e\nshared.errors.GenerationError: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(3ef12401-373b-4647-869c-050732928e5f) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:08:31.717004Z", "level": "INFO", "module": "script_generator", "message": "Generated 3 clip scripts", "taskName": null, "clip_count": 3}
{"timestamp": "2025-11-15T01:08:31.718411Z", "level": "INFO", "module": "transition_planner", "message": "Planned 2 transitions", "taskName": null, "transition_count": 2}
{"timestamp": "2025-11-15T01:08:31.720100Z", "level": "INFO", "module": "validator", "message": "ScenePlan validation passed", "taskName": null}
{"timestamp": "2025-11-15T01:08:31.721195Z", "level": "WARNING", "module": "validator", "message": "Validation found 1 issues", "taskName": null, "issues": "['Clip 0 start time mismatch: 1.0s vs 0.0s (tolerance: \u00b10.5s)']"}
{"timestamp": "2025-11-15T01:08:31.722568Z", "level": "WARNING", "module": "validator", "message": "Transition count mismatch: 2 vs 1", "taskName": null}
{"timestamp": "2025-11-15T01:08:31.722697Z", "level": "WARNING", "module": "validator", "message": "Validation found 2 issues", "taskName": null, "issues": "['Transition count mismatch: 2 transitions, expected 1', 'Invalid transition to_clip index: 2']"}
{"timestamp": "2025-11-15T01:08:31.724890Z", "level": "WARNING", "module": "validator", "message": "Validation found 1 issues", "taskName": null, "issues": "['Clip 0 references unknown character: nonexistent']"}
{"timestamp": "2025-11-15T01:08:31.728530Z", "level": "WARNING", "module": "validator", "message": "Validation found 1 issues", "taskName": null, "issues": "['Clip 0 references unknown scene: nonexistent']"}
{"timestamp": "2025-11-15T01:08:31.730195Z", "level": "WARNING", "module": "validator", "message": "Validation found 1 issues", "taskName": null, "issues": "['Missing color palette']"}
{"timestamp": "2025-11-15T01:08:31.731638Z", "level": "WARNING", "module": "validator", "message": "Clip count mismatch: 3 vs 2", "taskName": null, "expected": 2, "actual": 3}
{"timestamp": "2025-11-15T01:08:31.731770Z", "level": "WARNING", "module": "validator", "message": "Transition count mismatch: 1 vs 2", "taskName": null}
{"timestamp": "2025-11-15T01:08:31.732380Z", "level": "WARNING", "module": "validator", "message": "Validation found 2 issues", "taskName": null, "issues": "['Clip count mismatch: 3 clips, expected 2', 'Transition count mismatch: 1 transitions, expected 2']"}
{"timestamp": "2025-11-15T01:08:52.152458Z", "level": "INFO", "module": "main", "message": "Processing scene planning", "job_id": "9624fe94-0094-4111-858b-86af47dc07d6", "taskName": "Task-1", "user_prompt_length": 62, "clip_count": 5, "bpm": 120.0, "mood": "energetic"}
{"timestamp": "2025-11-15T01:08:52.152547Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "job_id": "9624fe94-0094-4111-858b-86af47dc07d6", "taskName": "Task-1", "user_prompt_length": 62, "clip_count": 5}
{"timestamp": "2025-11-15T01:08:52.152724Z", "level": "INFO", "module": "script_generator", "message": "Generated 5 clip scripts", "job_id": "9624fe94-0094-4111-858b-86af47dc07d6", "taskName": "Task-1", "clip_count": 5}
{"timestamp": "2025-11-15T01:08:52.152792Z", "level": "INFO", "module": "transition_planner", "message": "Planned 4 transitions", "job_id": "9624fe94-0094-4111-858b-86af47dc07d6", "taskName": "Task-1", "transition_count": 4}
{"timestamp": "2025-11-15T01:08:52.152850Z", "level": "WARNING", "module": "planner", "message": "LLM job_id mismatch: 205f02c7-4d70-4ddd-9016-467f3e642b05 vs 9624fe94-0094-4111-858b-86af47dc07d6, using provided job_id", "job_id": "9624fe94-0094-4111-858b-86af47dc07d6", "taskName": "Task-1"}
{"timestamp": "2025-11-15T01:08:52.152907Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "job_id": "9624fe94-0094-4111-858b-86af47dc07d6", "taskName": "Task-1", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:08:52.152942Z", "level": "WARNING", "module": "planner", "message": "Style inconsistencies found, refining...", "job_id": "9624fe94-0094-4111-858b-86af47dc07d6", "taskName": "Task-1"}
{"timestamp": "2025-11-15T01:08:52.152983Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "job_id": "9624fe94-0094-4111-858b-86af47dc07d6", "taskName": "Task-1", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:08:52.153023Z", "level": "WARNING", "module": "style_analyzer", "message": "Style inconsistencies found, but auto-refinement not implemented", "job_id": "9624fe94-0094-4111-858b-86af47dc07d6", "taskName": "Task-1"}
{"timestamp": "2025-11-15T01:08:52.153065Z", "level": "INFO", "module": "validator", "message": "ScenePlan validation passed", "job_id": "9624fe94-0094-4111-858b-86af47dc07d6", "taskName": "Task-1"}
{"timestamp": "2025-11-15T01:08:52.153101Z", "level": "INFO", "module": "planner", "message": "Scene planning complete", "job_id": "9624fe94-0094-4111-858b-86af47dc07d6", "taskName": "Task-1", "characters": 1, "scenes": 1, "clips": 5, "transitions": 4}
{"timestamp": "2025-11-15T01:08:52.153139Z", "level": "INFO", "module": "main", "message": "Scene planning complete", "job_id": "9624fe94-0094-4111-858b-86af47dc07d6", "taskName": "Task-1", "characters": 1, "scenes": 1, "clips": 5}
{"timestamp": "2025-11-15T01:08:52.154934Z", "level": "INFO", "module": "main", "message": "Processing scene planning", "job_id": "ebc94355-e777-4eae-b667-eaf45a91e68c", "taskName": "Task-4", "user_prompt_length": 130, "clip_count": 5, "bpm": 140.0, "mood": "energetic"}
{"timestamp": "2025-11-15T01:08:52.155004Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "job_id": "ebc94355-e777-4eae-b667-eaf45a91e68c", "taskName": "Task-4", "user_prompt_length": 130, "clip_count": 5}
{"timestamp": "2025-11-15T01:08:52.155164Z", "level": "INFO", "module": "script_generator", "message": "Generated 5 clip scripts", "job_id": "ebc94355-e777-4eae-b667-eaf45a91e68c", "taskName": "Task-4", "clip_count": 5}
{"timestamp": "2025-11-15T01:08:52.155225Z", "level": "INFO", "module": "transition_planner", "message": "Planned 4 transitions", "job_id": "ebc94355-e777-4eae-b667-eaf45a91e68c", "taskName": "Task-4", "transition_count": 4}
{"timestamp": "2025-11-15T01:08:52.155270Z", "level": "WARNING", "module": "planner", "message": "LLM job_id mismatch: d6c9f839-55ec-408a-861e-dd97fb482ea3 vs ebc94355-e777-4eae-b667-eaf45a91e68c, using provided job_id", "job_id": "ebc94355-e777-4eae-b667-eaf45a91e68c", "taskName": "Task-4"}
{"timestamp": "2025-11-15T01:08:52.155315Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "job_id": "ebc94355-e777-4eae-b667-eaf45a91e68c", "taskName": "Task-4", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:08:52.155348Z", "level": "WARNING", "module": "planner", "message": "Style inconsistencies found, refining...", "job_id": "ebc94355-e777-4eae-b667-eaf45a91e68c", "taskName": "Task-4"}
{"timestamp": "2025-11-15T01:08:52.155386Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "job_id": "ebc94355-e777-4eae-b667-eaf45a91e68c", "taskName": "Task-4", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:08:52.155419Z", "level": "WARNING", "module": "style_analyzer", "message": "Style inconsistencies found, but auto-refinement not implemented", "job_id": "ebc94355-e777-4eae-b667-eaf45a91e68c", "taskName": "Task-4"}
{"timestamp": "2025-11-15T01:08:52.155457Z", "level": "INFO", "module": "validator", "message": "ScenePlan validation passed", "job_id": "ebc94355-e777-4eae-b667-eaf45a91e68c", "taskName": "Task-4"}
{"timestamp": "2025-11-15T01:08:52.155493Z", "level": "INFO", "module": "planner", "message": "Scene planning complete", "job_id": "ebc94355-e777-4eae-b667-eaf45a91e68c", "taskName": "Task-4", "characters": 1, "scenes": 1, "clips": 5, "transitions": 4}
{"timestamp": "2025-11-15T01:08:52.155529Z", "level": "INFO", "module": "main", "message": "Scene planning complete", "job_id": "ebc94355-e777-4eae-b667-eaf45a91e68c", "taskName": "Task-4", "characters": 1, "scenes": 1, "clips": 5}
{"timestamp": "2025-11-15T01:08:52.159035Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-7", "job_id": "7a37f515-6855-4f04-940b-3d1b8580d8bf", "model": "gpt-4o", "system_prompt_length": 6744, "user_prompt_length": 637}
{"timestamp": "2025-11-15T01:08:52.159207Z", "level": "INFO", "module": "llm_client", "message": "Scene plan generated successfully", "taskName": "Task-7", "job_id": "7a37f515-6855-4f04-940b-3d1b8580d8bf", "model": "gpt-4o", "input_tokens": 1000, "output_tokens": 500, "cost": 0.0125}
{"timestamp": "2025-11-15T01:08:52.161273Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-10", "job_id": "76833ee9-ef20-4c2b-b8fe-56c4eaa1003c", "model": "gpt-4o", "system_prompt_length": 6744, "user_prompt_length": 618}
{"timestamp": "2025-11-15T01:08:52.161358Z", "level": "WARNING", "module": "llm_client", "message": "Rate limit error: Rate limit exceeded", "taskName": "Task-10", "job_id": "76833ee9-ef20-4c2b-b8fe-56c4eaa1003c"}
{"timestamp": "2025-11-15T01:08:52.161407Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/3 for generate_scene_plan after 2s delay", "taskName": "Task-10", "error": "Rate limit error: Rate limit exceeded", "attempt": 1}
{"timestamp": "2025-11-15T01:08:54.163181Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-10", "job_id": "76833ee9-ef20-4c2b-b8fe-56c4eaa1003c", "model": "gpt-4o", "system_prompt_length": 6744, "user_prompt_length": 618}
{"timestamp": "2025-11-15T01:08:54.163374Z", "level": "WARNING", "module": "llm_client", "message": "Rate limit error: Rate limit exceeded", "taskName": "Task-10", "job_id": "76833ee9-ef20-4c2b-b8fe-56c4eaa1003c"}
{"timestamp": "2025-11-15T01:08:54.163483Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 2/3 for generate_scene_plan after 4s delay", "taskName": "Task-10", "error": "Rate limit error: Rate limit exceeded", "attempt": 2}
{"timestamp": "2025-11-15T01:08:58.165744Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-10", "job_id": "76833ee9-ef20-4c2b-b8fe-56c4eaa1003c", "model": "gpt-4o", "system_prompt_length": 6744, "user_prompt_length": 618}
{"timestamp": "2025-11-15T01:08:58.166451Z", "level": "WARNING", "module": "llm_client", "message": "Rate limit error: Rate limit exceeded", "taskName": "Task-10", "job_id": "76833ee9-ef20-4c2b-b8fe-56c4eaa1003c"}
{"timestamp": "2025-11-15T01:08:58.166695Z", "level": "ERROR", "module": "retry", "message": "All 3 retry attempts failed for generate_scene_plan", "taskName": "Task-10", "error": "Rate limit error: Rate limit exceeded"}
{"timestamp": "2025-11-15T01:08:58.172581Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-13", "job_id": "e929aefa-c937-4191-b058-e90169918d8d", "model": "gpt-4o", "system_prompt_length": 6744, "user_prompt_length": 618}
{"timestamp": "2025-11-15T01:08:58.173219Z", "level": "ERROR", "module": "llm_client", "message": "Failed to parse LLM JSON response: Expecting value: line 1 column 1 (char 0)", "taskName": "Task-13", "job_id": "e929aefa-c937-4191-b058-e90169918d8d", "response_preview": "not valid json"}
{"timestamp": "2025-11-15T01:08:58.176786Z", "level": "ERROR", "module": "llm_client", "message": "Unexpected error in LLM call: Invalid JSON from LLM: Expecting value: line 1 column 1 (char 0)", "taskName": "Task-13", "job_id": "e929aefa-c937-4191-b058-e90169918d8d", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 441, in generate_scene_plan\n    scene_plan_dict = json.loads(content)\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/json/__init__.py\", line 346, in loads\n    return _default_decoder.decode(s)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/json/decoder.py\", line 345, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/json/decoder.py\", line 363, in raw_decode\n    raise JSONDecodeError(\"Expecting value\", s, err.value) from None\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 447, in generate_scene_plan\n    raise RetryableError(f\"Invalid JSON from LLM: {str(e)}\", job_id=job_id) from e\nshared.errors.RetryableError: Invalid JSON from LLM: Expecting value: line 1 column 1 (char 0)"}
{"timestamp": "2025-11-15T01:08:58.177952Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in generate_scene_plan: Unexpected error: Invalid JSON from LLM: Expecting value: line 1 column 1 (char 0)", "taskName": "Task-13", "error": "Unexpected error: Invalid JSON from LLM: Expecting value: line 1 column 1 (char 0)"}
{"timestamp": "2025-11-15T01:08:58.180804Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-16", "job_id": "536b492e-f544-4b99-9aeb-8a7bb809e88e", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T01:08:58.181191Z", "level": "INFO", "module": "script_generator", "message": "Generated 5 clip scripts", "taskName": "Task-16", "clip_count": 5}
{"timestamp": "2025-11-15T01:08:58.181368Z", "level": "INFO", "module": "transition_planner", "message": "Planned 4 transitions", "taskName": "Task-16", "transition_count": 4}
{"timestamp": "2025-11-15T01:08:58.181564Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "taskName": "Task-16", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:08:58.181698Z", "level": "WARNING", "module": "planner", "message": "Style inconsistencies found, refining...", "taskName": "Task-16"}
{"timestamp": "2025-11-15T01:08:58.181821Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "taskName": "Task-16", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:08:58.181901Z", "level": "WARNING", "module": "style_analyzer", "message": "Style inconsistencies found, but auto-refinement not implemented", "taskName": "Task-16"}
{"timestamp": "2025-11-15T01:08:58.181995Z", "level": "INFO", "module": "validator", "message": "ScenePlan validation passed", "taskName": "Task-16"}
{"timestamp": "2025-11-15T01:08:58.182080Z", "level": "INFO", "module": "planner", "message": "Scene planning complete", "taskName": "Task-16", "job_id": "536b492e-f544-4b99-9aeb-8a7bb809e88e", "characters": 1, "scenes": 1, "clips": 5, "transitions": 4}
{"timestamp": "2025-11-15T01:08:58.187233Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-19", "job_id": "5f38dfde-8ad3-4d0b-a6f7-8cc0bc4f788f", "user_prompt_length": 42, "clip_count": 3}
{"timestamp": "2025-11-15T01:08:58.187625Z", "level": "INFO", "module": "script_generator", "message": "Generated 3 clip scripts", "taskName": "Task-19", "clip_count": 3}
{"timestamp": "2025-11-15T01:08:58.187730Z", "level": "INFO", "module": "transition_planner", "message": "Planned 2 transitions", "taskName": "Task-19", "transition_count": 2}
{"timestamp": "2025-11-15T01:08:58.187891Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "taskName": "Task-19", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:08:58.187961Z", "level": "WARNING", "module": "planner", "message": "Style inconsistencies found, refining...", "taskName": "Task-19"}
{"timestamp": "2025-11-15T01:08:58.188029Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "taskName": "Task-19", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:08:58.188083Z", "level": "WARNING", "module": "style_analyzer", "message": "Style inconsistencies found, but auto-refinement not implemented", "taskName": "Task-19"}
{"timestamp": "2025-11-15T01:08:58.188231Z", "level": "INFO", "module": "validator", "message": "ScenePlan validation passed", "taskName": "Task-19"}
{"timestamp": "2025-11-15T01:08:58.188356Z", "level": "INFO", "module": "planner", "message": "Scene planning complete", "taskName": "Task-19", "job_id": "5f38dfde-8ad3-4d0b-a6f7-8cc0bc4f788f", "characters": 1, "scenes": 1, "clips": 3, "transitions": 2}
{"timestamp": "2025-11-15T01:08:58.190211Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-22", "job_id": "cdeb4981-a527-4883-ab5d-4686d7d8e607", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T01:08:58.190670Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-22", "job_id": "cdeb4981-a527-4883-ab5d-4686d7d8e607", "model": "gpt-4o", "system_prompt_length": 37860, "user_prompt_length": 1101}
{"timestamp": "2025-11-15T01:09:03.242712Z", "level": "INFO", "module": "main", "message": "Processing scene planning", "job_id": "f3243c74-0043-450d-9d80-feaf10923e89", "taskName": "Task-1", "user_prompt_length": 62, "clip_count": 5, "bpm": 120.0, "mood": "energetic"}
{"timestamp": "2025-11-15T01:09:03.242791Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "job_id": "f3243c74-0043-450d-9d80-feaf10923e89", "taskName": "Task-1", "user_prompt_length": 62, "clip_count": 5}
{"timestamp": "2025-11-15T01:09:03.242924Z", "level": "INFO", "module": "script_generator", "message": "Generated 5 clip scripts", "job_id": "f3243c74-0043-450d-9d80-feaf10923e89", "taskName": "Task-1", "clip_count": 5}
{"timestamp": "2025-11-15T01:09:03.242990Z", "level": "INFO", "module": "transition_planner", "message": "Planned 4 transitions", "job_id": "f3243c74-0043-450d-9d80-feaf10923e89", "taskName": "Task-1", "transition_count": 4}
{"timestamp": "2025-11-15T01:09:03.243042Z", "level": "WARNING", "module": "planner", "message": "LLM job_id mismatch: f1b2d78a-5e53-4094-9121-9db0aa7bb614 vs f3243c74-0043-450d-9d80-feaf10923e89, using provided job_id", "job_id": "f3243c74-0043-450d-9d80-feaf10923e89", "taskName": "Task-1"}
{"timestamp": "2025-11-15T01:09:03.243092Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "job_id": "f3243c74-0043-450d-9d80-feaf10923e89", "taskName": "Task-1", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:09:03.243129Z", "level": "WARNING", "module": "planner", "message": "Style inconsistencies found, refining...", "job_id": "f3243c74-0043-450d-9d80-feaf10923e89", "taskName": "Task-1"}
{"timestamp": "2025-11-15T01:09:03.243164Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "job_id": "f3243c74-0043-450d-9d80-feaf10923e89", "taskName": "Task-1", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:09:03.243192Z", "level": "WARNING", "module": "style_analyzer", "message": "Style inconsistencies found, but auto-refinement not implemented", "job_id": "f3243c74-0043-450d-9d80-feaf10923e89", "taskName": "Task-1"}
{"timestamp": "2025-11-15T01:09:03.243227Z", "level": "INFO", "module": "validator", "message": "ScenePlan validation passed", "job_id": "f3243c74-0043-450d-9d80-feaf10923e89", "taskName": "Task-1"}
{"timestamp": "2025-11-15T01:09:03.243258Z", "level": "INFO", "module": "planner", "message": "Scene planning complete", "job_id": "f3243c74-0043-450d-9d80-feaf10923e89", "taskName": "Task-1", "characters": 1, "scenes": 1, "clips": 5, "transitions": 4}
{"timestamp": "2025-11-15T01:09:03.243289Z", "level": "INFO", "module": "main", "message": "Scene planning complete", "job_id": "f3243c74-0043-450d-9d80-feaf10923e89", "taskName": "Task-1", "characters": 1, "scenes": 1, "clips": 5}
{"timestamp": "2025-11-15T01:09:03.244609Z", "level": "INFO", "module": "main", "message": "Processing scene planning", "job_id": "e0864c57-30fb-4be6-95ab-611814c205bf", "taskName": "Task-4", "user_prompt_length": 130, "clip_count": 5, "bpm": 140.0, "mood": "energetic"}
{"timestamp": "2025-11-15T01:09:03.244651Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "job_id": "e0864c57-30fb-4be6-95ab-611814c205bf", "taskName": "Task-4", "user_prompt_length": 130, "clip_count": 5}
{"timestamp": "2025-11-15T01:09:03.244757Z", "level": "INFO", "module": "script_generator", "message": "Generated 5 clip scripts", "job_id": "e0864c57-30fb-4be6-95ab-611814c205bf", "taskName": "Task-4", "clip_count": 5}
{"timestamp": "2025-11-15T01:09:03.244807Z", "level": "INFO", "module": "transition_planner", "message": "Planned 4 transitions", "job_id": "e0864c57-30fb-4be6-95ab-611814c205bf", "taskName": "Task-4", "transition_count": 4}
{"timestamp": "2025-11-15T01:09:03.244851Z", "level": "WARNING", "module": "planner", "message": "LLM job_id mismatch: b1bceb0f-ded4-4e8d-aa4b-ee3e47bd5344 vs e0864c57-30fb-4be6-95ab-611814c205bf, using provided job_id", "job_id": "e0864c57-30fb-4be6-95ab-611814c205bf", "taskName": "Task-4"}
{"timestamp": "2025-11-15T01:09:03.244893Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "job_id": "e0864c57-30fb-4be6-95ab-611814c205bf", "taskName": "Task-4", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:09:03.244931Z", "level": "WARNING", "module": "planner", "message": "Style inconsistencies found, refining...", "job_id": "e0864c57-30fb-4be6-95ab-611814c205bf", "taskName": "Task-4"}
{"timestamp": "2025-11-15T01:09:03.244977Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "job_id": "e0864c57-30fb-4be6-95ab-611814c205bf", "taskName": "Task-4", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:09:03.245012Z", "level": "WARNING", "module": "style_analyzer", "message": "Style inconsistencies found, but auto-refinement not implemented", "job_id": "e0864c57-30fb-4be6-95ab-611814c205bf", "taskName": "Task-4"}
{"timestamp": "2025-11-15T01:09:03.245048Z", "level": "INFO", "module": "validator", "message": "ScenePlan validation passed", "job_id": "e0864c57-30fb-4be6-95ab-611814c205bf", "taskName": "Task-4"}
{"timestamp": "2025-11-15T01:09:03.245086Z", "level": "INFO", "module": "planner", "message": "Scene planning complete", "job_id": "e0864c57-30fb-4be6-95ab-611814c205bf", "taskName": "Task-4", "characters": 1, "scenes": 1, "clips": 5, "transitions": 4}
{"timestamp": "2025-11-15T01:09:03.245120Z", "level": "INFO", "module": "main", "message": "Scene planning complete", "job_id": "e0864c57-30fb-4be6-95ab-611814c205bf", "taskName": "Task-4", "characters": 1, "scenes": 1, "clips": 5}
{"timestamp": "2025-11-15T01:09:03.247830Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-7", "job_id": "756dc9c6-f36d-49d3-951b-1e50680d80f9", "model": "gpt-4o", "system_prompt_length": 6744, "user_prompt_length": 637}
{"timestamp": "2025-11-15T01:09:03.247960Z", "level": "INFO", "module": "llm_client", "message": "Scene plan generated successfully", "taskName": "Task-7", "job_id": "756dc9c6-f36d-49d3-951b-1e50680d80f9", "model": "gpt-4o", "input_tokens": 1000, "output_tokens": 500, "cost": 0.0125}
{"timestamp": "2025-11-15T01:09:03.249006Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-10", "job_id": "dc8dc04e-7720-475f-877d-60db2c480c06", "model": "gpt-4o", "system_prompt_length": 6744, "user_prompt_length": 618}
{"timestamp": "2025-11-15T01:09:03.249071Z", "level": "WARNING", "module": "llm_client", "message": "Rate limit error: Rate limit exceeded", "taskName": "Task-10", "job_id": "dc8dc04e-7720-475f-877d-60db2c480c06"}
{"timestamp": "2025-11-15T01:09:03.249119Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/3 for generate_scene_plan after 2s delay", "taskName": "Task-10", "error": "Rate limit error: Rate limit exceeded", "attempt": 1}
{"timestamp": "2025-11-15T01:09:05.250933Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-10", "job_id": "dc8dc04e-7720-475f-877d-60db2c480c06", "model": "gpt-4o", "system_prompt_length": 6744, "user_prompt_length": 618}
{"timestamp": "2025-11-15T01:09:05.251300Z", "level": "WARNING", "module": "llm_client", "message": "Rate limit error: Rate limit exceeded", "taskName": "Task-10", "job_id": "dc8dc04e-7720-475f-877d-60db2c480c06"}
{"timestamp": "2025-11-15T01:09:05.251442Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 2/3 for generate_scene_plan after 4s delay", "taskName": "Task-10", "error": "Rate limit error: Rate limit exceeded", "attempt": 2}
{"timestamp": "2025-11-15T01:09:09.253519Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-10", "job_id": "dc8dc04e-7720-475f-877d-60db2c480c06", "model": "gpt-4o", "system_prompt_length": 6744, "user_prompt_length": 618}
{"timestamp": "2025-11-15T01:09:09.255547Z", "level": "WARNING", "module": "llm_client", "message": "Rate limit error: Rate limit exceeded", "taskName": "Task-10", "job_id": "dc8dc04e-7720-475f-877d-60db2c480c06"}
{"timestamp": "2025-11-15T01:09:09.256009Z", "level": "ERROR", "module": "retry", "message": "All 3 retry attempts failed for generate_scene_plan", "taskName": "Task-10", "error": "Rate limit error: Rate limit exceeded"}
{"timestamp": "2025-11-15T01:09:09.264731Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-13", "job_id": "d0aedcd5-cf34-4b59-9e37-3d0cc65f3d52", "model": "gpt-4o", "system_prompt_length": 6744, "user_prompt_length": 618}
{"timestamp": "2025-11-15T01:09:09.265033Z", "level": "ERROR", "module": "llm_client", "message": "Failed to parse LLM JSON response: Expecting value: line 1 column 1 (char 0)", "taskName": "Task-13", "job_id": "d0aedcd5-cf34-4b59-9e37-3d0cc65f3d52", "response_preview": "not valid json"}
{"timestamp": "2025-11-15T01:09:09.268461Z", "level": "ERROR", "module": "llm_client", "message": "Unexpected error in LLM call: Invalid JSON from LLM: Expecting value: line 1 column 1 (char 0)", "taskName": "Task-13", "job_id": "d0aedcd5-cf34-4b59-9e37-3d0cc65f3d52", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 441, in generate_scene_plan\n    scene_plan_dict = json.loads(content)\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/json/__init__.py\", line 346, in loads\n    return _default_decoder.decode(s)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/json/decoder.py\", line 345, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/json/decoder.py\", line 363, in raw_decode\n    raise JSONDecodeError(\"Expecting value\", s, err.value) from None\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 447, in generate_scene_plan\n    raise RetryableError(f\"Invalid JSON from LLM: {str(e)}\", job_id=job_id) from e\nshared.errors.RetryableError: Invalid JSON from LLM: Expecting value: line 1 column 1 (char 0)"}
{"timestamp": "2025-11-15T01:09:09.269496Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in generate_scene_plan: Unexpected error: Invalid JSON from LLM: Expecting value: line 1 column 1 (char 0)", "taskName": "Task-13", "error": "Unexpected error: Invalid JSON from LLM: Expecting value: line 1 column 1 (char 0)"}
{"timestamp": "2025-11-15T01:09:09.272209Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-16", "job_id": "a2437611-1c44-4a18-8b2e-048c07343763", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T01:09:09.272844Z", "level": "INFO", "module": "script_generator", "message": "Generated 5 clip scripts", "taskName": "Task-16", "clip_count": 5}
{"timestamp": "2025-11-15T01:09:09.273019Z", "level": "INFO", "module": "transition_planner", "message": "Planned 4 transitions", "taskName": "Task-16", "transition_count": 4}
{"timestamp": "2025-11-15T01:09:09.273178Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "taskName": "Task-16", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:09:09.273254Z", "level": "WARNING", "module": "planner", "message": "Style inconsistencies found, refining...", "taskName": "Task-16"}
{"timestamp": "2025-11-15T01:09:09.273323Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "taskName": "Task-16", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:09:09.273382Z", "level": "WARNING", "module": "style_analyzer", "message": "Style inconsistencies found, but auto-refinement not implemented", "taskName": "Task-16"}
{"timestamp": "2025-11-15T01:09:09.273461Z", "level": "INFO", "module": "validator", "message": "ScenePlan validation passed", "taskName": "Task-16"}
{"timestamp": "2025-11-15T01:09:09.273528Z", "level": "INFO", "module": "planner", "message": "Scene planning complete", "taskName": "Task-16", "job_id": "a2437611-1c44-4a18-8b2e-048c07343763", "characters": 1, "scenes": 1, "clips": 5, "transitions": 4}
{"timestamp": "2025-11-15T01:09:09.276124Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-19", "job_id": "d655c237-46f6-4905-ba7f-7015be9bdba6", "user_prompt_length": 42, "clip_count": 3}
{"timestamp": "2025-11-15T01:09:09.276422Z", "level": "INFO", "module": "script_generator", "message": "Generated 3 clip scripts", "taskName": "Task-19", "clip_count": 3}
{"timestamp": "2025-11-15T01:09:09.276523Z", "level": "INFO", "module": "transition_planner", "message": "Planned 2 transitions", "taskName": "Task-19", "transition_count": 2}
{"timestamp": "2025-11-15T01:09:09.276626Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "taskName": "Task-19", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:09:09.276694Z", "level": "WARNING", "module": "planner", "message": "Style inconsistencies found, refining...", "taskName": "Task-19"}
{"timestamp": "2025-11-15T01:09:09.276772Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "taskName": "Task-19", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:09:09.276834Z", "level": "WARNING", "module": "style_analyzer", "message": "Style inconsistencies found, but auto-refinement not implemented", "taskName": "Task-19"}
{"timestamp": "2025-11-15T01:09:09.277003Z", "level": "INFO", "module": "validator", "message": "ScenePlan validation passed", "taskName": "Task-19"}
{"timestamp": "2025-11-15T01:09:09.277108Z", "level": "INFO", "module": "planner", "message": "Scene planning complete", "taskName": "Task-19", "job_id": "d655c237-46f6-4905-ba7f-7015be9bdba6", "characters": 1, "scenes": 1, "clips": 3, "transitions": 2}
{"timestamp": "2025-11-15T01:09:09.278820Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-22", "job_id": "8dec00ec-792f-4467-b5cb-27d6ea9ea3ee", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T01:09:09.279089Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-22", "job_id": "8dec00ec-792f-4467-b5cb-27d6ea9ea3ee", "model": "gpt-4o", "system_prompt_length": 37860, "user_prompt_length": 1101}
{"timestamp": "2025-11-15T01:09:27.675719Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job cdeb4981-a527-4883-ab5d-4686d7d8e607: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(cdeb4981-a527-4883-ab5d-4686d7d8e607) is not present in table \"jobs\".'}", "taskName": "Task-22", "job_id": "cdeb4981-a527-4883-ab5d-4686d7d8e607", "error": "Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(cdeb4981-a527-4883-ab5d-4686d7d8e607) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:09:27.682528Z", "level": "ERROR", "module": "llm_client", "message": "Unexpected error in LLM call: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(cdeb4981-a527-4883-ab5d-4686d7d8e607) is not present in table \"jobs\".'}", "taskName": "Task-22", "job_id": "cdeb4981-a527-4883-ab5d-4686d7d8e607", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(cdeb4981-a527-4883-ab5d-4686d7d8e607) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(cdeb4981-a527-4883-ab5d-4686d7d8e607) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(cdeb4981-a527-4883-ab5d-4686d7d8e607) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:09:27.684610Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in generate_scene_plan: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(cdeb4981-a527-4883-ab5d-4686d7d8e607) is not present in table \"jobs\".'}", "taskName": "Task-22", "error": "Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(cdeb4981-a527-4883-ab5d-4686d7d8e607) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:09:27.688003Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(cdeb4981-a527-4883-ab5d-4686d7d8e607) is not present in table \"jobs\".'}", "taskName": "Task-22", "job_id": "cdeb4981-a527-4883-ab5d-4686d7d8e607", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(cdeb4981-a527-4883-ab5d-4686d7d8e607) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(cdeb4981-a527-4883-ab5d-4686d7d8e607) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(cdeb4981-a527-4883-ab5d-4686d7d8e607) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 67, in plan_scenes\n    llm_output = await generate_scene_plan(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/retry.py\", line 49, in async_wrapper\n    return await func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 492, in generate_scene_plan\n    raise GenerationError(f\"Unexpected error: {str(e)}\", job_id=job_id) from e\nshared.errors.GenerationError: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(cdeb4981-a527-4883-ab5d-4686d7d8e607) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:09:27.696686Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-25", "job_id": "90b2f422-3c40-4d9e-866c-45af19555701", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T01:09:27.697426Z", "level": "INFO", "module": "script_generator", "message": "Generated 5 clip scripts", "taskName": "Task-25", "clip_count": 5}
{"timestamp": "2025-11-15T01:09:27.697598Z", "level": "INFO", "module": "transition_planner", "message": "Planned 4 transitions", "taskName": "Task-25", "transition_count": 4}
{"timestamp": "2025-11-15T01:09:27.697746Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "taskName": "Task-25", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:09:27.697816Z", "level": "WARNING", "module": "planner", "message": "Style inconsistencies found, refining...", "taskName": "Task-25"}
{"timestamp": "2025-11-15T01:09:27.697890Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "taskName": "Task-25", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:09:27.697948Z", "level": "WARNING", "module": "style_analyzer", "message": "Style inconsistencies found, but auto-refinement not implemented", "taskName": "Task-25"}
{"timestamp": "2025-11-15T01:09:27.698021Z", "level": "INFO", "module": "validator", "message": "ScenePlan validation passed", "taskName": "Task-25"}
{"timestamp": "2025-11-15T01:09:27.698091Z", "level": "INFO", "module": "planner", "message": "Scene planning complete", "taskName": "Task-25", "job_id": "90b2f422-3c40-4d9e-866c-45af19555701", "characters": 1, "scenes": 1, "clips": 5, "transitions": 4}
{"timestamp": "2025-11-15T01:09:27.699711Z", "level": "INFO", "module": "main", "message": "Processing scene planning", "job_id": "c45a954c-01f5-446b-821d-8beb45d27cce", "taskName": "Task-28", "user_prompt_length": 83, "clip_count": 5, "bpm": 120.0, "mood": "energetic"}
{"timestamp": "2025-11-15T01:09:27.699792Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "job_id": "c45a954c-01f5-446b-821d-8beb45d27cce", "taskName": "Task-28", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T01:09:27.700027Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "job_id": "c45a954c-01f5-446b-821d-8beb45d27cce", "taskName": "Task-28", "model": "gpt-4o", "system_prompt_length": 37860, "user_prompt_length": 1101}
{"timestamp": "2025-11-15T01:09:37.659382Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job 8dec00ec-792f-4467-b5cb-27d6ea9ea3ee: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(8dec00ec-792f-4467-b5cb-27d6ea9ea3ee) is not present in table \"jobs\".'}", "taskName": "Task-22", "job_id": "8dec00ec-792f-4467-b5cb-27d6ea9ea3ee", "error": "Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(8dec00ec-792f-4467-b5cb-27d6ea9ea3ee) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:09:37.684346Z", "level": "ERROR", "module": "llm_client", "message": "Unexpected error in LLM call: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(8dec00ec-792f-4467-b5cb-27d6ea9ea3ee) is not present in table \"jobs\".'}", "taskName": "Task-22", "job_id": "8dec00ec-792f-4467-b5cb-27d6ea9ea3ee", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(8dec00ec-792f-4467-b5cb-27d6ea9ea3ee) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(8dec00ec-792f-4467-b5cb-27d6ea9ea3ee) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(8dec00ec-792f-4467-b5cb-27d6ea9ea3ee) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:09:37.687141Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in generate_scene_plan: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(8dec00ec-792f-4467-b5cb-27d6ea9ea3ee) is not present in table \"jobs\".'}", "taskName": "Task-22", "error": "Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(8dec00ec-792f-4467-b5cb-27d6ea9ea3ee) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:09:37.690885Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(8dec00ec-792f-4467-b5cb-27d6ea9ea3ee) is not present in table \"jobs\".'}", "taskName": "Task-22", "job_id": "8dec00ec-792f-4467-b5cb-27d6ea9ea3ee", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(8dec00ec-792f-4467-b5cb-27d6ea9ea3ee) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(8dec00ec-792f-4467-b5cb-27d6ea9ea3ee) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(8dec00ec-792f-4467-b5cb-27d6ea9ea3ee) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 67, in plan_scenes\n    llm_output = await generate_scene_plan(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/retry.py\", line 49, in async_wrapper\n    return await func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 492, in generate_scene_plan\n    raise GenerationError(f\"Unexpected error: {str(e)}\", job_id=job_id) from e\nshared.errors.GenerationError: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(8dec00ec-792f-4467-b5cb-27d6ea9ea3ee) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:09:37.699178Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-25", "job_id": "20fa445f-54a1-41fc-8015-47708f300138", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T01:09:37.699827Z", "level": "INFO", "module": "script_generator", "message": "Generated 5 clip scripts", "taskName": "Task-25", "clip_count": 5}
{"timestamp": "2025-11-15T01:09:37.700001Z", "level": "INFO", "module": "transition_planner", "message": "Planned 4 transitions", "taskName": "Task-25", "transition_count": 4}
{"timestamp": "2025-11-15T01:09:37.700152Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "taskName": "Task-25", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:09:37.700225Z", "level": "WARNING", "module": "planner", "message": "Style inconsistencies found, refining...", "taskName": "Task-25"}
{"timestamp": "2025-11-15T01:09:37.700298Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "taskName": "Task-25", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:09:37.700365Z", "level": "WARNING", "module": "style_analyzer", "message": "Style inconsistencies found, but auto-refinement not implemented", "taskName": "Task-25"}
{"timestamp": "2025-11-15T01:09:37.700448Z", "level": "INFO", "module": "validator", "message": "ScenePlan validation passed", "taskName": "Task-25"}
{"timestamp": "2025-11-15T01:09:37.700516Z", "level": "INFO", "module": "planner", "message": "Scene planning complete", "taskName": "Task-25", "job_id": "20fa445f-54a1-41fc-8015-47708f300138", "characters": 1, "scenes": 1, "clips": 5, "transitions": 4}
{"timestamp": "2025-11-15T01:09:37.702300Z", "level": "INFO", "module": "main", "message": "Processing scene planning", "job_id": "662a4cb6-107e-4fed-be27-94492268633c", "taskName": "Task-28", "user_prompt_length": 83, "clip_count": 5, "bpm": 120.0, "mood": "energetic"}
{"timestamp": "2025-11-15T01:09:37.702386Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "job_id": "662a4cb6-107e-4fed-be27-94492268633c", "taskName": "Task-28", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T01:09:37.702663Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "job_id": "662a4cb6-107e-4fed-be27-94492268633c", "taskName": "Task-28", "model": "gpt-4o", "system_prompt_length": 37860, "user_prompt_length": 1101}
{"timestamp": "2025-11-15T01:09:53.698400Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job c45a954c-01f5-446b-821d-8beb45d27cce: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(c45a954c-01f5-446b-821d-8beb45d27cce) is not present in table \"jobs\".'}", "job_id": "c45a954c-01f5-446b-821d-8beb45d27cce", "taskName": "Task-28", "error": "Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(c45a954c-01f5-446b-821d-8beb45d27cce) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:09:53.702129Z", "level": "ERROR", "module": "llm_client", "message": "Unexpected error in LLM call: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(c45a954c-01f5-446b-821d-8beb45d27cce) is not present in table \"jobs\".'}", "job_id": "c45a954c-01f5-446b-821d-8beb45d27cce", "taskName": "Task-28", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(c45a954c-01f5-446b-821d-8beb45d27cce) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(c45a954c-01f5-446b-821d-8beb45d27cce) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(c45a954c-01f5-446b-821d-8beb45d27cce) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:09:53.704187Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in generate_scene_plan: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(c45a954c-01f5-446b-821d-8beb45d27cce) is not present in table \"jobs\".'}", "job_id": "c45a954c-01f5-446b-821d-8beb45d27cce", "taskName": "Task-28", "error": "Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(c45a954c-01f5-446b-821d-8beb45d27cce) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:09:53.707021Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(c45a954c-01f5-446b-821d-8beb45d27cce) is not present in table \"jobs\".'}", "job_id": "c45a954c-01f5-446b-821d-8beb45d27cce", "taskName": "Task-28", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(c45a954c-01f5-446b-821d-8beb45d27cce) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(c45a954c-01f5-446b-821d-8beb45d27cce) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(c45a954c-01f5-446b-821d-8beb45d27cce) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 67, in plan_scenes\n    llm_output = await generate_scene_plan(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/retry.py\", line 49, in async_wrapper\n    return await func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 492, in generate_scene_plan\n    raise GenerationError(f\"Unexpected error: {str(e)}\", job_id=job_id) from e\nshared.errors.GenerationError: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(c45a954c-01f5-446b-821d-8beb45d27cce) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:09:53.793201Z", "level": "INFO", "module": "script_generator", "message": "Generated 3 clip scripts", "taskName": null, "clip_count": 3}
{"timestamp": "2025-11-15T01:09:53.793838Z", "level": "INFO", "module": "transition_planner", "message": "Planned 2 transitions", "taskName": null, "transition_count": 2}
{"timestamp": "2025-11-15T01:09:53.794956Z", "level": "INFO", "module": "validator", "message": "ScenePlan validation passed", "taskName": null}
{"timestamp": "2025-11-15T01:09:53.795356Z", "level": "WARNING", "module": "validator", "message": "Validation found 1 issues", "taskName": null, "issues": "['Clip 0 start time mismatch: 1.0s vs 0.0s (tolerance: \u00b10.5s)']"}
{"timestamp": "2025-11-15T01:09:53.795728Z", "level": "WARNING", "module": "validator", "message": "Transition count mismatch: 2 vs 1", "taskName": null}
{"timestamp": "2025-11-15T01:09:53.795782Z", "level": "WARNING", "module": "validator", "message": "Validation found 2 issues", "taskName": null, "issues": "['Transition count mismatch: 2 transitions, expected 1', 'Invalid transition to_clip index: 2']"}
{"timestamp": "2025-11-15T01:09:53.796141Z", "level": "WARNING", "module": "validator", "message": "Validation found 1 issues", "taskName": null, "issues": "['Clip 0 references unknown character: nonexistent']"}
{"timestamp": "2025-11-15T01:09:53.796505Z", "level": "WARNING", "module": "validator", "message": "Validation found 1 issues", "taskName": null, "issues": "['Clip 0 references unknown scene: nonexistent']"}
{"timestamp": "2025-11-15T01:09:53.796886Z", "level": "WARNING", "module": "validator", "message": "Validation found 1 issues", "taskName": null, "issues": "['Missing color palette']"}
{"timestamp": "2025-11-15T01:09:53.797225Z", "level": "WARNING", "module": "validator", "message": "Clip count mismatch: 3 vs 2", "taskName": null, "expected": 2, "actual": 3}
{"timestamp": "2025-11-15T01:09:53.797272Z", "level": "WARNING", "module": "validator", "message": "Transition count mismatch: 1 vs 2", "taskName": null}
{"timestamp": "2025-11-15T01:09:53.797315Z", "level": "WARNING", "module": "validator", "message": "Validation found 2 issues", "taskName": null, "issues": "['Clip count mismatch: 3 clips, expected 2', 'Transition count mismatch: 1 transitions, expected 2']"}
{"timestamp": "2025-11-15T01:10:00.095751Z", "level": "INFO", "module": "main", "message": "Processing scene planning", "job_id": "b6a7fe43-9bde-4ab0-838f-e821f7f10895", "taskName": "Task-1", "user_prompt_length": 83, "clip_count": 5, "bpm": 120.0, "mood": "energetic"}
{"timestamp": "2025-11-15T01:10:00.095946Z", "level": "INFO", "module": "main", "message": "Scene planning complete", "job_id": "b6a7fe43-9bde-4ab0-838f-e821f7f10895", "taskName": "Task-1", "characters": 1, "scenes": 1, "clips": 5}
{"timestamp": "2025-11-15T01:10:02.952914Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job 662a4cb6-107e-4fed-be27-94492268633c: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(662a4cb6-107e-4fed-be27-94492268633c) is not present in table \"jobs\".'}", "job_id": "662a4cb6-107e-4fed-be27-94492268633c", "taskName": "Task-28", "error": "Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(662a4cb6-107e-4fed-be27-94492268633c) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:10:02.960992Z", "level": "ERROR", "module": "llm_client", "message": "Unexpected error in LLM call: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(662a4cb6-107e-4fed-be27-94492268633c) is not present in table \"jobs\".'}", "job_id": "662a4cb6-107e-4fed-be27-94492268633c", "taskName": "Task-28", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(662a4cb6-107e-4fed-be27-94492268633c) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(662a4cb6-107e-4fed-be27-94492268633c) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(662a4cb6-107e-4fed-be27-94492268633c) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:10:02.964493Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in generate_scene_plan: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(662a4cb6-107e-4fed-be27-94492268633c) is not present in table \"jobs\".'}", "job_id": "662a4cb6-107e-4fed-be27-94492268633c", "taskName": "Task-28", "error": "Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(662a4cb6-107e-4fed-be27-94492268633c) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:10:02.970016Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(662a4cb6-107e-4fed-be27-94492268633c) is not present in table \"jobs\".'}", "job_id": "662a4cb6-107e-4fed-be27-94492268633c", "taskName": "Task-28", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(662a4cb6-107e-4fed-be27-94492268633c) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(662a4cb6-107e-4fed-be27-94492268633c) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(662a4cb6-107e-4fed-be27-94492268633c) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 67, in plan_scenes\n    llm_output = await generate_scene_plan(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/retry.py\", line 49, in async_wrapper\n    return await func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 492, in generate_scene_plan\n    raise GenerationError(f\"Unexpected error: {str(e)}\", job_id=job_id) from e\nshared.errors.GenerationError: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(662a4cb6-107e-4fed-be27-94492268633c) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:10:03.053539Z", "level": "INFO", "module": "script_generator", "message": "Generated 3 clip scripts", "taskName": null, "clip_count": 3}
{"timestamp": "2025-11-15T01:10:03.054486Z", "level": "INFO", "module": "transition_planner", "message": "Planned 2 transitions", "taskName": null, "transition_count": 2}
{"timestamp": "2025-11-15T01:10:03.055617Z", "level": "INFO", "module": "validator", "message": "ScenePlan validation passed", "taskName": null}
{"timestamp": "2025-11-15T01:10:03.055981Z", "level": "WARNING", "module": "validator", "message": "Validation found 1 issues", "taskName": null, "issues": "['Clip 0 start time mismatch: 1.0s vs 0.0s (tolerance: \u00b10.5s)']"}
{"timestamp": "2025-11-15T01:10:03.056302Z", "level": "WARNING", "module": "validator", "message": "Transition count mismatch: 2 vs 1", "taskName": null}
{"timestamp": "2025-11-15T01:10:03.056340Z", "level": "WARNING", "module": "validator", "message": "Validation found 2 issues", "taskName": null, "issues": "['Transition count mismatch: 2 transitions, expected 1', 'Invalid transition to_clip index: 2']"}
{"timestamp": "2025-11-15T01:10:03.056652Z", "level": "WARNING", "module": "validator", "message": "Validation found 1 issues", "taskName": null, "issues": "['Clip 0 references unknown character: nonexistent']"}
{"timestamp": "2025-11-15T01:10:03.056957Z", "level": "WARNING", "module": "validator", "message": "Validation found 1 issues", "taskName": null, "issues": "['Clip 0 references unknown scene: nonexistent']"}
{"timestamp": "2025-11-15T01:10:03.057539Z", "level": "WARNING", "module": "validator", "message": "Validation found 1 issues", "taskName": null, "issues": "['Missing color palette']"}
{"timestamp": "2025-11-15T01:10:03.057930Z", "level": "WARNING", "module": "validator", "message": "Clip count mismatch: 3 vs 2", "taskName": null, "expected": 2, "actual": 3}
{"timestamp": "2025-11-15T01:10:03.057986Z", "level": "WARNING", "module": "validator", "message": "Transition count mismatch: 1 vs 2", "taskName": null}
{"timestamp": "2025-11-15T01:10:03.058031Z", "level": "WARNING", "module": "validator", "message": "Validation found 2 issues", "taskName": null, "issues": "['Clip count mismatch: 3 clips, expected 2', 'Transition count mismatch: 1 transitions, expected 2']"}
{"timestamp": "2025-11-15T01:10:03.568392Z", "level": "INFO", "module": "main", "message": "Processing scene planning", "job_id": "0cbf3850-ecfb-42be-aecb-8a9f69394886", "taskName": "Task-1", "user_prompt_length": 62, "clip_count": 5, "bpm": 120.0, "mood": "energetic"}
{"timestamp": "2025-11-15T01:10:03.568500Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "job_id": "0cbf3850-ecfb-42be-aecb-8a9f69394886", "taskName": "Task-1", "user_prompt_length": 62, "clip_count": 5}
{"timestamp": "2025-11-15T01:10:03.568684Z", "level": "INFO", "module": "script_generator", "message": "Generated 5 clip scripts", "job_id": "0cbf3850-ecfb-42be-aecb-8a9f69394886", "taskName": "Task-1", "clip_count": 5}
{"timestamp": "2025-11-15T01:10:03.568770Z", "level": "INFO", "module": "transition_planner", "message": "Planned 4 transitions", "job_id": "0cbf3850-ecfb-42be-aecb-8a9f69394886", "taskName": "Task-1", "transition_count": 4}
{"timestamp": "2025-11-15T01:10:03.568850Z", "level": "WARNING", "module": "planner", "message": "LLM job_id mismatch: 9fe68288-000c-4d7b-83f9-4ad60095f1e4 vs 0cbf3850-ecfb-42be-aecb-8a9f69394886, using provided job_id", "job_id": "0cbf3850-ecfb-42be-aecb-8a9f69394886", "taskName": "Task-1"}
{"timestamp": "2025-11-15T01:10:03.568939Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "job_id": "0cbf3850-ecfb-42be-aecb-8a9f69394886", "taskName": "Task-1", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:10:03.569027Z", "level": "WARNING", "module": "planner", "message": "Style inconsistencies found, refining...", "job_id": "0cbf3850-ecfb-42be-aecb-8a9f69394886", "taskName": "Task-1"}
{"timestamp": "2025-11-15T01:10:03.569126Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "job_id": "0cbf3850-ecfb-42be-aecb-8a9f69394886", "taskName": "Task-1", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:10:03.569189Z", "level": "WARNING", "module": "style_analyzer", "message": "Style inconsistencies found, but auto-refinement not implemented", "job_id": "0cbf3850-ecfb-42be-aecb-8a9f69394886", "taskName": "Task-1"}
{"timestamp": "2025-11-15T01:10:03.569238Z", "level": "INFO", "module": "validator", "message": "ScenePlan validation passed", "job_id": "0cbf3850-ecfb-42be-aecb-8a9f69394886", "taskName": "Task-1"}
{"timestamp": "2025-11-15T01:10:03.569292Z", "level": "INFO", "module": "planner", "message": "Scene planning complete", "job_id": "0cbf3850-ecfb-42be-aecb-8a9f69394886", "taskName": "Task-1", "characters": 1, "scenes": 1, "clips": 5, "transitions": 4}
{"timestamp": "2025-11-15T01:10:03.569356Z", "level": "INFO", "module": "main", "message": "Scene planning complete", "job_id": "0cbf3850-ecfb-42be-aecb-8a9f69394886", "taskName": "Task-1", "characters": 1, "scenes": 1, "clips": 5}
{"timestamp": "2025-11-15T01:10:03.570906Z", "level": "INFO", "module": "main", "message": "Processing scene planning", "job_id": "633f8e36-0a22-436e-aff8-6951b73ac8aa", "taskName": "Task-4", "user_prompt_length": 130, "clip_count": 5, "bpm": 140.0, "mood": "energetic"}
{"timestamp": "2025-11-15T01:10:03.570962Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "job_id": "633f8e36-0a22-436e-aff8-6951b73ac8aa", "taskName": "Task-4", "user_prompt_length": 130, "clip_count": 5}
{"timestamp": "2025-11-15T01:10:03.571240Z", "level": "INFO", "module": "script_generator", "message": "Generated 5 clip scripts", "job_id": "633f8e36-0a22-436e-aff8-6951b73ac8aa", "taskName": "Task-4", "clip_count": 5}
{"timestamp": "2025-11-15T01:10:03.571295Z", "level": "INFO", "module": "transition_planner", "message": "Planned 4 transitions", "job_id": "633f8e36-0a22-436e-aff8-6951b73ac8aa", "taskName": "Task-4", "transition_count": 4}
{"timestamp": "2025-11-15T01:10:03.571341Z", "level": "WARNING", "module": "planner", "message": "LLM job_id mismatch: 1371ee23-7ef0-4fd8-a81b-a0bdb2d0b4d9 vs 633f8e36-0a22-436e-aff8-6951b73ac8aa, using provided job_id", "job_id": "633f8e36-0a22-436e-aff8-6951b73ac8aa", "taskName": "Task-4"}
{"timestamp": "2025-11-15T01:10:03.571385Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "job_id": "633f8e36-0a22-436e-aff8-6951b73ac8aa", "taskName": "Task-4", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:10:03.571418Z", "level": "WARNING", "module": "planner", "message": "Style inconsistencies found, refining...", "job_id": "633f8e36-0a22-436e-aff8-6951b73ac8aa", "taskName": "Task-4"}
{"timestamp": "2025-11-15T01:10:03.571454Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "job_id": "633f8e36-0a22-436e-aff8-6951b73ac8aa", "taskName": "Task-4", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:10:03.571483Z", "level": "WARNING", "module": "style_analyzer", "message": "Style inconsistencies found, but auto-refinement not implemented", "job_id": "633f8e36-0a22-436e-aff8-6951b73ac8aa", "taskName": "Task-4"}
{"timestamp": "2025-11-15T01:10:03.571518Z", "level": "INFO", "module": "validator", "message": "ScenePlan validation passed", "job_id": "633f8e36-0a22-436e-aff8-6951b73ac8aa", "taskName": "Task-4"}
{"timestamp": "2025-11-15T01:10:03.571550Z", "level": "INFO", "module": "planner", "message": "Scene planning complete", "job_id": "633f8e36-0a22-436e-aff8-6951b73ac8aa", "taskName": "Task-4", "characters": 1, "scenes": 1, "clips": 5, "transitions": 4}
{"timestamp": "2025-11-15T01:10:03.571584Z", "level": "INFO", "module": "main", "message": "Scene planning complete", "job_id": "633f8e36-0a22-436e-aff8-6951b73ac8aa", "taskName": "Task-4", "characters": 1, "scenes": 1, "clips": 5}
{"timestamp": "2025-11-15T01:10:03.574339Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-7", "job_id": "a762afbe-d027-4689-b5aa-6e35cedddf03", "model": "gpt-4o", "system_prompt_length": 6744, "user_prompt_length": 637}
{"timestamp": "2025-11-15T01:10:03.574575Z", "level": "INFO", "module": "llm_client", "message": "Scene plan generated successfully", "taskName": "Task-7", "job_id": "a762afbe-d027-4689-b5aa-6e35cedddf03", "model": "gpt-4o", "input_tokens": 1000, "output_tokens": 500, "cost": 0.0125}
{"timestamp": "2025-11-15T01:10:03.576095Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-10", "job_id": "cffa43a0-0364-492c-888d-9e393cbec1c0", "model": "gpt-4o", "system_prompt_length": 6744, "user_prompt_length": 618}
{"timestamp": "2025-11-15T01:10:03.576192Z", "level": "WARNING", "module": "llm_client", "message": "Rate limit error: Rate limit exceeded", "taskName": "Task-10", "job_id": "cffa43a0-0364-492c-888d-9e393cbec1c0"}
{"timestamp": "2025-11-15T01:10:03.576249Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/3 for generate_scene_plan after 2s delay", "taskName": "Task-10", "error": "Rate limit error: Rate limit exceeded", "attempt": 1}
{"timestamp": "2025-11-15T01:10:05.577488Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-10", "job_id": "cffa43a0-0364-492c-888d-9e393cbec1c0", "model": "gpt-4o", "system_prompt_length": 6744, "user_prompt_length": 618}
{"timestamp": "2025-11-15T01:10:05.577626Z", "level": "WARNING", "module": "llm_client", "message": "Rate limit error: Rate limit exceeded", "taskName": "Task-10", "job_id": "cffa43a0-0364-492c-888d-9e393cbec1c0"}
{"timestamp": "2025-11-15T01:10:05.577690Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 2/3 for generate_scene_plan after 4s delay", "taskName": "Task-10", "error": "Rate limit error: Rate limit exceeded", "attempt": 2}
{"timestamp": "2025-11-15T01:10:09.579687Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-10", "job_id": "cffa43a0-0364-492c-888d-9e393cbec1c0", "model": "gpt-4o", "system_prompt_length": 6744, "user_prompt_length": 618}
{"timestamp": "2025-11-15T01:10:09.580092Z", "level": "WARNING", "module": "llm_client", "message": "Rate limit error: Rate limit exceeded", "taskName": "Task-10", "job_id": "cffa43a0-0364-492c-888d-9e393cbec1c0"}
{"timestamp": "2025-11-15T01:10:09.580357Z", "level": "ERROR", "module": "retry", "message": "All 3 retry attempts failed for generate_scene_plan", "taskName": "Task-10", "error": "Rate limit error: Rate limit exceeded"}
{"timestamp": "2025-11-15T01:10:09.585656Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-13", "job_id": "705a285d-08aa-435f-a81e-5319cfae9df1", "model": "gpt-4o", "system_prompt_length": 6744, "user_prompt_length": 618}
{"timestamp": "2025-11-15T01:10:09.585975Z", "level": "ERROR", "module": "llm_client", "message": "Failed to parse LLM JSON response: Expecting value: line 1 column 1 (char 0)", "taskName": "Task-13", "job_id": "705a285d-08aa-435f-a81e-5319cfae9df1", "response_preview": "not valid json"}
{"timestamp": "2025-11-15T01:10:09.589569Z", "level": "ERROR", "module": "llm_client", "message": "Unexpected error in LLM call: Invalid JSON from LLM: Expecting value: line 1 column 1 (char 0)", "taskName": "Task-13", "job_id": "705a285d-08aa-435f-a81e-5319cfae9df1", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 441, in generate_scene_plan\n    scene_plan_dict = json.loads(content)\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/json/__init__.py\", line 346, in loads\n    return _default_decoder.decode(s)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/json/decoder.py\", line 345, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/json/decoder.py\", line 363, in raw_decode\n    raise JSONDecodeError(\"Expecting value\", s, err.value) from None\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 447, in generate_scene_plan\n    raise RetryableError(f\"Invalid JSON from LLM: {str(e)}\", job_id=job_id) from e\nshared.errors.RetryableError: Invalid JSON from LLM: Expecting value: line 1 column 1 (char 0)"}
{"timestamp": "2025-11-15T01:10:09.590636Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in generate_scene_plan: Unexpected error: Invalid JSON from LLM: Expecting value: line 1 column 1 (char 0)", "taskName": "Task-13", "error": "Unexpected error: Invalid JSON from LLM: Expecting value: line 1 column 1 (char 0)"}
{"timestamp": "2025-11-15T01:10:09.593283Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-16", "job_id": "c54d6a87-d3b0-4908-9889-a8a6645546dc", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T01:10:09.593637Z", "level": "INFO", "module": "script_generator", "message": "Generated 5 clip scripts", "taskName": "Task-16", "clip_count": 5}
{"timestamp": "2025-11-15T01:10:09.593796Z", "level": "INFO", "module": "transition_planner", "message": "Planned 4 transitions", "taskName": "Task-16", "transition_count": 4}
{"timestamp": "2025-11-15T01:10:09.593935Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "taskName": "Task-16", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:10:09.594006Z", "level": "WARNING", "module": "planner", "message": "Style inconsistencies found, refining...", "taskName": "Task-16"}
{"timestamp": "2025-11-15T01:10:09.594088Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "taskName": "Task-16", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:10:09.594221Z", "level": "WARNING", "module": "style_analyzer", "message": "Style inconsistencies found, but auto-refinement not implemented", "taskName": "Task-16"}
{"timestamp": "2025-11-15T01:10:09.594729Z", "level": "INFO", "module": "validator", "message": "ScenePlan validation passed", "taskName": "Task-16"}
{"timestamp": "2025-11-15T01:10:09.595026Z", "level": "INFO", "module": "planner", "message": "Scene planning complete", "taskName": "Task-16", "job_id": "c54d6a87-d3b0-4908-9889-a8a6645546dc", "characters": 1, "scenes": 1, "clips": 5, "transitions": 4}
{"timestamp": "2025-11-15T01:10:09.597582Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-19", "job_id": "ff7ae63d-c15e-4d85-8ec3-7790104e476a", "user_prompt_length": 42, "clip_count": 3}
{"timestamp": "2025-11-15T01:10:09.597893Z", "level": "INFO", "module": "script_generator", "message": "Generated 3 clip scripts", "taskName": "Task-19", "clip_count": 3}
{"timestamp": "2025-11-15T01:10:09.597989Z", "level": "INFO", "module": "transition_planner", "message": "Planned 2 transitions", "taskName": "Task-19", "transition_count": 2}
{"timestamp": "2025-11-15T01:10:09.598097Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "taskName": "Task-19", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:10:09.598157Z", "level": "WARNING", "module": "planner", "message": "Style inconsistencies found, refining...", "taskName": "Task-19"}
{"timestamp": "2025-11-15T01:10:09.598220Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "taskName": "Task-19", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:10:09.598281Z", "level": "WARNING", "module": "style_analyzer", "message": "Style inconsistencies found, but auto-refinement not implemented", "taskName": "Task-19"}
{"timestamp": "2025-11-15T01:10:09.598341Z", "level": "INFO", "module": "validator", "message": "ScenePlan validation passed", "taskName": "Task-19"}
{"timestamp": "2025-11-15T01:10:09.598402Z", "level": "INFO", "module": "planner", "message": "Scene planning complete", "taskName": "Task-19", "job_id": "ff7ae63d-c15e-4d85-8ec3-7790104e476a", "characters": 1, "scenes": 1, "clips": 3, "transitions": 2}
{"timestamp": "2025-11-15T01:10:09.600069Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-22", "job_id": "56a0e5a6-36b6-488e-8260-a4a01316d3e2", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T01:10:09.600576Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-22", "job_id": "56a0e5a6-36b6-488e-8260-a4a01316d3e2", "model": "gpt-4o", "system_prompt_length": 37860, "user_prompt_length": 1101}
{"timestamp": "2025-11-15T01:10:34.961728Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job 56a0e5a6-36b6-488e-8260-a4a01316d3e2: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(56a0e5a6-36b6-488e-8260-a4a01316d3e2) is not present in table \"jobs\".'}", "taskName": "Task-22", "job_id": "56a0e5a6-36b6-488e-8260-a4a01316d3e2", "error": "Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(56a0e5a6-36b6-488e-8260-a4a01316d3e2) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:10:34.967453Z", "level": "ERROR", "module": "llm_client", "message": "Unexpected error in LLM call: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(56a0e5a6-36b6-488e-8260-a4a01316d3e2) is not present in table \"jobs\".'}", "taskName": "Task-22", "job_id": "56a0e5a6-36b6-488e-8260-a4a01316d3e2", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(56a0e5a6-36b6-488e-8260-a4a01316d3e2) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(56a0e5a6-36b6-488e-8260-a4a01316d3e2) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(56a0e5a6-36b6-488e-8260-a4a01316d3e2) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:10:34.969135Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in generate_scene_plan: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(56a0e5a6-36b6-488e-8260-a4a01316d3e2) is not present in table \"jobs\".'}", "taskName": "Task-22", "error": "Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(56a0e5a6-36b6-488e-8260-a4a01316d3e2) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:10:34.971913Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(56a0e5a6-36b6-488e-8260-a4a01316d3e2) is not present in table \"jobs\".'}", "taskName": "Task-22", "job_id": "56a0e5a6-36b6-488e-8260-a4a01316d3e2", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(56a0e5a6-36b6-488e-8260-a4a01316d3e2) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(56a0e5a6-36b6-488e-8260-a4a01316d3e2) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(56a0e5a6-36b6-488e-8260-a4a01316d3e2) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 67, in plan_scenes\n    llm_output = await generate_scene_plan(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/retry.py\", line 49, in async_wrapper\n    return await func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 492, in generate_scene_plan\n    raise GenerationError(f\"Unexpected error: {str(e)}\", job_id=job_id) from e\nshared.errors.GenerationError: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(56a0e5a6-36b6-488e-8260-a4a01316d3e2) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:10:34.979180Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-25", "job_id": "853b507c-8387-40ef-b79a-eff46514e14d", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T01:10:34.979781Z", "level": "INFO", "module": "script_generator", "message": "Generated 5 clip scripts", "taskName": "Task-25", "clip_count": 5}
{"timestamp": "2025-11-15T01:10:34.979959Z", "level": "INFO", "module": "transition_planner", "message": "Planned 4 transitions", "taskName": "Task-25", "transition_count": 4}
{"timestamp": "2025-11-15T01:10:34.980094Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "taskName": "Task-25", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:10:34.980161Z", "level": "WARNING", "module": "planner", "message": "Style inconsistencies found, refining...", "taskName": "Task-25"}
{"timestamp": "2025-11-15T01:10:34.980228Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "taskName": "Task-25", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:10:34.980282Z", "level": "WARNING", "module": "style_analyzer", "message": "Style inconsistencies found, but auto-refinement not implemented", "taskName": "Task-25"}
{"timestamp": "2025-11-15T01:10:34.980350Z", "level": "INFO", "module": "validator", "message": "ScenePlan validation passed", "taskName": "Task-25"}
{"timestamp": "2025-11-15T01:10:34.980413Z", "level": "INFO", "module": "planner", "message": "Scene planning complete", "taskName": "Task-25", "job_id": "853b507c-8387-40ef-b79a-eff46514e14d", "characters": 1, "scenes": 1, "clips": 5, "transitions": 4}
{"timestamp": "2025-11-15T01:10:34.981962Z", "level": "INFO", "module": "main", "message": "Processing scene planning", "job_id": "71b3d6bc-1d58-4b95-a0d0-2048686eba70", "taskName": "Task-28", "user_prompt_length": 83, "clip_count": 5, "bpm": 120.0, "mood": "energetic"}
{"timestamp": "2025-11-15T01:10:34.982078Z", "level": "INFO", "module": "main", "message": "Scene planning complete", "job_id": "71b3d6bc-1d58-4b95-a0d0-2048686eba70", "taskName": "Task-28", "characters": 1, "scenes": 1, "clips": 5}
{"timestamp": "2025-11-15T01:10:34.989578Z", "level": "INFO", "module": "script_generator", "message": "Generated 3 clip scripts", "taskName": null, "clip_count": 3}
{"timestamp": "2025-11-15T01:10:34.990413Z", "level": "INFO", "module": "transition_planner", "message": "Planned 2 transitions", "taskName": null, "transition_count": 2}
{"timestamp": "2025-11-15T01:10:34.991835Z", "level": "INFO", "module": "validator", "message": "ScenePlan validation passed", "taskName": null}
{"timestamp": "2025-11-15T01:10:34.992337Z", "level": "WARNING", "module": "validator", "message": "Validation found 1 issues", "taskName": null, "issues": "['Clip 0 start time mismatch: 1.0s vs 0.0s (tolerance: \u00b10.5s)']"}
{"timestamp": "2025-11-15T01:10:34.992807Z", "level": "WARNING", "module": "validator", "message": "Transition count mismatch: 2 vs 1", "taskName": null}
{"timestamp": "2025-11-15T01:10:34.992864Z", "level": "WARNING", "module": "validator", "message": "Validation found 2 issues", "taskName": null, "issues": "['Transition count mismatch: 2 transitions, expected 1', 'Invalid transition to_clip index: 2']"}
{"timestamp": "2025-11-15T01:10:34.993447Z", "level": "WARNING", "module": "validator", "message": "Validation found 1 issues", "taskName": null, "issues": "['Clip 0 references unknown character: nonexistent']"}
{"timestamp": "2025-11-15T01:10:34.994127Z", "level": "WARNING", "module": "validator", "message": "Validation found 1 issues", "taskName": null, "issues": "['Clip 0 references unknown scene: nonexistent']"}
{"timestamp": "2025-11-15T01:10:34.994706Z", "level": "WARNING", "module": "validator", "message": "Validation found 1 issues", "taskName": null, "issues": "['Missing color palette']"}
{"timestamp": "2025-11-15T01:10:34.995224Z", "level": "WARNING", "module": "validator", "message": "Clip count mismatch: 3 vs 2", "taskName": null, "expected": 2, "actual": 3}
{"timestamp": "2025-11-15T01:10:34.995285Z", "level": "WARNING", "module": "validator", "message": "Transition count mismatch: 1 vs 2", "taskName": null}
{"timestamp": "2025-11-15T01:10:34.995344Z", "level": "WARNING", "module": "validator", "message": "Validation found 2 issues", "taskName": null, "issues": "['Clip count mismatch: 3 clips, expected 2', 'Transition count mismatch: 1 transitions, expected 2']"}
{"timestamp": "2025-11-15T01:11:15.113975Z", "level": "INFO", "module": "main", "message": "Processing scene planning", "job_id": "33313fc8-0d3a-41ed-a1c6-fe29433a9a96", "taskName": "Task-1", "user_prompt_length": 83, "clip_count": 5, "bpm": 120.0, "mood": "energetic"}
{"timestamp": "2025-11-15T01:11:15.114104Z", "level": "INFO", "module": "main", "message": "Scene planning complete", "job_id": "33313fc8-0d3a-41ed-a1c6-fe29433a9a96", "taskName": "Task-1", "characters": 1, "scenes": 1, "clips": 5}
{"timestamp": "2025-11-15T01:11:18.562252Z", "level": "INFO", "module": "main", "message": "Processing scene planning", "job_id": "1b79ed33-1618-47bb-81f0-fcfa48e8b191", "taskName": "Task-1", "user_prompt_length": 62, "clip_count": 5, "bpm": 120.0, "mood": "energetic"}
{"timestamp": "2025-11-15T01:11:18.562354Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "job_id": "1b79ed33-1618-47bb-81f0-fcfa48e8b191", "taskName": "Task-1", "user_prompt_length": 62, "clip_count": 5}
{"timestamp": "2025-11-15T01:11:18.562543Z", "level": "INFO", "module": "script_generator", "message": "Generated 5 clip scripts", "job_id": "1b79ed33-1618-47bb-81f0-fcfa48e8b191", "taskName": "Task-1", "clip_count": 5}
{"timestamp": "2025-11-15T01:11:18.562619Z", "level": "INFO", "module": "transition_planner", "message": "Planned 4 transitions", "job_id": "1b79ed33-1618-47bb-81f0-fcfa48e8b191", "taskName": "Task-1", "transition_count": 4}
{"timestamp": "2025-11-15T01:11:18.562683Z", "level": "WARNING", "module": "planner", "message": "LLM job_id mismatch: 74f0cedb-f515-482b-b32a-cae67d5b0b4d vs 1b79ed33-1618-47bb-81f0-fcfa48e8b191, using provided job_id", "job_id": "1b79ed33-1618-47bb-81f0-fcfa48e8b191", "taskName": "Task-1"}
{"timestamp": "2025-11-15T01:11:18.562749Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "job_id": "1b79ed33-1618-47bb-81f0-fcfa48e8b191", "taskName": "Task-1", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:11:18.562811Z", "level": "WARNING", "module": "planner", "message": "Style inconsistencies found, refining...", "job_id": "1b79ed33-1618-47bb-81f0-fcfa48e8b191", "taskName": "Task-1"}
{"timestamp": "2025-11-15T01:11:18.562853Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "job_id": "1b79ed33-1618-47bb-81f0-fcfa48e8b191", "taskName": "Task-1", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:11:18.562885Z", "level": "WARNING", "module": "style_analyzer", "message": "Style inconsistencies found, but auto-refinement not implemented", "job_id": "1b79ed33-1618-47bb-81f0-fcfa48e8b191", "taskName": "Task-1"}
{"timestamp": "2025-11-15T01:11:18.562927Z", "level": "INFO", "module": "validator", "message": "ScenePlan validation passed", "job_id": "1b79ed33-1618-47bb-81f0-fcfa48e8b191", "taskName": "Task-1"}
{"timestamp": "2025-11-15T01:11:18.562961Z", "level": "INFO", "module": "planner", "message": "Scene planning complete", "job_id": "1b79ed33-1618-47bb-81f0-fcfa48e8b191", "taskName": "Task-1", "characters": 1, "scenes": 1, "clips": 5, "transitions": 4}
{"timestamp": "2025-11-15T01:11:18.563004Z", "level": "INFO", "module": "main", "message": "Scene planning complete", "job_id": "1b79ed33-1618-47bb-81f0-fcfa48e8b191", "taskName": "Task-1", "characters": 1, "scenes": 1, "clips": 5}
{"timestamp": "2025-11-15T01:11:18.564530Z", "level": "INFO", "module": "main", "message": "Processing scene planning", "job_id": "e821376d-5547-4817-8ba7-e486a2535632", "taskName": "Task-4", "user_prompt_length": 130, "clip_count": 5, "bpm": 140.0, "mood": "energetic"}
{"timestamp": "2025-11-15T01:11:18.564575Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "job_id": "e821376d-5547-4817-8ba7-e486a2535632", "taskName": "Task-4", "user_prompt_length": 130, "clip_count": 5}
{"timestamp": "2025-11-15T01:11:18.564686Z", "level": "INFO", "module": "script_generator", "message": "Generated 5 clip scripts", "job_id": "e821376d-5547-4817-8ba7-e486a2535632", "taskName": "Task-4", "clip_count": 5}
{"timestamp": "2025-11-15T01:11:18.564737Z", "level": "INFO", "module": "transition_planner", "message": "Planned 4 transitions", "job_id": "e821376d-5547-4817-8ba7-e486a2535632", "taskName": "Task-4", "transition_count": 4}
{"timestamp": "2025-11-15T01:11:18.564779Z", "level": "WARNING", "module": "planner", "message": "LLM job_id mismatch: 5ad8cf24-1c1b-4e62-b47a-9269e9dbc663 vs e821376d-5547-4817-8ba7-e486a2535632, using provided job_id", "job_id": "e821376d-5547-4817-8ba7-e486a2535632", "taskName": "Task-4"}
{"timestamp": "2025-11-15T01:11:18.564821Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "job_id": "e821376d-5547-4817-8ba7-e486a2535632", "taskName": "Task-4", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:11:18.564853Z", "level": "WARNING", "module": "planner", "message": "Style inconsistencies found, refining...", "job_id": "e821376d-5547-4817-8ba7-e486a2535632", "taskName": "Task-4"}
{"timestamp": "2025-11-15T01:11:18.564891Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "job_id": "e821376d-5547-4817-8ba7-e486a2535632", "taskName": "Task-4", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:11:18.564922Z", "level": "WARNING", "module": "style_analyzer", "message": "Style inconsistencies found, but auto-refinement not implemented", "job_id": "e821376d-5547-4817-8ba7-e486a2535632", "taskName": "Task-4"}
{"timestamp": "2025-11-15T01:11:18.564963Z", "level": "INFO", "module": "validator", "message": "ScenePlan validation passed", "job_id": "e821376d-5547-4817-8ba7-e486a2535632", "taskName": "Task-4"}
{"timestamp": "2025-11-15T01:11:18.564996Z", "level": "INFO", "module": "planner", "message": "Scene planning complete", "job_id": "e821376d-5547-4817-8ba7-e486a2535632", "taskName": "Task-4", "characters": 1, "scenes": 1, "clips": 5, "transitions": 4}
{"timestamp": "2025-11-15T01:11:18.565034Z", "level": "INFO", "module": "main", "message": "Scene planning complete", "job_id": "e821376d-5547-4817-8ba7-e486a2535632", "taskName": "Task-4", "characters": 1, "scenes": 1, "clips": 5}
{"timestamp": "2025-11-15T01:11:18.567577Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-7", "job_id": "bc32f6bf-e38d-4a82-82a6-7e9a61910d51", "model": "gpt-4o", "system_prompt_length": 6744, "user_prompt_length": 637}
{"timestamp": "2025-11-15T01:11:18.567734Z", "level": "INFO", "module": "llm_client", "message": "Scene plan generated successfully", "taskName": "Task-7", "job_id": "bc32f6bf-e38d-4a82-82a6-7e9a61910d51", "model": "gpt-4o", "input_tokens": 1000, "output_tokens": 500, "cost": 0.0125}
{"timestamp": "2025-11-15T01:11:18.568860Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-10", "job_id": "6c179fef-ec95-45b2-af68-49899c36ec15", "model": "gpt-4o", "system_prompt_length": 6744, "user_prompt_length": 618}
{"timestamp": "2025-11-15T01:11:18.568933Z", "level": "WARNING", "module": "llm_client", "message": "Rate limit error: Rate limit exceeded", "taskName": "Task-10", "job_id": "6c179fef-ec95-45b2-af68-49899c36ec15"}
{"timestamp": "2025-11-15T01:11:18.568977Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/3 for generate_scene_plan after 2s delay", "taskName": "Task-10", "error": "Rate limit error: Rate limit exceeded", "attempt": 1}
{"timestamp": "2025-11-15T01:11:20.570874Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-10", "job_id": "6c179fef-ec95-45b2-af68-49899c36ec15", "model": "gpt-4o", "system_prompt_length": 6744, "user_prompt_length": 618}
{"timestamp": "2025-11-15T01:11:20.571852Z", "level": "WARNING", "module": "llm_client", "message": "Rate limit error: Rate limit exceeded", "taskName": "Task-10", "job_id": "6c179fef-ec95-45b2-af68-49899c36ec15"}
{"timestamp": "2025-11-15T01:11:20.572256Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 2/3 for generate_scene_plan after 4s delay", "taskName": "Task-10", "error": "Rate limit error: Rate limit exceeded", "attempt": 2}
{"timestamp": "2025-11-15T01:11:24.574610Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-10", "job_id": "6c179fef-ec95-45b2-af68-49899c36ec15", "model": "gpt-4o", "system_prompt_length": 6744, "user_prompt_length": 618}
{"timestamp": "2025-11-15T01:11:24.575094Z", "level": "WARNING", "module": "llm_client", "message": "Rate limit error: Rate limit exceeded", "taskName": "Task-10", "job_id": "6c179fef-ec95-45b2-af68-49899c36ec15"}
{"timestamp": "2025-11-15T01:11:24.575373Z", "level": "ERROR", "module": "retry", "message": "All 3 retry attempts failed for generate_scene_plan", "taskName": "Task-10", "error": "Rate limit error: Rate limit exceeded"}
{"timestamp": "2025-11-15T01:11:24.581132Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-13", "job_id": "32a6a37c-8b73-48e6-b765-b78180565369", "model": "gpt-4o", "system_prompt_length": 6744, "user_prompt_length": 618}
{"timestamp": "2025-11-15T01:11:24.581887Z", "level": "ERROR", "module": "llm_client", "message": "Failed to parse LLM JSON response: Expecting value: line 1 column 1 (char 0)", "taskName": "Task-13", "job_id": "32a6a37c-8b73-48e6-b765-b78180565369", "response_preview": "not valid json"}
{"timestamp": "2025-11-15T01:11:24.585403Z", "level": "ERROR", "module": "llm_client", "message": "Unexpected error in LLM call: Invalid JSON from LLM: Expecting value: line 1 column 1 (char 0)", "taskName": "Task-13", "job_id": "32a6a37c-8b73-48e6-b765-b78180565369", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 441, in generate_scene_plan\n    scene_plan_dict = json.loads(content)\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/json/__init__.py\", line 346, in loads\n    return _default_decoder.decode(s)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/json/decoder.py\", line 345, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/json/decoder.py\", line 363, in raw_decode\n    raise JSONDecodeError(\"Expecting value\", s, err.value) from None\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 447, in generate_scene_plan\n    raise RetryableError(f\"Invalid JSON from LLM: {str(e)}\", job_id=job_id) from e\nshared.errors.RetryableError: Invalid JSON from LLM: Expecting value: line 1 column 1 (char 0)"}
{"timestamp": "2025-11-15T01:11:24.586694Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in generate_scene_plan: Unexpected error: Invalid JSON from LLM: Expecting value: line 1 column 1 (char 0)", "taskName": "Task-13", "error": "Unexpected error: Invalid JSON from LLM: Expecting value: line 1 column 1 (char 0)"}
{"timestamp": "2025-11-15T01:11:24.589421Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-16", "job_id": "9bfeebd7-db09-4a75-99eb-36a598d3cb73", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T01:11:24.589767Z", "level": "INFO", "module": "script_generator", "message": "Generated 5 clip scripts", "taskName": "Task-16", "clip_count": 5}
{"timestamp": "2025-11-15T01:11:24.589962Z", "level": "INFO", "module": "transition_planner", "message": "Planned 4 transitions", "taskName": "Task-16", "transition_count": 4}
{"timestamp": "2025-11-15T01:11:24.590151Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "taskName": "Task-16", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:11:24.590225Z", "level": "WARNING", "module": "planner", "message": "Style inconsistencies found, refining...", "taskName": "Task-16"}
{"timestamp": "2025-11-15T01:11:24.590305Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "taskName": "Task-16", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:11:24.590375Z", "level": "WARNING", "module": "style_analyzer", "message": "Style inconsistencies found, but auto-refinement not implemented", "taskName": "Task-16"}
{"timestamp": "2025-11-15T01:11:24.590457Z", "level": "INFO", "module": "validator", "message": "ScenePlan validation passed", "taskName": "Task-16"}
{"timestamp": "2025-11-15T01:11:24.590535Z", "level": "INFO", "module": "planner", "message": "Scene planning complete", "taskName": "Task-16", "job_id": "9bfeebd7-db09-4a75-99eb-36a598d3cb73", "characters": 1, "scenes": 1, "clips": 5, "transitions": 4}
{"timestamp": "2025-11-15T01:11:24.592912Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-19", "job_id": "db5caf32-5adb-469c-8720-d849d5728d6f", "user_prompt_length": 42, "clip_count": 3}
{"timestamp": "2025-11-15T01:11:24.593287Z", "level": "INFO", "module": "script_generator", "message": "Generated 3 clip scripts", "taskName": "Task-19", "clip_count": 3}
{"timestamp": "2025-11-15T01:11:24.593417Z", "level": "INFO", "module": "transition_planner", "message": "Planned 2 transitions", "taskName": "Task-19", "transition_count": 2}
{"timestamp": "2025-11-15T01:11:24.593551Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "taskName": "Task-19", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:11:24.593629Z", "level": "WARNING", "module": "planner", "message": "Style inconsistencies found, refining...", "taskName": "Task-19"}
{"timestamp": "2025-11-15T01:11:24.593720Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "taskName": "Task-19", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:11:24.593799Z", "level": "WARNING", "module": "style_analyzer", "message": "Style inconsistencies found, but auto-refinement not implemented", "taskName": "Task-19"}
{"timestamp": "2025-11-15T01:11:24.593886Z", "level": "INFO", "module": "validator", "message": "ScenePlan validation passed", "taskName": "Task-19"}
{"timestamp": "2025-11-15T01:11:24.593958Z", "level": "INFO", "module": "planner", "message": "Scene planning complete", "taskName": "Task-19", "job_id": "db5caf32-5adb-469c-8720-d849d5728d6f", "characters": 1, "scenes": 1, "clips": 3, "transitions": 2}
{"timestamp": "2025-11-15T01:11:24.595648Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-22", "job_id": "76d1d115-e9f3-4f00-ac4e-08101e4604db", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T01:11:24.595888Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-22", "job_id": "76d1d115-e9f3-4f00-ac4e-08101e4604db", "model": "gpt-4o", "system_prompt_length": 37860, "user_prompt_length": 1101}
{"timestamp": "2025-11-15T01:11:54.363613Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job 76d1d115-e9f3-4f00-ac4e-08101e4604db: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(76d1d115-e9f3-4f00-ac4e-08101e4604db) is not present in table \"jobs\".'}", "taskName": "Task-22", "job_id": "76d1d115-e9f3-4f00-ac4e-08101e4604db", "error": "Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(76d1d115-e9f3-4f00-ac4e-08101e4604db) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:11:54.366704Z", "level": "ERROR", "module": "llm_client", "message": "Unexpected error in LLM call: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(76d1d115-e9f3-4f00-ac4e-08101e4604db) is not present in table \"jobs\".'}", "taskName": "Task-22", "job_id": "76d1d115-e9f3-4f00-ac4e-08101e4604db", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(76d1d115-e9f3-4f00-ac4e-08101e4604db) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(76d1d115-e9f3-4f00-ac4e-08101e4604db) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(76d1d115-e9f3-4f00-ac4e-08101e4604db) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:11:54.368057Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in generate_scene_plan: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(76d1d115-e9f3-4f00-ac4e-08101e4604db) is not present in table \"jobs\".'}", "taskName": "Task-22", "error": "Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(76d1d115-e9f3-4f00-ac4e-08101e4604db) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:11:54.370115Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(76d1d115-e9f3-4f00-ac4e-08101e4604db) is not present in table \"jobs\".'}", "taskName": "Task-22", "job_id": "76d1d115-e9f3-4f00-ac4e-08101e4604db", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(76d1d115-e9f3-4f00-ac4e-08101e4604db) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(76d1d115-e9f3-4f00-ac4e-08101e4604db) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(76d1d115-e9f3-4f00-ac4e-08101e4604db) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 67, in plan_scenes\n    llm_output = await generate_scene_plan(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/retry.py\", line 49, in async_wrapper\n    return await func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 492, in generate_scene_plan\n    raise GenerationError(f\"Unexpected error: {str(e)}\", job_id=job_id) from e\nshared.errors.GenerationError: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(76d1d115-e9f3-4f00-ac4e-08101e4604db) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:11:54.375591Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-25", "job_id": "701f8188-d2ae-4f01-86cf-62e35852d863", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T01:11:54.376036Z", "level": "INFO", "module": "script_generator", "message": "Generated 5 clip scripts", "taskName": "Task-25", "clip_count": 5}
{"timestamp": "2025-11-15T01:11:54.377264Z", "level": "INFO", "module": "transition_planner", "message": "Planned 4 transitions", "taskName": "Task-25", "transition_count": 4}
{"timestamp": "2025-11-15T01:11:54.377471Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "taskName": "Task-25", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:11:54.377535Z", "level": "WARNING", "module": "planner", "message": "Style inconsistencies found, refining...", "taskName": "Task-25"}
{"timestamp": "2025-11-15T01:11:54.377636Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "taskName": "Task-25", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:11:54.377779Z", "level": "WARNING", "module": "style_analyzer", "message": "Style inconsistencies found, but auto-refinement not implemented", "taskName": "Task-25"}
{"timestamp": "2025-11-15T01:11:54.377863Z", "level": "INFO", "module": "validator", "message": "ScenePlan validation passed", "taskName": "Task-25"}
{"timestamp": "2025-11-15T01:11:54.377929Z", "level": "INFO", "module": "planner", "message": "Scene planning complete", "taskName": "Task-25", "job_id": "701f8188-d2ae-4f01-86cf-62e35852d863", "characters": 1, "scenes": 1, "clips": 5, "transitions": 4}
{"timestamp": "2025-11-15T01:11:54.379830Z", "level": "INFO", "module": "main", "message": "Processing scene planning", "job_id": "2bd888f9-247b-4b68-b2cd-7e4b0574192c", "taskName": "Task-28", "user_prompt_length": 83, "clip_count": 5, "bpm": 120.0, "mood": "energetic"}
{"timestamp": "2025-11-15T01:11:54.379943Z", "level": "INFO", "module": "main", "message": "Scene planning complete", "job_id": "2bd888f9-247b-4b68-b2cd-7e4b0574192c", "taskName": "Task-28", "characters": 1, "scenes": 1, "clips": 5}
{"timestamp": "2025-11-15T01:11:54.389232Z", "level": "INFO", "module": "script_generator", "message": "Generated 3 clip scripts", "taskName": null, "clip_count": 3}
{"timestamp": "2025-11-15T01:11:54.390175Z", "level": "INFO", "module": "transition_planner", "message": "Planned 2 transitions", "taskName": null, "transition_count": 2}
{"timestamp": "2025-11-15T01:11:54.391773Z", "level": "INFO", "module": "validator", "message": "ScenePlan validation passed", "taskName": null}
{"timestamp": "2025-11-15T01:11:54.392313Z", "level": "WARNING", "module": "validator", "message": "Validation found 1 issues", "taskName": null, "issues": "['Clip 0 start time mismatch: 1.0s vs 0.0s (tolerance: \u00b10.5s)']"}
{"timestamp": "2025-11-15T01:11:54.392789Z", "level": "WARNING", "module": "validator", "message": "Transition count mismatch: 2 vs 1", "taskName": null}
{"timestamp": "2025-11-15T01:11:54.392848Z", "level": "WARNING", "module": "validator", "message": "Validation found 2 issues", "taskName": null, "issues": "['Transition count mismatch: 2 transitions, expected 1', 'Invalid transition to_clip index: 2']"}
{"timestamp": "2025-11-15T01:11:54.393353Z", "level": "WARNING", "module": "validator", "message": "Validation found 1 issues", "taskName": null, "issues": "['Clip 0 references unknown character: nonexistent']"}
{"timestamp": "2025-11-15T01:11:54.395112Z", "level": "WARNING", "module": "validator", "message": "Validation found 1 issues", "taskName": null, "issues": "['Clip 0 references unknown scene: nonexistent']"}
{"timestamp": "2025-11-15T01:11:54.396009Z", "level": "WARNING", "module": "validator", "message": "Validation found 1 issues", "taskName": null, "issues": "['Missing color palette']"}
{"timestamp": "2025-11-15T01:11:54.396561Z", "level": "WARNING", "module": "validator", "message": "Clip count mismatch: 3 vs 2", "taskName": null, "expected": 2, "actual": 3}
{"timestamp": "2025-11-15T01:11:54.396636Z", "level": "WARNING", "module": "validator", "message": "Transition count mismatch: 1 vs 2", "taskName": null}
{"timestamp": "2025-11-15T01:11:54.396771Z", "level": "WARNING", "module": "validator", "message": "Validation found 2 issues", "taskName": null, "issues": "['Clip count mismatch: 3 clips, expected 2', 'Transition count mismatch: 1 transitions, expected 2']"}
{"timestamp": "2025-11-15T01:11:57.046820Z", "level": "INFO", "module": "main", "message": "Processing scene planning", "job_id": "0c42d2d7-b909-4120-8b9a-9ab28fa896a6", "taskName": "Task-1", "user_prompt_length": 62, "clip_count": 5, "bpm": 120.0, "mood": "energetic"}
{"timestamp": "2025-11-15T01:11:57.046909Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "job_id": "0c42d2d7-b909-4120-8b9a-9ab28fa896a6", "taskName": "Task-1", "user_prompt_length": 62, "clip_count": 5}
{"timestamp": "2025-11-15T01:11:57.047062Z", "level": "INFO", "module": "script_generator", "message": "Generated 5 clip scripts", "job_id": "0c42d2d7-b909-4120-8b9a-9ab28fa896a6", "taskName": "Task-1", "clip_count": 5}
{"timestamp": "2025-11-15T01:11:57.047131Z", "level": "INFO", "module": "transition_planner", "message": "Planned 4 transitions", "job_id": "0c42d2d7-b909-4120-8b9a-9ab28fa896a6", "taskName": "Task-1", "transition_count": 4}
{"timestamp": "2025-11-15T01:11:57.047191Z", "level": "WARNING", "module": "planner", "message": "LLM job_id mismatch: b4f3811a-9598-451d-af76-67c4cec8a879 vs 0c42d2d7-b909-4120-8b9a-9ab28fa896a6, using provided job_id", "job_id": "0c42d2d7-b909-4120-8b9a-9ab28fa896a6", "taskName": "Task-1"}
{"timestamp": "2025-11-15T01:11:57.047246Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "job_id": "0c42d2d7-b909-4120-8b9a-9ab28fa896a6", "taskName": "Task-1", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:11:57.047282Z", "level": "WARNING", "module": "planner", "message": "Style inconsistencies found, refining...", "job_id": "0c42d2d7-b909-4120-8b9a-9ab28fa896a6", "taskName": "Task-1"}
{"timestamp": "2025-11-15T01:11:57.047323Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "job_id": "0c42d2d7-b909-4120-8b9a-9ab28fa896a6", "taskName": "Task-1", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:11:57.047355Z", "level": "WARNING", "module": "style_analyzer", "message": "Style inconsistencies found, but auto-refinement not implemented", "job_id": "0c42d2d7-b909-4120-8b9a-9ab28fa896a6", "taskName": "Task-1"}
{"timestamp": "2025-11-15T01:11:57.047398Z", "level": "INFO", "module": "validator", "message": "ScenePlan validation passed", "job_id": "0c42d2d7-b909-4120-8b9a-9ab28fa896a6", "taskName": "Task-1"}
{"timestamp": "2025-11-15T01:11:57.047433Z", "level": "INFO", "module": "planner", "message": "Scene planning complete", "job_id": "0c42d2d7-b909-4120-8b9a-9ab28fa896a6", "taskName": "Task-1", "characters": 1, "scenes": 1, "clips": 5, "transitions": 4}
{"timestamp": "2025-11-15T01:11:57.047470Z", "level": "INFO", "module": "main", "message": "Scene planning complete", "job_id": "0c42d2d7-b909-4120-8b9a-9ab28fa896a6", "taskName": "Task-1", "characters": 1, "scenes": 1, "clips": 5}
{"timestamp": "2025-11-15T01:11:57.048876Z", "level": "INFO", "module": "main", "message": "Processing scene planning", "job_id": "982b08b8-66e6-435e-8abe-7875a3517c57", "taskName": "Task-4", "user_prompt_length": 130, "clip_count": 5, "bpm": 140.0, "mood": "energetic"}
{"timestamp": "2025-11-15T01:11:57.048924Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "job_id": "982b08b8-66e6-435e-8abe-7875a3517c57", "taskName": "Task-4", "user_prompt_length": 130, "clip_count": 5}
{"timestamp": "2025-11-15T01:11:57.049037Z", "level": "INFO", "module": "script_generator", "message": "Generated 5 clip scripts", "job_id": "982b08b8-66e6-435e-8abe-7875a3517c57", "taskName": "Task-4", "clip_count": 5}
{"timestamp": "2025-11-15T01:11:57.049088Z", "level": "INFO", "module": "transition_planner", "message": "Planned 4 transitions", "job_id": "982b08b8-66e6-435e-8abe-7875a3517c57", "taskName": "Task-4", "transition_count": 4}
{"timestamp": "2025-11-15T01:11:57.049131Z", "level": "WARNING", "module": "planner", "message": "LLM job_id mismatch: 92c3da64-d4d6-46ed-83ea-72c3cc72564d vs 982b08b8-66e6-435e-8abe-7875a3517c57, using provided job_id", "job_id": "982b08b8-66e6-435e-8abe-7875a3517c57", "taskName": "Task-4"}
{"timestamp": "2025-11-15T01:11:57.049174Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "job_id": "982b08b8-66e6-435e-8abe-7875a3517c57", "taskName": "Task-4", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:11:57.049207Z", "level": "WARNING", "module": "planner", "message": "Style inconsistencies found, refining...", "job_id": "982b08b8-66e6-435e-8abe-7875a3517c57", "taskName": "Task-4"}
{"timestamp": "2025-11-15T01:11:57.049243Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "job_id": "982b08b8-66e6-435e-8abe-7875a3517c57", "taskName": "Task-4", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:11:57.049273Z", "level": "WARNING", "module": "style_analyzer", "message": "Style inconsistencies found, but auto-refinement not implemented", "job_id": "982b08b8-66e6-435e-8abe-7875a3517c57", "taskName": "Task-4"}
{"timestamp": "2025-11-15T01:11:57.049310Z", "level": "INFO", "module": "validator", "message": "ScenePlan validation passed", "job_id": "982b08b8-66e6-435e-8abe-7875a3517c57", "taskName": "Task-4"}
{"timestamp": "2025-11-15T01:11:57.049344Z", "level": "INFO", "module": "planner", "message": "Scene planning complete", "job_id": "982b08b8-66e6-435e-8abe-7875a3517c57", "taskName": "Task-4", "characters": 1, "scenes": 1, "clips": 5, "transitions": 4}
{"timestamp": "2025-11-15T01:11:57.049378Z", "level": "INFO", "module": "main", "message": "Scene planning complete", "job_id": "982b08b8-66e6-435e-8abe-7875a3517c57", "taskName": "Task-4", "characters": 1, "scenes": 1, "clips": 5}
{"timestamp": "2025-11-15T01:11:57.053171Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-7", "job_id": "9faff726-cd24-450a-84ff-b7cd3f3b2344", "model": "gpt-4o", "system_prompt_length": 6744, "user_prompt_length": 637}
{"timestamp": "2025-11-15T01:11:57.053375Z", "level": "INFO", "module": "llm_client", "message": "Scene plan generated successfully", "taskName": "Task-7", "job_id": "9faff726-cd24-450a-84ff-b7cd3f3b2344", "model": "gpt-4o", "input_tokens": 1000, "output_tokens": 500, "cost": 0.0125}
{"timestamp": "2025-11-15T01:11:57.054790Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-10", "job_id": "4ddf7584-8c69-4303-a835-ed44fd5e7271", "model": "gpt-4o", "system_prompt_length": 6744, "user_prompt_length": 618}
{"timestamp": "2025-11-15T01:11:57.054879Z", "level": "WARNING", "module": "llm_client", "message": "Rate limit error: Rate limit exceeded", "taskName": "Task-10", "job_id": "4ddf7584-8c69-4303-a835-ed44fd5e7271"}
{"timestamp": "2025-11-15T01:11:57.054933Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 1/3 for generate_scene_plan after 2s delay", "taskName": "Task-10", "error": "Rate limit error: Rate limit exceeded", "attempt": 1}
{"timestamp": "2025-11-15T01:11:59.056465Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-10", "job_id": "4ddf7584-8c69-4303-a835-ed44fd5e7271", "model": "gpt-4o", "system_prompt_length": 6744, "user_prompt_length": 618}
{"timestamp": "2025-11-15T01:11:59.057261Z", "level": "WARNING", "module": "llm_client", "message": "Rate limit error: Rate limit exceeded", "taskName": "Task-10", "job_id": "4ddf7584-8c69-4303-a835-ed44fd5e7271"}
{"timestamp": "2025-11-15T01:11:59.057626Z", "level": "WARNING", "module": "retry", "message": "Retry attempt 2/3 for generate_scene_plan after 4s delay", "taskName": "Task-10", "error": "Rate limit error: Rate limit exceeded", "attempt": 2}
{"timestamp": "2025-11-15T01:12:03.058658Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-10", "job_id": "4ddf7584-8c69-4303-a835-ed44fd5e7271", "model": "gpt-4o", "system_prompt_length": 6744, "user_prompt_length": 618}
{"timestamp": "2025-11-15T01:12:03.058863Z", "level": "WARNING", "module": "llm_client", "message": "Rate limit error: Rate limit exceeded", "taskName": "Task-10", "job_id": "4ddf7584-8c69-4303-a835-ed44fd5e7271"}
{"timestamp": "2025-11-15T01:12:03.058952Z", "level": "ERROR", "module": "retry", "message": "All 3 retry attempts failed for generate_scene_plan", "taskName": "Task-10", "error": "Rate limit error: Rate limit exceeded"}
{"timestamp": "2025-11-15T01:12:03.062383Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-13", "job_id": "c655adf2-ac87-4f87-ab37-9a10553588f9", "model": "gpt-4o", "system_prompt_length": 6744, "user_prompt_length": 618}
{"timestamp": "2025-11-15T01:12:03.062588Z", "level": "ERROR", "module": "llm_client", "message": "Failed to parse LLM JSON response: Expecting value: line 1 column 1 (char 0)", "taskName": "Task-13", "job_id": "c655adf2-ac87-4f87-ab37-9a10553588f9", "response_preview": "not valid json"}
{"timestamp": "2025-11-15T01:12:03.066269Z", "level": "ERROR", "module": "llm_client", "message": "Unexpected error in LLM call: Invalid JSON from LLM: Expecting value: line 1 column 1 (char 0)", "taskName": "Task-13", "job_id": "c655adf2-ac87-4f87-ab37-9a10553588f9", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 441, in generate_scene_plan\n    scene_plan_dict = json.loads(content)\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/json/__init__.py\", line 346, in loads\n    return _default_decoder.decode(s)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/json/decoder.py\", line 345, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/json/decoder.py\", line 363, in raw_decode\n    raise JSONDecodeError(\"Expecting value\", s, err.value) from None\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 447, in generate_scene_plan\n    raise RetryableError(f\"Invalid JSON from LLM: {str(e)}\", job_id=job_id) from e\nshared.errors.RetryableError: Invalid JSON from LLM: Expecting value: line 1 column 1 (char 0)"}
{"timestamp": "2025-11-15T01:12:03.068288Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in generate_scene_plan: Unexpected error: Invalid JSON from LLM: Expecting value: line 1 column 1 (char 0)", "taskName": "Task-13", "error": "Unexpected error: Invalid JSON from LLM: Expecting value: line 1 column 1 (char 0)"}
{"timestamp": "2025-11-15T01:12:03.070916Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-16", "job_id": "016b6167-5e9a-46a4-a08b-014745a38d66", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T01:12:03.071258Z", "level": "INFO", "module": "script_generator", "message": "Generated 5 clip scripts", "taskName": "Task-16", "clip_count": 5}
{"timestamp": "2025-11-15T01:12:03.073003Z", "level": "INFO", "module": "transition_planner", "message": "Planned 4 transitions", "taskName": "Task-16", "transition_count": 4}
{"timestamp": "2025-11-15T01:12:03.073137Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "taskName": "Task-16", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:12:03.073222Z", "level": "WARNING", "module": "planner", "message": "Style inconsistencies found, refining...", "taskName": "Task-16"}
{"timestamp": "2025-11-15T01:12:03.073308Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "taskName": "Task-16", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:12:03.073375Z", "level": "WARNING", "module": "style_analyzer", "message": "Style inconsistencies found, but auto-refinement not implemented", "taskName": "Task-16"}
{"timestamp": "2025-11-15T01:12:03.073445Z", "level": "INFO", "module": "validator", "message": "ScenePlan validation passed", "taskName": "Task-16"}
{"timestamp": "2025-11-15T01:12:03.073516Z", "level": "INFO", "module": "planner", "message": "Scene planning complete", "taskName": "Task-16", "job_id": "016b6167-5e9a-46a4-a08b-014745a38d66", "characters": 1, "scenes": 1, "clips": 5, "transitions": 4}
{"timestamp": "2025-11-15T01:12:03.076002Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-19", "job_id": "e4a1d758-c0c3-445d-b072-f6e8fbbf77f1", "user_prompt_length": 42, "clip_count": 3}
{"timestamp": "2025-11-15T01:12:03.076359Z", "level": "INFO", "module": "script_generator", "message": "Generated 3 clip scripts", "taskName": "Task-19", "clip_count": 3}
{"timestamp": "2025-11-15T01:12:03.076464Z", "level": "INFO", "module": "transition_planner", "message": "Planned 2 transitions", "taskName": "Task-19", "transition_count": 2}
{"timestamp": "2025-11-15T01:12:03.076565Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "taskName": "Task-19", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:12:03.076623Z", "level": "WARNING", "module": "planner", "message": "Style inconsistencies found, refining...", "taskName": "Task-19"}
{"timestamp": "2025-11-15T01:12:03.076681Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "taskName": "Task-19", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:12:03.076731Z", "level": "WARNING", "module": "style_analyzer", "message": "Style inconsistencies found, but auto-refinement not implemented", "taskName": "Task-19"}
{"timestamp": "2025-11-15T01:12:03.076892Z", "level": "INFO", "module": "validator", "message": "ScenePlan validation passed", "taskName": "Task-19"}
{"timestamp": "2025-11-15T01:12:03.076973Z", "level": "INFO", "module": "planner", "message": "Scene planning complete", "taskName": "Task-19", "job_id": "e4a1d758-c0c3-445d-b072-f6e8fbbf77f1", "characters": 1, "scenes": 1, "clips": 3, "transitions": 2}
{"timestamp": "2025-11-15T01:12:03.079240Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-22", "job_id": "068a190f-f91a-44ce-8f15-eb6f76c3bac7", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T01:12:03.079583Z", "level": "INFO", "module": "llm_client", "message": "Calling LLM for scene plan generation", "taskName": "Task-22", "job_id": "068a190f-f91a-44ce-8f15-eb6f76c3bac7", "model": "gpt-4o", "system_prompt_length": 37860, "user_prompt_length": 1101}
{"timestamp": "2025-11-15T01:12:36.940972Z", "level": "ERROR", "module": "cost_tracking", "message": "Failed to track cost for job 068a190f-f91a-44ce-8f15-eb6f76c3bac7: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(068a190f-f91a-44ce-8f15-eb6f76c3bac7) is not present in table \"jobs\".'}", "taskName": "Task-22", "job_id": "068a190f-f91a-44ce-8f15-eb6f76c3bac7", "error": "Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(068a190f-f91a-44ce-8f15-eb6f76c3bac7) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:12:36.953143Z", "level": "ERROR", "module": "llm_client", "message": "Unexpected error in LLM call: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(068a190f-f91a-44ce-8f15-eb6f76c3bac7) is not present in table \"jobs\".'}", "taskName": "Task-22", "job_id": "068a190f-f91a-44ce-8f15-eb6f76c3bac7", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(068a190f-f91a-44ce-8f15-eb6f76c3bac7) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(068a190f-f91a-44ce-8f15-eb6f76c3bac7) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(068a190f-f91a-44ce-8f15-eb6f76c3bac7) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:12:36.957000Z", "level": "ERROR", "module": "retry", "message": "Non-retryable error in generate_scene_plan: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(068a190f-f91a-44ce-8f15-eb6f76c3bac7) is not present in table \"jobs\".'}", "taskName": "Task-22", "error": "Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(068a190f-f91a-44ce-8f15-eb6f76c3bac7) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:12:36.963103Z", "level": "ERROR", "module": "planner", "message": "Scene planning failed: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(068a190f-f91a-44ce-8f15-eb6f76c3bac7) is not present in table \"jobs\".'}", "taskName": "Task-22", "job_id": "068a190f-f91a-44ce-8f15-eb6f76c3bac7", "exception": "Traceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 45, in _execute_sync\n    return await loop.run_in_executor(None, func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 183, in <lambda>\n    lambda: query_builder.execute(),\n            ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/venv/lib/python3.13/site-packages/postgrest/_sync/request_builder.py\", line 53, in execute\n    raise APIError(dict(json_obj))\npostgrest.exceptions.APIError: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(068a190f-f91a-44ce-8f15-eb6f76c3bac7) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 74, in track_cost\n    await db.table(\"job_costs\").insert(cost_record).execute()\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 182, in execute\n    return await self.db_client._execute_sync(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/database.py\", line 53, in _execute_sync\n    raise RetryableError(\n        f\"Database operation failed after {max_attempts} attempts: {str(e)}\"\n    ) from e\nshared.errors.RetryableError: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(068a190f-f91a-44ce-8f15-eb6f76c3bac7) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 454, in generate_scene_plan\n    await cost_tracker.track_cost(\n    ...<4 lines>...\n    )\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/cost_tracking.py\", line 108, in track_cost\n    raise RetryableError(f\"Failed to track cost: {str(e)}\") from e\nshared.errors.RetryableError: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(068a190f-f91a-44ce-8f15-eb6f76c3bac7) is not present in table \"jobs\".'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/planner.py\", line 67, in plan_scenes\n    llm_output = await generate_scene_plan(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/shared/retry.py\", line 49, in async_wrapper\n    return await func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/mylessjs/Desktop/VideoGen/project/backend/modules/scene_planner/llm_client.py\", line 492, in generate_scene_plan\n    raise GenerationError(f\"Unexpected error: {str(e)}\", job_id=job_id) from e\nshared.errors.GenerationError: Unexpected error: Failed to track cost: Database operation failed after 3 attempts: {'message': 'insert or update on table \"job_costs\" violates foreign key constraint \"job_costs_job_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (job_id)=(068a190f-f91a-44ce-8f15-eb6f76c3bac7) is not present in table \"jobs\".'}"}
{"timestamp": "2025-11-15T01:12:36.975469Z", "level": "INFO", "module": "planner", "message": "Starting scene planning", "taskName": "Task-25", "job_id": "51f0fedf-f126-48f7-af2d-c7f4dabf7f83", "user_prompt_length": 83, "clip_count": 5}
{"timestamp": "2025-11-15T01:12:36.976283Z", "level": "INFO", "module": "script_generator", "message": "Generated 5 clip scripts", "taskName": "Task-25", "clip_count": 5}
{"timestamp": "2025-11-15T01:12:36.976463Z", "level": "INFO", "module": "transition_planner", "message": "Planned 4 transitions", "taskName": "Task-25", "transition_count": 4}
{"timestamp": "2025-11-15T01:12:36.976622Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "taskName": "Task-25", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:12:36.976691Z", "level": "WARNING", "module": "planner", "message": "Style inconsistencies found, refining...", "taskName": "Task-25"}
{"timestamp": "2025-11-15T01:12:36.976964Z", "level": "WARNING", "module": "style_analyzer", "message": "Style consistency issues found: 2", "taskName": "Task-25", "issues": "['Main character appears in 100.0% of clips (should be 60-80%)', 'Too few scenes: 1 (recommended: 2-4)']"}
{"timestamp": "2025-11-15T01:12:36.977070Z", "level": "WARNING", "module": "style_analyzer", "message": "Style inconsistencies found, but auto-refinement not implemented", "taskName": "Task-25"}
{"timestamp": "2025-11-15T01:12:36.977179Z", "level": "INFO", "module": "validator", "message": "ScenePlan validation passed", "taskName": "Task-25"}
{"timestamp": "2025-11-15T01:12:36.977272Z", "level": "INFO", "module": "planner", "message": "Scene planning complete", "taskName": "Task-25", "job_id": "51f0fedf-f126-48f7-af2d-c7f4dabf7f83", "characters": 1, "scenes": 1, "clips": 5, "transitions": 4}
{"timestamp": "2025-11-15T01:12:36.980487Z", "level": "INFO", "module": "main", "message": "Processing scene planning", "job_id": "9c415807-165e-49d6-a2a5-53abff5f4fa8", "taskName": "Task-28", "user_prompt_length": 83, "clip_count": 5, "bpm": 120.0, "mood": "energetic"}
{"timestamp": "2025-11-15T01:12:36.980640Z", "level": "INFO", "module": "main", "message": "Scene planning complete", "job_id": "9c415807-165e-49d6-a2a5-53abff5f4fa8", "taskName": "Task-28", "characters": 1, "scenes": 1, "clips": 5}
{"timestamp": "2025-11-15T01:12:36.991708Z", "level": "INFO", "module": "script_generator", "message": "Generated 3 clip scripts", "taskName": null, "clip_count": 3}
{"timestamp": "2025-11-15T01:12:36.992677Z", "level": "INFO", "module": "transition_planner", "message": "Planned 2 transitions", "taskName": null, "transition_count": 2}
{"timestamp": "2025-11-15T01:12:36.994359Z", "level": "INFO", "module": "validator", "message": "ScenePlan validation passed", "taskName": null}
{"timestamp": "2025-11-15T01:12:36.994929Z", "level": "WARNING", "module": "validator", "message": "Validation found 1 issues", "taskName": null, "issues": "['Clip 0 start time mismatch: 1.0s vs 0.0s (tolerance: \u00b10.5s)']"}
{"timestamp": "2025-11-15T01:12:36.995465Z", "level": "WARNING", "module": "validator", "message": "Transition count mismatch: 2 vs 1", "taskName": null}
{"timestamp": "2025-11-15T01:12:36.995531Z", "level": "WARNING", "module": "validator", "message": "Validation found 2 issues", "taskName": null, "issues": "['Transition count mismatch: 2 transitions, expected 1', 'Invalid transition to_clip index: 2']"}
{"timestamp": "2025-11-15T01:12:36.996073Z", "level": "WARNING", "module": "validator", "message": "Validation found 1 issues", "taskName": null, "issues": "['Clip 0 references unknown character: nonexistent']"}
{"timestamp": "2025-11-15T01:12:36.996605Z", "level": "WARNING", "module": "validator", "message": "Validation found 1 issues", "taskName": null, "issues": "['Clip 0 references unknown scene: nonexistent']"}
{"timestamp": "2025-11-15T01:12:36.997162Z", "level": "WARNING", "module": "validator", "message": "Validation found 1 issues", "taskName": null, "issues": "['Missing color palette']"}
{"timestamp": "2025-11-15T01:12:36.997688Z", "level": "WARNING", "module": "validator", "message": "Clip count mismatch: 3 vs 2", "taskName": null, "expected": 2, "actual": 3}
{"timestamp": "2025-11-15T01:12:36.997751Z", "level": "WARNING", "module": "validator", "message": "Transition count mismatch: 1 vs 2", "taskName": null}
{"timestamp": "2025-11-15T01:12:36.997812Z", "level": "WARNING", "module": "validator", "message": "Validation found 2 issues", "taskName": null, "issues": "['Clip count mismatch: 3 clips, expected 2', 'Transition count mismatch: 1 transitions, expected 2']"}
